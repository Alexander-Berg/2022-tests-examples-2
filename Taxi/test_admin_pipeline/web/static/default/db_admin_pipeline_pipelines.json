[
  {
    "_id": "5de7baf5eb70bf332afa25f0",
    "comment": "comment 1",
    "consumer": "taxi-surge",
    "created": {
      "$date": "2019-12-16T20:38:47+00:00"
    },
    "name": "default",
    "stages": [
      {
        "conditions": [],
        "in_bindings": [],
        "name": "start",
        "optional": false,
        "out_bindings": [
          {
            "alias": "places",
            "query": "places"
          }
        ],
        "source_code": "return {places: []};"
      },
      {
        "conditions": [],
        "in_bindings": [
          {
            "domain": "input",
            "query": {
              "operations": [
                {
                  "property_name": "place_ids"
                },
                {
                  "type": "iteration",
                  "value_alias": "place_id"
                }
              ]
            }
          },
          {
            "domain": "input",
            "query": {
              "operations": [
                {
                  "property_name": "place_settings"
                },
                {
                  "alias": "place_settings",
                  "expression": "place_id"
                }
              ]
            }
          },
          {
            "domain": "input",
            "query": "coeff"
          }
        ],
        "name": "initialization",
        "optional": false,
        "out_bindings": [
          {
            "alias": "place_data",
            "query": "places[?(@.id==place_id)]"
          }
        ],
        "source_code": "return {place_data: {id: place_id, settings: place_settings, coeff: coeff}};"
      },
      {
        "conditions": [
          {
            "stage_name": "initialization",
            "stage_statuses": [
              "passed"
            ]
          }
        ],
        "in_bindings": [],
        "name": "sample_resource_fetch",
        "optional": false,
        "resources": [
          {
            "field": "sample_resource",
            "name": "sample_resource"
          }
        ],
        "source_code": "return {sample_resource: {fetch_arg_1: 1, fetch_arg_2: 'str'}};"
      },
      {
        "conditions": [
          {
            "stage_name": "sample_resource_fetch",
            "stage_statuses": [
              "passed"
            ]
          }
        ],
        "in_bindings": [
          {
            "domain": "resource",
            "query": "sample_resource.params"
          },
          {
            "domain": "resource",
            "query": "sample_resource.string_field"
          },
          {
            "domain": "resource",
            "query": "sample_resource.number_field"
          },
          {
            "domain": "resource",
            "query": "sample_resource.integer_field"
          },
          {
            "domain": "resource",
            "query": "sample_resource.object_field.string_field{inner_string_field}"
          },
          {
            "domain": "resource",
            "query": "sample_resource.object_field.number_field{inner_number_field}"
          },
          {
            "domain": "resource",
            "query": "sample_resource.object_field.integer_field{inner_integer_field}"
          },
          {
            "domain": "input",
            "query": "place_ids.*{:place_id}"
          }
        ],
        "name": "use_resource",
        "optional": false,
        "out_bindings": [
          {
            "alias": "data",
            "query": "places[?(@.id==place_id)].data_from_resource"
          }
        ],
        "source_code": "return {data: {params: params, string_field: string_field, number_field: number_field, integer_field: integer_field, inner_string_field: inner_string_field, inner_number_field: inner_number_field, inner_integer_field: inner_integer_field }};"
      }
    ],
    "state": "active",
    "updated": {
      "$date": "2019-12-16T20:38:47+00:00"
    },
    "version": 0
  },
  {
    "_id": "5de7baf5eb70bf332afa25f1",
    "comment": "comment 2",
    "consumer": "taxi-surge",
    "created": {
      "$date": "2019-12-16T20:38:47+00:00"
    },
    "name": "non_blocking",
    "stages": [
      {
        "conditions": [],
        "name": "Sample Group",
        "stages": [
          {
            "conditions": [],
            "in_bindings": [],
            "name": "start",
            "optional": false,
            "out_bindings": [
              {
                "alias": "places",
                "query": "places"
              }
            ],
            "source_code": "return {places: []};"
          }
        ]
      },
      {
        "conditions": [],
        "in_bindings": [
          {
            "domain": "input",
            "query": "place_ids.*{:place_id}"
          },
          {
            "domain": "input",
            "query": "places_settings[place_id]{place_settings}"
          },
          {
            "domain": "input",
            "query": "coeff"
          }
        ],
        "name": "initialization",
        "optional": false,
        "out_bindings": [
          {
            "alias": "place_data",
            "query": "places[?(@.id==place_id)]"
          }
        ],
        "source_code": "return {place_data: {id: place_id, settings: place_settings, coeff: coeff}};"
      },
      {
        "conditions": [
          {
            "stage_name": "initialization",
            "stage_statuses": [
              "passed"
            ]
          }
        ],
        "in_bindings": [],
        "name": "sample_resource_fetch",
        "optional": false,
        "resources": [
          {
            "field": "sample_resource",
            "name": "sample_resource_non_blocking"
          }
        ],
        "source_code": "return {sample_resource: {fetch_arg_1: 1, fetch_arg_2: 'str'}};"
      },
      {
        "conditions": [
          {
            "stage_name": "sample_resource_fetch",
            "stage_statuses": [
              "passed"
            ]
          }
        ],
        "in_bindings": [
          {
            "domain": "resource",
            "query": "sample_resource.params"
          },
          {
            "domain": "resource",
            "query": "sample_resource.string_field"
          },
          {
            "domain": "resource",
            "query": "sample_resource.number_field"
          },
          {
            "domain": "resource",
            "query": "sample_resource.integer_field"
          },
          {
            "domain": "resource",
            "query": "sample_resource.object_field.string_field{inner_string_field}"
          },
          {
            "domain": "resource",
            "query": "sample_resource.object_field.number_field{inner_number_field}"
          },
          {
            "domain": "resource",
            "query": "sample_resource.object_field.integer_field{inner_integer_field}"
          },
          {
            "domain": "input",
            "query": "place_ids.*{:place_id}"
          }
        ],
        "name": "use_resource",
        "optional": false,
        "out_bindings": [
          {
            "alias": "data",
            "query": "places[?(@.id==place_id)].data_from_resource"
          }
        ],
        "source_code": "return {data: {params: params, string_field: string_field, number_field: number_field, integer_field: integer_field, inner_string_field: inner_string_field, inner_number_field: inner_number_field, inner_integer_field: inner_integer_field }};"
      }
    ],
    "state": "active",
    "updated": {
      "$date": "2019-12-16T20:38:47+00:00"
    },
    "version": 0
  },
  {
    "_id": "5de7baf5eb70bf332afa25f2",
    "comment": "comment 3",
    "consumer": "taxi-surge",
    "created": {
      "$date": "2019-12-16T20:38:47+00:00"
    },
    "name": "non_blocking",
    "stages": [],
    "state": "removed",
    "updated": {
      "$date": "2019-12-16T20:38:47+00:00"
    },
    "version": 0
  },
  {
    "_id": "5de7baf5eb70bf332afa25f3",
    "comment": "comment 4",
    "consumer": "taxi-surge",
    "created": {
      "$date": "2019-12-16T20:38:47+00:00"
    },
    "name": "another",
    "parent_id": "5de7baf5eb70bf332afa25f2",
    "stages": [],
    "state": "draft",
    "updated": {
      "$date": "2019-12-16T20:38:47+00:00"
    }
  }
]

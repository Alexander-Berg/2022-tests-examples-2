{
  "instance_schema": {
    "additionalProperties": false,
    "properties": {
      "carts": {
        "items": {
          "additionalProperties": false,
          "properties": {
            "cart_id": {
              "format": "uuid",
              "type": "string"
            },
            "cart_version": {
              "type": "integer"
            },
            "checked_out": {
              "type": "boolean"
            },
            "client_price": {
              "pattern": "^\\d+(\\.\\d*)?$",
              "type": "string"
            },
            "client_price_template": {
              "example": "500 $SIGN$$CURRENCY$",
              "type": "string"
            },
            "delivery": {
              "additionalProperties": false,
              "properties": {
                "cost": {
                  "pattern": "^\\d+(\\.\\d*)?$",
                  "type": "string"
                },
                "max_eta": {
                  "type": "integer"
                },
                "min_eta": {
                  "type": "integer"
                }
              },
              "type": "object"
            },
            "delivery_type": {
              "enum": [
                "eats_dispatch",
                "courier",
                "pickup",
                "rover"
              ],
              "type": "string"
            },
            "delivery_zone_type": {
              "enum": [
                "pedestrian",
                "yandex_taxi",
                "yandex_taxi_remote",
                "yandex_taxi_night"
              ],
              "type": "string"
            },
            "discounts_info": {
              "description": "Массив с инфой про скидки",
              "items": {
                "additionalProperties": false,
                "properties": {
                  "discounts": {
                    "items": {
                      "additionalProperties": false,
                      "properties": {
                        "discount_description": {
                          "description": "Текст для админки на фронте",
                          "type": "string"
                        },
                        "type": {
                          "enum": [
                            "item",
                            "promocode",
                            "payment_method",
                            "cashback"
                          ],
                          "type": "string"
                        },
                        "value_template": {
                          "example": "500 $SIGN$$CURRENCY$",
                          "type": "string"
                        }
                      },
                      "required": [
                        "type",
                        "discount_description",
                        "value_template"
                      ],
                      "type": "object"
                    },
                    "type": "array"
                  },
                  "item_id": {
                    "type": "string"
                  },
                  "total_discount_template": {
                    "example": "500 $SIGN$$CURRENCY$",
                    "type": "string"
                  }
                },
                "required": [
                  "item_id",
                  "discounts",
                  "total_discount_template"
                ],
                "type": "object"
              },
              "type": "array"
            },
            "exists_order_id": {
              "type": "boolean"
            },
            "full_total_template": {
              "example": "500 $SIGN$$CURRENCY$",
              "type": "string"
            },
            "has_surge": {
              "type": "boolean"
            },
            "idempotency_token": {
              "type": "string"
            },
            "items": {
              "items": {
                "additionalProperties": false,
                "properties": {
                  "cashback_per_unit": {
                    "pattern": "^\\d+(\\.\\d*)?$",
                    "type": "string"
                  },
                  "currency": {
                    "type": "string"
                  },
                  "depth": {
                    "description": "Длина/глубина в миллиметрах",
                    "type": "integer"
                  },
                  "full_price": {
                    "pattern": "^\\d+(\\.\\d*)?$",
                    "type": "string"
                  },
                  "full_price_template": {
                    "example": "500 $SIGN$$CURRENCY$",
                    "type": "string"
                  },
                  "gross_weight": {
                    "description": "Вес в граммах (брутто)",
                    "type": "integer"
                  },
                  "height": {
                    "description": "Высота в миллиметрах",
                    "type": "integer"
                  },
                  "id": {
                    "type": "string"
                  },
                  "price": {
                    "pattern": "^\\d+(\\.\\d*)?$",
                    "type": "string"
                  },
                  "price_template": {
                    "example": "500 $SIGN$$CURRENCY$",
                    "type": "string"
                  },
                  "product_key": {
                    "additionalProperties": false,
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "shelf_type": {
                        "enum": [
                          "store",
                          "markdown",
                          "parcel"
                        ],
                        "type": "string"
                      }
                    },
                    "required": [
                      "shelf_type",
                      "id"
                    ],
                    "type": "object"
                  },
                  "quantity": {
                    "pattern": "^\\d+(\\.\\d*)?$",
                    "type": "string"
                  },
                  "refunded_quantity": {
                    "pattern": "^\\d+(\\.\\d*)?$",
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "vat": {
                    "description": "НДС за товар",
                    "type": "string"
                  },
                  "width": {
                    "description": "Ширина в миллиметрах",
                    "type": "integer"
                  }
                },
                "required": [
                  "id",
                  "product_key",
                  "title",
                  "price",
                  "price_template",
                  "quantity",
                  "currency",
                  "refunded_quantity"
                ],
                "type": "object"
              },
              "type": "array"
            },
            "items_full_price_template": {
              "example": "500 $SIGN$$CURRENCY$",
              "type": "string"
            },
            "items_price_template": {
              "example": "500 $SIGN$$CURRENCY$",
              "type": "string"
            },
            "limited_discount_ids": {
              "description": "скидки с ограниченным количеством применений",
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "logistic_tags": {
              "description": "Массив логистических тегов",
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "payment_method_discount": {
              "description": "Была ли на выбранный способ оплаты скидка в момент чекаута",
              "type": "boolean"
            },
            "payment_method_id": {
              "type": "string"
            },
            "payment_method_type": {
              "type": "string"
            },
            "personal_wallet_id": {
              "type": "string"
            },
            "promocode": {
              "description": "Промокод",
              "example": "LAVKA1235",
              "type": "string"
            },
            "promocode_discount": {
              "description": "Decimal number",
              "type": "string"
            },
            "promocode_properties": {
              "additionalProperties": false,
              "properties": {
                "discount_type": {
                  "enum": [
                    "percent",
                    "fixed"
                  ],
                  "type": "string"
                },
                "discount_value": {
                  "pattern": "^\\d+(\\.\\d*)?$",
                  "type": "string"
                },
                "limit": {
                  "pattern": "^\\d+(\\.\\d*)?$",
                  "type": "string"
                },
                "series_purpose": {
                  "description": "Тип назначения купона (для нужд поддержки, для маркетинга итд.)",
                  "enum": [
                    "support",
                    "marketing",
                    "referral",
                    "referral_reward"
                  ],
                  "type": "string"
                },
                "source": {
                  "enum": [
                    "taxi",
                    "eats"
                  ],
                  "type": "string"
                },
                "tag": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "promocode_source": {
              "enum": [
                "taxi",
                "eats"
              ],
              "type": "string"
            },
            "timeslot": {
              "additionalProperties": false,
              "description": "Промежуток времени, в который пользователь хочет получить свой заказ",
              "properties": {
                "end": {
                  "description": "конец слота",
                  "format": "date-time",
                  "type": "string"
                },
                "start": {
                  "description": "начало слота",
                  "format": "date-time",
                  "type": "string"
                }
              },
              "required": [
                "start",
                "end"
              ],
              "type": "object"
            },
            "tips": {
              "additionalProperties": false,
              "properties": {
                "amount": {
                  "pattern": "^\\d+(\\.\\d*)?$",
                  "type": "string"
                },
                "amount_type": {
                  "enum": [
                    "percent",
                    "absolute"
                  ],
                  "type": "string"
                }
              },
              "required": [
                "amount",
                "amount_type"
              ],
              "type": "object"
            },
            "total_discount": {
              "pattern": "^\\d+(\\.\\d*)?$",
              "type": "string"
            },
            "total_discount_template": {
              "example": "500 $SIGN$$CURRENCY$",
              "type": "string"
            },
            "total_item_discounts_template": {
              "example": "500 $SIGN$$CURRENCY$",
              "type": "string"
            },
            "total_promocode_discount_template": {
              "example": "500 $SIGN$$CURRENCY$",
              "type": "string"
            },
            "updated": {
              "format": "date-time",
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "user_type": {
              "type": "string"
            }
          },
          "required": [
            "cart_id",
            "cart_version",
            "user_type",
            "user_id",
            "checked_out",
            "exists_order_id",
            "delivery_type",
            "items",
            "client_price",
            "total_discount"
          ],
          "type": "object"
        },
        "type": "array"
      }
    },
    "required": [
      "carts"
    ],
    "type": "object"
  },
  "is_prefetch_only": false,
  "name": "depot_carts",
  "params_schema": {
    "additionalProperties": false,
    "properties": {
      "depot_id": {
        "type": "string"
      }
    },
    "required": [
      "depot_id"
    ],
    "type": "object"
  }
}

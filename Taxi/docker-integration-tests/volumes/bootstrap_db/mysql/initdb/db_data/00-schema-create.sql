SET SQL_MODE='NO_AUTO_VALUE_ON_ZERO';
SET FOREIGN_KEY_CHECKS=0;
-- MySQL dump 10.13  Distrib 5.7.31, for Linux (x86_64)
--
-- Host: infra.eda.yandex.net    Database: bigfood
-- ------------------------------------------------------
-- Server version	5.7.30-33-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `country_settings`
--

DROP TABLE IF EXISTS `country_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `country_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `country_id` int(11) NOT NULL,
  `name` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `value` text COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `created_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__country_settings__country_id__name` (`country_id`,`name`),
  CONSTRAINT `country_settings_ibfk_1` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=39 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `country_settings`
--

LOCK TABLES `country_settings` WRITE;
/*!40000 ALTER TABLE `country_settings` DISABLE KEYS */;
INSERT INTO `country_settings` (`id`, `country_id`, `name`, `type`, `value`, `updated_at`, `created_at`) VALUES (5,35,'main.phone_prefix','string','+7','2019-07-18 15:05:49','2019-07-18 15:05:49'),(11,5,'main.phone_prefix','string','+7','2019-07-18 15:05:49','2019-07-18 15:05:49'),(14,35,'logistics.courier.validator.mask.phone','string','^\\+79\\d{9}$','2019-07-25 16:13:03','2019-07-25 16:13:03'),(17,5,'logistics.courier.validator.mask.phone','string','^\\+77\\d{9}$','2019-07-25 16:13:03','2019-07-25 16:13:03'),(20,35,'logistics.auto_call.enabled','bool','1','2019-07-29 17:19:35','2019-07-29 17:19:35'),(23,5,'logistics.auto_call.enabled','bool','0','2019-07-29 17:19:35','2019-07-29 17:19:35'),(26,14,'logistics.courier.validator.mask.phone','string','^\\+375\\d{9}$','2019-08-09 16:07:59','2019-08-09 16:07:59'),(29,35,'delivery_send_cheque_request','string','enable','2019-09-04 16:52:12','2019-09-04 16:52:12'),(32,35,'order_position_send_cheque_request','string','enable','2019-09-04 16:52:12','2019-09-04 16:52:12'),(35,5,'delivery_send_cheque_request','string','disable','2019-09-04 16:52:12','2019-09-04 16:52:12'),(38,5,'order_position_send_cheque_request','string','disable','2019-09-04 16:52:12','2019-09-04 16:52:12');
/*!40000 ALTER TABLE `country_settings` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `currencies`
--

DROP TABLE IF EXISTS `currencies`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `currencies` (
  `iso_code` char(3) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `symbol` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
  `text` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `template` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `decimal_places` int(11) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`iso_code`),
  UNIQUE KEY `ux__currencies__iso_code` (`iso_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `currencies`
--

LOCK TABLES `currencies` WRITE;
/*!40000 ALTER TABLE `currencies` DISABLE KEYS */;
INSERT INTO `currencies` (`iso_code`, `name`, `symbol`, `text`, `template`, `decimal_places`, `created_at`, `updated_at`) VALUES ('BYN','Belarusian Ruble','руб.','р.','$VALUE$ $SIGN$$CURRENCY$',2,'2019-07-18 15:05:49','2021-06-01 11:11:14'),('KZT','Tenge','₸','тенге','$VALUE$ $SIGN$$CURRENCY$',2,'2019-07-18 15:05:49','2020-10-29 11:26:18'),('RUB','Rouble','₽','руб.','$VALUE$ $SIGN$$CURRENCY$',2,'2019-07-18 15:05:49','2020-10-29 11:26:18');
/*!40000 ALTER TABLE `currencies` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `migration_versions`
--

DROP TABLE IF EXISTS `migration_versions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `migration_versions` (
  `version` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`version`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `migration_versions`
--

LOCK TABLES `migration_versions` WRITE;
/*!40000 ALTER TABLE `migration_versions` DISABLE KEYS */;
INSERT INTO `migration_versions` (`version`) VALUES ('20150924140037'),('20150928020303'),('20151005192533'),('20151007173206'),('20151014124254'),('20151015194318'),('20151016192042'),('20151018030952'),('20151018141442'),('20151019011221'),('20151019032928'),('20151021025434'),('20151023152336'),('20151023192425'),('20151024125533'),('20151028142457'),('20151104125259'),('20151105141610'),('20151105182044'),('20151106151531'),('20151106155119'),('20151108165103'),('20151109160823'),('20151109175936'),('20151109205611'),('20151114072911'),('20151116155300'),('20151120162431'),('20151127184644'),('20151127201328'),('20151204174600'),('20151207163746'),('20151209164333'),('20151216141049'),('20151217144234'),('20151217165435'),('20151218185211'),('20151222135938'),('20151224124958'),('20151224140709'),('20151228143621'),('20151229124118'),('20151229135622'),('20160111130553'),('20160111131622'),('20160113032026'),('20160114135415'),('20160114152708'),('20160115143736'),('20160117144301'),('20160201152205'),('20160202133339'),('20160202204257'),('20160203022806'),('20160203160620'),('20160203164838'),('20160203213912'),('20160204195449'),('20160206005817'),('20160210160414'),('20160211133438'),('20160212141824'),('20160217162401'),('20160218063803'),('20160224163424'),('20160225134530'),('20160309183512'),('20160317164424'),('20160317165115'),('20160318174108'),('20160404183816'),('20160406175800'),('20160416150721'),('20160418143747'),('20160427111523'),('20160506201139'),('20160506201237'),('20160516223833'),('20160517115417'),('20160518114906'),('20160520114910'),('20160526161612'),('20160602152627'),('20160609180838'),('20160616163439'),('20160621033515'),('20160621105924'),('20160622150427'),('20160701191159'),('20160713161132'),('20160726142306'),('20160804101219'),('20160810125336'),('20160815165552'),('20160815175430'),('20160817104531'),('20160818092238'),('20160824130005'),('20160825093029'),('20160826161132'),('20160905191734'),('20160905193522'),('20160906142158'),('20160906161132'),('20160913121555'),('20160913121954'),('20160914084907'),('20160914181148'),('20160915173706'),('20160916115758'),('20160920004620'),('20160920175405'),('20160921112154'),('20160923174139'),('20160925161132'),('20161006003616'),('20161006162048'),('20161019161120'),('20161021172029'),('20161025150152'),('20161027131023'),('20161027152144'),('20161102163439'),('20161103182855'),('20161107161403'),('20161109164312'),('20161122144454'),('20161123150622'),('20161124164417'),('20161125171635'),('20161201170010'),('20161202181808'),('20161208113336'),('20161208164312'),('20161213173341'),('20161215091629'),('20161216164417'),('20161219151607'),('20161226181123'),('20161227113215'),('20161227164911'),('20161228115003'),('20161228145215'),('20161229141226'),('20170109135452'),('20170109140119'),('20170109142709'),('20170109145800'),('20170109165929'),('20170112152644'),('20170116153116'),('20170118190615'),('20170119150401'),('20170125193048'),('20170126144825'),('20170130164323'),('20170201161132'),('20170206161132'),('20170208134810'),('20170213162619'),('20170218161518'),('20170221162823'),('20170221221839'),('20170301160747'),('20170307095036'),('20170309150746'),('20170317120053'),('20170327100031'),('20170327101252'),('20170330104831'),('20170330161814'),('20170405095721'),('20170406105212'),('20170410151120'),('20170412131834'),('20170412131836'),('20170424204106'),('20170425111903'),('20170427142220'),('20170502121223'),('20170503103328'),('20170503143802'),('20170504120944'),('20170505163016'),('20170505184405'),('20170516001526'),('20170518111758'),('20170518143836'),('20170518150232'),('20170522191112'),('20170530184027'),('20170531113722'),('20170601073308'),('20170602100927'),('20170605092458'),('20170614102838'),('20170614123731'),('20170619111302'),('20170619112506'),('20170628131947'),('20170628165625'),('20170628175700'),('20170629211234'),('20170703140839'),('20170704215842'),('20170705175428'),('20170706154438'),('20170711093750'),('20170712214553'),('20170714075445'),('20170714132222'),('20170714133338'),('20170717130458'),('20170720000949'),('20170720090112'),('20170720103048'),('20170724051126'),('20170725080803'),('20170729191453'),('20170731152637'),('20170801065215'),('20170801111837'),('20170802073150'),('20170802121340'),('20170802124703'),('20170803114821'),('20170803142306'),('20170803145338'),('20170807125944'),('20170808050133'),('20170808125103'),('20170809122106'),('20170809150842'),('20170810111339'),('20170814111727'),('20170815101618'),('20170815202904'),('20170816063316'),('20170816104408'),('20170816105716'),('20170821090454'),('20170821131642'),('20170821133353'),('20170821135828'),('20170822064118'),('20170822102539'),('20170823130919'),('20170823150842'),('20170824112825'),('20170824120740'),('20170824150748'),('20170825125003'),('20170825175706'),('20170828202850'),('20170829114450'),('20170830150815'),('20170831072055'),('20170831121827'),('20170904120856'),('20170904132906'),('20170905130248'),('20170906112725'),('20170906130004'),('20170907071101'),('20170907130055'),('20170907130644'),('20170908094500'),('20170911130117'),('20170911131847'),('20170911134657'),('20170912082156'),('20170912151148'),('20170914120200'),('20170918091753'),('20170919110312'),('20170920150125'),('20170922092330'),('20170922105409'),('20170922152508'),('20170925110907'),('20170926120519'),('20170927102259'),('20171002161808'),('20171003080149'),('20171003104605'),('20171003121538'),('20171004071345'),('20171004101419'),('20171004114726'),('20171009101630'),('20171009122141'),('20171013070922'),('20171017123345'),('20171017143213'),('20171020084055'),('20171020124044'),('20171020135149'),('20171023114924'),('20171025075634'),('20171026091737'),('20171026101253'),('20171026125431'),('20171026150341'),('20171027072613'),('20171027121649'),('20171030114344'),('20171030123735'),('20171030134517'),('20171030153805'),('20171030155602'),('20171031151017'),('20171031154546'),('20171101093418'),('20171101141710'),('20171101165911'),('20171102085144'),('20171103172554'),('20171107141553'),('20171110125051'),('20171113151434'),('20171114081952'),('20171115083416'),('20171115151122'),('20171115155716'),('20171116164504'),('20171117113104'),('20171121132031'),('20171122131728'),('20171123150150'),('20171127084148'),('20171128084209'),('20171128112054'),('20171128115315'),('20171128123930'),('20171128141706'),('20171128150622'),('20171128151931'),('20171128154813'),('20171129162114'),('20171130145056'),('20171130151059'),('20171201154922'),('20171204132551'),('20171204135725'),('20171204160918'),('20171205085701'),('20171205090044'),('20171205123012'),('20171205155422'),('20171207072922'),('20171207112128'),('20171207144322'),('20171211131648'),('20171212150326'),('20171213082829'),('20171214104428'),('20171214124748'),('20171215130844'),('20171215140247'),('20171218155912'),('20171219175722'),('20171220112655'),('20171220134807'),('20171222091008'),('20171222104306'),('20171222113320'),('20171225092747'),('20171226080500'),('20171226094747'),('20171226145232'),('20171227124546'),('20171227134944'),('20171227143038'),('20171228090230'),('20180110112841'),('20180112113623'),('20180112121456'),('20180112162702'),('20180115100408'),('20180115115227'),('20180115141529'),('20180116082003'),('20180116082715'),('20180116115031'),('20180116154003'),('20180117111530'),('20180117154742'),('20180118082919'),('20180118095551'),('20180119123728'),('20180119140443'),('20180120130712'),('20180122093756'),('20180122144123'),('20180122193414'),('20180123074515'),('20180123104954'),('20180123130728'),('20180123144706'),('20180124082731'),('20180124161205'),('20180126083824'),('20180130083330'),('20180130152133'),('20180131080532'),('20180131125926'),('20180205085207'),('20180205151515'),('20180208131121'),('20180209090136'),('20180209155044'),('20180212131227'),('20180213114132'),('20180215155159'),('20180215164029'),('20180220112841'),('20180221080145'),('20180221192927'),('20180222144523'),('20180226120248'),('20180226131544'),('20180228095912'),('20180228111231'),('20180228144013'),('20180301110319'),('20180301125851'),('20180301173823'),('20180302133341'),('20180306101057'),('20180306134120'),('20180306144040'),('20180306144526'),('20180307184716'),('20180312152312'),('20180313085246'),('20180313123056'),('20180313144926'),('20180313154443'),('20180314170617'),('20180315135703'),('20180316120243'),('20180316120744'),('20180316134835'),('20180316162737'),('20180319120715'),('20180319152820'),('20180320082332'),('20180320115354'),('20180321095152'),('20180321105103'),('20180321162411'),('20180322110424'),('20180322232857'),('20180323103848'),('20180323104808'),('20180327084444'),('20180327094718'),('20180327155533'),('20180328151515'),('20180330083113'),('20180330103558'),('20180330171707'),('20180402094556'),('20180402133249'),('20180402175123'),('20180403092613'),('20180403132328'),('20180403160519'),('20180404064642'),('20180404075421'),('20180404090101'),('20180404113040'),('20180404133700'),('20180405161243'),('20180406120406'),('20180409074917'),('20180409104306'),('20180409104524'),('20180409213643'),('20180410171849'),('20180410215643'),('20180412060356'),('20180412134034'),('20180413092917'),('20180416120300'),('20180416125739'),('20180416163907'),('20180416170723'),('20180417103335'),('20180417114355'),('20180417124241'),('20180417132713'),('20180417220838'),('20180418070054'),('20180418141812'),('20180419092848'),('20180419122046'),('20180420065425'),('20180421092323'),('20180424131547'),('20180425084959'),('20180425155544'),('20180425164858'),('20180425165224'),('20180426133601'),('20180427084937'),('20180427111106'),('20180427144502'),('20180427155245'),('20180427161759'),('20180428131358'),('20180428141309'),('20180428145253'),('20180430110005'),('20180503095612'),('20180503123749'),('20180503161537'),('20180504151512'),('20180507134120'),('20180507140911'),('20180508134525'),('20180508145716'),('20180510065354'),('20180510092905'),('20180510150226'),('20180511054404'),('20180514113557'),('20180514150150'),('20180514151953'),('20180514153933'),('20180515091903'),('20180515120504'),('20180515164455'),('20180516085433'),('20180516124512'),('20180517075056'),('20180517122133'),('20180517124536'),('20180521124956'),('20180521145021'),('20180522162745'),('20180522214826'),('20180523091705'),('20180523121813'),('20180523132829'),('20180527154250'),('20180528113508'),('20180529145508'),('20180530135008'),('20180531121215'),('20180531122446'),('20180531143705'),('20180531145547'),('20180601065216'),('20180601124600'),('20180601130624'),('20180604142244'),('20180605153129'),('20180606082122'),('20180607082957'),('20180607161323'),('20180608131246'),('20180608173356'),('20180609085858'),('20180612101846'),('20180613070429'),('20180613123203'),('20180614100426'),('20180614132029'),('20180614161115'),('20180615122830'),('20180615143238'),('20180618153112'),('20180619142843'),('20180619155523'),('20180620110652'),('20180621053420'),('20180621133541'),('20180621161922'),('20180625061032'),('20180625081255'),('20180625083851'),('20180625094834'),('20180626172225'),('20180627083027'),('20180627154835'),('20180628062833'),('20180628065818'),('20180628072855'),('20180628115016'),('20180628125959'),('20180628131203'),('20180629094403'),('20180702092048'),('20180702130342'),('20180702141954'),('20180702142633'),('20180702151833'),('20180704132823'),('20180706082008'),('20180709120517'),('20180710131942'),('20180710182145'),('20180711133928'),('20180712111052'),('20180712114031'),('20180712143406'),('20180716062745'),('20180716092655'),('20180716104221'),('20180716111535'),('20180718122202'),('20180719131324'),('20180719131758'),('20180720084752'),('20180720141940'),('20180723122436'),('20180723135600'),('20180724081807'),('20180724083053'),('20180724165236'),('20180725074811'),('20180725150552'),('20180725155734'),('20180726112614'),('20180727074021'),('20180727111153'),('20180730092303'),('20180730095110'),('20180730105503'),('20180730112040'),('20180730151347'),('20180731163407'),('20180801120544'),('20180802164032'),('20180806100800'),('20180806103359'),('20180806120000'),('20180806143616'),('20180806160825'),('20180807132111'),('20180808122737'),('20180809091413'),('20180809101641'),('20180809120833'),('20180809124411'),('20180809130428'),('20180809153836'),('20180810102000'),('20180810144534'),('20180813122834'),('20180813144731'),('20180814094214'),('20180814110927'),('20180814111918'),('20180815140858'),('20180815171142'),('20180816051839'),('20180816072449'),('20180816101001'),('20180817162654'),('20180820112904'),('20180820141415'),('20180820151851'),('20180820153249'),('20180820153652'),('20180821062949'),('20180821074504'),('20180821081525'),('20180821094435'),('20180821120756'),('20180821121327'),('20180821132627'),('20180822071447'),('20180822100236'),('20180822143655'),('20180823081737'),('20180823115428'),('20180823132844'),('20180823150958'),('20180823151013'),('20180824114913'),('20180824140332'),('20180827113234'),('20180827114704'),('20180828042615'),('20180828091032'),('20180829112234'),('20180831124637'),('20180831154048'),('20180903085701'),('20180903102100'),('20180903130243'),('20180904142817'),('20180905133736'),('20180905154152'),('20180906082059'),('20180910154503'),('20180910155401'),('20180911092219'),('20180911120135'),('20180911121704'),('20180912134802'),('20180912134803'),('20180912152831'),('20180917094301'),('20180917123953'),('20180917161321'),('20180918082256'),('20180918145807'),('20180919090453'),('20180920113105'),('20180921082050'),('20180921153220'),('20180924145814'),('20180925101550'),('20180925104103'),('20180925104140'),('20180925121958'),('20180926141829'),('20180926144000'),('20180927153403'),('20181001094022'),('20181001120950'),('20181001134853'),('20181001134916'),('20181002112522'),('20181002114241'),('20181002163000'),('20181003143648'),('20181003163520'),('20181005130840'),('20181005131040'),('20181005164853'),('20181005172432'),('20181005183736'),('20181008081730'),('20181008115657'),('20181008121103'),('20181011092320'),('20181012143641'),('20181012151102'),('20181016091538'),('20181016121033'),('20181016155545'),('20181018070726'),('20181018135110'),('20181019081256'),('20181019115514'),('20181021143932'),('20181022091011'),('20181022135255'),('20181023101319'),('20181023125445'),('20181024164515'),('20181025094020'),('20181025213025'),('20181029081745'),('20181029095727'),('20181029112557'),('20181030095055'),('20181030113742'),('20181030123338'),('20181030162921'),('20181030172701'),('20181031091333'),('20181031110935'),('20181031125627'),('20181031151410'),('20181101084506'),('20181101152011'),('20181101162404'),('20181102103123'),('20181106091529'),('20181106102245'),('20181106125034'),('20181107131755'),('20181108130759'),('20181108132628'),('20181108145032'),('20181109115839'),('20181109141340'),('20181112121818'),('20181113090601'),('20181113110417'),('20181113124513'),('20181114080641'),('20181114085016'),('20181114164143'),('20181114171558'),('20181115080130'),('20181116074656'),('20181116123004'),('20181119105713'),('20181119121609'),('20181119130551'),('20181119154141'),('20181120093136'),('20181120093811'),('20181120134213'),('20181121095634'),('20181122102615'),('20181122102958'),('20181122135325'),('20181122175143'),('20181123073600'),('20181123143116'),('20181123145314'),('20181123160417'),('20181126073216'),('20181126103544'),('20181126150927'),('20181126163939'),('20181129085554'),('20181129154705'),('20181203132328'),('20181203132535'),('20181203170737'),('20181206075117'),('20181210095633'),('20181211082606'),('20181211133106'),('20181211140751'),('20181212184852'),('20181213072253'),('20181213094102'),('20181214113917'),('20181214135237'),('20181214165322'),('20181217082746'),('20181217175429'),('20181218151158'),('20181218152056'),('20181219102219'),('20181219140814'),('20181221155016'),('20181224064812'),('20181224130504'),('20181225130808'),('20181225132115'),('20181227084213'),('20181228074613'),('20190109150057'),('20190110084855'),('20190110092659'),('20190110174950'),('20190111112921'),('20190111154407'),('20190114105742'),('20190114132831'),('20190117094845'),('20190117104022'),('20190118125528'),('20190121105446'),('20190122121820'),('20190122143740'),('20190123082747'),('20190123114718'),('20190123155019'),('20190124083810'),('20190124205719'),('20190125103243'),('20190130152355'),('20190131081501'),('20190131123037'),('20190204062326'),('20190204080339'),('20190204080406'),('20190204144137'),('20190205144052'),('20190205164859'),('20190206103840'),('20190206161520'),('20190207123356'),('20190207123700'),('20190207143521'),('20190207180949'),('20190208085516'),('20190210204348'),('20190211154955'),('20190213094856'),('20190214080030'),('20190214092427'),('20190215150117'),('20190218104353'),('20190218163229'),('20190219105613'),('20190219120150'),('20190220151558'),('20190220175442'),('20190221105253'),('20190222102210'),('20190222152333'),('20190222161024'),('20190225161824'),('20190226180224'),('20190227110714'),('20190227132452'),('20190227174000'),('20190228093833'),('20190228140103'),('20190301162312'),('20190304080001'),('20190305113046'),('20190306130858'),('20190306142810'),('20190311105555'),('20190311114249'),('20190312091953'),('20190312170327'),('20190313182423'),('20190314092253'),('20190315093543'),('20190318112550'),('20190318114443'),('20190319103220'),('20190319181906'),('20190320061154'),('20190321101300'),('20190321103003'),('20190325080130'),('20190326080437'),('20190327091156'),('20190327183902'),('20190328112935'),('20190329055908'),('20190329063529'),('20190331044154'),('20190401091905'),('20190401110607'),('20190401142448'),('20190408145405'),('20190409142045'),('20190410070545'),('20190410072007'),('20190410083204'),('20190410180418'),('20190410182025'),('20190411081312'),('20190411144120'),('20190412075811'),('20190415170029'),('20190416070546'),('20190417104735'),('20190417140326'),('20190417150003'),('20190417155453'),('20190417155551'),('20190418111244'),('20190418113930'),('20190418132351'),('20190418133947'),('20190419104820'),('20190419120918'),('20190422135409'),('20190422151616'),('20190423075110'),('20190423093705'),('20190423141718'),('20190424122244'),('20190425102341'),('20190425161507'),('20190425161520'),('20190425161530'),('20190426105907'),('20190429125846'),('20190430075939'),('20190506121233'),('20190506134707'),('20190506135429'),('20190506163753'),('20190507083925'),('20190507105443'),('20190508121049'),('20190508124804'),('20190513100310'),('20190513101748'),('20190513120908'),('20190513133037'),('20190515131309'),('20190515195458'),('20190516143353'),('20190517075332'),('20190518202307'),('20190520120507'),('20190521121846'),('20190522105134'),('20190522112946'),('20190523162140'),('20190524121400'),('20190524121748'),('20190527105313'),('20190527132816'),('20190528095404'),('20190529075855'),('20190529084444'),('20190529121701'),('20190529131635'),('20190530093311'),('20190530112546'),('20190531105906'),('20190531135752'),('20190603080951'),('20190603113944'),('20190603123630'),('20190604112711'),('20190605073728'),('20190605102713'),('20190605160000'),('20190605161415'),('20190605164742'),('20190605192307'),('20190606105718'),('20190606110344'),('20190606151037'),('20190606190837'),('20190607070815'),('20190607181143'),('20190610101031'),('20190610111522'),('20190610150114'),('20190610155900'),('20190610155901'),('20190610155902'),('20190611100955'),('20190611121851'),('20190611183113'),('20190612145430'),('20190613080721'),('20190613081620'),('20190613090530'),('20190613130019'),('20190614065429'),('20190614105549'),('20190617073234'),('20190617120332'),('20190617121837'),('20190617145348'),('20190617145853'),('20190617150003'),('20190617155322'),('20190617160035'),('20190618064202'),('20190618113736'),('20190619103160'),('20190619143129'),('20190620071305'),('20190620072502'),('20190620084738'),('20190620091325'),('20190620125421'),('20190621091921'),('20190621142250'),('20190624133702'),('20190624134510'),('20190624142332'),('20190625155825'),('20190626095602'),('20190626110754'),('20190626123322'),('20190626131907'),('20190626150421'),('20190627081233'),('20190627150735'),('20190628103541'),('20190701120655'),('20190701145102'),('20190702062744'),('20190702143105'),('20190702153657'),('20190702154913'),('20190703062600'),('20190703162120'),('20190704121744'),('20190705075310'),('20190708074621'),('20190708075022'),('20190708141619'),('20190709073212'),('20190711081616'),('20190711082305'),('20190711102200'),('20190712070850'),('20190712080542'),('20190712145612'),('20190715073406'),('20190715113633'),('20190715135538'),('20190716080006'),('20190716123227'),('20190717075647'),('20190717145040'),('20190718133756'),('20190718141018'),('20190718192304'),('20190719065905'),('20190722160814'),('20190723083943'),('20190723100906'),('20190724103040'),('20190724104040'),('20190724111654'),('20190724114910'),('20190724153500'),('20190725105955'),('20190725123406'),('20190725142045'),('20190726124835'),('20190726131425'),('20190726133431'),('20190729072315'),('20190729085314'),('20190729122401'),('20190729124733'),('20190729132648'),('20190730090735'),('20190730131607'),('20190730140146'),('20190730140444'),('20190731105121'),('20190731125946'),('20190731195713'),('20190801104425'),('20190805112149'),('20190805132922'),('20190805160535'),('20190805175830'),('20190806113628'),('20190806132836'),('20190807104815'),('20190808115555'),('20190808145534'),('20190809100515'),('20190809121340'),('20190809145256'),('20190812105635'),('20190814141156'),('20190815120341'),('20190815140323'),('20190815154210'),('20190815173400'),('20190816121816'),('20190816145352'),('20190819084715'),('20190819121621'),('20190819124513'),('20190819142315'),('20190820072641'),('20190820091902'),('20190820092435'),('20190820093525'),('20190820093526'),('20190820093545'),('20190820093546'),('20190820124122'),('20190822074947'),('20190828135859'),('20190828151629'),('20190829060334'),('20190829091235'),('20190830075219'),('20190830091949'),('20190830133205'),('20190902104947'),('20190902113439'),('20190902142245'),('20190902142854'),('20190903071906'),('20190903140423'),('20190903152214'),('20190904115235'),('20190904123115'),('20190906075155'),('20190906090335'),('20190906145416'),('20190909111841'),('20190909115200'),('20190909133355'),('20190909154252'),('20190910082149'),('20190910114044'),('20190910150224'),('20190912112642'),('20190913085715'),('20190913101900'),('20190913132234'),('20190916160111'),('20190917180047'),('20190918120107'),('20190918182819'),('20190919123901'),('20190920093539'),('20190920094323'),('20190920103914'),('20190923085421'),('20190924114649'),('20190924115019'),('20190924141959'),('20190926121409'),('20190927082402'),('20190927120631'),('20190930074813'),('20190930080128'),('20190930102608'),('20190930122338'),('20190930124856'),('20190930125855'),('20190930163012'),('20191001094241'),('20191001130555'),('20191002134414'),('20191002150605'),('20191003141455'),('20191004160122'),('20191004164553'),('20191005082606'),('20191007133950'),('20191007161015'),('20191009080316'),('20191009131428'),('20191009140704'),('20191010094324'),('20191010094535'),('20191010094545'),('20191010160620'),('20191011093752'),('20191014074255'),('20191014141138'),('20191015120740'),('20191015135435'),('20191015135557'),('20191015153112'),('20191015163809'),('20191016133610'),('20191016145555'),('20191017072442'),('20191017072826'),('20191017133159'),('20191017153046'),('20191018072242'),('20191021100759'),('20191021132246'),('20191021150747'),('20191022093635'),('20191023060006'),('20191023082559'),('20191024070833'),('20191024101218'),('20191024104901'),('20191024131150'),('20191025131620'),('20191025145735'),('20191025150005'),('20191028074856'),('20191028121334'),('20191028135933'),('20191029072753'),('20191029080419'),('20191029091900'),('20191029104535'),('20191029105743'),('20191029165247'),('20191030103006'),('20191030131640'),('20191030135236'),('20191031075808'),('20191031103303'),('20191031143048'),('20191105155108'),('20191106072926'),('20191106120745'),('20191106172514'),('20191106202140'),('20191106211347'),('20191107080343'),('20191107110524'),('20191107170039'),('20191108110740'),('20191111092935'),('20191111103133'),('20191111140219'),('20191112105452'),('20191113123925'),('20191113140024'),('20191114111756'),('20191114115334'),('20191114163506'),('20191114213448'),('20191115075735'),('20191115085430'),('20191118133459'),('20191119130843'),('20191120100515'),('20191120104412'),('20191120115434'),('20191120124745'),('20191122161010'),('20191122193500'),('20191126115423'),('20191126122608'),('20191127074103'),('20191127084458'),('20191127085558'),('20191127105622'),('20191127115207'),('20191127130944'),('20191127132047'),('20191127140205'),('20191127141257'),('20191127175918'),('20191128104317'),('20191128105159'),('20191128130112'),('20191128140636'),('20191128143341'),('20191128152835'),('20191129133846'),('20191202070832'),('20191202091746'),('20191202091747'),('20191202115927'),('20191202122259'),('20191202125009'),('20191202133735'),('20191202173318'),('20191203125522'),('20191203150415'),('20191204101058'),('20191204104235'),('20191204140935'),('20191205090329'),('20191205093410'),('20191205142918'),('20191205154326'),('20191205160027'),('20191205183602'),('20191206064142'),('20191206141725'),('20191206181745'),('20191208152939'),('20191209070752'),('20191209090459'),('20191209090928'),('20191209152633'),('20191210070529'),('20191210121058'),('20191210155303'),('20191211075227'),('20191211080755'),('20191211130237'),('20191211132639'),('20191211140646'),('20191211174823'),('20191212065245'),('20191212074107'),('20191212084539'),('20191212092849'),('20191212105602'),('20191212150322'),('20191213074450'),('20191214195400'),('20191214201200'),('20191217092349'),('20191217141647'),('20191218074339'),('20191218093042'),('20191218115625'),('20191219062126'),('20191219134752'),('20191219153654'),('20191220133016'),('20191220145404'),('20191223102132'),('20191223102909'),('20191223130548'),('20191223155213'),('20191225145035'),('20191226132925'),('20191227075112'),('20191227075958'),('20191227114900'),('20191230083210'),('20191230094357'),('20191230105710'),('20191230114440'),('20200113073659'),('20200113085901'),('20200113091408'),('20200113101548'),('20200113111933'),('20200113135743'),('20200115065213'),('20200115132103'),('20200115132910'),('20200115133835'),('20200115155323'),('20200116140748'),('20200116143317'),('20200117072110'),('20200117085050'),('20200117091105'),('20200117135430'),('20200120070422'),('20200120112224'),('20200121095043'),('20200122121548'),('20200123073909'),('20200123125957'),('20200124113235'),('20200126214227'),('20200127065429'),('20200127085114'),('20200128121251'),('20200128150253'),('20200129055134'),('20200129101804'),('20200129123331'),('20200130085243'),('20200130115808'),('20200130133436'),('20200130133437'),('20200131081739'),('20200131102804'),('20200131142017'),('20200131145049'),('20200203075918'),('20200204052122'),('20200204052916'),('20200207072700'),('20200210064824'),('20200210091830'),('20200210120929'),('20200210160119'),('20200210160159'),('20200210160232'),('20200212062527'),('20200212070924'),('20200212160834'),('20200213110124'),('20200213122934'),('20200213132506'),('20200213150343'),('20200213153155'),('20200214090937'),('20200214133605'),('20200214142612'),('20200217070913'),('20200217101742'),('20200217104507'),('20200217142005'),('20200218092235'),('20200218130911'),('20200218133949'),('20200218145520'),('20200218160419'),('20200219084644'),('20200219085030'),('20200219103228'),('20200219140646'),('20200219152753'),('20200219160722'),('20200220092758'),('20200220112618'),('20200220121530'),('20200220151728'),('20200221081328'),('20200221111007'),('20200224140929'),('20200225085255'),('20200225092415'),('20200225120657'),('20200225123504'),('20200225123936'),('20200225130120'),('20200226065723'),('20200226155059'),('20200227065731'),('20200227115250'),('20200227115521'),('20200227124812'),('20200228113638'),('20200228121706'),('20200302064425'),('20200302075121'),('20200302091408'),('20200302120102'),('20200302143835'),('20200302143840'),('20200303095635'),('20200303114725'),('20200304065028'),('20200304070121'),('20200304123433'),('20200304125623'),('20200304131922'),('20200305081554'),('20200305135009'),('20200306075209'),('20200306100853'),('20200306125656'),('20200310055153'),('20200310093424'),('20200310110857'),('20200311100813'),('20200311130630'),('20200311143009'),('20200311150203'),('20200312092523'),('20200312100520'),('20200312140014'),('20200312153352'),('20200312155752'),('20200313080202'),('20200313091506'),('20200313130549'),('20200313131905'),('20200313145456'),('20200316091519'),('20200316111302'),('20200316131208'),('20200316142421'),('20200316185414'),('20200317065441'),('20200317094745'),('20200317113603'),('20200317114405'),('20200317123353'),('20200317130724'),('20200317160054'),('20200317165843'),('20200318054001'),('20200318062603'),('20200318080250'),('20200318090312'),('20200318125145'),('20200318141507'),('20200318150020'),('20200318175000'),('20200319053038'),('20200319070332'),('20200319142556'),('20200319144425'),('20200319150020'),('20200320052839'),('20200320055926'),('20200320131042'),('20200320140644'),('20200320150020'),('20200320182550'),('20200321181235'),('20200323083413'),('20200323094449'),('20200324080628'),('20200324081232'),('20200324124318'),('20200324153645'),('20200324170339'),('20200325100810'),('20200325103446'),('20200325122526'),('20200327131315'),('20200327163520'),('20200328141422'),('20200330092007'),('20200330131541'),('20200330134000'),('20200330144145'),('20200401081604'),('20200401110423'),('20200401122401'),('20200401130605'),('20200401155205'),('20200401193643'),('20200402094900'),('20200402102920'),('20200402110715'),('20200402114032'),('20200402132617'),('20200403124605'),('20200403133215'),('20200404122448'),('20200404193725'),('20200406080807'),('20200406082531'),('20200406104537'),('20200407145253'),('20200407154549'),('20200407165710'),('20200408061422'),('20200408065921'),('20200408084502'),('20200408092423'),('20200408110441'),('20200408121208'),('20200408122954'),('20200408175715'),('20200409060002'),('20200409105130'),('20200409121530'),('20200409185205'),('20200410103401'),('20200410122430'),('20200410140117'),('20200410163022'),('20200413102535'),('20200413130720'),('20200413142622'),('20200414120247'),('20200415083802'),('20200415133031'),('20200415133053'),('20200415143253'),('20200416094616'),('20200416112723'),('20200416115058'),('20200417081227'),('20200417082436'),('20200417123158'),('20200417165205'),('20200420123421'),('20200421075955'),('20200421111051'),('20200421113232'),('20200422071351'),('20200422140456'),('20200423081110'),('20200423083405'),('20200423084623'),('20200423101118'),('20200424103439'),('20200424104700'),('20200425210355'),('20200425210365'),('20200427070525'),('20200427084623'),('20200427090835'),('20200427164918'),('20200427174011'),('20200427190547'),('20200428083914'),('20200428104807'),('20200428174918'),('20200429010203'),('20200429094705'),('20200429145709'),('20200504124418'),('20200506083233'),('20200506095540'),('20200506145630'),('20200506171948'),('20200507075928'),('20200507115926'),('20200507121511'),('20200507151943'),('20200508084623'),('20200512072345'),('20200512074656'),('20200512140454'),('20200512165638'),('20200513072933'),('20200513075936'),('20200513152331'),('20200514132145'),('20200514133524'),('20200515104335'),('20200517143717'),('20200518075347'),('20200518083131'),('20200518160754'),('20200519102014'),('20200519112225'),('20200519171845'),('20200520005119'),('20200520110423'),('20200520130317'),('20200520155405'),('20200520171845'),('20200520171854'),('20200521062428'),('20200521132918'),('20200521163314'),('20200522061632'),('20200522071510'),('20200522082411'),('20200522102009'),('20200522120714'),('20200522190701'),('20200523125635'),('20200524163420'),('20200525070100'),('20200525113040'),('20200525130504'),('20200525164020'),('20200525192800'),('20200526073106'),('20200526075121'),('20200526141355'),('20200526211537'),('20200527014210'),('20200527063305'),('20200527072142'),('20200527072702'),('20200527125755'),('20200527154817'),('20200527155853'),('20200527215359'),('20200528114318'),('20200528120808'),('20200528141256'),('20200529095349'),('20200601143616'),('20200601160455'),('20200602073825'),('20200602114209'),('20200602114935'),('20200602142937'),('20200602153711'),('20200603084925'),('20200603114223'),('20200603122821'),('20200603135016'),('20200604104727'),('20200604142721'),('20200604153005'),('20200604154839'),('20200604172445'),('20200605135333'),('20200605140903'),('20200606183505'),('20200607163039'),('20200608093438'),('20200608104506'),('20200609105809'),('20200609124755'),('20200610102757'),('20200610134123'),('20200610141717'),('20200610180500'),('20200611134337'),('20200615075252'),('20200615094659'),('20200615094957'),('20200615104245'),('20200615120348'),('20200615121257'),('20200615133717'),('20200615140623'),('20200616111622'),('20200616153523'),('20200617121700'),('20200617123221'),('20200617123320'),('20200617161925'),('20200617163731'),('20200618105334'),('20200618132455'),('20200618135600'),('20200618164809'),('20200619112550'),('20200619114235'),('20200619125414'),('20200619143814'),('20200619152048'),('20200622140652'),('20200622154933'),('20200622163025'),('20200623012034'),('20200623061725'),('20200623073326'),('20200623144904'),('20200624070525'),('20200624113007'),('20200624122205'),('20200625084803'),('20200625101035'),('20200625132233'),('20200629062557'),('20200629083252'),('20200629102740'),('20200629123242'),('20200629135357'),('20200629163749'),('20200629171509'),('20200630085652'),('20200630100003'),('20200630111956'),('20200630113030'),('20200630141613'),('20200630154211'),('20200702055829'),('20200702061214'),('20200702075350'),('20200702134443'),('20200702141455'),('20200702144817'),('20200702153433'),('20200703104823'),('20200703125202'),('20200703144628'),('20200703152223'),('20200706081702'),('20200706094713'),('20200706145445'),('20200707082008'),('20200707083528'),('20200707094032'),('20200707095730'),('20200707141441'),('20200707155858'),('20200708084712'),('20200708122502'),('20200708133128'),('20200708153002'),('20200710004823'),('20200710060251'),('20200713104958'),('20200713144738'),('20200713155544'),('20200713174938'),('20200713213612'),('20200714055801'),('20200714124721'),('20200714143643'),('20200715055605'),('20200715102101'),('20200716150000'),('20200716165723'),('20200717071455'),('20200722145145'),('20200723113007'),('20200723113323'),('20200727123243'),('20200727140154'),('20200727183701'),('20200728003823'),('20200728081459'),('20200730150904'),('20200731060729'),('20200731143001'),('20200806144141'),('20200806144315'),('20200807070158'),('20200807115504'),('20200810070651'),('20200810120201'),('20200810134833'),('20200811170000'),('20200812143621'),('20200812144918'),('20200813051622'),('20200813113305'),('20200814061218'),('20200814105435'),('20200814151038'),('20200818112241'),('20200818144603'),('20200818163525'),('20200819104309'),('20200824064722'),('20200824144132'),('20200825104251'),('20200826074017'),('20200826080612'),('20200827113027'),('20200827131011'),('20200827191113'),('20200828072959'),('20200828104711'),('20200828155425'),('20200831095129'),('20200831220612'),('20200901132011'),('20200903132011'),('20200907111601'),('20200908103617'),('20200908110215'),('20200908123436'),('20200909111515'),('20200909130902'),('20200909150556'),('20200910104201'),('20200911104733'),('20200914150000'),('20200915122956'),('20200915150613'),('20200915184733'),('20200916123033'),('20200917063632'),('20200917180833'),('20200917182618'),('20200918061853'),('20200918173632'),('20200921074215'),('20200921141259'),('20200922134823'),('20200922140118'),('20200923101858'),('20200923120708'),('20200924130715'),('20200924131855'),('20200925131011'),('20200925141716'),('20200927202512'),('20200928094951'),('20200928104331'),('20200928153356'),('20200929063242'),('20200930103720'),('20201001070135'),('20201001074250'),('20201001083230'),('20201001152431'),('20201001202445'),('20201005110225'),('20201006095314'),('20201006102133'),('20201006210502'),('20201007062911'),('20201007090314'),('20201007120936'),('20201007151136'),('20201008082623'),('20201008082649'),('20201008104655'),('20201009063535'),('20201009100108'),('20201009112420'),('20201012132643'),('20201013085128'),('20201014094539'),('20201014113300'),('20201014131120'),('20201017230038'),('20201019070633'),('20201019103221'),('20201022100031'),('20201023044049'),('20201023100339'),('20201023144238'),('20201027141825'),('20201028054556'),('20201029143351'),('20201030143605'),('20201102103613'),('20201103113942'),('20201105123705'),('20201106065545'),('20201106130621'),('20201109215407'),('20201111082612'),('20201111130900'),('20201111161445'),('20201116150905'),('20201117085958'),('20201119154003'),('20201119154900'),('20201120074617'),('20201120144735'),('20201123133754'),('20201123194208'),('20201124162735'),('20201125173000'),('20201126124853'),('20201126125952'),('20201128115541'),('20201202151156'),('20201203153730'),('20201207144013'),('20201208005142'),('20201208101643'),('20201208105746'),('20201208155104'),('20201214135259'),('20201220215510'),('20201224164826'),('20201225071805'),('20201225102415'),('20210112151343'),('20210112160650'),('20210114101055'),('20210114173142'),('20210115072808'),('20210120115001'),('20210121100949'),('20210122102915'),('20210126112935'),('20210126170040'),('20210127213922'),('20210128110707'),('20210201221510'),('20210202075200'),('20210202151730'),('20210203144718'),('20210205092825'),('20210208110911'),('20210210125912'),('20210210141725'),('20210211150805'),('20210212121532'),('20210217124319'),('20210219182015'),('20210220104920'),('20210224093039'),('20210228185836'),('20210301121945'),('20210301132615'),('20210301145646'),('20210304124000'),('20210310170431'),('20210315084859'),('20210317223237'),('20210322124136'),('20210324104825'),('20210325062553'),('20210325065105'),('20210329130507'),('20210401095546'),('20210401123741'),('20210405152104'),('20210406080841'),('20210406081909'),('20210406120706'),('20210409151115'),('20210412082614'),('20210412163840'),('20210413221707'),('20210415112626'),('20210419120315'),('20210419160105'),('20210421082640'),('20210421123533'),('20210423053302'),('20210423113040'),('20210426144955'),('20210429065129'),('20210430135355'),('20210503123456'),('20210503123457'),('20210504123456'),('20210512104423'),('20210512115415'),('20210513102447'),('20210517111405'),('20210519095042'),('20210519134603'),('20210519190000'),('20210521075634'),('20210525133220'),('20210526044024'),('20210526103600'),('20210528095250'),('20210528111805'),('20210528143434'),('20210601082907'),('20210601085744'),('20210601092615'),('20210604135035'),('20210610145031'),('20210618123456'),('20210623105315'),('20210625124718'),('20210628152020'),('20210629100000'),('20210630071042'),('20210701121944'),('20210702133233'),('20210705140900'),('20210707140435'),('20210707174929'),('20210708114012'),('20210710174115'),('20210712134440'),('20210714073225'),('20210714212508'),('20210715073521'),('20210726165708'),('20210801160008'),('20210802083609'),('20210803194500'),('20210804165709'),('20210805123456'),('20210810134800'),('20210813153651'),('20210818205834'),('20210822185650'),('20210901092530'),('20210902102332'),('20210902212700'),('20210907162931'),('20210908090637'),('20210908152718'),('20210921141918'),('20210922071551'),('20210923083411'),('20210924102216'),('20210927113708'),('20211005103035'),('20211007130511'),('20211013093640'),('20211019071423'),('20211020123423'),('20211022124629'),('20211022132530'),('20211025111219'),('2021110107204'),('20211102140805'),('20211102165926'),('20211102170803'),('20211102172355'),('20211103072943'),('20211103093519'),('20211103124815'),('20211103125200'),('20211109132113'),('20211112065935'),('20211116123235'),('20211118130400'),('20211118144721'),('20211122081953'),('20211122133002'),('20211123074058'),('20211124080123'),('20211126115256'),('20211201075628'),('20211207082758'),('20211213133616'),('20211213141431'),('20211215144958'),('20211217093835'),('Copying .:  10% 12:58 remain'),('Copying .:  45% 08:00 remain');
/*!40000 ALTER TABLE `migration_versions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `region_settings`
--

DROP TABLE IF EXISTS `region_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `region_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_delivery_time_offset` int(11) NOT NULL DEFAULT '-10',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `is_send_order_to_place_only_after_courier_assignment` tinyint(1) NOT NULL DEFAULT '0',
  `short_order_range` smallint(5) unsigned NOT NULL DEFAULT '2000',
  `last_order_acceptance_interval` smallint(5) unsigned NOT NULL DEFAULT '5',
  `is_courier_shift_settings_enabled` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2113 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `region_settings`
--

LOCK TABLES `region_settings` WRITE;
/*!40000 ALTER TABLE `region_settings` DISABLE KEYS */;
INSERT INTO `region_settings` (`id`, `order_delivery_time_offset`, `created_at`, `updated_at`, `is_send_order_to_place_only_after_courier_assignment`, `short_order_range`, `last_order_acceptance_interval`, `is_courier_shift_settings_enabled`) VALUES (1,10,'2018-07-03 16:52:42','2022-01-28 00:07:05',0,2000,5,1),(3,-10,'2018-07-03 16:52:42','2022-01-27 23:44:43',0,2500,5,1),(5,-10,'2018-07-03 16:52:42','2022-01-25 22:21:03',0,500,5,1),(7,-10,'2018-07-03 16:52:42','2022-01-27 23:44:53',0,500,5,1),(9,-10,'2018-07-03 16:52:42','2022-01-27 23:45:00',0,500,5,1),(11,-10,'2018-07-03 16:52:42','2022-01-26 23:48:30',0,500,5,1),(13,-10,'2018-07-03 16:52:42','2022-01-27 06:35:38',0,500,5,1),(15,-10,'2018-07-03 16:52:42','2022-01-24 21:24:49',0,500,5,1),(17,-10,'2018-07-03 16:52:42','2022-01-27 06:36:26',0,500,5,1),(19,-10,'2018-07-03 16:52:42','2022-01-27 23:45:18',0,500,5,1),(21,-10,'2018-07-03 16:52:42','2022-01-25 22:22:01',0,500,5,1),(23,-10,'2018-07-03 16:52:42','2022-01-27 23:45:27',0,500,5,1),(25,10,'2018-07-03 16:52:42','2022-01-28 00:53:00',0,500,5,1),(27,-10,'2018-07-03 16:52:42','2022-01-27 23:45:47',0,500,5,1),(29,-10,'2018-07-03 16:52:42','2022-01-27 23:45:55',0,500,5,1),(31,-10,'2018-07-03 16:52:42','2022-01-27 23:46:04',0,500,5,1),(33,-10,'2018-07-03 16:52:42','2022-01-27 23:46:11',0,500,5,1),(35,-10,'2018-07-03 16:52:42','2022-01-27 23:46:18',0,500,5,1),(37,-10,'2018-07-03 16:52:42','2022-01-26 23:49:53',0,500,5,1),(63,-10,'2018-07-19 16:43:45','2022-01-27 23:46:28',0,500,5,1),(65,-10,'2018-07-19 16:48:21','2022-01-26 23:50:58',0,500,5,1),(67,-10,'2018-07-19 16:49:21','2018-07-19 16:49:21',0,2000,5,1),(69,-10,'2018-07-19 16:58:30','2022-01-27 23:47:54',0,500,5,1),(72,-10,'2018-07-23 15:38:36','2022-01-27 23:48:01',0,500,5,1),(75,-10,'2018-07-23 15:44:11','2022-01-26 23:51:17',0,2000,5,1),(78,-10,'2018-07-23 15:45:47','2022-01-27 23:48:20',0,2000,5,1),(81,-10,'2018-07-23 15:52:33','2022-01-26 23:51:27',0,2000,5,1),(84,-10,'2018-07-23 15:54:48','2022-01-26 23:51:32',0,2000,5,1),(87,-10,'2018-07-23 16:02:44','2022-01-24 00:00:08',0,2000,5,1),(90,-10,'2018-07-23 16:12:56','2022-01-26 23:51:41',0,2000,5,1),(93,-10,'2018-07-23 16:14:31','2022-01-27 23:48:36',0,2000,5,1),(96,-10,'2018-07-23 16:16:05','2022-01-27 23:48:43',0,2000,5,1),(99,-10,'2018-07-31 12:32:02','2022-01-27 23:48:57',0,500,5,1),(101,-10,'2018-08-24 15:00:11','2022-01-27 23:49:03',0,500,5,1),(104,-10,'2018-08-24 15:04:10','2022-01-27 23:49:16',0,2000,5,1),(107,-10,'2018-08-24 18:32:10','2022-01-26 23:52:15',0,500,5,1),(110,-10,'2018-08-29 13:52:34','2022-01-27 23:49:24',0,2000,5,1),(112,-10,'2018-09-21 18:27:30','2022-01-27 23:49:29',0,2000,5,1),(114,-10,'2019-02-14 17:00:44','2022-01-27 23:49:34',0,2000,5,1),(117,-10,'2019-02-22 14:45:53','2022-01-27 23:49:41',0,2000,5,1),(120,-10,'2019-02-22 14:55:12','2022-01-27 23:49:47',0,500,5,1),(122,-10,'2019-04-25 15:16:01','2022-01-26 23:53:34',0,2000,5,1),(125,-10,'2019-04-25 15:22:18','2022-01-26 23:53:41',0,500,5,1),(128,-10,'2019-04-26 17:16:09','2022-01-26 23:53:47',0,2000,5,1),(131,0,'2019-04-26 17:24:29','2019-07-25 14:40:35',1,2000,0,1),(134,-10,'2019-04-26 17:27:11','2022-01-27 23:50:44',0,2000,5,1),(137,-10,'2019-04-29 16:11:57','2022-01-25 22:17:33',0,2000,0,1),(140,-10,'2019-05-06 14:28:42','2022-01-27 23:50:55',0,500,5,1),(143,-10,'2019-05-07 16:22:39','2022-01-27 23:51:05',0,2000,0,1),(146,-10,'2019-05-07 16:30:04','2022-01-24 21:18:57',0,2000,5,1),(149,-10,'2019-06-14 13:19:27','2022-01-27 23:51:15',0,500,5,1),(152,-10,'2019-06-28 18:07:56','2022-01-27 23:51:23',0,500,5,1),(155,-10,'2019-08-02 20:13:30','2020-05-12 13:29:06',0,2000,0,1),(158,-10,'2019-08-06 13:45:19','2022-01-27 06:35:23',0,2000,5,1),(160,-10,'2020-04-01 14:26:29','2022-01-22 00:29:57',0,2000,0,1),(165,-10,'2020-04-01 14:30:26','2020-05-12 13:28:29',0,2000,0,1),(170,-10,'2020-04-01 14:33:20','2020-05-12 13:28:15',0,2000,0,1),(175,-10,'2020-04-01 14:37:49','2022-01-27 23:51:40',0,2000,0,1),(180,-10,'2020-04-01 14:37:51','2022-01-24 22:34:18',0,2000,0,1),(185,-10,'2020-04-01 14:40:50','2022-01-26 23:54:42',0,2000,0,1),(190,-10,'2020-04-01 14:42:17','2022-01-27 23:51:52',0,2000,0,1),(195,-10,'2020-04-01 14:43:34','2021-12-11 23:38:24',0,2000,0,1),(200,-10,'2020-04-01 14:44:56','2022-01-25 22:42:46',0,2000,0,1),(205,-10,'2020-04-01 14:47:29','2022-01-15 00:31:23',0,2000,0,1),(210,-10,'2020-04-01 14:47:30','2022-01-26 23:55:33',0,2000,0,1),(215,-10,'2020-04-01 14:49:32','2022-01-24 21:19:37',0,2000,0,1),(220,-10,'2020-04-01 14:49:47','2022-01-25 22:46:11',0,2000,0,1),(225,-10,'2020-04-01 14:52:02','2022-01-23 23:38:43',0,2000,0,1),(230,-10,'2020-04-01 14:53:31','2020-05-12 13:25:41',0,2000,0,1),(235,-10,'2020-04-01 14:54:18','2020-05-12 13:25:30',0,2000,0,1),(240,-10,'2020-04-01 14:56:18','2022-01-25 22:42:56',0,2000,0,1),(245,-10,'2020-04-01 14:56:29','2022-01-26 23:55:52',0,2000,0,1),(250,-10,'2020-04-01 14:59:05','2022-01-24 22:03:38',0,2000,0,1),(255,-10,'2020-04-01 14:59:13','2022-01-26 23:56:06',0,2000,0,1),(260,-10,'2020-04-01 15:01:37','2022-01-22 00:02:04',0,2000,0,1),(265,-10,'2020-04-01 15:03:47','2022-01-26 23:56:14',0,2000,0,1),(270,-10,'2020-04-02 13:25:34','2020-05-12 13:24:01',0,2000,0,1),(275,-10,'2020-04-02 13:53:45','2022-01-26 23:56:26',0,2000,0,1),(280,-10,'2020-04-06 12:09:21','2020-05-12 13:23:34',0,2000,0,1),(285,-10,'2020-04-06 12:11:38','2020-05-12 13:23:23',0,2000,0,1),(290,-10,'2020-04-07 15:25:32','2022-01-26 23:56:31',0,2000,0,1),(295,-10,'2020-04-08 16:18:58','2020-05-12 13:22:58',0,2000,0,1),(300,-10,'2020-04-09 11:04:35','2022-01-15 00:32:44',0,2000,0,1),(305,-10,'2020-04-09 11:06:25','2020-05-12 13:22:33',0,2000,0,1),(310,-10,'2020-04-09 11:08:53','2020-05-12 13:22:18',0,2000,0,1),(315,-10,'2020-04-09 11:12:21','2020-05-12 13:22:07',0,2000,0,1),(320,-10,'2020-04-10 10:56:55','2020-05-12 13:21:54',0,2000,0,1),(325,-10,'2020-04-10 11:01:13','2022-01-26 23:57:07',0,2000,0,1),(330,-10,'2020-04-11 14:31:58','2022-01-23 23:43:00',0,2000,0,1),(335,-10,'2020-04-11 14:36:24','2022-01-24 22:35:06',0,2000,0,1),(340,-10,'2020-04-11 14:39:17','2020-05-12 13:21:00',0,2000,0,1),(345,-10,'2020-04-11 14:41:00','2020-05-12 13:20:27',0,2000,0,1),(350,-10,'2020-04-11 14:45:00','2020-05-12 13:20:13',0,2000,0,1),(355,-10,'2020-04-11 14:47:34','2020-05-12 13:19:59',0,2000,0,1),(360,-10,'2020-04-11 14:49:58','2020-05-12 13:19:43',0,2000,0,1),(365,-10,'2020-04-11 14:51:42','2022-01-24 22:35:36',0,2000,0,1),(370,-10,'2020-04-11 14:53:40','2020-05-12 13:19:13',0,2000,0,1),(375,-10,'2020-04-11 14:55:41','2020-05-12 13:18:59',0,2000,0,1),(380,-10,'2020-04-11 14:57:16','2020-05-12 13:18:44',0,2000,0,1),(385,-10,'2020-04-11 14:59:36','2020-05-12 13:18:33',0,2000,0,1),(390,-10,'2020-04-11 15:08:57','2020-05-12 13:18:18',0,2000,0,1),(395,-10,'2020-04-11 15:31:48','2020-05-12 13:18:05',0,2000,0,1),(400,-10,'2020-04-11 15:33:58','2022-01-25 22:45:06',0,2000,0,1),(405,-10,'2020-04-11 15:36:14','2020-05-12 13:17:34',0,2000,0,1),(410,-10,'2020-04-16 14:38:04','2020-05-12 13:17:22',0,2000,0,1),(415,-10,'2020-04-16 14:38:49','2020-05-12 13:17:05',0,2000,0,1),(420,-10,'2020-04-16 14:50:02','2020-05-12 13:16:50',0,2000,0,1),(425,-10,'2020-04-17 11:15:10','2020-05-12 13:16:36',0,2000,0,1),(430,-10,'2020-04-17 11:17:24','2020-05-12 13:16:21',0,2000,0,1),(435,-10,'2020-04-19 15:55:23','2022-01-25 22:44:26',0,2000,0,1),(440,-10,'2020-04-20 11:13:17','2020-05-12 13:15:43',0,2000,0,1),(445,-10,'2020-04-20 11:13:22','2022-01-27 23:54:41',0,2000,0,1),(450,-10,'2020-04-20 11:13:32','2020-05-12 13:15:18',0,2000,0,1),(455,-10,'2020-04-20 12:30:44','2022-01-27 23:54:49',0,2000,0,1),(460,-10,'2020-04-20 12:32:41','2022-01-16 00:33:59',0,2000,0,1),(465,-10,'2020-04-20 12:35:42','2022-01-27 23:55:00',0,2000,0,1),(470,-10,'2020-04-20 12:36:04','2022-01-02 00:23:47',0,2000,0,1),(475,-10,'2020-04-20 12:38:10','2022-01-26 23:58:25',0,2000,0,1),(480,-10,'2020-04-20 12:40:28','2022-01-25 22:46:42',0,2000,0,1),(485,-10,'2020-04-20 12:40:41','2022-01-06 00:24:17',0,2000,0,1),(490,-10,'2020-04-20 12:44:15','2022-01-25 22:41:50',0,2000,0,1),(495,-10,'2020-04-20 12:47:57','2022-01-24 18:55:23',0,2000,0,1),(500,-10,'2020-04-20 12:50:12','2022-01-27 23:55:52',0,2000,0,1),(505,-10,'2020-04-20 12:51:39','2022-01-25 22:43:17',0,2000,0,1),(510,-10,'2020-04-20 12:54:04','2022-01-08 12:54:14',0,2000,0,1),(515,-10,'2020-04-20 12:55:00','2022-01-27 23:56:05',0,2000,0,1),(520,-10,'2020-04-20 12:56:56','2022-01-26 23:59:32',0,2000,0,1),(525,-10,'2020-04-20 12:59:25','2022-01-27 23:56:16',0,2000,0,1),(530,-10,'2020-04-20 13:00:07','2022-01-26 23:59:47',0,2000,0,1),(535,-10,'2020-04-20 13:04:47','2022-01-26 23:59:54',0,2000,0,1),(540,-10,'2020-04-20 13:10:04','2022-01-27 23:56:29',0,2000,0,1),(545,-10,'2020-04-20 13:10:42','2022-01-23 00:36:19',0,2000,0,1),(550,-10,'2020-04-20 13:12:32','2022-01-27 23:56:40',0,2000,0,1),(555,-10,'2020-04-20 13:15:26','2022-01-27 23:56:47',0,2000,0,1),(560,-10,'2020-04-20 13:15:32','2022-01-27 00:00:28',0,2000,0,1),(565,-10,'2020-04-20 13:18:48','2022-01-27 23:57:02',0,2000,0,1),(570,-10,'2020-04-20 13:19:10','2022-01-25 22:43:58',0,2000,0,1),(575,-10,'2020-04-20 13:21:36','2022-01-27 00:00:45',0,2000,0,1),(580,-10,'2020-04-20 13:23:06','2022-01-27 23:57:17',0,2000,0,1),(585,-10,'2020-04-20 13:24:21','2022-01-24 22:35:17',0,2000,0,1),(590,-10,'2020-04-20 13:25:26','2022-01-27 23:57:27',0,2000,0,1),(595,-10,'2020-04-20 13:27:19','2022-01-27 23:57:32',0,2000,0,1),(600,-10,'2020-04-20 13:27:40','2022-01-27 23:58:15',0,2000,0,1),(605,-10,'2020-04-20 13:29:36','2022-01-27 00:01:47',0,2000,0,1),(610,-10,'2020-04-20 13:30:27','2022-01-27 00:01:56',0,2000,0,1),(615,-10,'2020-04-20 13:33:17','2022-01-27 23:58:30',0,2000,0,1),(620,-10,'2020-04-20 13:33:21','2022-01-27 23:58:35',0,2000,0,1),(625,-10,'2020-04-20 13:35:08','2022-01-23 00:38:21',0,2000,0,1),(630,-10,'2020-04-20 13:37:14','2022-01-23 23:46:24',0,2000,0,1),(635,-10,'2020-04-20 14:55:36','2022-01-27 23:58:46',0,2000,0,1),(640,-10,'2020-04-20 14:58:32','2022-01-22 06:33:45',0,2000,0,1),(645,-10,'2020-04-21 10:44:33','2020-05-12 13:05:04',0,2000,0,1),(650,-10,'2020-04-21 11:44:32','2020-05-12 13:04:42',0,2000,0,1),(655,-10,'2020-04-21 14:07:41','2022-01-22 00:40:34',0,2000,0,1),(660,-10,'2020-04-22 12:11:12','2020-05-12 13:04:15',0,2000,0,1),(665,-10,'2020-04-23 20:02:51','2020-05-12 13:03:58',0,2000,0,1),(670,-10,'2020-04-23 20:03:06','2020-05-12 13:03:45',0,2000,0,1),(675,-10,'2020-04-23 20:03:11','2020-05-12 13:03:30',0,2000,0,1),(680,-10,'2020-04-27 14:01:11','2020-05-14 11:40:49',0,2000,0,1),(685,-10,'2020-04-27 17:31:29','2020-05-14 11:41:02',0,2000,0,1),(690,-10,'2020-04-28 19:04:34','2020-05-14 11:41:08',0,2000,0,1),(695,-10,'2020-04-28 19:04:40','2020-05-14 11:41:14',0,2000,0,1),(700,-10,'2020-04-28 19:04:47','2020-05-14 11:41:20',0,2000,0,1),(705,-10,'2020-04-29 13:19:58','2020-05-14 11:41:27',0,2000,0,1),(710,-10,'2020-04-29 15:11:26','2020-05-14 11:41:35',0,2000,0,1),(715,-10,'2020-04-29 15:11:31','2020-05-14 11:41:46',0,2000,0,1),(720,-10,'2020-04-30 12:09:21','2020-05-14 11:41:54',0,2000,0,1),(725,-10,'2020-04-30 12:09:32','2020-05-14 11:42:00',0,2000,0,1),(730,-10,'2020-04-30 12:09:45','2020-05-14 11:42:09',0,2000,0,1),(735,-10,'2020-04-30 21:12:29','2020-05-14 11:42:16',0,2000,0,1),(740,-10,'2020-04-30 21:13:39','2020-05-14 11:42:22',0,2000,0,1),(748,-10,'2020-05-06 10:55:26','2020-05-14 11:42:28',0,2000,0,1),(753,-10,'2020-05-07 10:49:35','2020-05-14 11:42:54',0,2000,0,1),(758,-10,'2020-05-07 10:53:57','2020-05-14 11:43:03',0,2000,0,1),(763,-10,'2020-05-13 13:34:21','2020-05-14 11:59:02',0,2000,0,1),(768,-10,'2020-05-13 13:35:20','2020-05-14 11:59:26',0,2000,0,1),(773,-10,'2020-05-14 16:11:03','2020-05-14 16:11:03',0,2000,0,1),(778,-10,'2020-05-21 13:06:00','2020-05-21 13:06:00',0,2000,0,1),(783,-10,'2020-05-21 18:23:07','2020-05-21 18:23:07',0,2000,0,1),(788,-10,'2020-05-25 11:24:47','2020-05-25 11:24:47',0,2000,0,1),(793,-10,'2020-05-26 14:46:28','2020-05-26 14:46:28',0,2000,0,1),(798,-10,'2020-05-26 14:46:30','2020-05-26 14:46:30',0,2000,0,1),(803,-10,'2020-05-27 17:21:27','2020-05-27 17:21:27',0,2000,0,1),(808,-10,'2020-05-28 11:29:34','2020-05-28 11:29:34',0,2000,0,1),(813,-10,'2020-05-28 11:35:28','2020-05-28 11:35:28',0,2000,0,1),(818,-10,'2020-05-29 12:02:33','2020-05-29 12:02:33',0,2000,0,1),(823,-10,'2020-05-29 14:23:56','2020-05-29 14:23:56',0,2000,0,1),(828,-10,'2020-05-29 15:29:32','2020-05-29 15:29:32',0,2000,0,1),(833,-10,'2020-06-01 11:20:12','2021-09-24 23:54:29',0,2000,0,1),(838,-10,'2020-06-01 11:31:00','2020-06-01 11:31:00',0,2000,0,1),(843,-10,'2020-06-01 12:51:38','2020-06-01 12:51:38',0,2000,0,1),(848,-10,'2020-06-01 13:04:31','2020-06-01 13:04:31',0,2000,0,1),(853,-10,'2020-06-01 13:10:19','2020-06-01 13:10:19',0,2000,0,1),(858,-10,'2020-06-01 13:15:26','2020-06-01 13:15:26',0,2000,0,1),(863,-10,'2020-06-01 13:21:44','2020-06-01 13:21:44',0,2000,0,1),(868,-10,'2020-06-01 13:26:52','2020-06-01 13:26:52',0,2000,0,1),(873,-10,'2020-06-01 13:40:46','2020-06-01 13:40:46',0,2000,0,1),(878,-10,'2020-06-01 13:43:30','2020-06-01 13:43:30',0,2000,0,1),(883,-10,'2020-06-01 13:47:01','2020-06-01 13:47:01',0,2000,0,1),(888,-10,'2020-06-01 13:50:53','2022-01-23 00:40:24',0,2000,0,1),(893,-10,'2020-06-01 14:25:59','2022-01-13 22:58:39',0,2000,0,1),(898,-10,'2020-06-01 14:28:41','2020-06-01 14:28:41',0,2000,0,1),(903,-10,'2020-06-01 14:30:46','2020-06-01 14:30:46',0,2000,0,1),(908,-10,'2020-06-01 14:33:13','2020-06-01 14:33:13',0,2000,0,1),(913,-10,'2020-06-01 14:35:22','2020-06-01 14:35:22',0,2000,0,1),(918,-10,'2020-06-01 14:38:05','2020-06-01 14:38:05',0,2000,0,1),(923,-10,'2020-06-01 14:44:16','2020-06-01 14:44:16',0,2000,0,1),(928,-10,'2020-06-02 11:22:39','2020-06-02 11:22:39',0,2000,0,1),(933,-10,'2020-06-02 11:34:15','2020-06-02 11:34:15',0,2000,0,1),(938,-10,'2020-06-02 11:38:47','2020-06-02 11:38:47',0,2000,0,1),(943,-10,'2020-06-02 11:43:46','2020-06-02 11:43:46',0,2000,0,1),(948,-10,'2020-06-02 11:50:00','2020-06-02 11:50:00',0,2000,0,1),(953,-10,'2020-06-02 11:54:55','2020-06-02 11:54:55',0,2000,0,1),(958,-10,'2020-06-02 12:02:05','2021-09-09 10:48:19',0,2000,0,1),(963,-10,'2020-06-02 12:07:12','2020-06-02 12:07:12',0,2000,0,1),(968,-10,'2020-06-02 12:13:41','2020-06-02 12:13:41',0,2000,0,1),(973,-10,'2020-06-02 13:46:59','2020-06-02 13:46:59',0,2000,0,1),(980,-10,'2020-06-02 14:44:13','2020-06-02 14:44:13',0,2000,0,1),(983,-10,'2020-06-02 14:47:55','2020-06-02 14:47:55',0,2000,0,1),(986,-10,'2020-06-02 17:28:31','2020-06-02 17:28:31',0,2000,0,1),(990,-10,'2020-06-02 17:31:01','2021-04-15 23:47:14',0,2000,0,1),(994,-10,'2020-06-02 17:32:37','2020-06-02 17:32:37',0,2000,0,1),(998,-10,'2020-06-02 17:49:56','2020-06-02 17:49:56',0,2000,0,1),(1003,-10,'2020-06-02 17:53:37','2020-06-02 17:53:37',0,2000,0,1),(1008,-10,'2020-06-02 19:12:13','2020-06-02 19:12:13',0,2000,0,1),(1013,-10,'2020-06-02 19:12:37','2020-06-02 19:12:37',0,2000,0,1),(1018,-10,'2020-06-03 10:26:46','2021-04-12 23:31:56',0,2000,0,1),(1023,-10,'2020-06-03 10:35:10','2020-06-03 10:35:10',0,2000,0,1),(1028,-10,'2020-06-03 10:41:35','2020-06-03 10:41:35',0,2000,0,1),(1033,-10,'2020-06-03 10:49:30','2020-06-03 10:49:30',0,2000,0,1),(1038,-10,'2020-06-03 12:06:45','2020-06-03 12:06:45',0,2000,0,1),(1043,-10,'2020-06-03 16:09:08','2020-06-03 16:09:08',0,2000,0,1),(1048,-10,'2020-06-03 16:49:08','2020-06-03 16:49:08',0,2000,0,1),(1053,-10,'2020-06-03 18:38:41','2020-06-03 18:38:41',0,2000,0,1),(1058,-10,'2020-06-04 14:20:56','2020-06-04 14:20:56',0,2000,0,1),(1063,-10,'2020-06-04 14:21:11','2020-06-04 14:21:11',0,2000,0,1),(1068,-10,'2020-06-04 18:47:16','2020-06-04 18:47:16',0,2000,0,1),(1073,-10,'2020-06-04 18:51:15','2020-06-04 18:51:15',0,2000,0,1),(1078,-10,'2020-06-05 10:44:45','2020-06-05 10:44:45',0,2000,0,1),(1083,-10,'2020-06-05 10:46:48','2020-06-05 10:46:48',0,2000,0,1),(1088,-10,'2020-06-05 10:47:27','2020-06-05 10:47:27',0,2000,0,1),(1093,-10,'2020-06-05 10:49:18','2020-06-05 10:49:18',0,2000,0,1),(1098,-10,'2020-06-05 10:51:32','2020-06-05 10:51:32',0,2000,0,1),(1103,-10,'2020-06-05 10:52:18','2020-06-05 10:52:18',0,2000,0,1),(1108,-10,'2020-06-05 10:56:23','2020-06-05 10:56:23',0,2000,0,1),(1113,-10,'2020-06-05 12:48:38','2020-06-05 12:48:38',0,2000,0,1),(1118,-10,'2020-06-05 17:42:54','2020-06-05 17:42:54',0,2000,0,1),(1123,-10,'2020-06-05 18:26:48','2020-06-05 18:26:48',0,2000,0,1),(1128,-10,'2020-06-08 10:33:08','2020-06-08 10:33:08',0,2000,0,1),(1133,-10,'2020-06-08 10:36:46','2020-06-08 10:36:46',0,2000,0,1),(1138,-10,'2020-06-08 10:42:58','2020-06-08 10:42:58',0,2000,0,1),(1143,-10,'2020-06-08 10:47:36','2020-06-08 10:47:36',0,2000,0,1),(1148,-10,'2020-06-08 10:50:57','2020-06-08 10:50:57',0,2000,0,1),(1153,-10,'2020-06-08 10:54:24','2020-06-08 10:54:24',0,2000,0,1),(1158,-10,'2020-06-08 12:54:30','2020-06-08 12:54:30',0,2000,0,1),(1163,-10,'2020-06-08 14:45:26','2020-06-08 14:45:26',0,2000,0,1),(1168,-10,'2020-06-08 17:57:13','2020-06-08 17:57:13',0,2000,0,1),(1173,-10,'2020-06-08 18:00:50','2020-06-08 18:00:50',0,2000,0,1),(1178,-10,'2020-06-10 15:24:12','2020-06-10 15:24:12',0,2000,0,1),(1183,-10,'2020-06-10 19:23:55','2020-06-10 19:23:55',0,2000,0,1),(1188,-10,'2020-06-16 10:31:35','2020-06-16 10:31:35',0,2000,0,1),(1193,-10,'2020-06-16 10:36:10','2020-06-16 10:36:10',0,2000,0,1),(1198,-10,'2020-06-16 10:42:38','2020-06-16 10:42:38',0,2000,0,1),(1203,-10,'2020-06-16 10:48:29','2020-06-16 10:48:29',0,2000,0,1),(1208,-10,'2020-06-16 10:52:11','2020-06-16 10:52:11',0,2000,0,1),(1213,-10,'2020-06-16 10:56:08','2020-06-16 10:56:08',0,2000,0,1),(1218,-10,'2020-06-16 10:59:44','2020-06-16 10:59:44',0,2000,0,1),(1223,-10,'2020-06-16 15:59:25','2020-06-16 15:59:25',0,2000,0,1),(1228,-10,'2020-06-17 11:41:52','2020-06-17 11:41:52',0,2000,0,1),(1233,-10,'2020-06-17 11:45:43','2020-06-17 11:45:43',0,2000,0,1),(1238,-10,'2020-06-17 11:49:11','2020-06-17 11:49:11',0,2000,0,1),(1243,-10,'2020-06-17 11:51:40','2020-06-17 11:51:40',0,2000,0,1),(1248,-10,'2020-06-18 11:14:42','2020-06-18 11:14:42',0,2000,0,1),(1253,-10,'2020-06-19 13:47:11','2020-06-19 13:47:11',0,2000,0,1),(1258,-10,'2020-06-19 13:54:45','2020-06-19 13:54:45',0,2000,0,1),(1263,-10,'2020-06-19 16:36:54','2020-06-19 16:36:54',0,2000,0,1),(1268,-10,'2020-06-19 16:47:41','2020-06-19 16:47:41',0,2000,0,1),(1273,-10,'2020-06-19 17:21:18','2020-06-19 17:21:18',0,2000,0,1),(1278,-10,'2020-06-19 19:59:37','2020-06-19 19:59:37',0,2000,0,1),(1286,-10,'2020-06-22 11:49:19','2020-06-22 11:49:19',0,2000,0,1),(1290,-10,'2020-06-22 11:55:20','2020-06-22 11:55:20',0,2000,0,1),(1294,-10,'2020-06-22 12:03:46','2020-06-22 12:03:46',0,2000,0,1),(1302,-10,'2020-06-23 12:00:12','2020-06-23 12:00:12',0,2000,0,1),(1307,-10,'2020-06-23 16:35:50','2020-06-23 16:35:50',0,2000,0,1),(1312,-10,'2020-06-25 13:01:43','2020-06-25 13:01:43',0,2000,0,1),(1318,-10,'2020-06-30 11:39:51','2020-06-30 11:39:51',0,2000,0,1),(1322,-10,'2020-07-09 10:50:31','2020-07-09 10:50:31',0,2000,0,1),(1327,-10,'2020-07-09 11:17:16','2020-07-09 11:17:16',0,2000,0,1),(1332,-10,'2020-07-10 11:22:38','2020-07-10 11:22:38',0,2000,0,1),(1337,-10,'2020-07-10 11:25:58','2020-07-10 11:25:58',0,2000,0,1),(1340,-10,'2020-07-15 14:29:49','2020-07-15 14:29:49',0,2000,0,1),(1345,-10,'2020-07-17 10:23:05','2020-07-17 10:23:05',0,2000,0,1),(1350,-10,'2020-07-17 11:24:52','2020-07-17 11:24:52',0,2000,0,1),(1355,-10,'2020-07-17 11:28:58','2020-07-17 11:28:58',0,2000,0,1),(1360,-10,'2020-07-17 14:40:27','2020-07-17 14:40:27',0,2000,0,1),(1365,-10,'2020-07-17 14:52:19','2020-07-17 14:52:19',0,2000,0,1),(1370,-10,'2020-07-20 09:27:33','2020-07-20 09:27:33',0,2000,0,1),(1375,-10,'2020-07-20 09:31:32','2020-07-20 09:31:32',0,2000,0,1),(1380,-10,'2020-07-20 09:35:40','2020-07-20 09:35:40',0,2000,0,1),(1385,-10,'2020-07-20 13:19:49','2020-07-20 13:19:49',0,2000,0,1),(1390,-10,'2020-07-20 13:24:02','2020-07-20 13:24:02',0,2000,0,1),(1395,-10,'2020-07-28 11:01:47','2020-07-28 11:01:47',0,2000,0,1),(1400,-10,'2020-07-28 11:05:45','2020-07-28 11:05:45',0,2000,0,1),(1405,-10,'2020-08-04 10:28:13','2020-08-04 10:28:13',0,2000,0,1),(1410,-10,'2020-08-05 10:14:27','2020-08-05 10:14:27',0,2000,0,1),(1415,-10,'2020-08-05 10:18:50','2020-08-05 10:18:50',0,2000,0,1),(1420,-10,'2020-08-05 10:22:37','2020-08-05 10:22:37',0,2000,0,1),(1429,-10,'2020-08-06 14:53:39','2020-08-06 14:53:39',0,2000,0,1),(1434,-10,'2020-08-10 13:41:55','2020-08-10 13:41:55',0,2000,0,1),(1439,-10,'2020-08-11 11:24:53','2020-08-11 11:24:53',0,2000,0,1),(1444,-10,'2020-08-12 11:53:04','2020-08-12 11:53:04',0,2000,0,1),(1449,-10,'2020-08-13 16:31:08','2020-08-13 16:31:08',0,2000,0,1),(1454,-10,'2020-08-17 16:16:29','2020-08-17 16:16:29',0,2000,0,1),(1459,-10,'2020-08-18 18:31:31','2020-08-18 18:31:31',0,2000,0,1),(1464,-10,'2020-08-25 11:08:34','2020-08-25 11:08:34',0,2000,0,1),(1469,-10,'2020-08-26 11:45:25','2020-08-26 11:45:25',0,2000,0,1),(1474,-10,'2020-08-27 10:58:06','2020-08-27 10:58:06',0,2000,0,1),(1479,-10,'2020-08-27 11:12:46','2020-08-27 11:12:46',0,2000,0,1),(1484,-10,'2020-09-07 16:31:56','2020-09-07 16:31:56',0,2000,0,1),(1489,-10,'2020-09-07 16:40:19','2020-09-07 16:40:19',0,2000,0,1),(1494,-10,'2020-09-07 16:43:55','2020-09-07 16:43:55',0,2000,0,1),(1499,-10,'2020-09-07 16:51:48','2020-09-07 16:51:48',0,2000,0,1),(1504,-10,'2020-09-07 16:56:01','2020-09-07 16:56:01',0,2000,0,1),(1509,-10,'2020-09-07 17:01:07','2020-09-07 17:01:07',0,2000,0,1),(1514,-10,'2020-09-07 17:10:42','2020-09-07 17:10:42',0,2000,0,1),(1519,-10,'2020-09-07 17:14:36','2020-09-07 17:14:36',0,2000,0,1),(1523,-10,'2020-09-11 17:07:34','2020-09-11 17:07:34',0,2000,0,1),(1528,-10,'2020-09-11 17:15:09','2020-09-11 17:15:09',0,2000,0,1),(1533,-10,'2020-09-11 18:04:26','2020-09-11 18:04:26',0,2000,0,1),(1538,-10,'2020-09-11 18:07:53','2020-09-11 18:07:53',0,2000,0,1),(1543,-10,'2020-09-15 19:00:45','2020-09-15 19:00:45',0,2000,0,1),(1548,-10,'2020-09-17 10:06:48','2020-09-17 10:06:48',0,2000,0,1),(1553,-10,'2020-09-18 13:58:06','2020-09-18 13:58:06',0,2000,0,1),(1558,-10,'2020-09-18 23:08:07','2020-09-18 23:08:07',0,2000,0,1),(1563,-10,'2020-09-21 17:34:34','2022-01-28 00:02:01',0,2000,0,1),(1568,-10,'2020-09-24 17:19:39','2020-09-24 17:19:39',0,2000,0,1),(1577,-10,'2020-09-28 11:55:39','2020-09-28 11:55:39',0,2000,0,1),(1582,-10,'2020-10-01 14:31:29','2020-10-01 14:31:29',0,2000,0,1),(1587,-10,'2020-10-09 12:54:49','2020-10-09 12:54:49',0,2000,0,1),(1592,-10,'2020-10-13 11:04:04','2020-10-13 11:04:04',0,2000,0,1),(1598,-10,'2020-10-14 12:57:12','2022-01-28 00:02:08',0,2000,0,1),(1601,-10,'2020-10-14 12:58:51','2022-01-27 00:08:14',0,2000,0,1),(1604,10,'2020-10-14 13:00:48','2022-01-28 00:07:20',0,2000,0,1),(1607,-10,'2020-10-14 13:02:34','2022-01-28 00:02:49',0,2000,0,1),(1610,-10,'2020-10-14 13:03:49','2022-01-28 00:02:56',0,2000,0,1),(1613,-10,'2020-10-14 13:04:49','2021-12-11 13:44:46',0,2000,0,1),(1616,-10,'2020-10-14 13:05:59','2020-10-14 13:05:59',0,2000,0,1),(1619,-10,'2020-10-14 13:06:16','2022-01-27 00:08:59',0,2000,0,1),(1622,-10,'2020-10-14 13:07:32','2022-01-28 00:03:06',0,2000,0,1),(1625,-10,'2020-10-14 13:07:33','2020-10-14 13:07:33',0,2000,0,1),(1628,-10,'2020-10-14 13:08:54','2022-01-28 00:03:11',0,2000,0,1),(1631,-10,'2020-10-14 13:09:15','2020-10-14 13:09:15',0,2000,0,1),(1634,-10,'2020-10-14 13:10:04','2022-01-28 00:03:16',0,2000,0,1),(1637,-10,'2020-10-14 13:11:11','2022-01-28 00:03:21',0,2000,0,1),(1640,-10,'2020-10-14 13:11:32','2020-10-14 13:11:32',0,2000,0,1),(1643,-10,'2020-10-14 13:12:59','2022-01-28 00:03:28',0,2000,0,1),(1648,-10,'2020-10-19 12:19:51','2020-10-19 12:19:51',0,2000,0,1),(1653,-10,'2020-10-21 16:35:49','2020-10-21 16:35:49',0,2000,0,1),(1658,-10,'2020-10-23 17:13:29','2020-10-23 17:13:29',0,2000,0,1),(1663,-10,'2020-10-23 17:18:39','2020-10-23 17:18:39',0,2000,0,1),(1672,-10,'2020-10-28 11:02:22','2020-10-28 11:02:22',0,2000,0,1),(1681,-10,'2020-10-29 19:28:06','2020-10-29 19:28:06',0,2000,0,1),(1682,-10,'2020-11-24 17:50:01','2020-11-24 17:50:01',0,2000,0,1),(1687,-10,'2020-11-26 14:04:36','2020-11-26 14:04:36',0,2000,0,1),(1690,-10,'2020-12-07 10:40:10','2020-12-07 10:40:10',0,2000,0,1),(1695,-10,'2020-12-09 13:50:46','2020-12-09 13:50:46',0,2000,0,1),(1700,-10,'2020-12-17 12:40:16','2020-12-17 12:40:16',0,2000,0,1),(1705,-10,'2021-01-11 11:23:01','2021-01-11 11:23:01',0,2000,0,1),(1710,-10,'2021-01-12 18:15:43','2021-01-12 18:15:43',0,2000,0,1),(1715,-10,'2021-01-12 18:16:08','2021-01-12 18:16:08',0,2000,0,1),(1720,-10,'2021-01-12 18:26:09','2021-01-12 18:26:09',0,2000,0,1),(1725,-10,'2021-01-12 18:30:58','2021-01-12 18:30:58',0,2000,0,1),(1730,-10,'2021-01-18 11:48:37','2021-01-18 11:48:37',0,2000,0,1),(1735,-10,'2021-01-21 19:38:03','2021-01-21 19:38:03',0,2000,0,1),(1740,-10,'2021-01-21 19:38:08','2021-01-21 19:38:08',0,2000,0,1),(1745,-10,'2021-01-26 11:10:52','2021-01-26 11:10:52',0,2000,0,1),(1750,-10,'2021-01-28 13:29:10','2021-01-28 13:29:10',0,2000,0,1),(1755,-10,'2021-01-28 13:32:36','2021-01-28 13:32:36',0,2000,0,1),(1760,-10,'2021-01-29 14:54:42','2021-12-20 00:19:38',0,2000,0,1),(1765,-10,'2021-02-02 19:17:33','2021-02-02 19:17:33',0,2000,0,1),(1770,-10,'2021-02-02 19:17:47','2021-02-02 19:17:47',0,2000,0,1),(1775,-10,'2021-02-05 18:22:50','2021-02-05 18:22:50',0,2000,0,1),(1784,-10,'2021-02-17 10:54:04','2021-02-17 10:54:04',0,2000,0,1),(1790,-10,'2021-02-24 18:10:30','2021-02-24 18:10:30',0,2000,0,1),(1795,-10,'2021-02-24 18:14:57','2021-02-24 18:14:57',0,2000,0,1),(1800,-10,'2021-02-24 18:18:01','2021-02-24 18:18:01',0,2000,0,1),(1803,-10,'2021-02-26 11:24:31','2021-02-26 11:24:31',0,2000,0,1),(1810,-10,'2021-03-09 11:36:00','2021-03-09 11:36:00',0,2000,0,1),(1817,-10,'2021-03-15 14:52:16','2021-03-15 14:52:16',0,2000,0,1),(1822,-10,'2021-03-15 18:09:57','2021-03-15 18:09:57',0,2000,0,1),(1827,-10,'2021-03-16 11:55:10','2021-03-16 11:55:10',0,2000,0,1),(1828,-10,'2021-03-26 17:24:26','2021-03-26 17:24:26',0,2000,0,1),(1833,-10,'2021-04-09 14:53:32','2021-04-09 14:53:32',0,2000,0,1),(1839,-10,'2021-04-15 11:30:19','2021-04-15 11:30:19',0,2000,0,1),(1844,-10,'2021-04-15 14:27:02','2021-04-15 14:27:02',0,2000,0,1),(1849,-10,'2021-04-16 15:14:24','2021-04-16 15:14:24',0,2000,0,1),(1850,-10,'2021-05-14 17:25:51','2021-05-14 17:25:51',0,2000,0,1),(1855,-10,'2021-05-17 12:03:50','2021-05-17 12:03:50',0,2000,0,1),(1858,-10,'2021-05-24 19:22:51','2021-05-24 19:22:51',0,2000,0,1),(1867,-10,'2021-06-07 13:10:07','2021-06-07 13:10:07',0,2000,0,1),(1872,-10,'2021-06-10 17:11:16','2021-06-10 17:11:16',0,2000,0,1),(1878,-10,'2021-06-24 13:18:26','2021-06-24 13:18:26',0,2000,0,1),(1886,-10,'2021-07-10 14:13:40','2021-07-10 14:13:40',0,2000,0,1),(1889,-10,'2021-07-26 12:28:57','2021-07-26 12:28:57',0,2000,0,1),(1894,-10,'2021-07-26 12:39:17','2021-07-26 12:39:17',0,2000,0,1),(1899,-10,'2021-07-26 16:21:54','2021-07-26 16:21:54',0,2000,0,1),(1901,-10,'2021-07-30 11:00:05','2021-07-30 11:00:05',0,2000,0,1),(1906,20,'2021-07-30 11:11:23','2021-12-17 13:51:13',0,2000,0,1),(1913,-10,'2021-08-19 11:23:25','2021-08-19 11:23:25',0,2000,0,1),(1918,-10,'2021-08-24 12:31:42','2021-08-24 12:31:42',0,2000,0,1),(1922,-10,'2021-08-24 12:42:09','2021-08-24 12:42:09',0,2000,0,1),(1926,-10,'2021-08-24 13:58:02','2021-08-24 13:58:02',0,2000,0,1),(1931,-10,'2021-08-27 11:22:13','2021-08-27 11:22:13',0,2000,0,1),(1936,-10,'2021-08-30 17:05:38','2021-08-30 17:05:38',0,2000,0,1),(1941,-10,'2021-08-31 17:08:46','2021-08-31 17:08:46',0,2000,0,1),(1946,-10,'2021-08-31 17:16:16','2021-08-31 17:16:16',0,2000,0,1),(1951,-10,'2021-08-31 17:21:15','2021-08-31 17:21:15',0,2000,0,1),(1956,-10,'2021-08-31 17:26:10','2021-08-31 17:26:10',0,2000,0,1),(1961,-10,'2021-08-31 17:37:48','2021-08-31 17:37:48',0,2000,0,1),(1966,-10,'2021-08-31 17:44:48','2021-08-31 17:44:48',0,2000,0,1),(1971,-10,'2021-08-31 18:01:15','2021-08-31 18:01:15',0,2000,0,1),(1973,-10,'2021-10-18 13:59:54','2022-01-13 18:51:26',1,2000,0,1),(1978,-10,'2021-10-29 13:03:14','2022-01-06 23:59:35',0,2000,0,1),(1983,-10,'2021-10-29 13:40:53','2022-01-25 22:41:24',0,2000,0,1),(1988,-10,'2021-10-29 13:51:55','2021-12-11 23:51:27',0,2000,0,1),(1993,-10,'2021-10-31 13:30:43','2021-10-31 13:30:43',0,2000,0,1),(1998,-10,'2021-11-01 11:32:32','2021-11-01 11:32:32',0,2000,0,1),(2003,-10,'2021-11-01 15:20:58','2021-11-01 15:20:58',0,2000,0,1),(2008,-10,'2021-11-15 15:23:15','2021-11-15 15:23:15',0,2000,0,1),(2013,-10,'2021-12-07 18:01:54','2021-12-07 18:01:54',0,2000,0,1),(2018,-10,'2021-12-13 16:52:40','2021-12-13 16:52:40',0,2000,0,1),(2022,-10,'2021-12-15 19:04:30','2021-12-15 19:04:30',0,2000,0,1),(2027,-10,'2021-12-16 17:56:13','2021-12-16 17:56:13',0,2000,0,1),(2032,-10,'2021-12-16 18:18:39','2021-12-16 18:18:39',0,2000,0,1),(2037,-10,'2021-12-16 18:29:13','2021-12-16 18:29:13',0,2000,0,1),(2042,-10,'2021-12-16 18:38:43','2021-12-16 18:38:43',0,2000,0,1),(2047,-10,'2021-12-16 18:47:45','2021-12-16 18:47:45',0,2000,0,1),(2052,-10,'2021-12-16 19:04:46','2021-12-16 19:04:46',0,2000,0,1),(2057,-10,'2021-12-16 19:10:37','2021-12-16 19:10:37',0,2000,0,1),(2062,-10,'2021-12-16 19:21:03','2021-12-16 19:21:03',0,2000,0,1),(2067,-10,'2021-12-16 19:32:40','2021-12-16 19:32:40',0,2000,0,1),(2072,-10,'2021-12-16 19:37:34','2021-12-16 19:37:34',0,2000,0,1),(2077,-10,'2022-01-10 10:31:20','2022-01-10 10:31:20',0,2000,0,1),(2082,-10,'2022-01-12 11:29:15','2022-01-12 11:29:15',0,2000,0,1),(2088,-10,'2022-01-12 18:44:15','2022-01-12 18:44:15',0,2000,0,1),(2093,-10,'2022-01-18 12:39:07','2022-01-18 12:39:07',0,2000,0,1),(2102,-10,'2022-01-24 12:48:28','2022-01-24 12:48:28',0,2000,0,1),(2107,-10,'2022-01-24 12:58:11','2022-01-24 12:58:11',0,2000,0,1),(2112,-10,'2022-01-24 13:08:42','2022-01-24 13:08:42',0,2000,0,1);
/*!40000 ALTER TABLE `region_settings` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2022-01-28  1:00:06
-- MySQL dump 10.13  Distrib 5.7.31, for Linux (x86_64)
--
-- Host: infra.eda.yandex.net    Database: bigfood
-- ------------------------------------------------------
-- Server version	5.7.30-33-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `ac_order_mappings`
--

DROP TABLE IF EXISTS `ac_order_mappings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ac_order_mappings` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `inner_token` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ID сессии, к которой привязан заказ',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Связанный с сессией заказ',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Дата и время создания записи',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Дата и время обновления записи',
  PRIMARY KEY (`id`),
  KEY `idx__ac_order_mappings__inner_token` (`inner_token`),
  KEY `idx__ac_order_mappings__created_at` (`created_at`),
  KEY `idx__ac_order_mappings__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Маппинг заказов из App Clip на сессии App Clip';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `accounting_client_gmvs`
--

DROP TABLE IF EXISTS `accounting_client_gmvs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `accounting_client_gmvs` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `period` varchar(7) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Date period in YYYY-MM format',
  `client_id` int(10) unsigned NOT NULL COMMENT 'Billing client ID',
  `gmv` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Gross merchandise volume',
  `currency` varchar(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'RUB' COMMENT 'Alphabetic ISO 4217 currency code',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__accounting_client_gmvs__period__client_id` (`period`,`client_id`),
  KEY `idx__accounting_client_gmvs__created_at` (`created_at`),
  KEY `idx__accounting_client_gmvs__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=581876207 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `admin_region_permissions`
--

DROP TABLE IF EXISTS `admin_region_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `admin_region_permissions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `admin_id` int(11) NOT NULL,
  `country_code` char(2) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Код страны, в которой действительны права',
  `region_id` int(11) DEFAULT NULL COMMENT 'Id региона, в котором действительны права',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `fk__admin_region_permission__admin_id` (`admin_id`),
  KEY `idx__admin_region_permission__created_at` (`created_at`),
  KEY `idx__admin_region_permission__updated_at` (`updated_at`),
  CONSTRAINT `fk__admin_region_permission__admin_id` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=8411 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `admin_roles`
--

DROP TABLE IF EXISTS `admin_roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `admin_roles` (
  `admin_id` int(11) NOT NULL,
  `role_id` int(11) NOT NULL,
  PRIMARY KEY (`admin_id`,`role_id`),
  KEY `IDX_1614D53D642B8210` (`admin_id`),
  KEY `IDX_1614D53DD60322AC` (`role_id`),
  CONSTRAINT `FK_1614D53D642B8210` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `FK_1614D53DD60322AC` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `admins`
--

DROP TABLE IF EXISTS `admins`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `admins` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `enabled` tinyint(1) NOT NULL,
  `salt` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  `login` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__admins__login` (`login`)
) ENGINE=InnoDB AUTO_INCREMENT=59612 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `announcements`
--

DROP TABLE IF EXISTS `announcements`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `announcements` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `slug` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `theme` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
  `title` varchar(70) COLLATE utf8_unicode_ci NOT NULL,
  `message` varchar(140) COLLATE utf8_unicode_ci NOT NULL,
  `promocode` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL,
  `url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `web_picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `web_avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `mobile_picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `mobile_avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `deactivated_at` datetime DEFAULT NULL,
  `started_at` datetime DEFAULT NULL,
  `finished_at` datetime DEFAULT NULL,
  `brand_id` int(10) unsigned DEFAULT NULL,
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'default',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__announcements__slug` (`slug`),
  KEY `idx__announcements__brand_id` (`brand_id`)
) ENGINE=InnoDB AUTO_INCREMENT=134 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `anti_fraud_delayed_orders`
--

DROP TABLE IF EXISTS `anti_fraud_delayed_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `anti_fraud_delayed_orders` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__anti_fraud_delayed_orders__order_nr` (`order_nr`),
  KEY `idx__anti_fraud_delayed_orders__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1025196 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `anti_fraud_whitelist_users`
--

DROP TABLE IF EXISTS `anti_fraud_whitelist_users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `anti_fraud_whitelist_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__anti_fraud_whitelist_users__user_id` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=34 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `applications`
--

DROP TABLE IF EXISTS `applications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `applications` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `code` enum('native','taxi-app','place','courier','magnitapp') COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_market_place_reminder_log`
--

DROP TABLE IF EXISTS `auto_call_market_place_reminder_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_market_place_reminder_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__auto_call_market_place_reminder_log__order_id` (`order_id`),
  KEY `idx__auto_call_market_place_reminder_log__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=857746 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_marketplace_reminder_call_schedule`
--

DROP TABLE IF EXISTS `auto_call_marketplace_reminder_call_schedule`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_marketplace_reminder_call_schedule` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `status` int(11) NOT NULL,
  `start_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__auto_call_marketplace_reminder_call_schedule__phone_number` (`phone_number`),
  KEY `idx__auto_call_marketplace_reminder_call_schedule__start_at` (`start_at`)
) ENGINE=InnoDB AUTO_INCREMENT=49556312 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_marketplace_reminder_callable_call`
--

DROP TABLE IF EXISTS `auto_call_marketplace_reminder_callable_call`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_marketplace_reminder_callable_call` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `callable_order_id` int(11) NOT NULL,
  `auto_call_task_id` int(11) NOT NULL,
  `place_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `IDX_BF728595E0001553` (`callable_order_id`),
  KEY `IDX_BF728595C3C63B77` (`auto_call_task_id`),
  KEY `IDX_BF728595DA6A219` (`place_id`),
  CONSTRAINT `FK_BF728595C3C63B77` FOREIGN KEY (`auto_call_task_id`) REFERENCES `auto_call_tasks` (`id`),
  CONSTRAINT `FK_BF728595DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `_FK_BF728595E0001553` FOREIGN KEY (`callable_order_id`) REFERENCES `auto_call_marketplace_reminder_callable_order` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=77017352 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_marketplace_reminder_callable_order`
--

DROP TABLE IF EXISTS `auto_call_marketplace_reminder_callable_order`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_marketplace_reminder_callable_order` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `calls_count` int(11) NOT NULL,
  `status` int(11) NOT NULL,
  `init_at` datetime NOT NULL,
  `start_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `finish_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `unsuccess_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `unsuccess_calls_count` int(11) NOT NULL,
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__auto_call_marketplace_reminder_callable_order__order_id` (`order_id`),
  KEY `idx__auto_call_marketplace_reminder_callable_order__start_at` (`start_at`),
  KEY `idx__auto_call_marketplace_reminder_callable_order__init_at` (`init_at`),
  KEY `idx__auto_call_marketplace_reminder_callable_order__finish_at` (`finish_at`)
) ENGINE=InnoDB AUTO_INCREMENT=39962872 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_marketplace_reminder_callable_phone_number`
--

DROP TABLE IF EXISTS `auto_call_marketplace_reminder_callable_phone_number`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_marketplace_reminder_callable_phone_number` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `unsuccess_sequence_calls_count` int(11) NOT NULL,
  `last_called_at` datetime NOT NULL,
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__auto_call_mp_reminder_callable_phone_number__phone_number` (`phone_number`)
) ENGINE=InnoDB AUTO_INCREMENT=106932 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_order_confirmation_logs`
--

DROP TABLE IF EXISTS `auto_call_order_confirmation_logs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_order_confirmation_logs` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `place_id` int(11) NOT NULL,
  `processed` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_1844B8A48D9F6D38` (`order_id`),
  KEY `IDX_1844B8A4DA6A219` (`place_id`),
  KEY `idx_auto_call_order_confirmation_log_created_at` (`created_at`),
  KEY `idx_auto_call_order_confirmation_log_updated_at` (`updated_at`),
  CONSTRAINT `_FK_1844B8A4DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=45754204 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_order_confirmation_tasks`
--

DROP TABLE IF EXISTS `auto_call_order_confirmation_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_order_confirmation_tasks` (
  `log_id` int(11) NOT NULL,
  `task_id` int(11) NOT NULL,
  PRIMARY KEY (`log_id`,`task_id`),
  KEY `IDX_E3D6D4C7EA675D86` (`log_id`),
  KEY `IDX_E3D6D4C78DB60186` (`task_id`),
  CONSTRAINT `FK_E3D6D4C78DB60186` FOREIGN KEY (`task_id`) REFERENCES `auto_call_tasks` (`id`),
  CONSTRAINT `FK_E3D6D4C7EA675D86` FOREIGN KEY (`log_id`) REFERENCES `auto_call_order_confirmation_logs` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_task_groups`
--

DROP TABLE IF EXISTS `auto_call_task_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_task_groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `task_count` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `max_attempts` int(11) NOT NULL DEFAULT '0',
  `attempts_interval` int(11) DEFAULT NULL,
  `region_id` int(10) unsigned DEFAULT NULL,
  `start_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `IDX_62B9B94698260155` (`region_id`),
  CONSTRAINT `FK_62B9B94698260155` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2943 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_task_idempotency_keys`
--

DROP TABLE IF EXISTS `auto_call_task_idempotency_keys`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_task_idempotency_keys` (
  `idempotency_key` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `task_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`idempotency_key`),
  KEY `idx__auto_call_task_idempotency_keys__created_at` (`created_at`),
  KEY `idx__auto_call_task_idempotency_keys__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_tasks`
--

DROP TABLE IF EXISTS `auto_call_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_tasks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `template_id` int(11) NOT NULL,
  `group_id` int(11) DEFAULT NULL,
  `parameters` json DEFAULT NULL COMMENT '(DC2Type:json)',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `session_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `status` int(11) NOT NULL,
  `error_cause` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `auto_call_at` datetime DEFAULT NULL,
  `queued_by_session_creator` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_582F1D145DA0FB8` (`template_id`),
  KEY `IDX_582F1D14FE54D947` (`group_id`),
  KEY `idx_auto_call_at` (`auto_call_at`),
  KEY `idx__auto_call_tasks__template_id_phone_number` (`template_id`,`phone_number`),
  KEY `idx__auto_call_tasks__created_at` (`created_at`),
  KEY `idx__auto_call_tasks__updated_at` (`updated_at`),
  CONSTRAINT `_FK_582F1D145DA0FB8` FOREIGN KEY (`template_id`) REFERENCES `auto_call_templates` (`id`),
  CONSTRAINT `_FK_582F1D14FE54D947` FOREIGN KEY (`group_id`) REFERENCES `auto_call_task_groups` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=143665287 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auto_call_templates`
--

DROP TABLE IF EXISTS `auto_call_templates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auto_call_templates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `code` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `description` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `parameters` json DEFAULT NULL COMMENT '(DC2Type:json)',
  `scenario_code` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `auto_call_template_code_idx` (`code`),
  KEY `idx__auto_call_templates__type` (`type`)
) ENGINE=InnoDB AUTO_INCREMENT=1050 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `available_to_assign_roles`
--

DROP TABLE IF EXISTS `available_to_assign_roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `available_to_assign_roles` (
  `role_id` int(11) NOT NULL,
  `available_to_assign_role_id` int(11) NOT NULL,
  PRIMARY KEY (`role_id`,`available_to_assign_role_id`),
  KEY `IDX_D8C79D3ED60322AC` (`role_id`),
  KEY `IDX_D8C79D3E264CC6D9` (`available_to_assign_role_id`),
  CONSTRAINT `FK_D8C79D3E264CC6D9` FOREIGN KEY (`available_to_assign_role_id`) REFERENCES `roles` (`id`),
  CONSTRAINT `FK_D8C79D3ED60322AC` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `avatarnica_image_identities`
--

DROP TABLE IF EXISTS `avatarnica_image_identities`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `avatarnica_image_identities` (
  `filename` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `identity` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`filename`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `average_rating_history`
--

DROP TABLE IF EXISTS `average_rating_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `average_rating_history` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `average_rating_value` decimal(5,4) DEFAULT NULL,
  `average_rating_count` int(11) NOT NULL DEFAULT '0',
  `average_rating_created_at` datetime DEFAULT NULL,
  `average_rating_show` tinyint(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `idx__average_rating_history__place_id` (`place_id`),
  CONSTRAINT `fk__average_rating_history__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=12951592 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_accounting_client_id_corrections`
--

DROP TABLE IF EXISTS `billing_accounting_client_id_corrections`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_accounting_client_id_corrections` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `acceptor_client_id` int(11) NOT NULL COMMENT 'acceptor client id',
  `donor_client_id` int(11) DEFAULT NULL COMMENT 'donor client id',
  `type` smallint(6) NOT NULL COMMENT 'type',
  `amount` decimal(12,2) NOT NULL COMMENT 'amount',
  `currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'currency',
  `ticket_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ticket id',
  `admin_id` int(11) NOT NULL COMMENT 'admin user id',
  `updated_at` datetime NOT NULL COMMENT 'updated at',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx__billing_accounting_client_id_corrections__created_at` (`created_at`),
  KEY `idx__billing_accounting_client_id_corrections__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=954087 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_docs`
--

DROP TABLE IF EXISTS `billing_docs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_docs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `kind` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Event type',
  `external_obj_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `external_event_ref` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'External event identity',
  `event_at` datetime NOT NULL COMMENT 'Time event dispatched',
  `service` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Service that dispatched event',
  `service_user_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'External service user ID',
  `data` json NOT NULL COMMENT 'Event data',
  `journal_entries` json DEFAULT NULL COMMENT 'Billing entries',
  `tags` json DEFAULT NULL COMMENT 'Optional list of tags',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Document status',
  `created_at` datetime NOT NULL COMMENT 'Time document created',
  `updated_at` datetime NOT NULL COMMENT 'Time document updated',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__billing_docs__external_obj_id__external_event_ref` (`external_obj_id`,`external_event_ref`),
  KEY `idx__billing_docs__external_obj_id` (`external_obj_id`) USING BTREE,
  KEY `idx__billing_docs__created_at` (`created_at`) USING BTREE,
  KEY `idx__billing_docs__updated_at` (`updated_at`) USING BTREE,
  KEY `idx__billing_docs__event_at` (`event_at`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=4547166667 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_docs_state`
--

DROP TABLE IF EXISTS `billing_docs_state`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_docs_state` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `external_object_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `billed_at` datetime DEFAULT NULL COMMENT 'Date billed at',
  `billed_version` int(11) unsigned DEFAULT NULL COMMENT 'Total number of times order was billed',
  `created_at` datetime NOT NULL COMMENT 'Time entry created',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Time entry updated',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__billing_docs_state__external_object_id` (`external_object_id`),
  KEY `idx__billing_docs_state__created_at` (`created_at`) USING BTREE,
  KEY `idx__billing_docs_state__updated_at` (`updated_at`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=632187967 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_export_commission_buffer`
--

DROP TABLE IF EXISTS `billing_export_commission_buffer`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_export_commission_buffer` (
  `transaction_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `orig_transaction_id` int(10) unsigned NOT NULL,
  `service_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'By default orderNr, but sometimes startrek tickerId',
  `dt` datetime NOT NULL COMMENT 'transaction datetime',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `client_id` int(10) unsigned NOT NULL COMMENT 'billing clientId',
  `transaction_currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'currency for payment',
  `commission_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'amount of commission',
  `promocode_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Not used, always is 0',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ð¢Ð¸Ð¿ ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸ (DC2Type:commission_product_type)',
  `total_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'amount of commission, eq commission_sum',
  `service_id` int(10) unsigned DEFAULT NULL COMMENT 'billing serviceId',
  `identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°',
  `payload` json DEFAULT NULL COMMENT 'Extra data for commission',
  PRIMARY KEY (`transaction_id`),
  KEY `idx__billing_export_commission_buffer__service_order_id` (`service_order_id`),
  KEY `idx__billing_export_commissions_buffer__dt` (`dt`),
  KEY `idx__billing_export_commissions_buffer__client_id__dt` (`client_id`,`dt`),
  KEY `idx__billing_export_commission_buffer__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=478221867 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_export_commission_buffer_temp`
--

DROP TABLE IF EXISTS `billing_export_commission_buffer_temp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_export_commission_buffer_temp` (
  `transaction_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `orig_transaction_id` int(10) unsigned NOT NULL,
  `service_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'By default orderNr, but sometimes startrek tickerId',
  `dt` datetime NOT NULL COMMENT 'transaction datetime',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `client_id` int(10) unsigned NOT NULL COMMENT 'billing clientId',
  `transaction_currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'currency for payment',
  `commission_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'amount of commission',
  `promocode_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Not used, always is 0',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ð¢Ð¸Ð¿ ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸ (DC2Type:commission_product_type)',
  `total_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'amount of commission, eq commission_sum',
  `service_id` int(10) unsigned DEFAULT NULL COMMENT 'billing serviceId',
  `identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°',
  PRIMARY KEY (`transaction_id`),
  KEY `idx__billing_export_commission_buffer_temp__service_order_id` (`service_order_id`),
  KEY `idx__billing_export_commissions_buffer_temp__dt` (`dt`),
  KEY `idx__billing_export_commissions_buffer_temp__client_id__dt` (`client_id`,`dt`),
  KEY `idx__billing_export_commission_buffer_temp__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1164258 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_export_commissions`
--

DROP TABLE IF EXISTS `billing_export_commissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_export_commissions` (
  `transaction_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `orig_transaction_id` int(10) unsigned NOT NULL,
  `service_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `dt` datetime NOT NULL,
  `client_id` int(10) unsigned NOT NULL,
  `transaction_currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:currency_type)',
  `commission_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL,
  `promocode_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ð¢Ð¸Ð¿ ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸ (DC2Type:commission_product_type)',
  `total_sum` varchar(250) COLLATE utf8_unicode_ci NOT NULL,
  `service_id` int(10) unsigned DEFAULT NULL,
  `identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°',
  `actual` tinyint(1) NOT NULL DEFAULT '0',
  `payload` json DEFAULT NULL COMMENT 'Extra data for commission',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`transaction_id`),
  KEY `idx__billing_export_commissions__service_order_id` (`service_order_id`),
  KEY `idx__billing_export_commissions__dt` (`dt`),
  KEY `idx__billing_export_commissions__client_id__dt` (`client_id`,`dt`),
  KEY `idx__billing_export_payments__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=478220882 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Is actual record for balance';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_export_payment_buffer`
--

DROP TABLE IF EXISTS `billing_export_payment_buffer`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_export_payment_buffer` (
  `transaction_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `service_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'By default orderNr, but sometimes startrek tickerId',
  `service_id` int(10) unsigned NOT NULL COMMENT 'billing serviceId',
  `dt` datetime NOT NULL COMMENT 'transaction datetime',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `client_id` int(10) unsigned NOT NULL COMMENT 'billing clientId',
  `paysys_partner_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Billing payment system',
  `transaction_type` enum('payment','refund') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:payment_transaction_type)',
  `payment_id` int(10) unsigned NOT NULL COMMENT 'For payment eq transactionId, for refund - transactionId of payment for refund',
  `payload` json NOT NULL COMMENT 'Additional data for analytics',
  `payment_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Billing payment types',
  `product` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:payment_product_type)',
  `value_amount` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Payment amount',
  `commission` varchar(250) COLLATE utf8_unicode_ci NOT NULL DEFAULT '0.00' COMMENT 'Commission amount',
  `value_currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Currency amount',
  `identity` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'identity for internal system uses',
  `payment_terminal_id` varchar(250) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment terminal id',
  PRIMARY KEY (`transaction_id`),
  KEY `idx__billing_export_payment_buffer__service_order_id` (`service_order_id`),
  KEY `idx__billing_export_payments_buffer__dt` (`dt`),
  KEY `idx__billing_export_payments_buffer__client_id__dt` (`client_id`,`dt`),
  KEY `idx__billing_export_payment_buffer__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1265156337 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_export_payment_buffer_temp`
--

DROP TABLE IF EXISTS `billing_export_payment_buffer_temp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_export_payment_buffer_temp` (
  `transaction_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `service_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'By default orderNr, but sometimes startrek tickerId',
  `service_id` int(10) unsigned NOT NULL COMMENT 'billing serviceId',
  `dt` datetime NOT NULL COMMENT 'transaction datetime',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `client_id` int(10) unsigned NOT NULL COMMENT 'billing clientId',
  `paysys_partner_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Billing payment system',
  `transaction_type` enum('payment','refund') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:payment_transaction_type)',
  `payment_id` int(10) unsigned NOT NULL COMMENT 'For payment eq transactionId, for refund - transactionId of payment for refund',
  `payload` json NOT NULL COMMENT 'Additional data for analytics',
  `payment_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Billing payment types',
  `product` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:payment_product_type)',
  `value_amount` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Payment amount',
  `commission` varchar(250) COLLATE utf8_unicode_ci NOT NULL DEFAULT '0.00' COMMENT 'Commission amount',
  `value_currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Currency amount',
  `identity` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'identity for internal system uses',
  `payment_terminal_id` varchar(250) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment terminal id',
  PRIMARY KEY (`transaction_id`),
  KEY `idx__billing_export_payment_buffer_temp__service_order_id` (`service_order_id`),
  KEY `idx__billing_export_payments_buffer_temp__dt` (`dt`),
  KEY `idx__billing_export_payments_buffer_temp__client_id__dt` (`client_id`,`dt`),
  KEY `idx__billing_export_payment_buffer_temp__created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_export_payments`
--

DROP TABLE IF EXISTS `billing_export_payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_export_payments` (
  `transaction_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `service_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `service_id` int(10) unsigned NOT NULL,
  `dt` datetime NOT NULL,
  `client_id` int(10) unsigned NOT NULL,
  `paysys_partner_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `transaction_type` enum('payment','refund') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:payment_transaction_type)',
  `payment_id` int(10) unsigned NOT NULL,
  `payload` json NOT NULL,
  `payment_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Billing payment types',
  `product` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:payment_product_type)',
  `value_amount` varchar(250) COLLATE utf8_unicode_ci NOT NULL,
  `commission` varchar(250) COLLATE utf8_unicode_ci NOT NULL DEFAULT '0.00' COMMENT 'Commission amount',
  `value_currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:currency_type)',
  `identity` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `payment_terminal_id` varchar(250) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment terminal id',
  `actual` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`transaction_id`),
  KEY `idx__billing_export_payments__service_order_id` (`service_order_id`),
  KEY `idx__billing_export_payments__dt` (`dt`),
  KEY `idx__billing_export_payments__client_id__dt` (`client_id`,`dt`),
  KEY `idx__billing_export_payments__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1265153407 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Is actual record for balance';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_payment_order_courier_events`
--

DROP TABLE IF EXISTS `billing_payment_order_courier_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_payment_order_courier_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `payment_order_id` int(11) NOT NULL,
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Status',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__billing_courier_events__payment_order_id` (`payment_order_id`),
  KEY `idx__billing_payment_order_courier_events__created_at` (`created_at`),
  KEY `idx__billing_payment_order_courier_events__updated_at` (`updated_at`),
  CONSTRAINT `_fk__billing_courier_events__payment_order_id` FOREIGN KEY (`payment_order_id`) REFERENCES `billing_payment_orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5772753 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Status of courier payment events of payment order';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_payment_order_courier_payment_events`
--

DROP TABLE IF EXISTS `billing_payment_order_courier_payment_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_payment_order_courier_payment_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `payment_order_detail_id` bigint(20) unsigned NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__billing_courier_payment_events__payment_order_detail_id` (`payment_order_detail_id`),
  KEY `idx__billing_payment_order_courier_payment_events__created_at` (`created_at`),
  KEY `idx__billing_payment_order_courier_payment_events__updated_at` (`updated_at`),
  CONSTRAINT `_fk__billing_courier_payment_events__payment_order_detail_id` FOREIGN KEY (`payment_order_detail_id`) REFERENCES `billing_payment_order_details` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7479228 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='status of courier payment event, if record exists event was emitted';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_payment_order_details`
--

DROP TABLE IF EXISTS `billing_payment_order_details`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_payment_order_details` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `payment_order_id` int(11) NOT NULL,
  `trust_refund_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'id of refund',
  `trust_payment_id` int(10) unsigned NOT NULL COMMENT 'id of payment (in most cases billing_export_payments.transaction_id)',
  `service_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'service order id (in most cases orders.orderNr)',
  `sum` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'payment sum',
  `currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'currency',
  `payment_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'payment type',
  `transaction_type` enum('payment','refund') COLLATE utf8_unicode_ci NOT NULL COMMENT 'transaction type(DC2Type:payment_order_detail_transaction_type)',
  `handling_time` datetime NOT NULL COMMENT 'handling time',
  `payment_time` datetime NOT NULL COMMENT 'payment time(in most cases billing_export_payments.dt)',
  `contract_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'contract id (for places its place_billing_contracts.balance_internal_id)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__billing_payment_order_details__payment_order_id` (`payment_order_id`),
  KEY `idx__billing_payment_order_details__trust_payment_id` (`trust_payment_id`),
  KEY `idx__billing_payment_order_details__created_at` (`created_at`),
  KEY `idx__billing_payment_order_details__updated_at` (`updated_at`),
  CONSTRAINT `__fk__billing_payment_order_details__payment_order_id` FOREIGN KEY (`payment_order_id`) REFERENCES `billing_payment_orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=71427899627 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='details of payment orders';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_payment_order_reports`
--

DROP TABLE IF EXISTS `billing_payment_order_reports`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_payment_order_reports` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `payment_order_id` int(11) DEFAULT NULL,
  `status` enum('awaiting_for_generation','awaiting_for_sending','sending','sent','error') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:payment_order_report_status)',
  `error` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `client_id` int(11) DEFAULT NULL,
  `emails` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `month_date` datetime DEFAULT NULL COMMENT 'day of report month',
  PRIMARY KEY (`id`),
  KEY `idx__billing_payment_order_reports__payment_order_id` (`payment_order_id`),
  KEY `idx__billing_payment_order_reports__created_at` (`created_at`),
  KEY `idx__billing_payment_order_reports__updated_at` (`updated_at`),
  CONSTRAINT `__FK_FE820A52CD592F50` FOREIGN KEY (`payment_order_id`) REFERENCES `billing_payment_orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14249358 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_payment_order_reports_to_payment_orders`
--

DROP TABLE IF EXISTS `billing_payment_order_reports_to_payment_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_payment_order_reports_to_payment_orders` (
  `report_id` int(11) NOT NULL,
  `payment_order_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`report_id`,`payment_order_id`),
  UNIQUE KEY `ux__billing_payment_order_reports_to_payment_orders__order_id` (`payment_order_id`),
  KEY `idx__billing_payment_order_reports_to_payment_orders__report_id` (`report_id`),
  KEY `idx__billing_payment_order_reports_to_payment_orders__created_at` (`created_at`),
  KEY `idx__billing_payment_order_reports_to_payment_orders__updated_at` (`updated_at`),
  CONSTRAINT `fk__billing_payment_order_reports_to_payment_orders__order_id` FOREIGN KEY (`payment_order_id`) REFERENCES `billing_payment_orders` (`id`),
  CONSTRAINT `fk__billing_payment_order_reports_to_payment_orders__report_id` FOREIGN KEY (`report_id`) REFERENCES `billing_payment_order_reports` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_payment_orders`
--

DROP TABLE IF EXISTS `billing_payment_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_payment_orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tran_time` datetime NOT NULL COMMENT 'transaction time',
  `event_time` datetime NOT NULL COMMENT 'event time',
  `status` enum('CANCELLED','STARTED','DONE') COLLATE utf8_unicode_ci NOT NULL COMMENT 'status(DC2Type:payment_order_status)',
  `bank_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'bank order id',
  `payment_batch_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'payment batch id',
  `description` varchar(3000) COLLATE utf8_unicode_ci NOT NULL COMMENT 'description',
  `oebsstatus` enum('CREATED','TRANSMITTED','CONFIRMED','RECONCILED','VOID','RETURNED') COLLATE utf8_unicode_ci NOT NULL COMMENT 'OEBS Status(DC2Type:payment_order_oebs_status)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `sum` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'sum of whole payment order',
  `service_id` int(11) DEFAULT NULL COMMENT 'service id',
  `hash` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'MD5 hash of description',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__billing_payment_orders__hash` (`hash`),
  KEY `idx__billing_payment_order__bank_order_id` (`bank_order_id`),
  KEY `idx__billing_payment_order__payment_batch_id` (`payment_batch_id`),
  KEY `idx__billing_payment_orders__created_at` (`created_at`),
  KEY `idx__billing_payment_orders__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=16026922 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brand_additional_settings`
--

DROP TABLE IF EXISTS `brand_additional_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brand_additional_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `brand_id` int(11) NOT NULL,
  `pickup_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'not_specified',
  `payment_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'not_specified',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__brand_additional_settings__brand_id` (`brand_id`),
  KEY `idx__brand_additional_settings__created_at` (`created_at`),
  KEY `idx__brand_additional_settings__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=19622 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brand_log`
--

DROP TABLE IF EXISTS `brand_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brand_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `brand_id` int(10) unsigned NOT NULL,
  `region_id` int(10) unsigned NOT NULL,
  `admin_id` int(11) DEFAULT NULL,
  `enabled` tinyint(1) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `disable_details_comment` longtext COLLATE utf8_unicode_ci,
  `disable_details_available_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `disable_details_status` int(11) DEFAULT NULL,
  `disable_details_reason` int(11) DEFAULT NULL,
  `disable_details_last_call_date` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `disable_details_vendor_user_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_BRAND_ID` (`brand_id`),
  KEY `IDX_REGION_ID` (`region_id`),
  KEY `IDX_ADMIN_ID` (`admin_id`),
  CONSTRAINT `FK_ADMIN_ID` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `FK_REGION_ID` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=475337 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brand_log_aggregation`
--

DROP TABLE IF EXISTS `brand_log_aggregation`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brand_log_aggregation` (
  `brand_id` int(10) unsigned NOT NULL,
  `region_id` int(10) unsigned NOT NULL,
  `latest_brand_log_id` int(11) NOT NULL,
  PRIMARY KEY (`brand_id`,`region_id`),
  UNIQUE KEY `ux__brand_log_aggregation__latest_brand_log_id` (`latest_brand_log_id`),
  KEY `idx__brand_log_aggregation__region_id` (`region_id`),
  CONSTRAINT `fk__brand_log_aggregation__latest_brand_log_id` FOREIGN KEY (`latest_brand_log_id`) REFERENCES `brand_log` (`id`),
  CONSTRAINT `fk__brand_log_aggregation__region_id` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brand_place_types`
--

DROP TABLE IF EXISTS `brand_place_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brand_place_types` (
  `brand_id` int(10) unsigned NOT NULL,
  `type_id` tinyint(3) unsigned NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`brand_id`,`type_id`),
  KEY `fk__brand_place_types__type_id` (`type_id`),
  CONSTRAINT `fk__brand_place_types__type_id` FOREIGN KEY (`type_id`) REFERENCES `place_types_list` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brand_prices_thresholds`
--

DROP TABLE IF EXISTS `brand_prices_thresholds`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brand_prices_thresholds` (
  `brand_id` int(11) unsigned NOT NULL,
  `region_id` int(11) unsigned NOT NULL,
  `price_category_id` int(11) NOT NULL,
  `is_generated` tinyint(3) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`brand_id`,`region_id`),
  KEY `fk__brand_prices_thresholds__region_id` (`region_id`),
  KEY `fk__brand_prices_thresholds__price_category_id` (`price_category_id`),
  CONSTRAINT `fk__brand_prices_thresholds__price_category_id` FOREIGN KEY (`price_category_id`) REFERENCES `price_categories` (`id`),
  CONSTRAINT `fk__brand_prices_thresholds__region_id` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brand_region_delivery_conditions`
--

DROP TABLE IF EXISTS `brand_region_delivery_conditions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brand_region_delivery_conditions` (
  `time_of_arrival` smallint(6) NOT NULL,
  `courier_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'pedestrian',
  `region_id` int(11) NOT NULL,
  `delivery_condition_id` int(11) NOT NULL,
  `brand_id` int(11) NOT NULL,
  `enabled` tinyint(1) NOT NULL,
  PRIMARY KEY (`brand_id`,`region_id`,`delivery_condition_id`,`time_of_arrival`,`courier_type`),
  KEY `idx__brand_region_delivery_conditions__brand_id__region_id` (`brand_id`,`region_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brand_settings`
--

DROP TABLE IF EXISTS `brand_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brand_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `brand_id` int(11) NOT NULL,
  `type_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `value` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__brand_settings__brand_id` (`brand_id`),
  KEY `idx__brand_settings__brand_id__type_id` (`brand_id`,`type_id`),
  KEY `idx__brand_settings__created_at` (`created_at`),
  KEY `idx__brand_settings__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=129594 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brand_ui`
--

DROP TABLE IF EXISTS `brand_ui`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brand_ui` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `brand_id` int(11) NOT NULL,
  `menu_item_picture_scale` enum('aspect_fit','aspect_fill') COLLATE utf8_unicode_ci DEFAULT 'aspect_fill' COMMENT '(DC2Type:picture_scale_type)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `light_background` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `dark_background` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `small_logo_light_background_id` int(11) DEFAULT NULL,
  `medium_logo_light_background_id` int(11) DEFAULT NULL,
  `large_logo_light_background_id` int(11) DEFAULT NULL,
  `small_logo_dark_background_id` int(11) DEFAULT NULL,
  `medium_logo_dark_background_id` int(11) DEFAULT NULL,
  `large_logo_dark_background_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__brand_ui__brand_id` (`brand_id`),
  KEY `idx__brand_ui__created_at` (`created_at`),
  KEY `idx__brand_ui__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=20502 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `brands`
--

DROP TABLE IF EXISTS `brands`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `brands` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `notify_emails` text COLLATE utf8_unicode_ci COMMENT '(DC2Type:simple_array)',
  `category_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'default',
  `is_stock_supported` tinyint(1) NOT NULL DEFAULT '0',
  `surge_ignore` tinyint(1) NOT NULL DEFAULT '0',
  `is_store` tinyint(1) NOT NULL DEFAULT '0',
  `bit_settings` int(10) unsigned NOT NULL DEFAULT '1' COMMENT '(DC2Type:bit_mask)',
  `fast_food_notify_time_shift` int(11) DEFAULT NULL,
  `slug` varchar(1000) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `editorial_verdict` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `editorial_description` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `brand_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'not_qsr',
  `business_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'restaurant',
  PRIMARY KEY (`id`),
  KEY `brands_is_stock_supported_index` (`is_stock_supported`),
  KEY `idx__brands__slug` (`slug`),
  KEY `idx__brands__name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=170954 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `call_invocations`
--

DROP TABLE IF EXISTS `call_invocations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `call_invocations` (
  `uuid` varchar(36) COLLATE utf8_unicode_ci NOT NULL,
  `order_nr` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `callee_id` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `caller_id` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `callee_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `link` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `sent_at` datetime NOT NULL,
  `status` int(11) NOT NULL,
  PRIMARY KEY (`uuid`),
  KEY `idx_call_invocation_order_nr` (`order_nr`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cart_additional_info`
--

DROP TABLE IF EXISTS `cart_additional_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cart_additional_info` (
  `cart_id` bigint(20) NOT NULL COMMENT '(DC2Type:int64)',
  `user_id` int(11) NOT NULL,
  `taxi_user_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `locale` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`cart_id`),
  KEY `idx__cart_additional_info__cart_id` (`cart_id`),
  KEY `idx__cart_additional_info__user_id` (`user_id`),
  KEY `idx__cart_additional_info__created_at` (`created_at`),
  KEY `idx__cart_additional_info__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cart_items`
--

DROP TABLE IF EXISTS `cart_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cart_items` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `cart_id` bigint(20) NOT NULL,
  `place_menu_item_id` int(11) NOT NULL,
  `price` int(11) NOT NULL,
  `quantity` int(11) NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `cart_promo_id` bigint(20) DEFAULT NULL,
  `decimal_price` decimal(18,4) NOT NULL DEFAULT '0.0000',
  PRIMARY KEY (`id`),
  KEY `IDX_BEF484451AD5CDBF` (`cart_id`),
  KEY `IDX_BEF484454B01DD59` (`place_menu_item_id`),
  KEY `fk__cart_items__cart_promo_id` (`cart_promo_id`),
  KEY `idx__cart_items__updated_at` (`updated_at`),
  KEY `idx__cart_items__deleted_at` (`deleted_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1742510677 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cart_items_menu_options`
--

DROP TABLE IF EXISTS `cart_items_menu_options`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cart_items_menu_options` (
  `cart_item_id` bigint(20) NOT NULL,
  `place_menu_option_id` bigint(20) unsigned NOT NULL,
  `quantity` tinyint(3) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`cart_item_id`,`place_menu_option_id`),
  KEY `IDX_68F35CD3E9B59A59` (`cart_item_id`),
  KEY `IDX_68F35CD395824C77` (`place_menu_option_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cart_promos`
--

DROP TABLE IF EXISTS `cart_promos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cart_promos` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `cart_id` bigint(20) NOT NULL,
  `promo_id` int(10) unsigned NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `quantity` int(10) unsigned NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `discount` int(11) unsigned DEFAULT NULL,
  `item_discount` int(10) unsigned DEFAULT NULL,
  `decimal_discount` decimal(18,4) DEFAULT NULL,
  `decimal_item_discount` decimal(18,4) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk__cart_promos__cart_id` (`cart_id`),
  KEY `fk__cart_promos__promo_id` (`promo_id`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=79948882 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `carts`
--

DROP TABLE IF EXISTS `carts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `carts` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `session_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `place_id` int(11) DEFAULT NULL,
  `subtotal` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `status_id` int(11) NOT NULL,
  `total` int(11) NOT NULL DEFAULT '0',
  `delivery_fee` int(11) NOT NULL DEFAULT '0',
  `delivery_date` datetime DEFAULT NULL,
  `promocode_id` int(11) DEFAULT NULL,
  `coupon` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Promocode or taxi coupon code',
  `discount` int(10) unsigned NOT NULL DEFAULT '0',
  `outcome_discount` int(11) unsigned NOT NULL DEFAULT '0',
  `shipping_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'delivery',
  `decimal_subtotal` decimal(18,4) NOT NULL DEFAULT '0.0000',
  `decimal_delivery_fee` decimal(18,4) NOT NULL DEFAULT '0.0000',
  `decimal_discount` decimal(18,4) NOT NULL DEFAULT '0.0000',
  `decimal_total` decimal(18,4) NOT NULL DEFAULT '0.0000',
  `decimal_outcome_discount` decimal(18,4) NOT NULL DEFAULT '0.0000',
  PRIMARY KEY (`id`),
  KEY `IDX_4E004AACDA6A219` (`place_id`),
  KEY `IDX_4E004AACA76ED395` (`user_id`),
  KEY `IDX_4E004AACC76C06D9` (`promocode_id`),
  KEY `session_idx` (`session_id`),
  KEY `idx__carts__created_at` (`created_at`),
  KEY `idx__carts__updated_at` (`updated_at`),
  KEY `idx__carts__shipping_type` (`shipping_type`)
) ENGINE=InnoDB AUTO_INCREMENT=1201430049 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cheque_storage_devices`
--

DROP TABLE IF EXISTS `cheque_storage_devices`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cheque_storage_devices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `device_id` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `last_cheque_number` int(11) NOT NULL,
  `expire_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `cheque_storage_device_id` (`device_id`)
) ENGINE=InnoDB AUTO_INCREMENT=59 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `client_request_contexts`
--

DROP TABLE IF EXISTS `client_request_contexts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `client_request_contexts` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `session_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `delivery_time` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `client_timezone` varchar(64) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'Europe/Moscow',
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__client_request_contexts__session_id` (`session_id`),
  KEY `idx__client_request_contexts__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=16042658082 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_compensation_packs`
--

DROP TABLE IF EXISTS `complaint_compensation_packs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_compensation_packs` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `situation_id` int(11) DEFAULT NULL,
  `available_source` smallint(6) NOT NULL,
  `max_cost` int(11) DEFAULT NULL,
  `min_cost` int(11) DEFAULT NULL,
  `compensations_count` int(11) DEFAULT '0',
  `payment_method_id` int(11) DEFAULT NULL,
  `enable` tinyint(1) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `access_mask_for_order_flow` smallint(6) unsigned NOT NULL DEFAULT '15',
  PRIMARY KEY (`id`),
  KEY `IDX_878F0D543408E8AF` (`situation_id`),
  CONSTRAINT `FK_878F0D543408E8AF` FOREIGN KEY (`situation_id`) REFERENCES `complaint_situations` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1061 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_compensation_types`
--

DROP TABLE IF EXISTS `complaint_compensation_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_compensation_types` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pack_id` int(11) NOT NULL,
  `description` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `enable` tinyint(1) DEFAULT NULL,
  `compensation_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `rate` smallint(6) DEFAULT NULL,
  `full_refund` tinyint(1) DEFAULT NULL,
  `notification` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_6741E4431919B217` (`pack_id`),
  CONSTRAINT `FK_DEBB81651919B217` FOREIGN KEY (`pack_id`) REFERENCES `complaint_compensation_packs` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1188 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_compensations`
--

DROP TABLE IF EXISTS `complaint_compensations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_compensations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type_id` int(11) DEFAULT NULL,
  `complaint_id` int(11) DEFAULT NULL,
  `promocode_id` int(11) DEFAULT NULL,
  `initiator_id` int(11) DEFAULT NULL,
  `amount` double DEFAULT NULL,
  `status` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `maas_compensation_type` json DEFAULT NULL COMMENT 'Compensation type received from MaaS. This field not empty is a flag of MaaS-driven compensation.',
  `maas_pack_id` int(11) DEFAULT NULL COMMENT 'Compensation Pack ID received from MaaS.',
  `coupon` json DEFAULT NULL COMMENT 'Information about coupon',
  PRIMARY KEY (`id`),
  KEY `IDX_9E26EF37C54C8C93` (`type_id`),
  KEY `IDX_9E26EF37EDAE188E` (`complaint_id`),
  KEY `IDX_9E26EF37C76C06D9` (`promocode_id`),
  KEY `IDX_9E26EF377DB3B714` (`initiator_id`),
  KEY `idx__complaint_compensations__created_at` (`created_at`),
  KEY `idx__complaint_compensations__updated_at` (`updated_at`),
  CONSTRAINT `FK_9E26EF377DB3B714` FOREIGN KEY (`initiator_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `FK_9E26EF37C54C8C93` FOREIGN KEY (`type_id`) REFERENCES `complaint_compensation_types` (`id`),
  CONSTRAINT `FK_9E26EF37C76C06D9` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`),
  CONSTRAINT `FK_9E26EF37EDAE188E` FOREIGN KEY (`complaint_id`) REFERENCES `complaints` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=45166562 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_photos`
--

DROP TABLE IF EXISTS `complaint_photos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_photos` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `complaint_id` int(11) NOT NULL,
  `file_path` varchar(255) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx__complaint_photos__complaint_id` (`complaint_id`),
  KEY `idx__complaint_photos__created_at` (`created_at`),
  KEY `idx__complaint_photos__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=3191342 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_request_log`
--

DROP TABLE IF EXISTS `complaint_request_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_request_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `mark` int(11) DEFAULT NULL,
  `predefined_comments` json NOT NULL,
  `message` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `zendesk_ticket_id` int(11) DEFAULT NULL,
  `confirmed` tinyint(1) NOT NULL,
  `created_at` datetime NOT NULL,
  `delivery_date` datetime NOT NULL,
  `delivered_date` datetime DEFAULT NULL,
  `composition` json NOT NULL,
  `promo` json NOT NULL,
  `person_count` int(11) NOT NULL,
  `payments` json NOT NULL,
  `total_cost` int(11) NOT NULL,
  `comment` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `promocode_used` tinyint(1) NOT NULL,
  `reliability` double NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__complaint_request_log__created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_response_log`
--

DROP TABLE IF EXISTS `complaint_response_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_response_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  `auto` tinyint(1) NOT NULL,
  `urgent` tinyint(1) NOT NULL,
  `for_control` tinyint(1) NOT NULL,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `complaint_groups` json NOT NULL,
  `complaint_situations` json NOT NULL,
  `probabilities` json NOT NULL,
  `situations` json NOT NULL,
  `dishes` json NOT NULL,
  `version` int(11) DEFAULT NULL,
  `model_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__complaint_response_log__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=68013302 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_restaurant_email_tasks`
--

DROP TABLE IF EXISTS `complaint_restaurant_email_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_restaurant_email_tasks` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа',
  `status` smallint(6) NOT NULL COMMENT 'Статус задачи. 0 - новый, 1 - в процессе, 2 - завершено.',
  `last_event_fired_at` datetime NOT NULL COMMENT 'Когда был сброшен таймер для отправки email',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx__complaint_restaurant_email_tasks__order_nr__status` (`order_nr`,`status`),
  KEY `idx__complaint_restaurant_email_tasks__status__event_fired_at` (`status`,`last_event_fired_at`),
  KEY `idx__complaint_restaurant_email_tasks__created_at` (`created_at`),
  KEY `idx__complaint_restaurant_email_tasks__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=408187 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_situation_types`
--

DROP TABLE IF EXISTS `complaint_situation_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_situation_types` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `priority` int(11) NOT NULL DEFAULT '0',
  `enable` tinyint(1) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `access_mask_for_order_flow` smallint(6) unsigned NOT NULL DEFAULT '15',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1002 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaint_situations`
--

DROP TABLE IF EXISTS `complaint_situations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaint_situations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type_id` int(11) NOT NULL,
  `code` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `violation_level` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'low',
  `responsible` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'place',
  `need_confirmation` tinyint(1) DEFAULT NULL,
  `priority` int(11) NOT NULL DEFAULT '1000',
  `enable` tinyint(1) DEFAULT NULL,
  `is_system` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `access_mask_for_order_flow` smallint(6) unsigned NOT NULL DEFAULT '15',
  PRIMARY KEY (`id`),
  UNIQUE KEY `complaint_situation_code_idx` (`code`),
  KEY `IDX_2B54B783C54C8C93` (`type_id`),
  CONSTRAINT `FK_D784653262FDBFDB` FOREIGN KEY (`type_id`) REFERENCES `complaint_situation_types` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1020 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `complaints`
--

DROP TABLE IF EXISTS `complaints`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `complaints` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) DEFAULT NULL,
  `situation_id` int(11) DEFAULT NULL,
  `comment` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `confirmed` tinyint(1) NOT NULL DEFAULT '0',
  `source` smallint(6) NOT NULL,
  `extra_data` longtext COLLATE utf8_unicode_ci,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `zendesk_ticket_id` int(11) DEFAULT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  `chatterbox_ticket_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `maas_matrix_id` int(11) DEFAULT NULL COMMENT 'Matrix ID received from MaaS.',
  `maas_situation_id` int(11) DEFAULT NULL COMMENT 'Situation ID received from MaaS. This field not empty is a flag of MaaS-driven complaint.',
  `maas_title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Situation Title received from MaaS.',
  `external_comment` varchar(5000) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð’Ð½ÐµÑˆÐ½Ð¸Ð¹ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹. ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð² Ð¿Ð¸ÑÑŒÐ¼Ðµ Ñ€ÐµÑÑ‚Ð¾Ñ€Ð°Ð½Ñƒ.',
  PRIMARY KEY (`id`),
  KEY `IDX_A05AAF3A8D9F6D38` (`order_id`),
  KEY `IDX_A05AAF3A3408E8AF` (`situation_id`),
  KEY `idx_complaints_created_at` (`created_at`),
  KEY `idx__complaints__maas_situation_id` (`maas_situation_id`),
  KEY `idx__complaints__updated_at` (`updated_at`),
  CONSTRAINT `__FK_559ECC143408E8AF` FOREIGN KEY (`situation_id`) REFERENCES `complaint_situations` (`id`),
  CONSTRAINT `__FK_559ECC148D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=44117627 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `content_links`
--

DROP TABLE IF EXISTS `content_links`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `content_links` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `sort` tinyint(3) unsigned NOT NULL DEFAULT '100',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `country_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__content_links__country_id` (`country_id`),
  CONSTRAINT `fk__content_links__country_id` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=57 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `countries`
--

DROP TABLE IF EXISTS `countries`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `countries` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `code` varchar(2) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `name_in_yandex_forms` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `currency_code` char(3) COLLATE utf8_unicode_ci NOT NULL,
  `user_agreement_link` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `promo_codes_agreement_link` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `alpha3_code` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__countries__code` (`code`),
  UNIQUE KEY `ux__countries__name_in_yandex_forms` (`name_in_yandex_forms`),
  KEY `fk__countries__currency_code` (`currency_code`),
  CONSTRAINT `countries_ibfk_1` FOREIGN KEY (`currency_code`) REFERENCES `currencies` (`iso_code`)
) ENGINE=InnoDB AUTO_INCREMENT=79 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `country_billing_information`
--

DROP TABLE IF EXISTS `country_billing_information`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `country_billing_information` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `country_id` int(11) NOT NULL,
  `firm_id` int(11) NOT NULL,
  `billing_country_id` int(11) NOT NULL,
  `is_billing_enabled` tinyint(1) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `billing_validation_enabled` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `idx__country_billing_information__country_id` (`country_id`),
  CONSTRAINT `fk__country_billing_information__country_id` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_activation_info`
--

DROP TABLE IF EXISTS `courier_activation_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_activation_info` (
  `id` int(11) NOT NULL,
  `activated_at` datetime NOT NULL COMMENT '????-????? ????????? ???????(DC2Type:datetimetz)',
  `experiment_group` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '?????? ????????????',
  `is_experiment_group_received` tinyint(1) DEFAULT '0' COMMENT '???????? ?? ?????? ????????????',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `pool_updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Ð”Ð°Ñ‚Ð°-Ð²Ñ€ÐµÐ¼Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¿ÑƒÐ»Ð° ÐºÑƒÑ€ÑŒÐµÑ€Ð°(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_activation_info__experiment_group` (`experiment_group`),
  KEY `idx__courier_activation_info__is_experiment_group_received` (`is_experiment_group_received`),
  KEY `idx__courier_activation_info__created_at` (`created_at`),
  KEY `idx__courier_activation_info__updated_at` (`updated_at`),
  KEY `idx__courier_activation_info__pool_updated_at` (`pool_updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? ? ??????? ?????????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_activation_notifications`
--

DROP TABLE IF EXISTS `courier_activation_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_activation_notifications` (
  `id` int(11) NOT NULL,
  `registered_at` datetime DEFAULT NULL COMMENT 'Дата/время активации курьера(DC2Type:datetimetz)',
  `sent_at` datetime DEFAULT NULL COMMENT 'Дата/время отправки информации об активации курьера(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_activation_notifications__registered_at__sent_at` (`registered_at`,`sent_at`),
  CONSTRAINT `fk__courier_activation_notifications__courier_id` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Информация об отправленных курьеру нотификациях при активации';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_active_shift_state`
--

DROP TABLE IF EXISTS `courier_active_shift_state`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_active_shift_state` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) NOT NULL,
  `shift_id` bigint(20) NOT NULL COMMENT 'ID ÑÐ¼ÐµÐ½Ñ‹ Ð² CTT(DC2Type:int64)',
  `state` varchar(16) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ????? (opened, paused, closed)(DC2Type:courier_active_shift_state_status)',
  `closes_at` datetime NOT NULL COMMENT '????? ????????? ?????????? ?????(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `started_at` datetime DEFAULT NULL COMMENT '????? ?????? ?????(DC2Type:datetimetz)',
  `is_high_priority` tinyint(1) NOT NULL DEFAULT '1' COMMENT '?????????????? ?????',
  PRIMARY KEY (`id`),
  KEY `idx__order_delivery_time__shift_id` (`shift_id`),
  KEY `fk__courier_id__couriers_id` (`courier_id`),
  CONSTRAINT `__fk__courier_id__couriers_id` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4163252 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? ?? ???????? ?????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_activity_info`
--

DROP TABLE IF EXISTS `courier_activity_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_activity_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) NOT NULL,
  `service` enum('ctt') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Сервис, от которого получены данные(DC2Type:logistics_external_service)',
  `last_activity_at` datetime DEFAULT NULL COMMENT 'Дата последней активности курьера(DC2Type:datetimetz)',
  `planned_activity_at` datetime DEFAULT NULL COMMENT 'Дата запланированной активности курьера(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_activity_info__service__courier_id` (`service`,`courier_id`),
  KEY `fk__courier_activity_info__courier_id` (`courier_id`),
  CONSTRAINT `fk__courier_activity_info__courier_id` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=195196642 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Данные об активности курьеров по мнению внешних сервисов';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_additional_params`
--

DROP TABLE IF EXISTS `courier_additional_params`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_additional_params` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) NOT NULL,
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Название параметра',
  `value` longtext COLLATE utf8_unicode_ci COMMENT 'Значение параметра',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_additional_params__courier_id__name` (`courier_id`,`name`),
  KEY `idx__courier_additional_params__courier_id` (`courier_id`),
  KEY `idx__courier_additional_params__created_at` (`created_at`),
  KEY `idx__courier_additional_params__updated_at` (`updated_at`),
  CONSTRAINT `fk__courier_additional_params__courier_id` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=177962 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Дополнительные свойства курьера';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_advice_calculation_log`
--

DROP TABLE IF EXISTS `courier_advice_calculation_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_advice_calculation_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_advice_log_id` int(11) NOT NULL,
  `courier_id` int(11) NOT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ??????? ????????',
  `distance` decimal(9,3) NOT NULL COMMENT '??????????',
  `time` int(11) NOT NULL COMMENT '????? ????? ?? ?????? ??????????, ? ????????',
  `created_at` datetime NOT NULL,
  `from_latitude` decimal(10,6) NOT NULL,
  `from_longitude` decimal(10,6) NOT NULL,
  `to_latitude` decimal(10,6) NOT NULL,
  `to_longitude` decimal(10,6) NOT NULL,
  `travel_mode` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??? ????????????',
  `courier_busy` tinyint(1) DEFAULT NULL COMMENT '???? ?? ?? ??????? ???? ?? 1 ???????? ????????',
  `region_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_A1F4A16ABED77E4D` (`courier_advice_log_id`),
  KEY `idx__courier_advice_calculation_log__created_at` (`created_at`),
  CONSTRAINT `FK_A1F4A16ABED77E4D_NEW` FOREIGN KEY (`courier_advice_log_id`) REFERENCES `courier_advice_log` (`id`) ON DELETE CASCADE,
  CONSTRAINT `__FK_A1F4A16ABED77E4D` FOREIGN KEY (`courier_advice_log_id`) REFERENCES `courier_advice_log` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4277297832 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ??????? ???????? ???????? ?? ??????????? ???????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_advice_log`
--

DROP TABLE IF EXISTS `courier_advice_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_advice_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `initiator_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT 'auto' COMMENT 'Инициатор подбора курьеров',
  `priority` varchar(255) COLLATE utf8_unicode_ci DEFAULT 'high' COMMENT 'Приоритет подбора (high - плановые, low - свободные)',
  `place_arrival_time_left` int(11) DEFAULT NULL COMMENT 'Оставшееся время до прибытия в ресторан, в секундах',
  PRIMARY KEY (`id`),
  KEY `IDX_B1AD91168D9F6D38` (`order_id`),
  KEY `idx__courier_advice_log__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=401159487 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='История подбора курьеров на заказ';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_advisor_region_settings`
--

DROP TABLE IF EXISTS `courier_advisor_region_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_advisor_region_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `region_id` int(11) NOT NULL,
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Название(алиас) настройки',
  `value` longtext COLLATE utf8_unicode_ci COMMENT 'Значение настройки',
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_advisor_region_settings__region_id__name` (`region_id`,`name`)
) ENGINE=InnoDB AUTO_INCREMENT=52199 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Региональные настройки для курьерского алгоритма';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_advisor_settings`
--

DROP TABLE IF EXISTS `courier_advisor_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_advisor_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Название(алиас) настройки',
  `value` longtext COLLATE utf8_unicode_ci COMMENT 'Значение настройки',
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_advisor_settings__name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=449 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Глобальные настройки для курьерского алгоритма';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_api_courier_type_updates`
--

DROP TABLE IF EXISTS `courier_api_courier_type_updates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_api_courier_type_updates` (
  `id` int(11) NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_api_courier_type_updates__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Время обновления типа курьера';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_auto_assignments`
--

DROP TABLE IF EXISTS `courier_auto_assignments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_auto_assignments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `scheduled_at` datetime NOT NULL COMMENT '???? / ????? ????????? ?????? ??? ?????????? (???? delay ?? ???????)(DC2Type:datetimetz)',
  `delay` int(11) DEFAULT NULL COMMENT '?????????? ?? ?????????? ?????, ? ????????',
  `failed_at` datetime DEFAULT NULL COMMENT '???? / ?????, ????? ?????????????? ???? ???????? ??? ???????????(DC2Type:datetimetz)',
  `is_processed` tinyint(1) NOT NULL DEFAULT '0' COMMENT '????????? ?? ????????? ??????????????',
  `assignment_triggered_at` datetime DEFAULT NULL COMMENT '???? / ?????, ????? ??? ????? ??????? ?????????????? ???????(DC2Type:datetimetz)',
  `first_assignment_attempt_at` datetime DEFAULT NULL COMMENT 'Ð”Ð°Ñ‚Ð° Ð¸ Ð²Ñ€ÐµÐ¼Ñ Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐ¸ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ ÐºÑƒÑ€ÑŒÐµÑ€Ð°',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `is_force_reassign` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Ð˜Ð½Ð¸Ñ†Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ð»Ð¸ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð½ÑƒÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_919B8B6A8D9F6D38` (`order_id`),
  KEY `idx__courier_auto_assignments__is_processed` (`is_processed`),
  KEY `idx__courier_auto_assignments__scheduled_at` (`scheduled_at`),
  KEY `idx__courier_auto_assignments__created_at` (`created_at`),
  KEY `idx__courier_auto_assignments__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=336192267 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='???????????? ??????? ??? ????????? ?????????????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_billing_data`
--

DROP TABLE IF EXISTS `courier_billing_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_billing_data` (
  `id` int(11) NOT NULL,
  `client_id` bigint(20) DEFAULT NULL COMMENT 'ID ??????? ? ????????',
  `offer_status_last_checked_at` datetime DEFAULT NULL COMMENT '????/????? ????????? ???????? ??????? ?????? ? ????????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `outcome_offer_id` bigint(20) DEFAULT NULL COMMENT 'ID ?????? ? ????????',
  `outcome_offer_is_active` tinyint(1) NOT NULL DEFAULT '0' COMMENT '?????????? ??????',
  `income_offer_id` bigint(20) DEFAULT NULL COMMENT 'ID ?????? ? ????????',
  `income_offer_is_active` tinyint(1) NOT NULL DEFAULT '0' COMMENT '?????????? ??????',
  `income_person_id` bigint(20) DEFAULT NULL COMMENT 'ID ??????????? ? ????????, ??? ???????? ???????????? ???????? ??????',
  `outcome_person_id` bigint(20) DEFAULT NULL COMMENT 'ID ??????????? ? ????????, ??? ???????? ???????????? ????????? ??????',
  `registered_at` datetime DEFAULT NULL COMMENT '????/????? ??????????? ? ????????',
  `outcome_offer_external_id` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????? ID ??????/???????? ? ????????',
  `income_offer_external_id` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????? ID ??????/???????? ? ????????',
  `is_valid_bank_props` tinyint(1) NOT NULL DEFAULT '1' COMMENT '??????? ?????????? ?????????? ??????????',
  `last_data_synced_at` datetime DEFAULT NULL COMMENT 'Ð”Ð°Ñ‚Ð°/Ð²Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ð»Ð°Ñ‚ÐµÐ»ÑŒÑ‰Ð¸ÐºÐ¾Ð² Ñ Ð‘Ð¸Ð»Ð»Ð¸Ð½Ð³Ð¾Ð¼',
  PRIMARY KEY (`id`),
  KEY `idx__courier_billing_data__created_at` (`created_at`),
  KEY `idx__courier_billing_data__updated_at` (`updated_at`),
  CONSTRAINT `__FK_235D67E5BF396750` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????? ? ??????????? ??????? ? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_billing_data_history`
--

DROP TABLE IF EXISTS `courier_billing_data_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_billing_data_history` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) DEFAULT NULL,
  `courier_service_id` int(11) DEFAULT NULL,
  `billing_type` enum('courier_service','self_employed','self_employed_nonresident','direct') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ð¢Ð¸Ð¿ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ñ… Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ð¹ (Ð¡Ð°Ð¼Ð¾Ð·Ð°Ð½ÑÑ‚Ñ‹Ð¹ Ð¸Ð»Ð¸ ÐºÑƒÑ€ÑŒÐµÑ€ ÐºÑƒÑ€ÑŒÐµÑ€ÑÐºÐ¾Ð¹ ÑÐ»ÑƒÐ¶Ð±Ñ‹)(DC2Type:courier_billing)',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `IDX_E0A286A5E3D8151C` (`courier_id`),
  KEY `IDX_E0A286A5C86255AB` (`courier_service_id`),
  KEY `idx__courier_billing_data_history__created_at` (`created_at`),
  KEY `idx__courier_billing_data_history__updated_at` (`updated_at`),
  CONSTRAINT `FK_E0A286A5C86255AB` FOREIGN KEY (`courier_service_id`) REFERENCES `courier_services` (`id`),
  CONSTRAINT `FK_E0A286A5E3D8151C` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1269302 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ?????????? ? ???????, ???????? ?? ??????? (???????? ? ??, ??? ?????????? ????????? ? ??.)';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_billing_payment_uploads`
--

DROP TABLE IF EXISTS `courier_billing_payment_uploads`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_billing_payment_uploads` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `records_count` int(11) NOT NULL COMMENT '?????????? ???????',
  `user_id` int(11) NOT NULL COMMENT '?????',
  `is_success` tinyint(1) NOT NULL DEFAULT '0' COMMENT '??????? ??????? ??????????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `status` enum('created','uploaded','error','cancelled','sent') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'created' COMMENT 'Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð·Ð°Ð»Ð¸Ð²ÐºÐ¸(DC2Type:courier_billing_payment_upload_status)',
  `uploaded_at` datetime DEFAULT NULL COMMENT 'Ð”Ð°Ñ‚Ð° /Ð²Ñ€ÐµÐ¼Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸',
  PRIMARY KEY (`id`),
  KEY `idx__courier_billing_payment_uploads__created_at` (`created_at`),
  KEY `idx__courier_billing_payment_uploads__updated_at` (`updated_at`),
  KEY `idx__courier_billing_payment_uploads__status` (`status`)
) ENGINE=InnoDB AUTO_INCREMENT=5543 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_billing_payments`
--

DROP TABLE IF EXISTS `courier_billing_payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_billing_payments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) DEFAULT NULL,
  `date_from` date DEFAULT NULL COMMENT '????/????? ?????? ???????, ?? ??????? ?????????????? ???????',
  `date_to` date DEFAULT NULL COMMENT '????/????? ????????? ???????, ?? ??????? ?????????????? ???????',
  `sent_to_fns_at` datetime DEFAULT NULL COMMENT '????/????? ???????? ??????? ? ???',
  `amount` decimal(10,2) NOT NULL COMMENT '????? ??????? ? ??????',
  `fns_cheque_id` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ???? ? ???',
  `fns_cheque_url` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '?????? ?? ??? ? ???',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `sent_to_billing_at` datetime DEFAULT NULL COMMENT '????/????? ???????? ??????? ? ???????',
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL COMMENT '??????',
  `upload_id` int(11) DEFAULT NULL COMMENT 'ID ???????',
  `fail_reason` longtext COLLATE utf8_unicode_ci COMMENT 'Ð’Ð¾Ð·Ð½Ð¸ÐºÑˆÐ°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ',
  `is_cancelled` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'ÐŸÑ€Ð¸Ð·Ð½Ð°Ðº Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð²Ñ‹Ð¿Ð»Ð°Ñ‚Ñ‹',
  `billing_type` enum('courier_service','self_employed','self_employed_nonresident','direct') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¢Ð¸Ð¿ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ñ… Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ð¹ ÐºÑƒÑ€ÑŒÐµÑ€Ð° Ð½Ð° Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹(DC2Type:courier_billing)',
  PRIMARY KEY (`id`),
  KEY `IDX_ACD32240E3D8151C` (`courier_id`),
  KEY `idx__courier_billing_payments__created_at` (`created_at`),
  KEY `idx__courier_billing_payments__sent_to_billing_at` (`sent_to_billing_at`),
  KEY `idx__courier_billing_payments__sent_to_fns_at` (`sent_to_fns_at`),
  KEY `idx__courier_billing_payments__upload_id` (`upload_id`),
  KEY `idx__courier_billing_payments__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=6073258 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_contacts`
--

DROP TABLE IF EXISTS `courier_contacts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_contacts` (
  `id` int(11) NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'E-mail ???????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_contacts__created_at` (`created_at`),
  KEY `idx__courier_contacts__updated_at` (`updated_at`),
  CONSTRAINT `_FK_C3AD9D42BF396750` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? ?????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_deactivation_info`
--

DROP TABLE IF EXISTS `courier_deactivation_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_deactivation_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `reason_id` int(11) NOT NULL,
  `courier_id` int(11) NOT NULL,
  `comment` longtext COLLATE utf8_unicode_ci COMMENT 'Комментарий к причине деактивации',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Дата создания(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_deactivation_info__reason_id` (`reason_id`),
  KEY `idx__courier_deactivation_info__courier_id` (`courier_id`),
  KEY `idx__courier_deactivation_info__created_at` (`created_at`),
  KEY `idx__courier_deactivation_info__updated_at` (`updated_at`),
  CONSTRAINT `courier_deactivation_info_ibfk_1` FOREIGN KEY (`reason_id`) REFERENCES `courier_deactivation_reasons` (`id`),
  CONSTRAINT `courier_deactivation_info_ibfk_2` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=531057 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Информация о деактивации курьера';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_deactivation_reason_groups`
--

DROP TABLE IF EXISTS `courier_deactivation_reason_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_deactivation_reason_groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Название группы причины деактивации',
  `initiator` enum('eda','courier') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Инициатор деактивации(DC2Type:courier_deactivation_initiator)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Дата создания(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `status` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ограничение по допустимому статусу',
  PRIMARY KEY (`id`),
  KEY `idx__courier_deactivation_reason_groups__created_at` (`created_at`),
  KEY `idx__courier_deactivation_reason_groups__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Список групп причин деактивации курьера';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_deactivation_reasons`
--

DROP TABLE IF EXISTS `courier_deactivation_reasons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_deactivation_reasons` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_id` int(11) NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Название причины',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Дата создания(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `alias` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Alias причины',
  `deleted_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__courier_deactivation_reasons__created_at` (`created_at`),
  KEY `idx__courier_deactivation_reasons__updated_at` (`updated_at`),
  KEY `idx__courier_deactivation_reasons__group_id` (`group_id`),
  KEY `idx__courier_deactivation_reasons__alias` (`alias`),
  CONSTRAINT `courier_deactivation_reasons_ibfk_1` FOREIGN KEY (`group_id`) REFERENCES `courier_deactivation_reason_groups` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=254 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Список причин деактивиации курьера';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_delivery_zone_vertices`
--

DROP TABLE IF EXISTS `courier_delivery_zone_vertices`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_delivery_zone_vertices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `zone_id` int(11) NOT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `revision_id` int(11) NOT NULL COMMENT '????????????? ??????? ????????? ????',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `IDX_FD1541C2DA6A219` (`zone_id`),
  KEY `idx__courier_delivery_zone_vertices__deleted_at` (`deleted_at`),
  KEY `idx__courier_delivery_zone_vertices__created_at` (`created_at`),
  KEY `idx__courier_delivery_zone_vertices__updated_at` (`updated_at`),
  CONSTRAINT `FK_FD1541C2DA6A219` FOREIGN KEY (`zone_id`) REFERENCES `courier_delivery_zones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3764307 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='????? ?????????, ??????? ???????????? ??????? ??????? ??? ????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_delivery_zones`
--

DROP TABLE IF EXISTS `courier_delivery_zones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_delivery_zones` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT '???????????? ????',
  `region_id` int(10) unsigned DEFAULT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT '1' COMMENT '???? ?????????? ?????????? ????',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `revision_id` int(11) NOT NULL COMMENT '????????????? ??????? ????????? ???? (??? ??????????? ????????)',
  PRIMARY KEY (`id`),
  KEY `IDX_4AA0929498260155` (`region_id`),
  KEY `idx__courier_delivery_zones__updated_at` (`updated_at`),
  KEY `idx__courier_delivery_zones__created_at` (`created_at`),
  CONSTRAINT `_FK_4AA0929498260155` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=12802 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? ?????????? ??? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_education_notifications`
--

DROP TABLE IF EXISTS `courier_education_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_education_notifications` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) DEFAULT NULL,
  `alias` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Алиас нотификации',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `sent_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_education_notifications__courier_id__alias` (`courier_id`,`alias`),
  KEY `idx__courier_education_notifications__courier_id` (`courier_id`),
  KEY `idx__courier_education_notifications__created_at` (`created_at`),
  KEY `idx__courier_education_notifications__updated_at` (`updated_at`),
  KEY `idx__courier_education_notifications__created_at__sent_at` (`created_at`,`sent_at`),
  CONSTRAINT `fk__courier_education_notifications__courier_id` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=55476462 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_external_source_data`
--

DROP TABLE IF EXISTS `courier_external_source_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_external_source_data` (
  `id` int(11) NOT NULL,
  `external_id` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Идентификатор курьера из источника создания',
  `activation_notified_at` datetime DEFAULT NULL COMMENT 'Дата-время уведомления об активации курьера(DC2Type:datetimetz)',
  `first_order_notified_at` datetime DEFAULT NULL COMMENT 'Дата-время уведомления о первом заказе курьера(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_external_source_data__external_id` (`external_id`),
  KEY `idx__courier_external_source_data__activation_notified_at` (`activation_notified_at`),
  KEY `idx__courier_external_source_data__first_order_notified_at` (`first_order_notified_at`),
  KEY `idx__courier_external_source_data__created_at` (`created_at`),
  KEY `idx__courier_external_source_data__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Информация о внешних источниках курьеров и взаимодействии с ними';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_feature_flags`
--

DROP TABLE IF EXISTS `courier_feature_flags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_feature_flags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `feature_id` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Уникальный строковый идентификатор фичи',
  `description` text COLLATE utf8_unicode_ci COMMENT 'Описание',
  `is_value_allowed` tinyint(1) NOT NULL COMMENT 'Допустимо ли указание значения',
  `is_value_required` tinyint(1) NOT NULL COMMENT 'Требуется ли указание значения',
  `value_regex` tinytext COLLATE utf8_unicode_ci COMMENT 'Регулярное выражение, которому должно соответствовать значение',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_feature_flags__feature_id` (`feature_id`)
) ENGINE=InnoDB AUTO_INCREMENT=79 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Список доступных фича-флагов для курьерского приложения';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_fixed_shifts_toggling_events`
--

DROP TABLE IF EXISTS `courier_fixed_shifts_toggling_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_fixed_shifts_toggling_events` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` bigint(20) NOT NULL COMMENT 'ID курьера(DC2Type:int64)',
  `event` enum('activation','deactivation') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Событие включения/выключения фиксированных слотов(DC2Type:fixed_shifts_toggling_event_type)',
  `toggled_at` datetime DEFAULT NULL COMMENT 'Дата изменения признака включенности',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_fixed_shifts_toggling_events__created_at` (`created_at`),
  KEY `idx__courier_fixed_shifts_toggling_events__courier_id` (`courier_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1169 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='События включения/выключения режима фиксированных слотов';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_fns_cheques`
--

DROP TABLE IF EXISTS `courier_fns_cheques`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_fns_cheques` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) NOT NULL COMMENT 'ID курьера',
  `receipt_id` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ID чека в ФНС',
  `receipt` json NOT NULL COMMENT 'Данные чека',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_fns_cheques__courier_id__receipt_id` (`courier_id`,`receipt_id`),
  KEY `idx__courier_fns_cheques__courier_id__updated_at` (`courier_id`,`updated_at`),
  KEY `idx__courier_fns_cheques__created_at` (`created_at`),
  KEY `idx__courier_fns_cheques__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=692476787 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_groups`
--

DROP TABLE IF EXISTS `courier_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Наименование группы курьеров',
  `description` text COLLATE utf8_unicode_ci COMMENT 'Описание группы курьеров',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `region_id` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_groups__name` (`name`),
  KEY `IDX_5362BDB998260155` (`region_id`),
  CONSTRAINT `FK_5362BDB998260155` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=618 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Группы курьеров для фичеверсионирования';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_groups_couriers`
--

DROP TABLE IF EXISTS `courier_groups_couriers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_groups_couriers` (
  `courier_group_id` int(11) NOT NULL,
  `courier_id` int(11) NOT NULL,
  PRIMARY KEY (`courier_group_id`,`courier_id`),
  KEY `IDX_53B53615EB95176` (`courier_group_id`),
  KEY `IDX_53B53615E3D8151C` (`courier_id`),
  CONSTRAINT `FK_53B53615E3D8151C` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`),
  CONSTRAINT `FK_53B53615EB95176` FOREIGN KEY (`courier_group_id`) REFERENCES `courier_groups` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_groups_feature_flags`
--

DROP TABLE IF EXISTS `courier_groups_feature_flags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_groups_feature_flags` (
  `courier_group_id` int(11) NOT NULL,
  `feature_flag_id` int(11) NOT NULL,
  `flag_value` varchar(127) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Значение флага',
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__cgff__courier_group_id_feature_flag_id` (`courier_group_id`,`feature_flag_id`),
  KEY `idx__cgff__courier_group_id` (`courier_group_id`),
  KEY `idx__cgff__feature_flag_id` (`feature_flag_id`),
  CONSTRAINT `FK_2EF2BE7FA0887FEC` FOREIGN KEY (`feature_flag_id`) REFERENCES `courier_feature_flags` (`id`),
  CONSTRAINT `FK_2EF2BE7FEB95176` FOREIGN KEY (`courier_group_id`) REFERENCES `courier_groups` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=863 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Значения фича-флагов для групп курьеров';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_meta_data`
--

DROP TABLE IF EXISTS `courier_meta_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_meta_data` (
  `id` int(11) NOT NULL,
  `is_deaf_mute` tinyint(1) NOT NULL DEFAULT '1' COMMENT '??????? ''????????????? ??????''',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `logistic_place_group_id` int(11) DEFAULT NULL,
  `deactivation_initiator` enum('eda','courier') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ñ‚Ð¾Ñ€ Ð´ÐµÐ°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ð¸(DC2Type:courier_deactivation_initiator)',
  `is_uniform_returned` tinyint(1) DEFAULT NULL COMMENT 'Ð¡Ð´Ð°Ð» Ñ„Ð¾Ñ€Ð¼Ñƒ, Ð·Ð°Ð´Ð¾Ð»Ð¶ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð½ÐµÑ‚',
  `is_picker` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'ÐšÑƒÑ€ÑŒÐµÑ€ Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ ÑÐ±Ð¾Ñ€ÐºÑƒ Ð·Ð°ÐºÐ°Ð·Ð°',
  `has_health_card` tinyint(1) DEFAULT NULL COMMENT 'ÐÐ°Ð»Ð¸Ñ‡Ð¸Ðµ Ð¼ÐµÐ´ÐºÐ½Ð¸Ð¶ÐºÐ¸',
  `has_own_bicycle` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'ÐšÑƒÑ€ÑŒÐµÑ€ Ð½Ð° ÑÐ²Ð¾ÐµÐ¼ Ð²ÐµÐ»Ð¾ÑÐ¸Ð¿ÐµÐ´Ðµ',
  `last_app_version` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ ÐºÑƒÑ€ÑŒÐµÑ€ÑÐºÐ¾Ð³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ',
  `is_storekeeper` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Ð¯Ð²Ð»ÑÐµÑ‚ÑÑ ÐºÐ»Ð°Ð´Ð¾Ð²Ñ‰Ð¸ÐºÐ¾Ð¼',
  `is_dedicated_picker` tinyint(1) NOT NULL DEFAULT '0' COMMENT '?????????? ???????',
  `is_rover` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Ð¯Ð²Ð»ÑÐµÑ‚ÑÑ Ñ€Ð¾Ð²ÐµÑ€Ð¾Ð¼',
  `has_terminal_for_payment_on_site` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Ð•ÑÑ‚ÑŒ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð» Ð´Ð»Ñ Ñ‡Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð²Ñ‹ÐºÑƒÐ¿Ð°',
  `is_fixed_shifts_option_enabled` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'ÐžÐ¿Ñ†Ð¸Ñ Ð¤Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ ÑÐ»Ð¾Ñ‚Ñ‹',
  `fixed_shifts_option_enabled_since` datetime DEFAULT NULL COMMENT 'Ð”Ð°Ñ‚Ð°/Ð²Ñ€ÐµÐ¼Ñ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð¾Ð¿Ñ†Ð¸Ð¸ Ð¤Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ ÑÐ»Ð¾Ñ‚Ñ‹',
  `is_dedicated_courier` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Ð’Ñ‹Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¹ ÐºÑƒÑ€ÑŒÐµÑ€',
  `is_park_courier` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'ÐšÑƒÑ€ÑŒÐµÑ€, Ð¿Ñ€Ð¸Ð²Ð»ÐµÑ‡ÐµÐ½Ð½Ñ‹Ð¹ Ð¸Ð· Ð¿Ð°Ñ€ÐºÐ°',
  PRIMARY KEY (`id`),
  KEY `IDX_6F7B6D92F270675E` (`logistic_place_group_id`),
  KEY `idx__courier_meta_data__created_at` (`created_at`),
  KEY `idx__courier_meta_data__updated_at` (`updated_at`),
  CONSTRAINT `FK_6F7B6D92BF396750` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE,
  CONSTRAINT `FK_6F7B6D92F270675E` FOREIGN KEY (`logistic_place_group_id`) REFERENCES `logistic_place_groups` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_mvd_data`
--

DROP TABLE IF EXISTS `courier_mvd_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_mvd_data` (
  `id` int(11) NOT NULL,
  `contract_signed_at` date DEFAULT NULL COMMENT 'Дата заключения с иностранным гражданином гражданско-правового договора',
  `contract_ended_at` date DEFAULT NULL COMMENT 'Дата расторжения с иностранным гражданином гражданско-правового договора',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `contract_start_mvd_notify_generated_at` datetime DEFAULT NULL COMMENT 'Дата формирования уведомления о заключении/расторжении ГПХ для МВД(DC2Type:datetimetz)',
  `contract_start_mvd_notified` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Факт отправки уведомления о заключении/расторжении ГПХ в МВД',
  `contract_end_mvd_notify_generated_at` datetime DEFAULT NULL COMMENT 'Дата формирования уведомления о заключении/расторжении ГПХ для МВД(DC2Type:datetimetz)',
  `contract_end_mvd_notified` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Факт отправки уведомления о заключении/расторжении ГПХ в МВД',
  PRIMARY KEY (`id`),
  KEY `idx__courier_mvd_data__created_at` (`created_at`),
  KEY `idx__courier_mvd_data__updated_at` (`updated_at`),
  CONSTRAINT `courier_mvd_data_ibfk_1` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Признаки уведомления МВД о заключении/расторжении с иностранных гражданином договора ГПХ';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_notification_templates`
--

DROP TABLE IF EXISTS `courier_notification_templates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_notification_templates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип нотификации',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Название',
  `event` varchar(127) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Событие, по которому триггерится нотификация',
  `template` text COLLATE utf8_unicode_ci COMMENT 'Шаблон нотификации',
  `subject` text COLLATE utf8_unicode_ci COMMENT 'Тема нотификации',
  `deep_link` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Диплинк',
  `extra_placeholders` json DEFAULT NULL COMMENT 'Дополнительные плейсхолдеры',
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `is_enabled` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Включена ли отправка таких пушей',
  PRIMARY KEY (`id`),
  KEY `idx__courier_notification_templates__created_at` (`created_at`),
  KEY `idx__courier_notification_templates__updated_at` (`updated_at`),
  KEY `idx__courier_notification_templates__deleted_at` (`deleted_at`),
  KEY `idx__courier_notification_templates__event` (`event`)
) ENGINE=InnoDB AUTO_INCREMENT=61 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_notifications`
--

DROP TABLE IF EXISTS `courier_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_notifications` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) NOT NULL,
  `text` text COLLATE utf8_unicode_ci NOT NULL COMMENT 'Текст нотификации',
  `source_number` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Идентификатор нотификации во внешней системе-источника',
  `source` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Внешняя система-источник нотификации (например, ФНС)',
  `is_acked` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Прочитана ли нотификация',
  `acked_at` datetime DEFAULT NULL COMMENT 'Дата/время прочтения нотификации(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `title` text COLLATE utf8_unicode_ci COMMENT 'Заголовок нотификации',
  `source_acked_at` datetime DEFAULT NULL COMMENT 'Дата/время пометки как прочитанное в источнике нотификации(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_notifications__courier_id__source__source_number` (`courier_id`,`source`,`source_number`),
  KEY `fk__courier_notifications__courier_id` (`courier_id`),
  KEY `idx__courier_notifications__is_acked__courier_id` (`is_acked`,`courier_id`),
  KEY `idx__courier_notifications__source_acked_at` (`source_acked_at`),
  CONSTRAINT `fk__courier_notifications__courier_id` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=573612474 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Курьерские нотификации';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_payment_details`
--

DROP TABLE IF EXISTS `courier_payment_details`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_payment_details` (
  `id` int(11) NOT NULL,
  `bank_account_id` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????? ??????????? ????? ???????',
  `bank_account_bic` varchar(9) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??? ????? ???????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_payment_details__created_at` (`created_at`),
  KEY `idx__courier_payment_details__updated_at` (`updated_at`),
  CONSTRAINT `_FK_C1BA28FABF396750` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? ????????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_personal_data`
--

DROP TABLE IF EXISTS `courier_personal_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_personal_data` (
  `id` int(11) NOT NULL,
  `country_id` int(11) DEFAULT NULL,
  `surname` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????? ???????',
  `first_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??? ???????',
  `patronymic` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '???????? ???????',
  `postcode` varchar(6) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '???????? ?????? ?????? ???????????',
  `address` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????? ???????????',
  `inn` varchar(12) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '???',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `sex` enum('male','female') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐŸÐ¾Ð» ÐºÑƒÑ€ÑŒÐµÑ€Ð°(DC2Type:sex_type)',
  `birthday` date DEFAULT NULL COMMENT 'Ð”Ð°Ñ‚Ð° Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ',
  PRIMARY KEY (`id`),
  KEY `IDX_9DD359F2F92F3E70` (`country_id`),
  KEY `idx__courier_personal_data__inn` (`inn`),
  KEY `idx__courier_personal_data_first_name` (`first_name`),
  KEY `idx__courier_personal_data_surname` (`surname`),
  KEY `idx__courier_personal_data__created_at` (`created_at`),
  KEY `idx__courier_personal_data__updated_at` (`updated_at`),
  CONSTRAINT `FK_9DD359F2BF396750` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE,
  CONSTRAINT `FK_9DD359F2F92F3E70` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='???????????? ?????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_personal_data_identifiers`
--

DROP TABLE IF EXISTS `courier_personal_data_identifiers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_personal_data_identifiers` (
  `id` int(11) NOT NULL,
  `phone_number` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ?????? ???????? ???????',
  `email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ?????? ??????????? ?????',
  `inn` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ???',
  `identity_document` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ?????????, ??????????????? ????????',
  `telegram_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ?????? ? telegram',
  `address` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ??????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `birth_place` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð¼ÐµÑÑ‚Ð° Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ',
  `birth_at` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð´Ð°Ñ‚Ñ‹ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ',
  `migration_card` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð½Ð¾Ð¼ÐµÑ€Ð° Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ð¹ ÐºÐ°Ñ€Ñ‚Ñ‹',
  `migration_card_issued_at` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð´Ð°Ñ‚Ñ‹ Ð²Ñ‹Ð´Ð°Ñ‡Ð¸ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ð¹ ÐºÐ°Ñ€Ñ‚Ñ‹',
  `address_registration` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð°Ð´Ñ€ÐµÑÐ° Ð¿Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð½Ð° ÑƒÑ‡ÐµÑ‚ Ð¿Ð¾ Ð¼ÐµÑÑ‚Ñƒ Ð¿Ñ€ÐµÐ±Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¸Ð»Ð¸ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð¼ÐµÑÑ‚Ñƒ Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð°',
  `address_registration_at` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð´Ð°Ñ‚Ñ‹ Ð¿Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð½Ð° ÑƒÑ‡ÐµÑ‚ Ð¿Ð¾ Ð¼ÐµÑÑ‚Ñƒ Ð¿Ñ€ÐµÐ±Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¸Ð»Ð¸ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð¼ÐµÑÑ‚Ñƒ Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð°',
  `identity_document_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°, ÑƒÐ´Ð¾ÑÑ‚Ð¾Ð²ÐµÑ€ÑÑŽÑ‰Ð¸Ð¹ Ð»Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ',
  `identity_document_series` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ÑÐµÑ€Ð¸Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°, ÑƒÐ´Ð¾ÑÑ‚Ð¾Ð²ÐµÑ€ÑÑŽÑ‰ÐµÐ³Ð¾ Ð»Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ',
  `identity_document_number` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð½Ð¾Ð¼ÐµÑ€Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°, ÑƒÐ´Ð¾ÑÑ‚Ð¾Ð²ÐµÑ€ÑÑŽÑ‰ÐµÐ³Ð¾ Ð»Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ',
  `identity_document_issued_at` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð´Ð°Ñ‚Ñ‹ Ð²Ñ‹Ð´Ð°Ñ‡Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°, ÑƒÐ´Ð¾ÑÑ‚Ð¾Ð²ÐµÑ€ÑÑŽÑ‰ÐµÐ³Ð¾ Ð»Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ',
  `identity_document_issued_by` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ÐºÐµÐ¼ Ð²Ñ‹Ð´Ð°Ð½ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚, ÑƒÐ´Ð¾ÑÑ‚Ð¾Ð²ÐµÑ€ÑÑŽÑ‰Ð¸Ð¹ Ð»Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ',
  PRIMARY KEY (`id`),
  KEY `idx__courier_personal_data_identifiers__created_at` (`created_at`),
  KEY `idx__courier_personal_data_identifiers__updated_at` (`updated_at`),
  CONSTRAINT `__fk__courier_personal_data_identifiers__courier_id` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_picker_requisites`
--

DROP TABLE IF EXISTS `courier_picker_requisites`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_picker_requisites` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) NOT NULL COMMENT 'Id курьера',
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип реквизита',
  `value` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Значение реквизита',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_picker_requisites__courier_id__type` (`courier_id`,`type`),
  KEY `idx__courier_picker_requisites__courier_id` (`courier_id`),
  KEY `idx__courier_picker_requisites__created_at` (`created_at`),
  KEY `idx__courier_picker_requisites__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=133927 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Реквизиты сборщиков';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_promocodes`
--

DROP TABLE IF EXISTS `courier_promocodes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_promocodes` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) NOT NULL COMMENT 'ID курьера',
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип промокода',
  `code` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Промокод',
  `sent_at` datetime DEFAULT NULL COMMENT 'Дата отправки промокода',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_promocodes__created_at` (`created_at`),
  KEY `idx__courier_promocodes__updated_at` (`updated_at`),
  KEY `idx__courier_promocodes__courier_id__type` (`courier_id`,`type`)
) ENGINE=InnoDB AUTO_INCREMENT=12881382 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_referrals`
--

DROP TABLE IF EXISTS `courier_referrals`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_referrals` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `referrer_id` int(11) NOT NULL COMMENT 'ID курьера-реферера',
  `referral_id` int(11) NOT NULL COMMENT 'ID курьера-реферала',
  `referral_region_id` int(11) NOT NULL COMMENT 'ID региона курьера-реферала',
  `finished_at` datetime DEFAULT NULL COMMENT 'Дата завершения реферальной программы',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `pool` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Реферальный пул курьера',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_referrals__referrer_id__referral_id` (`referrer_id`,`referral_id`),
  KEY `idx__courier_referrals__referral_region_id` (`referral_region_id`),
  KEY `idx__courier_referrals__finished_at` (`finished_at`),
  KEY `idx__courier_referrals__created_at` (`created_at`),
  KEY `idx__courier_referrals__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=71222 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Связь между курьерами-рефералами и реферерами';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_referrer_bonus_conditions`
--

DROP TABLE IF EXISTS `courier_referrer_bonus_conditions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_referrer_bonus_conditions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `region_id` int(11) NOT NULL COMMENT 'Регион действия',
  `alias` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Алиас выплаты',
  `amount` int(11) NOT NULL COMMENT 'Сумма выплаты',
  `orders_count` int(11) NOT NULL COMMENT 'Количество заказов для успешного выполнения этапа реферальной программы',
  `days_count` int(11) NOT NULL COMMENT 'Продолжительность этапа бонусной программы',
  `is_enabled` tinyint(1) NOT NULL DEFAULT '1' COMMENT 'Признак включенности бонуса',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `pool` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Пул выплаты',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_referrer_bonus_conditions__region_id__alias` (`region_id`,`alias`),
  KEY `idx__courier_referrer_bonus_conditions__created_at` (`created_at`),
  KEY `idx__courier_referrer_bonus_conditions__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1878 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_referrer_bonuses`
--

DROP TABLE IF EXISTS `courier_referrer_bonuses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_referrer_bonuses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `courier_referral_id` int(11) DEFAULT NULL,
  `alias` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Алиас выплаты',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `amount` decimal(13,2) DEFAULT NULL COMMENT 'Сумма выплаты',
  `orders_count` int(11) DEFAULT NULL COMMENT 'Количество заказов для успешного выполнения этапа реферальной программы',
  `days_count` int(11) DEFAULT NULL COMMENT 'Продолжительность этапа реферальной программы',
  `is_successful` tinyint(1) DEFAULT NULL COMMENT 'Этап бонусной программы успешен',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_referrer_bonuses__courier_referral_id__alias` (`courier_referral_id`,`alias`),
  KEY `idx__courier_referrer_bonuses__courier_referral_id` (`courier_referral_id`),
  KEY `idx__courier_referrer_bonuses__created_at` (`created_at`),
  KEY `idx__courier_referrer_bonuses__updated_at` (`updated_at`),
  CONSTRAINT `fk__courier_referrer_bonuses__courier_referral_id` FOREIGN KEY (`courier_referral_id`) REFERENCES `courier_referrals` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=210647 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Выплаченные курьерам бонусы по реферальной программе';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_referrers`
--

DROP TABLE IF EXISTS `courier_referrers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_referrers` (
  `id` int(11) NOT NULL,
  `referrer_id` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Сгенерированный ID курьера-реферера',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `conditions_sent_at` datetime DEFAULT NULL COMMENT 'Дата последней отправки условий реферальной программы(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_referrers__referrer_id` (`referrer_id`),
  KEY `idx__courier_referrers__created_at` (`created_at`),
  KEY `idx__courier_referrers__updated_at` (`updated_at`),
  KEY `idx__courier_referrers__conditions_sent_at` (`conditions_sent_at`),
  CONSTRAINT `fk__courier_referrers__id` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Таблица курьеров-рефереров';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_adjustment_reasons`
--

DROP TABLE IF EXISTS `courier_salary_adjustment_reasons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_adjustment_reasons` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) DEFAULT NULL COMMENT '????????????? ????????????? ???????? (???? ????, ?????? ???????? ??????)',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '???????? ????????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `is_directory` tinyint(1) NOT NULL COMMENT '???????? ?? ??????? ?????? (????? ????????? ? ???? ?????? ????????)',
  PRIMARY KEY (`id`),
  KEY `fk__courier_salary_adjustment_reasons__parent_id` (`parent_id`),
  KEY `idx__courier_salary_adjustment_reasons__created_at` (`created_at`),
  KEY `idx__courier_salary_adjustment_reasons__updated_at` (`updated_at`),
  CONSTRAINT `_fk__courier_salary_adjustment_reasons__parent_id` FOREIGN KEY (`parent_id`) REFERENCES `courier_salary_adjustment_reasons` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=748 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? (??????) ?????? ??? ?????????? ????????????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_adjustments`
--

DROP TABLE IF EXISTS `courier_salary_adjustments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_adjustments` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `reason_id` int(11) NOT NULL COMMENT '????????????? ??????? ?????????????',
  `period_id` int(11) DEFAULT NULL COMMENT '????????????? ?????????? ??????? ????????????? (?????????? ????? ???????)',
  `related_adjustment_id` bigint(20) DEFAULT NULL COMMENT '????????????? ????????????????????? ????????????? (????????????? ?? ?????????????)',
  `uploaded_file_id` int(11) DEFAULT NULL COMMENT '????????????? ???????? ???????, ? ??????? ???? ????????? ?????????????',
  `adjustment_date` date NOT NULL COMMENT '????, ? ??????? ????????? ?????????????(DC2Type:datetimetz)',
  `created_by` int(11) NOT NULL COMMENT '????????????? ????????????, ?????????? ?????????????',
  `courier_id` int(11) NOT NULL,
  `region_id` int(11) NOT NULL,
  `is_human_changed` tinyint(1) NOT NULL DEFAULT '0' COMMENT '???? ?? ????????????? ??????????????? ?????????????',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `amount` decimal(10,2) NOT NULL COMMENT '????? ?????????????, ????????????? - ??????, ????????????? - ?????',
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL,
  `comment` text COLLATE utf8_unicode_ci NOT NULL COMMENT '??????????? ? ????????????? (?? ???????)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `external_source` varchar(30) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð’Ð½ÐµÑˆÐ½Ð¸Ð¹ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸',
  PRIMARY KEY (`id`),
  KEY `idx__courier_salary_adjustments__adjustment_date` (`adjustment_date`),
  KEY `fk__courier_salary_adjustments__reason_id` (`reason_id`),
  KEY `fk__courier_salary_adjustments__period_id` (`period_id`),
  KEY `fk__courier_salary_adjustments__related_adjustment` (`related_adjustment_id`),
  KEY `idx__courier_salary_adjustments__courier_id` (`courier_id`),
  KEY `fk__courier_salary_adjustments__uploaded_file_id` (`uploaded_file_id`),
  KEY `idx__courier_salary_adjustments__period_id__courier_id` (`period_id`,`courier_id`),
  KEY `idx__courier_salary_adjustments__courier_id__adjustment_date` (`courier_id`,`adjustment_date`),
  KEY `idx__courier_salary_adjustments__created_at` (`created_at`),
  KEY `idx__courier_salary_adjustments__updated_at` (`updated_at`),
  KEY `idx__courier_salary_adjustments__external_source` (`external_source`),
  CONSTRAINT `__fk__courier_salary_adjustments__period_id` FOREIGN KEY (`period_id`) REFERENCES `courier_salary_payroll_periods` (`id`),
  CONSTRAINT `__fk__courier_salary_adjustments__reason_id` FOREIGN KEY (`reason_id`) REFERENCES `courier_salary_adjustment_reasons` (`id`),
  CONSTRAINT `__fk__courier_salary_adjustments__related_adjustment` FOREIGN KEY (`related_adjustment_id`) REFERENCES `courier_salary_adjustments` (`id`),
  CONSTRAINT `__fk__courier_salary_adjustments__uploaded_file_id` FOREIGN KEY (`uploaded_file_id`) REFERENCES `courier_salary_uploaded_files` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8469962 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? ????????????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_coefficients`
--

DROP TABLE IF EXISTS `courier_salary_coefficients`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_coefficients` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `region_id` int(11) NOT NULL,
  `courier_type` varchar(16) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип курьера (передвижения)',
  `per_hour_guarantee` decimal(10,4) DEFAULT NULL COMMENT 'Минималка (в час)',
  `per_km_to_client` decimal(10,4) DEFAULT NULL COMMENT 'Оплата за путь до клиента',
  `per_pickup` decimal(10,4) DEFAULT NULL COMMENT 'Оплата за вовремя взятый заказ',
  `per_drop_off` decimal(10,4) DEFAULT NULL COMMENT 'Оплата за вовремя доставленный заказ',
  `per_long_to_rest` decimal(10,4) DEFAULT NULL COMMENT 'Оплата за путь до ресторана',
  `long_to_rest_thresh_m` int(11) DEFAULT NULL COMMENT 'Длинный путь до ресторана начинается от (м)',
  `faq_link` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ссылка на FAQ',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_salary_coefficients__region_id__courier_type` (`region_id`,`courier_type`)
) ENGINE=InnoDB AUTO_INCREMENT=2243 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Параметры для расчета зарплат курьерам';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_coefficients_history`
--

DROP TABLE IF EXISTS `courier_salary_coefficients_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_coefficients_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `type` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип сущности',
  `pk` bigint(20) NOT NULL COMMENT 'Ключ сущности',
  `dump` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT 'Текущее состояние сущности',
  `changeset` longtext COLLATE utf8_unicode_ci COMMENT 'Изменения',
  `update_type` varchar(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип изменений',
  `user_id` int(11) DEFAULT NULL COMMENT 'ID пользователя, совершившего изменение',
  `user_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Тип пользователя, совершившего изменение',
  `tag` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Тип сущности, к которой привязаны изменения(по умолчанию та же, что и в type)',
  `tag_pk` bigint(20) DEFAULT NULL COMMENT 'Ключ сущности, к которой привязаны изменения(по умолчанию та же, что и в pk)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_salary_c_history__tag__tag__pk__created_at` (`tag`,`tag_pk`,`created_at`),
  KEY `idx__courier_salary_c_history__tag__created_at` (`tag`,`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=10858 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='История изменений коэффициентов для расчета зарплат курьерам';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_fine_coefficients`
--

DROP TABLE IF EXISTS `courier_salary_fine_coefficients`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_fine_coefficients` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `region_id` int(11) NOT NULL,
  `fine_type` varchar(40) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Вид штрафа',
  `fine_explanation` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Описание вида штрафа',
  `fine_thresh` int(11) DEFAULT NULL COMMENT 'Граница допустимого значения',
  `fine_amount` int(11) DEFAULT NULL COMMENT 'Сумма штрафа',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `ux__courier_salary_fine_coefficients__region_id__fine_type` (`region_id`,`fine_type`)
) ENGINE=InnoDB AUTO_INCREMENT=2173 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Параметры для расчета штрафов курьерам';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_guarantee_losses`
--

DROP TABLE IF EXISTS `courier_salary_guarantee_losses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_guarantee_losses` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `region_id` int(11) NOT NULL,
  `courier_type` varchar(16) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип курьера (передвижения)',
  `late_start_thresh` int(11) DEFAULT NULL COMMENT 'Недопустимое опоздание на смену (мин)',
  `early_finish_thresh` int(11) DEFAULT NULL COMMENT 'Недопустимый ранний уход с смены (мин)',
  `offline_share` decimal(6,4) DEFAULT NULL COMMENT 'Допустимый % времени оффлайн (от 0 до 1)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `ux__courier_salary_guarantee_loss__region_id__courier_type` (`region_id`,`courier_type`)
) ENGINE=InnoDB AUTO_INCREMENT=2243 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Параметры для настройки условий получения гарантированной оплаты';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_history`
--

DROP TABLE IF EXISTS `courier_salary_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `type` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип сущности',
  `pk` bigint(20) NOT NULL COMMENT 'Ключ сущности',
  `dump` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT 'Текущее состояние сущности',
  `changeset` longtext COLLATE utf8_unicode_ci COMMENT 'Изменения',
  `update_type` varchar(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип изменений',
  `user_id` int(11) DEFAULT NULL COMMENT 'ID пользователя, совершившего изменение',
  `user_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Тип пользователя, совершившего изменение',
  `tag` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Тип сущности, к которой привязаны изменения(по умолчанию та же, что и в type)',
  `tag_pk` bigint(20) DEFAULT NULL COMMENT 'Ключ сущности, к которой привязаны изменения(по умолчанию та же, что и в pk)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_salary_history__tag__tag__pk__created_at` (`tag`,`tag_pk`,`created_at`),
  KEY `idx__courier_salary_history__tag__created_at` (`tag`,`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=42578 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='История изменений зарплатных сущностей (платежный период, корректировки, причины)';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_payroll_period_summaries`
--

DROP TABLE IF EXISTS `courier_salary_payroll_period_summaries`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_payroll_period_summaries` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `period_id` int(11) NOT NULL,
  `courier_id` int(11) NOT NULL,
  `total_amount` decimal(10,2) NOT NULL COMMENT 'Итоговая сумма зарплатной корректировки за период',
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__cspps__period_id__courier_id` (`period_id`,`courier_id`),
  KEY `fk__courier_salary_payroll_period_summaries__period` (`period_id`),
  CONSTRAINT `fk__courier_salary_payroll_period_summaries__period` FOREIGN KEY (`period_id`) REFERENCES `courier_salary_payroll_periods` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=5749593 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Итоговые зарплатные корректировки курьеров по расчетным периодам';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_payroll_periods`
--

DROP TABLE IF EXISTS `courier_salary_payroll_periods`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_payroll_periods` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `start_at` date NOT NULL COMMENT 'Дата начала расчетного периода(DC2Type:datetimetz)',
  `finish_at` date NOT NULL COMMENT 'Дата окончания расчетного периода(DC2Type:datetimetz)',
  `is_closed` tinyint(1) NOT NULL COMMENT 'Флаг закрытия расчетного периода (фиксация корректировок для выплаты)',
  `comment` text COLLATE utf8_unicode_ci NOT NULL COMMENT 'Комментарий',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__cspp__start_at__finish_at` (`start_at`,`finish_at`),
  KEY `idx__courier_salary_payroll_periods__finish_at` (`finish_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1158 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Расчетные периоды выплат для зарплат курьеров';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_salary_uploaded_files`
--

DROP TABLE IF EXISTS `courier_salary_uploaded_files`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_salary_uploaded_files` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uploaded_at` datetime NOT NULL COMMENT 'Дата  время загрузки файла массовой корректировки(DC2Type:datetimetz)',
  `lines_count` int(11) DEFAULT NULL COMMENT 'Количество строк (корректировок) в файле',
  `created_by` int(11) NOT NULL COMMENT 'Идентификатор пользователя, загрузившего файл',
  `cancelled_by` int(11) DEFAULT NULL COMMENT 'Идентификатор пользователя, отменившего массовую заливку',
  `client_file_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Локальное (пользовательское) наименование загруженного файла',
  `comment` text COLLATE utf8_unicode_ci NOT NULL COMMENT 'Комментарий к массовой заливке',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=15762 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Массовые заливки зарплатных корректировок курьерам';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_selfemployed_operation_log`
--

DROP TABLE IF EXISTS `courier_selfemployed_operation_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_selfemployed_operation_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) NOT NULL COMMENT 'ID ???????',
  `operation` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ????????',
  `status` enum('ok','info','warning','error') COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ????????(DC2Type:courier_selfemployed_operation_status)',
  `message` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT '?????????',
  `extra` longtext COLLATE utf8_unicode_ci COMMENT '?????????????? ??????????? ??????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_selfemployed_operation_log__courier_id__status` (`courier_id`,`status`),
  KEY `idx__courier_selfemployed_operation_log__created_at` (`created_at`),
  KEY `idx__courier_selfemployed_operation_log__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1063681402 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??? ??????-???????? ??? ??????????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_selfemployment_fns_data`
--

DROP TABLE IF EXISTS `courier_selfemployment_fns_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_selfemployment_fns_data` (
  `id` int(11) NOT NULL,
  `request_id` bigint(20) DEFAULT NULL COMMENT 'ID ??????? ? ???',
  `is_linked` tinyint(1) DEFAULT NULL COMMENT '?????? ?? ?????? ? ???? ? ???',
  `linked_at` datetime DEFAULT NULL COMMENT '???? ???????? ??????? ? ???',
  `link_last_checked_at` datetime DEFAULT NULL COMMENT '????/????? ????????? ????????, ?????? ?? ?????? ? ???',
  `is_income_registration_allowed` tinyint(1) NOT NULL DEFAULT '0' COMMENT '????? ?? ?????? ????? ?? ??????????? ??????',
  `is_payment_information_allowed` tinyint(1) NOT NULL DEFAULT '0' COMMENT '????? ?? ?????? ????? ?? ????????? ????????',
  `is_cancel_income_allowed` tinyint(1) NOT NULL DEFAULT '0' COMMENT '????? ?? ?????? ????? ?? ????????????? ?????',
  `permissions_last_checked_at` datetime DEFAULT NULL COMMENT '????/????? ????????? ???????? ???? ? ???',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `oktmo` varchar(11) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????? ??????? ? ???',
  `is_region_valid` tinyint(1) NOT NULL DEFAULT '0' COMMENT '????????????? ?? ?????? ??????? ??????? ? ???',
  `region_last_checked_at` datetime DEFAULT NULL COMMENT '????/????? ????????? ???????? ???????',
  `surname` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????? ??????? ? ???',
  `first_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??? ??????? ? ???',
  `patronymic` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '???????? ??????? ? ???',
  `cheques_last_checked_at` datetime DEFAULT NULL COMMENT '????/????? ????????? ?????? ?????',
  `cheques_last_check_requested_at` datetime DEFAULT NULL COMMENT '????/????? ?????????? ??????? ?????? ?????',
  PRIMARY KEY (`id`),
  KEY `idx__courier_selfemployment_fns_data__request_id` (`request_id`),
  KEY `idx__courier_selfemployment_fns_data__linked_at` (`linked_at`),
  KEY `idx__courier_selfemployment_fns_data__created_at` (`created_at`),
  KEY `idx__courier_selfemployment_fns_data__updated_at` (`updated_at`),
  CONSTRAINT `_FK_AABF520CBF396750` FOREIGN KEY (`id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????? ??????????? ???????? ? ???';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_service_admins`
--

DROP TABLE IF EXISTS `courier_service_admins`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_service_admins` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `admin_id` int(11) NOT NULL COMMENT 'Id админа',
  `courier_service_id` int(11) NOT NULL COMMENT 'Id курьерской службы',
  `role` enum('courier_management') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Роль управляющего курьерской службой(DC2Type:courier_service_admin_role_type)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_service_admins__admin_id` (`admin_id`),
  KEY `idx__courier_service_admins__courier_service_id` (`courier_service_id`),
  KEY `idx__courier_service_admins__created_at` (`created_at`),
  KEY `idx__courier_service_admins__updated_at` (`updated_at`),
  CONSTRAINT `fk__courier_service_admins__admin_id` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `fk__courier_service_admins__courier_service_id` FOREIGN KEY (`courier_service_id`) REFERENCES `courier_services` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=37 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Управляющие курьерскими службами';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_service_billing_data`
--

DROP TABLE IF EXISTS `courier_service_billing_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_service_billing_data` (
  `id` int(11) NOT NULL,
  `client_id` bigint(20) DEFAULT NULL COMMENT 'ID ??????? ? ????????',
  `offer_status_last_checked_at` datetime DEFAULT NULL COMMENT '????/????? ????????? ???????? ??????? ?????? ? ????????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `outcome_offer_id` bigint(20) DEFAULT NULL COMMENT 'ID ?????? ? ????????',
  `outcome_offer_is_active` tinyint(1) NOT NULL DEFAULT '0' COMMENT '?????????? ??????',
  `income_offer_id` bigint(20) DEFAULT NULL COMMENT 'ID ?????? ? ????????',
  `income_offer_is_active` tinyint(1) NOT NULL DEFAULT '0' COMMENT '?????????? ??????',
  `outcome_person_id` bigint(20) DEFAULT NULL COMMENT 'ID ??????????? ? ????????, ??? ???????? ???????????? ????????? ??????',
  `income_person_id` bigint(20) DEFAULT NULL COMMENT 'ID ??????????? ? ????????, ??? ???????? ???????????? ???????? ??????',
  `income_registered_at` datetime DEFAULT NULL COMMENT '????/????? ??????????? ???????? ??????? ? ????????',
  `outcome_registered_at` datetime DEFAULT NULL COMMENT '????/????? ??????????? ????????? ??????? ? ????????',
  `outcome_offer_external_id` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????? ID ??????/???????? ? ????????',
  `income_offer_external_id` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????? ID ??????/???????? ? ????????',
  `is_valid_bank_props` tinyint(1) NOT NULL DEFAULT '1' COMMENT '??????? ?????????? ?????????? ??????????',
  `assembly_client_id` bigint(20) DEFAULT NULL COMMENT 'ID клиента в Биллинге для услуги сборки(DC2Type:int64)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_service_billing_data__created_at` (`created_at`),
  KEY `idx__courier_service_billing_data__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????? ? ?????????? ??????? ? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_service_billing_payments`
--

DROP TABLE IF EXISTS `courier_service_billing_payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_service_billing_payments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `courier_service_id` int(11) DEFAULT NULL,
  `amount` decimal(10,2) NOT NULL COMMENT 'Сумма выплаты',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Валюта',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Данные о выплатах курьерским службам';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_service_billing_types`
--

DROP TABLE IF EXISTS `courier_service_billing_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_service_billing_types` (
  `id` int(11) NOT NULL,
  `billing_type` enum('courier_service','self_employed','self_employed_nonresident','direct') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ð”Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ð¹ Ñ‚Ð¸Ð¿ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ñ… Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ð¹ Ñƒ Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½Ð½Ñ‹Ñ… ÐºÑƒÑ€ÑŒÐµÑ€Ð¾Ð²(DC2Type:courier_billing)',
  PRIMARY KEY (`id`,`billing_type`),
  KEY `IDX_CC395912BF396750` (`id`),
  CONSTRAINT `__FK_CC395912BF396750` FOREIGN KEY (`id`) REFERENCES `courier_services` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='????? ?????????? ????? ? ?????????? ? ??? ????? ?????????? ?????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_service_commissions`
--

DROP TABLE IF EXISTS `courier_service_commissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_service_commissions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `courier_service_id` int(11) DEFAULT NULL,
  `commission` decimal(4,2) NOT NULL COMMENT 'Комиссия (%)',
  `fixed_commission` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Фиксированная комиссия (с валютой)(DC2Type:money)',
  `acquiring_commission` decimal(4,2) NOT NULL COMMENT 'Комиссия за эквайринг (%)',
  `marketing_commission` decimal(5,2) NOT NULL COMMENT 'Маркетинговая комиссия (%)',
  `active_until` datetime DEFAULT NULL COMMENT 'Ставки комиссии активны по(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__csc__courier_service_id` (`courier_service_id`),
  KEY `idx__csc__courier_service_id__active_until` (`courier_service_id`,`active_until`),
  CONSTRAINT `FK_9A1CFABFC86255AB` FOREIGN KEY (`courier_service_id`) REFERENCES `courier_services` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3158 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Данные о ставках комиссии курьерских служб (актуальные и исторические)';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_service_legal_info`
--

DROP TABLE IF EXISTS `courier_service_legal_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_service_legal_info` (
  `id` int(11) NOT NULL,
  `bank_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Наименование банка',
  `correspondence_address` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Адрес для получения корреспонденции',
  `signer_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ФИО подписанта',
  `signer_position` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Должность подписанта',
  `base_document_type` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Тип документа-основания',
  `base_document_information` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Сведения о документе-основании',
  `fias_code` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Код адреса по ФИАС',
  `contract_currency_code` varchar(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Валюта договора',
  `registration_country` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Страна регистрации',
  `external_contract_number` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Внешний номер договора',
  `representative_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ФИО представителя',
  `contract_type` varchar(12) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Тип договора',
  `kpp` varchar(9) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'КПП',
  `legal_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Юридическое название',
  `legal_address` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Юридический адрес',
  `reg_number` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Рег. номер',
  `correspondent_account` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Корреспондентский счет',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `legal_address_postcode` varchar(6) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Почтовый индекс юридического адреса',
  `correspondence_address_postcode` varchar(6) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Почтовый индекс адреса для получения корреспонденции',
  `info` json DEFAULT NULL COMMENT 'Специфичная юридическая информация',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Юридические данные курьерских служб';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_service_regions`
--

DROP TABLE IF EXISTS `courier_service_regions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_service_regions` (
  `courier_service_id` int(11) NOT NULL,
  `region_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`courier_service_id`,`region_id`),
  KEY `region_id` (`region_id`),
  CONSTRAINT `courier_service_regions_ibfk_1` FOREIGN KEY (`courier_service_id`) REFERENCES `courier_services` (`id`),
  CONSTRAINT `courier_service_regions_ibfk_2` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Связь курьерских служб и регионов их присутствия';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_services`
--

DROP TABLE IF EXISTS `courier_services`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_services` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '???????? ?????????? ??????',
  `inn` varchar(12) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð˜ÐÐ',
  `sno` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????? ???????????????',
  `vat` int(11) NOT NULL COMMENT '???',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `position_of_head` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '????????? ????????????',
  `full_name_of_head` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??????????? ??????? ???????????? ???????????',
  `full_name_of_chief_accountant` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??????????? ??????? ???????? ??????????',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????? ????????',
  `bank_account_id` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `bank_account_bic` varchar(9) COLLATE utf8_unicode_ci DEFAULT NULL,
  `disabled_for_cash_orders` tinyint(1) NOT NULL DEFAULT '0',
  `test` tinyint(1) NOT NULL DEFAULT '0' COMMENT '??????? ???????? ??. ??? ???????? ?? ?? ???????????? ??????? ?????? ? ???????',
  `ogrn` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ОГРН',
  `address` longtext COLLATE utf8_unicode_ci COMMENT '??????????? ?????',
  `work_schedule` longtext COLLATE utf8_unicode_ci COMMENT '????? ??????',
  `commission` decimal(4,2) DEFAULT NULL COMMENT '???????? (%)',
  `fixed_commission` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????????????? ???????? (? ???????)(DC2Type:money)',
  `acquiring_commission` decimal(4,2) DEFAULT NULL COMMENT '???????? ?? ????????? (%)',
  `marketing_commission` decimal(5,2) DEFAULT NULL COMMENT '????????????? ???????? (%)',
  `email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????????? ?????',
  `postcode` varchar(6) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '???????? ?????? ???????????? ??????',
  `status` enum('active','deactivated') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'active' COMMENT '?????? ?????????? ?????? (???????/??????????????)(DC2Type:courier_service_status)',
  `post_suffix` tinytext COLLATE utf8_unicode_ci COMMENT '??????????? ????',
  `country_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_services__name` (`name`),
  KEY `idx__courier_services__country_id` (`country_id`),
  KEY `idx__courier_services__created_at` (`created_at`),
  KEY `idx__courier_services__updated_at` (`updated_at`),
  CONSTRAINT `__fk__courier_services__country_id` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=443 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????????? ?????????? ?????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_shift_orders`
--

DROP TABLE IF EXISTS `courier_shift_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_shift_orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL COMMENT 'ID ??????',
  `shift_id` bigint(20) DEFAULT NULL COMMENT 'ID ÑÐ¼ÐµÐ½Ñ‹ ÐºÑƒÑ€ÑŒÐµÑ€Ð°, Ðº ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÑÑ Ð·Ð°ÐºÐ°Ð·(DC2Type:int64)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__courier_shift_orders__order_id` (`order_id`),
  KEY `idx__courier_shift_orders__created_at` (`created_at`),
  KEY `idx__courier_shift_orders__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1180100207 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='???????? ??????? ? ?????? ????????, ?? ??????? ???? ????? ??? ?????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_status_coordinates`
--

DROP TABLE IF EXISTS `courier_status_coordinates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_status_coordinates` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) NOT NULL,
  `order_id` int(11) NOT NULL,
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ???????? ??????',
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__order_id` (`order_id`),
  KEY `idx__courier_status_coordinates__updated_at` (`updated_at`),
  KEY `idx__courier_status_coordinates__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1690993202 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ???????? ????????????? ???????? ?? ??????? ? ???????????? ???????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_status_history`
--

DROP TABLE IF EXISTS `courier_status_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_status_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) DEFAULT NULL,
  `old_status` enum('active','blocked','candidate','on_vacation','ill','deactivated','lost','inactive') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '?????? ??????? ?? ?????????(DC2Type:courier_work_status)',
  `new_status` enum('active','blocked','candidate','on_vacation','ill','deactivated','lost','inactive') COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ??????? ????? ?????????(DC2Type:courier_work_status)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__courier_status_history__courier_id` (`courier_id`),
  KEY `idx__courier_status_history__created_at` (`created_at`),
  KEY `idx__courier_status_history__updated_at` (`updated_at`),
  CONSTRAINT `_FK_F00BC2A0E3D8151C` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=11869087 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ????????? ???????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `courier_tip_settings`
--

DROP TABLE IF EXISTS `courier_tip_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `courier_tip_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `predefined_tips` json NOT NULL COMMENT 'Предопределенные величины чаевых',
  `tip_message_template` text COLLATE utf8_unicode_ci NOT NULL COMMENT 'Шаблон сообщения с чаевыми',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `tip_available` tinyint(1) NOT NULL COMMENT 'Доступность функционала чаевых',
  `allowed_regions` json DEFAULT NULL COMMENT 'Разрешенные регионы',
  `allowed_courier_services` json DEFAULT NULL COMMENT 'Разрешенные курьерские службы',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `couriers`
--

DROP TABLE IF EXISTS `couriers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `couriers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(16) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ???????',
  `api_key` text COLLATE utf8_unicode_ci COMMENT '???? ??????? ? API',
  `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????',
  `salt` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '???? ??? ???????????',
  `password` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??????',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '????? ????????',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL,
  `telegram_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????? ? Telegram',
  `telegram_chat_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ???? ??? API Telegram',
  `location_date` datetime DEFAULT NULL,
  `location_latitude` decimal(10,6) DEFAULT NULL,
  `location_longitude` decimal(10,6) DEFAULT NULL,
  `logged_out_at` datetime DEFAULT NULL COMMENT '????/????? ?????? ?? ?????????? (?????????)(DC2Type:datetimetz)',
  `blocked_until` datetime DEFAULT NULL COMMENT '????? ??????? ??(DC2Type:datetimetz)',
  `courier_zone_id` int(11) DEFAULT NULL COMMENT 'ID ????, ? ??????? ????????? ??????',
  `courier_zone_updated_at` datetime DEFAULT NULL COMMENT '????/????? ???????????? ???? ???????',
  `region_id` int(11) unsigned DEFAULT NULL,
  `courier_service_id` int(11) DEFAULT NULL,
  `identity_document` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????????, ?????????????? ????????',
  `admin_id` int(11) DEFAULT NULL,
  `work_status` enum('active','blocked','candidate','on_vacation','ill','deactivated','lost','inactive') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'active' COMMENT '?????? ???????(DC2Type:courier_work_status)',
  `billing_type` enum('courier_service','self_employed','self_employed_nonresident','direct') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ð¢Ð¸Ð¿ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ñ… Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ð¹ (ÑÐ°Ð¼Ð¾Ð·Ð°Ð½ÑÑ‚Ñ‹Ð¹, ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ðº ÐšÐ¡)(DC2Type:courier_billing)',
  `partner_id` int(11) DEFAULT NULL COMMENT 'ID ? ??????? ????????, ?????????? ???????',
  `source` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '???????? ???????? ???????',
  `comment` text COLLATE utf8_unicode_ci COMMENT '???????????',
  `is_order_assign_available` tinyint(1) NOT NULL DEFAULT '1' COMMENT '???????? ?? ?????????????? ??????? ?? ???????',
  `zendesk_task_id` bigint(20) DEFAULT NULL COMMENT 'ID ?????? ? Zendesk(DC2Type:int64)',
  `pool_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐŸÑƒÐ» ÐºÑƒÑ€ÑŒÐµÑ€Ð°',
  `is_subscribed_to_push` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ð½ Ð»Ð¸ Ð½Ð° Ð¿ÑƒÑˆÐ¸',
  `work_status_updated_at` datetime NOT NULL COMMENT 'Ð”Ð°Ñ‚Ð°/Ð²Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° ÐºÑƒÑ€ÑŒÐµÑ€Ð°(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_4272E150F85E0677` (`username`),
  KEY `IDX_4272E1507D374A3B` (`courier_zone_id`),
  KEY `fk_couriers_region` (`region_id`),
  KEY `FK_4272E150C86255AB` (`courier_service_id`),
  KEY `fk__couriers__admin_id` (`admin_id`),
  KEY `idx__couriers__region_id__work_status` (`region_id`,`work_status`),
  KEY `idx__couriers__telegram_chat_id` (`telegram_chat_id`),
  KEY `idx__couriers__telegram_name` (`telegram_name`),
  KEY `idx__couriers__billing_type__work_status` (`billing_type`,`work_status`),
  KEY `idx__couriers__location_date` (`location_date`),
  KEY `idx__couriers__created_at` (`created_at`),
  KEY `idx__couriers__updated_at` (`updated_at`),
  KEY `idx__couriers__phone_number` (`phone_number`),
  KEY `idx__couriers__work_status_updated_at` (`work_status_updated_at`),
  CONSTRAINT `FK_4272E1507D374A3B` FOREIGN KEY (`courier_zone_id`) REFERENCES `courier_delivery_zones` (`id`),
  CONSTRAINT `FK_4272E150C86255AB` FOREIGN KEY (`courier_service_id`) REFERENCES `courier_services` (`id`),
  CONSTRAINT `__fk__couriers__admin_id` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `fk_couriers_region` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5439802 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='???????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `couriers_assign_log`
--

DROP TABLE IF EXISTS `couriers_assign_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `couriers_assign_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `courier_id` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `place_latitude` decimal(10,6) NOT NULL,
  `place_longitude` decimal(10,6) NOT NULL,
  `order_latitude` decimal(10,6) NOT NULL COMMENT '????? ?????????? ????? ?????????? (??????)',
  `order_longitude` decimal(10,6) NOT NULL COMMENT '????? ?????????? ????? ?????????? (???????)',
  `courier_latitude` decimal(10,6) NOT NULL,
  `courier_longitude` decimal(10,6) NOT NULL,
  `is_assigned` tinyint(1) NOT NULL COMMENT '??? ?? ?????? ?? ?????? ???????? (1) ??? ???? (0)',
  `assign_reason` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ/ÑÐ±Ñ€Ð¾ÑÐ° ÐºÑƒÑ€ÑŒÐµÑ€Ð°',
  `assign_meta` json DEFAULT NULL COMMENT 'ÐœÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¾Ð± Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ/ÑÐ±Ñ€Ð¾ÑÐ°',
  PRIMARY KEY (`id`),
  KEY `IDX_8EAB5A508D9F6D38` (`order_id`),
  KEY `IDX_8EAB5A50E3D8151C` (`courier_id`),
  KEY `idx__couriers_assign_log__created_at` (`created_at`),
  KEY `idx__couriers_assign_log__updated_at` (`updated_at`),
  CONSTRAINT `_FK_8EAB5A50E3D8151C` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=637925972 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ?????????? ???????? ?? ??????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `covid19_place_duplicates`
--

DROP TABLE IF EXISTS `covid19_place_duplicates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `covid19_place_duplicates` (
  `source_place_id` int(11) NOT NULL,
  `actual_launched_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`source_place_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `crm_users`
--

DROP TABLE IF EXISTS `crm_users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `crm_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `comment` longtext COLLATE utf8_unicode_ci,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `created_at` datetime NOT NULL,
  `sex` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `birthday` date DEFAULT NULL,
  `birthday_month_day` varchar(4) COLLATE utf8_unicode_ci DEFAULT NULL,
  `is_email_subscription` tinyint(1) NOT NULL DEFAULT '1',
  `is_sms_subscription` tinyint(1) NOT NULL DEFAULT '1',
  `segmentation_loyalty_level` int(11) DEFAULT NULL,
  `segmentation_recalculated_at` datetime DEFAULT NULL,
  `webim_token` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_A88AFAD1A76ED395` (`user_id`),
  UNIQUE KEY `ux__crm_users__webim_token` (`webim_token`),
  KEY `idx_birthday_month_day` (`birthday_month_day`),
  KEY `idx__crm_users__created_at` (`created_at`),
  KEY `idx__crm_users__updated_at` (`updated_at`),
  CONSTRAINT `FK_A88AFAD1A76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=332438592 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `delivery`
--

DROP TABLE IF EXISTS `delivery`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `delivery` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `initiator` smallint(6) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `IDX_3781EC108D9F6D38` (`order_id`),
  KEY `idx__delivery__created_at` (`created_at`),
  KEY `idx__delivery__updated_at` (`updated_at`),
  CONSTRAINT `_FK_3781EC108D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2838957 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `delivery_condition_term_thresholds`
--

DROP TABLE IF EXISTS `delivery_condition_term_thresholds`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `delivery_condition_term_thresholds` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `delivery_condition_term_id` int(11) NOT NULL,
  `order_price` int(11) NOT NULL,
  `delivery_cost` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_B5455B3F51FB4A6C` (`delivery_condition_term_id`),
  CONSTRAINT `fk__delivery_condition_term_thresholds__term_id` FOREIGN KEY (`delivery_condition_term_id`) REFERENCES `delivery_condition_terms` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=21797002 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `delivery_condition_terms`
--

DROP TABLE IF EXISTS `delivery_condition_terms`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `delivery_condition_terms` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `delivery_condition_id` int(11) NOT NULL,
  `is_default` tinyint(1) NOT NULL,
  `start_at` varchar(5) COLLATE utf8_unicode_ci DEFAULT NULL,
  `end_at` varchar(5) COLLATE utf8_unicode_ci DEFAULT NULL,
  `user_friendly_text` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `user_friendly_text_marketplace` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_72BFFB5717F46AB2` (`delivery_condition_id`),
  CONSTRAINT `_fk__delivery_condition_terms__delivery_condition_id` FOREIGN KEY (`delivery_condition_id`) REFERENCES `delivery_conditions` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=11613037 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `delivery_conditions`
--

DROP TABLE IF EXISTS `delivery_conditions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `delivery_conditions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `region_id` int(10) unsigned DEFAULT NULL,
  `place_type` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ix__delivery_conditions__region_id` (`region_id`),
  CONSTRAINT `fk__delivery_conditions__region_id` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11611642 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `delivery_planned_notifications`
--

DROP TABLE IF EXISTS `delivery_planned_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `delivery_planned_notifications` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `code` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `payload` json NOT NULL,
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `delivery_identity` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `planned_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__delivery_planned_notifications__created_at` (`created_at`),
  KEY `idx__delivery_planned_notifications__delivery_identity` (`delivery_identity`)
) ENGINE=InnoDB AUTO_INCREMENT=529879617 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `delivery_zone_vertices`
--

DROP TABLE IF EXISTS `delivery_zone_vertices`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `delivery_zone_vertices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) DEFAULT NULL,
  `number` int(11) DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_6E5C7710DA6A219` (`place_id`),
  KEY `place_number_idx` (`place_id`,`number`),
  CONSTRAINT `FK_6E5C7710DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7260289 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `delivery_zones_toggle_log`
--

DROP TABLE IF EXISTS `delivery_zones_toggle_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `delivery_zones_toggle_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `toggle_mode` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `region_id` int(10) unsigned DEFAULT NULL,
  `times_of_arrival` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `shipping_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `brands` longtext COLLATE utf8_unicode_ci COMMENT '(DC2Type:simple_array)',
  `business_types` longtext COLLATE utf8_unicode_ci COMMENT '(DC2Type:simple_array)',
  `shop_types` longtext COLLATE utf8_unicode_ci COMMENT '(DC2Type:simple_array)',
  `courier_types` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `deactivated_at` datetime DEFAULT NULL,
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'new',
  PRIMARY KEY (`id`),
  KEY `idx__delivery_zones_toggle_log__toggle_mode` (`toggle_mode`),
  KEY `idx__delivery_zones_toggle_log__region_id` (`region_id`),
  KEY `idx__delivery_zones_toggle_log__times_of_arrival` (`times_of_arrival`),
  KEY `idx__delivery_zones_toggle_log__created_at` (`created_at`),
  KEY `idx__delivery_zones_toggle_log__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=87387 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `eater_agreement_confirmations`
--

DROP TABLE IF EXISTS `eater_agreement_confirmations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `eater_agreement_confirmations` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `hash` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Unique agreement confirmation hash',
  `eater_agreement_id` bigint(20) unsigned NOT NULL COMMENT '(DC2Type:int64)',
  `eater_id` bigint(20) unsigned NOT NULL COMMENT 'Eater id(DC2Type:int64)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Entity created at',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Entity updated at',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__eater_agreement_confirmations__hash` (`hash`),
  KEY `idx__eater_agreement_confirmations__eater_id` (`eater_id`),
  KEY `idx__eater_agreement_confirmations__eater_agreement_id` (`eater_agreement_id`),
  KEY `idx__eater_agreement_confirmations__created_at` (`created_at`),
  KEY `idx__eater_agreement_confirmations__updated_at` (`updated_at`),
  CONSTRAINT `fk__eater_agreement_confirmations__eater_agreement_id` FOREIGN KEY (`eater_agreement_id`) REFERENCES `eater_agreements` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1838642 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='User agreements which user agreed for';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `eater_agreements`
--

DROP TABLE IF EXISTS `eater_agreements`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `eater_agreements` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `uid` char(36) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Unique agreement UUID4(DC2Type:guid)',
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Object type discriminator(DC2Type:eater_agreement_type)',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Agreement internal name',
  `hash` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Agreement data hash',
  `payload` json NOT NULL COMMENT 'Agreement data',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Entity created at',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Entity updated at',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__eater_agreements__uid` (`uid`),
  UNIQUE KEY `ux__eater_agreements__hash` (`hash`),
  KEY `idx__eater_agreements__name` (`name`),
  KEY `idx__eater_agreements__created_at` (`created_at`),
  KEY `idx__eater_agreements__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=62 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='User agreements';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `eater_auth_passport_statistics`
--

DROP TABLE IF EXISTS `eater_auth_passport_statistics`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `eater_auth_passport_statistics` (
  `eater_id` int(11) NOT NULL,
  `by_oauth_token` tinyint(1) NOT NULL DEFAULT '0',
  `by_sessionid` tinyint(1) NOT NULL DEFAULT '0',
  `by_eater_authorizer` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`eater_id`),
  KEY `idx__eater_auth_passport_statistics__created_at` (`created_at`),
  KEY `idx__eater_auth_passport_statistics__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `eater_passport_uid_history`
--

DROP TABLE IF EXISTS `eater_passport_uid_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `eater_passport_uid_history` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `passport_uid` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `eater_from` int(11) NOT NULL,
  `eater_to` int(11) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx__eater_passport_uid_history__passport_uid` (`passport_uid`),
  KEY `idx__eater_passport_uid_history__created_at` (`created_at`),
  KEY `idx__eater_passport_uid_history__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `eaters_reliability`
--

DROP TABLE IF EXISTS `eaters_reliability`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `eaters_reliability` (
  `eater_id` int(11) NOT NULL,
  `modified_at` datetime NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `decency` varchar(30) NOT NULL,
  `duplicates_eaters_by_address` json DEFAULT NULL,
  `duplicates_eaters_by_device` json DEFAULT NULL,
  `duplicates_eaters_by_card_geo_hash` json DEFAULT NULL,
  `duplicates_phones_by_device` json DEFAULT NULL,
  `duplicates_phones_by_address` json DEFAULT NULL,
  `duplicates_phones_by_card_geo_hash` json DEFAULT NULL,
  PRIMARY KEY (`eater_id`),
  KEY `idx__eaters_reliability__created_at` (`created_at`),
  KEY `idx__eaters_reliability__updated_at` (`updated_at`),
  KEY `idx__eaters_reliability__modified_at` (`modified_at`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `eats_catalog_storage_revisions`
--

DROP TABLE IF EXISTS `eats_catalog_storage_revisions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `eats_catalog_storage_revisions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `identifier` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `value` bigint(20) NOT NULL DEFAULT '0' COMMENT '(DC2Type:int64)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `failed_attempts` int(11) NOT NULL DEFAULT '0',
  `archived` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__eats_catalog_storage_revisions__type__identifier` (`type`,`identifier`),
  KEY `idx__eats_catalog_storage_revisions__created_at` (`created_at`),
  KEY `idx__eats_catalog_storage_revisions__updated_at` (`updated_at`),
  KEY `idx__eats_catalog_storage_revisions__failed_attempts` (`failed_attempts`)
) ENGINE=InnoDB AUTO_INCREMENT=3660162 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `email_log`
--

DROP TABLE IF EXISTS `email_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `email_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `user_id` int(11) DEFAULT NULL COMMENT 'ID Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ',
  `order_id` int(11) DEFAULT NULL,
  `recipient` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ÐŸÐ¾Ð»ÑƒÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ð¸ÑÑŒÐ¼Ð°',
  `subject` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ð¢ÐµÐ¼Ð° Ð¿Ð¸ÑÑŒÐ¼Ð°',
  `placeholders` json DEFAULT NULL COMMENT 'Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°',
  `created_at` datetime NOT NULL COMMENT 'Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ(DC2Type:datetimetz)',
  `type` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¢Ð¸Ð¿',
  `is_success` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Ð‘Ñ‹Ð»Ð° Ð»Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹',
  PRIMARY KEY (`id`),
  KEY `IDX_6FB4883A76ED395` (`user_id`),
  KEY `IDX_6FB48838D9F6D38` (`order_id`),
  KEY `idx_type_created_at` (`type`,`created_at`),
  CONSTRAINT `__FK_6FB48838D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`),
  CONSTRAINT `__FK_6FB4883A76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=496359687 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `exchange_log`
--

DROP TABLE IF EXISTS `exchange_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `exchange_log` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL,
  `type` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `direction` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `place_group_id` int(11) NOT NULL,
  `place_group_name` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `place_id` int(11) DEFAULT NULL,
  `integration_engine_id` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `status` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `log_uuid` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `additional_info` json NOT NULL COMMENT '(DC2Type:json)',
  PRIMARY KEY (`id`),
  KEY `created_at_idx` (`created_at`),
  KEY `created_at_status_place_group_place` (`type`,`status`,`created_at`,`place_group_id`,`place_id`),
  KEY `type_place_group_status_idx` (`type`,`place_group_id`,`status`),
  KEY `type_place_status_idx` (`type`,`place_id`,`status`),
  KEY `order_nr_status_idx` (`order_nr`,`status`)
) ENGINE=InnoDB AUTO_INCREMENT=6446079602 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `execution_schema_fragments`
--

DROP TABLE IF EXISTS `execution_schema_fragments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `execution_schema_fragments` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `task_id` bigint(20) NOT NULL COMMENT 'Task primary key',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Fragment name',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Fragment status',
  `priority` smallint(6) NOT NULL COMMENT 'Fragment priority',
  `config` json NOT NULL COMMENT 'Fragment config, see schema config for more details',
  `created_at` datetime NOT NULL COMMENT 'Date and time when fragment was created',
  `updated_at` datetime NOT NULL COMMENT 'Date and time when fragment was updated',
  PRIMARY KEY (`id`),
  KEY `idx__execution_schema_fragments__task_id` (`task_id`),
  KEY `idx__execution_schema_fragments__created_at` (`created_at`),
  KEY `idx__execution_schema_fragments__updated_at` (`updated_at`),
  CONSTRAINT `fk__execution_schema_fragments__task_id` FOREIGN KEY (`task_id`) REFERENCES `execution_schema_tasks` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3219354022 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `execution_schema_tasks`
--

DROP TABLE IF EXISTS `execution_schema_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `execution_schema_tasks` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'Task primary key',
  `idempotency_key` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Task idempotency key',
  `schema_class` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'FQNS for schema class',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Task status',
  `config` json NOT NULL COMMENT 'Task config, see schema config for more details',
  `created_at` datetime NOT NULL COMMENT 'Date and time when task was created',
  `updated_at` datetime NOT NULL COMMENT 'Date and time when task was updated',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__execution_schema_tasks__idempotency_key__schema_class` (`idempotency_key`,`schema_class`),
  KEY `idx__execution_schema_tasks__schema_class` (`schema_class`),
  KEY `idx__execution_schema_tasks__created_at` (`created_at`),
  KEY `idx__execution_schema_tasks__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=371851527 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `expenses_funds_holding_parameter_set`
--

DROP TABLE IF EXISTS `expenses_funds_holding_parameter_set`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `expenses_funds_holding_parameter_set` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `percent_value` decimal(4,2) NOT NULL,
  `brand_id` int(11) NOT NULL,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `confirmation_text` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_active` tinyint(1) NOT NULL,
  `active_status_changed_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_E74C56A244F5D008` (`brand_id`)
) ENGINE=InnoDB AUTO_INCREMENT=294 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `feedback_channel_applications`
--

DROP TABLE IF EXISTS `feedback_channel_applications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `feedback_channel_applications` (
  `feedback_channel_id` int(10) unsigned NOT NULL,
  `application_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`feedback_channel_id`,`application_id`),
  KEY `idx__feedback_channel_applications__feedback_channel_id` (`feedback_channel_id`),
  KEY `idx__feedback_channel_applications__application_id` (`application_id`),
  CONSTRAINT `fk__feedback_channel_applications__application_id` FOREIGN KEY (`application_id`) REFERENCES `applications` (`id`),
  CONSTRAINT `fk__feedback_channel_applications__feedback_channel_id` FOREIGN KEY (`feedback_channel_id`) REFERENCES `feedback_channels` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `feedback_channel_regions`
--

DROP TABLE IF EXISTS `feedback_channel_regions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `feedback_channel_regions` (
  `feedback_channel_id` int(10) unsigned NOT NULL,
  `region_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`feedback_channel_id`,`region_id`),
  KEY `idx__feedback_channel_regions__feedback_channel_id` (`feedback_channel_id`),
  KEY `idx__feedback_channel_regions__region_id` (`region_id`),
  CONSTRAINT `fk__feedback_channel_regions__feedback_channel_id` FOREIGN KEY (`feedback_channel_id`) REFERENCES `feedback_channels` (`id`),
  CONSTRAINT `fk__feedback_channel_regions__region_id` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `feedback_channel_types`
--

DROP TABLE IF EXISTS `feedback_channel_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `feedback_channel_types` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uq__feedback_channel_types__name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `feedback_channels`
--

DROP TABLE IF EXISTS `feedback_channels`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `feedback_channels` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `feedback_channel_type_id` int(10) unsigned NOT NULL,
  `channel` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `country_id` int(11) NOT NULL COMMENT 'Foreign key to countries',
  `enabled` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__feedback_channels__feedback_channel_type_id` (`feedback_channel_type_id`),
  KEY `idx__feedback_channels__country_id` (`country_id`),
  CONSTRAINT `fk__feedback_channels__country_id` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`),
  CONSTRAINT `fk__feedback_channels__feedback_channel_type_id` FOREIGN KEY (`feedback_channel_type_id`) REFERENCES `feedback_channel_types` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=55 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `filters`
--

DROP TABLE IF EXISTS `filters`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) DEFAULT NULL,
  `place_group_id` int(11) DEFAULT NULL,
  `brand_id` int(10) unsigned DEFAULT NULL,
  `filter` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `filter_type` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `delete_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `IDX_7877678DDA6A219` (`place_id`),
  KEY `IDX_7877678DD40F3EC4` (`place_group_id`),
  KEY `_FK_7877678D44F5D008` (`brand_id`),
  KEY `idx__filters__delete_at` (`delete_at`),
  CONSTRAINT `_FK_7877678DD40F3EC4` FOREIGN KEY (`place_group_id`) REFERENCES `place_groups` (`id`),
  CONSTRAINT `_FK_7877678DDA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=258252 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `finance_payment_cards`
--

DROP TABLE IF EXISTS `finance_payment_cards`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `finance_payment_cards` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `card_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'External card id',
  `card_number` varchar(19) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Masked payment card number',
  `bank_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Bank human name',
  `payment_system` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Card payment system such as Visa or Mastercard',
  `created_at` datetime NOT NULL COMMENT 'Date when record created',
  `updated_at` datetime NOT NULL COMMENT 'Date when record last updated',
  PRIMARY KEY (`id`),
  KEY `idx__finance_payment_cards__created_at` (`created_at`),
  KEY `idx__finance_payment_cards__updated_at` (`updated_at`),
  KEY `idx__finance_payment_cards__card_id` (`card_id`)
) ENGINE=InnoDB AUTO_INCREMENT=116938482 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `finance_payment_confirmation_tasks`
--

DROP TABLE IF EXISTS `finance_payment_confirmation_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `finance_payment_confirmation_tasks` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип оплаты',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Статус отправки во внешний сервис',
  `attempts` int(11) NOT NULL DEFAULT '0' COMMENT 'Количество попыток отправки',
  `data` json NOT NULL COMMENT 'Платежные данные для отправки во внешний сервис',
  `error` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Сообщение об ошибке отправки',
  `created_at` datetime NOT NULL COMMENT 'Дата создания',
  `updated_at` datetime NOT NULL COMMENT 'Дата обновления',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__finance_payment_confirmation_tasks__order_nr` (`order_nr`),
  KEY `idx__finance_payment_confirmation_tasks__created_at` (`created_at`),
  KEY `idx__finance_payment_confirmation_tasks__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=311732782 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `finance_payment_donation_orders`
--

DROP TABLE IF EXISTS `finance_payment_donation_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `finance_payment_donation_orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа',
  `donation_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа пожертвования',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип благотворительности',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Статус',
  `service` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Сервис',
  `amount` decimal(13,2) unsigned NOT NULL COMMENT 'Стоимость всего заказа для заказчика',
  `currency` varchar(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Валюта',
  `yandex_uid` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Дата создания',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Дата обновления',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__finance_payment_donation_orders__donation_order_id` (`donation_order_id`),
  UNIQUE KEY `ux__finance_payment_donation_orders__order_nr` (`order_nr`),
  KEY `idx__finance_payment_donation_orders__created_at` (`created_at`),
  KEY `idx__finance_payment_donation_orders__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=171836602 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `finance_refund_products_tasks`
--

DROP TABLE IF EXISTS `finance_refund_products_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `finance_refund_products_tasks` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `idempotency_key` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Products to refund request idempotency key',
  `products_to_refund` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT 'Products to refund dto',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Task status(DC2Type:finance_refund_products_task_status_type)',
  `last_error_message` longtext COLLATE utf8_unicode_ci,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when task was created',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when task was updated',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__finance_refund_products_tasks__idempotency_key` (`idempotency_key`),
  KEY `idx__finance_refund_products_tasks__created_at` (`created_at`),
  KEY `idx__finance_refund_products_tasks__updated_at` (`updated_at`),
  KEY `idx__finance_refund_products_tasks__order_nr` (`order_nr`)
) ENGINE=InnoDB AUTO_INCREMENT=5756457 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Task to refund products';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `fns_api_requests`
--

DROP TABLE IF EXISTS `fns_api_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `fns_api_requests` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `original_request_id` bigint(20) DEFAULT NULL COMMENT 'ID ??????????? ???????',
  `courier_id` int(11) DEFAULT NULL COMMENT 'ID ???????',
  `method` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT '????? API ???',
  `request` text COLLATE utf8_unicode_ci NOT NULL COMMENT '???? ???????',
  `response` text COLLATE utf8_unicode_ci COMMENT '????? ?? ??????',
  `message_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID, ?? ???????? ????? ???????? ????? ????? API ???',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `started_at` datetime DEFAULT NULL COMMENT '????/????? ???????? ???????',
  `finished_at` datetime DEFAULT NULL COMMENT '????/????? ????????? ??????',
  `is_failed` tinyint(1) NOT NULL DEFAULT '0' COMMENT '?????????? ?????????? ???????',
  `signature` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????????? ????? ???????',
  PRIMARY KEY (`id`),
  KEY `idx__fns_api_requests__signature` (`signature`),
  KEY `idx__fns_api_requests__created_at` (`created_at`),
  KEY `idx__fns_api_requests__is_failed__finished_at` (`is_failed`,`finished_at`),
  KEY `idx__fns_api_requests__original_request_id` (`original_request_id`),
  KEY `idx__fns_api_requests__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=724754892 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ? ??? ?? ???????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `fns_offline_cheque_keys`
--

DROP TABLE IF EXISTS `fns_offline_cheque_keys`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `fns_offline_cheque_keys` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) NOT NULL COMMENT 'ID курьеа',
  `sequence_number` int(11) NOT NULL COMMENT 'Порядковый номер ключа',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `expires_at` datetime NOT NULL COMMENT 'Дата/время истечения ключа',
  `is_used` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Использован ли ключ',
  `key` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ключ',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__fns_offline_cheque_keys__courier_id__sequence_number` (`courier_id`,`sequence_number`),
  KEY `idx__fns_offline_cheque_keys__courier_id__expires_at` (`courier_id`,`expires_at`),
  KEY `idx__fns_offline_cheque_keys__expires_at` (`expires_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1535398172 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Ключи для оффлайн-чеков';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `fraud_suspicious_activity`
--

DROP TABLE IF EXISTS `fraud_suspicious_activity`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `fraud_suspicious_activity` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `eater_id` int(11) NOT NULL COMMENT 'Eater identity',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Suspicious activity type',
  `created_at` datetime NOT NULL COMMENT 'Date when record was created(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__fraud_suspicious_activity__order_nr` (`order_nr`),
  KEY `idx__fraud_suspicious_activity__created_at` (`created_at`),
  KEY `idx__fraud_suspicious_activity__eater_id__type` (`eater_id`,`type`)
) ENGINE=InnoDB AUTO_INCREMENT=20227 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `google_pay_promo_taxi_user_phones_disabled`
--

DROP TABLE IF EXISTS `google_pay_promo_taxi_user_phones_disabled`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `google_pay_promo_taxi_user_phones_disabled` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `phone` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Disabled taxi user phone',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `phone_unique_idx` (`phone`)
) ENGINE=InnoDB AUTO_INCREMENT=15359344 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `history`
--

DROP TABLE IF EXISTS `history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `type` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `pk` int(11) NOT NULL,
  `dump` longtext COLLATE utf8_unicode_ci NOT NULL,
  `changeset` longtext COLLATE utf8_unicode_ci,
  `update_type` varchar(3) COLLATE utf8_unicode_ci NOT NULL,
  `tag` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL,
  `tag_pk` int(10) unsigned DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `user_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_pk` (`pk`),
  KEY `idx_tag_pk_created` (`tag_pk`,`created_at`),
  KEY `idx__history__tag_tag_pk_id` (`tag`,`tag_pk`,`id`),
  KEY `idx__history__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=18207910012 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idempotency_tokens`
--

DROP TABLE IF EXISTS `idempotency_tokens`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idempotency_tokens` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `token` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Idempotency token',
  `resource` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Can be entity or service class name',
  `resource_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Id that refers to the idempotence key',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when record was created',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__idempotency_tokens__token__resource` (`token`,`resource`),
  KEY `idx__idempotency_tokens__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=25993502 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Request idempotency tokens';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_node_alias_names`
--

DROP TABLE IF EXISTS `idm_node_alias_names`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_node_alias_names` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idm_node_alias_id` int(11) NOT NULL,
  `lang` varchar(2) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Имена псевдонимов';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_node_aliases`
--

DROP TABLE IF EXISTS `idm_node_aliases`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_node_aliases` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idm_node_id` int(11) NOT NULL,
  `type` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__idm_node_aliases__idm_node_id` (`idm_node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Псевдонимы роли';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_node_attributes`
--

DROP TABLE IF EXISTS `idm_node_attributes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_node_attributes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idm_node_id` int(11) NOT NULL,
  `type` enum('set','firewall_declaration','visibility') COLLATE utf8_unicode_ci NOT NULL,
  `value` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__idm_node_attributes__idm_node_id_type` (`idm_node_id`,`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Необязательные атрибуты ролей или групп';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_node_helps`
--

DROP TABLE IF EXISTS `idm_node_helps`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_node_helps` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idm_node_id` int(11) NOT NULL,
  `lang` varchar(2) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__idm_node_helps__idm_node_id_lang_name` (`idm_node_id`,`lang`,`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Подсказки роли';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_node_names`
--

DROP TABLE IF EXISTS `idm_node_names`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_node_names` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idm_node_id` int(11) NOT NULL,
  `lang` varchar(2) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__idm_node_names__idm_node_id_lang_name` (`idm_node_id`,`lang`,`name`)
) ENGINE=InnoDB AUTO_INCREMENT=319 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Имена роли или группы';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_node_responsibilities`
--

DROP TABLE IF EXISTS `idm_node_responsibilities`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_node_responsibilities` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idm_node_id` int(11) NOT NULL,
  `username` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `notify` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__idm_node_responsibilities__idm_node_id_username` (`idm_node_id`,`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Ответственные за роли';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_nodes`
--

DROP TABLE IF EXISTS `idm_nodes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_nodes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) DEFAULT NULL,
  `type` enum('group','role') COLLATE utf8_unicode_ci NOT NULL,
  `slug` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__idm_nodes__type_slug` (`type`,`slug`),
  KEY `idx__idm_nodes__parent_id` (`parent_id`)
) ENGINE=InnoDB AUTO_INCREMENT=314 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Роли и группы';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_user_roles`
--

DROP TABLE IF EXISTS `idm_user_roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_user_roles` (
  `idm_user_id` int(11) NOT NULL,
  `idm_role_id` int(11) NOT NULL,
  PRIMARY KEY (`idm_user_id`,`idm_role_id`),
  KEY `idx__idm_user_roles__idm_role_id` (`idm_role_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Роли пользователя';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `idm_users`
--

DROP TABLE IF EXISTS `idm_users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `idm_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `login` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `status` enum('active','deleted') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'active',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=59552 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Пользователь с IDM';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_engines`
--

DROP TABLE IF EXISTS `integration_engines`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_engines` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `is_hidden` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_E5C322D55E237E06` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=148 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_fastfood_experiment_configurations`
--

DROP TABLE IF EXISTS `integration_fastfood_experiment_configurations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_fastfood_experiment_configurations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `schedule` longtext COLLATE utf8_unicode_ci,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_job`
--

DROP TABLE IF EXISTS `integration_job`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_job` (
  `id` binary(16) NOT NULL,
  `job_status` smallint(5) unsigned NOT NULL,
  `job_type` smallint(5) unsigned NOT NULL,
  `created_at` datetime NOT NULL,
  `job_timeout_at` datetime NOT NULL,
  `status_updated_at` datetime NOT NULL,
  `payload` text COLLATE utf8_unicode_ci,
  PRIMARY KEY (`id`),
  KEY `idx_integration_job_created_at` (`created_at`),
  KEY `idx_integration_job_job_timeout_at` (`job_timeout_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_order_statuses`
--

DROP TABLE IF EXISTS `integration_order_statuses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_order_statuses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__integration_order_statuses__updated_at` (`updated_at`) USING BTREE,
  KEY `idx__integration_order_statuses__origin_id` (`origin_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1120843692 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_parsing_job_locks`
--

DROP TABLE IF EXISTS `integration_parsing_job_locks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_parsing_job_locks` (
  `id` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `token` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `expiration` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_parsing_jobs`
--

DROP TABLE IF EXISTS `integration_parsing_jobs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_parsing_jobs` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `job_id` varchar(36) COLLATE utf8_unicode_ci NOT NULL,
  `place_id` int(11) NOT NULL,
  `menu_url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `status` smallint(6) NOT NULL,
  `additional_info` json NOT NULL COMMENT '(DC2Type:json)',
  `attempt` smallint(5) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx__integration_parsing_jobs__job_id` (`job_id`),
  KEY `idx__integration_parsing_jobs__created_at` (`created_at`),
  KEY `idx__integration_parsing_jobs__updated_at` (`updated_at`),
  KEY `idx__integration_parsing_jobs__place_id` (`place_id`)
) ENGINE=InnoDB AUTO_INCREMENT=133854017 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_promo_items`
--

DROP TABLE IF EXISTS `integration_promo_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_promo_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `promo_origin_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__integration_promo_items__place_id__origin_id` (`place_id`,`origin_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3378 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_tokens`
--

DROP TABLE IF EXISTS `integration_tokens`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_tokens` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `integration_user_id` int(11) NOT NULL,
  `token` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_5B04A39BCA4269CC` (`integration_user_id`),
  CONSTRAINT `FK_5B04A39BCA4269CC` FOREIGN KEY (`integration_user_id`) REFERENCES `integration_users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `integration_users`
--

DROP TABLE IF EXISTS `integration_users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `integration_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `user_permissions` json NOT NULL,
  `user_attributes` json NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__integration_users__username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `landing_seo_urls`
--

DROP TABLE IF EXISTS `landing_seo_urls`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `landing_seo_urls` (
  `landing_id` int(11) NOT NULL,
  `url_id` int(11) NOT NULL,
  PRIMARY KEY (`landing_id`,`url_id`),
  KEY `IDX_9AF86360EFD98736` (`landing_id`),
  KEY `IDX_9AF8636081CFDAE7` (`url_id`),
  CONSTRAINT `FK_9AF8636081CFDAE7` FOREIGN KEY (`url_id`) REFERENCES `landings` (`id`),
  CONSTRAINT `FK_9AF86360EFD98736` FOREIGN KEY (`landing_id`) REFERENCES `seo_params` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `landings`
--

DROP TABLE IF EXISTS `landings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `landings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `header` varchar(70) COLLATE utf8_unicode_ci DEFAULT NULL,
  `slug` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT '0',
  `place_set` text COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:place_set)',
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `brand_id` int(10) unsigned NOT NULL,
  `web_picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `mobile_picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `disclaimer` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `web_avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `mobile_avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `logo_picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `logo_avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `seo_title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `seo_description` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx__landings__slug` (`slug`),
  KEY `_fk__landings__brand_id` (`brand_id`)
) ENGINE=InnoDB AUTO_INCREMENT=200 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `legal_info`
--

DROP TABLE IF EXISTS `legal_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `legal_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tin` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `legal_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistic_place_groups`
--

DROP TABLE IF EXISTS `logistic_place_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistic_place_groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '???????????? ????????????? ?????? ????',
  `is_enabled` tinyint(1) NOT NULL DEFAULT '1' COMMENT '???? ?????????? ????????????? ??????',
  `zone_id` int(11) DEFAULT NULL COMMENT '???? ??????? ????????????? ????????????? ?????? ????(????????? ????????)',
  `meta_group` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '?????????? ????????????? ??????(???? ??? ???? ????? ???? ???????)',
  `return_point_latitude` decimal(10,6) NOT NULL COMMENT '?????? ????? ????? ?????? ??????????',
  `return_point_longitude` decimal(10,6) NOT NULL COMMENT '??????? ????? ????? ?????? ??????????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `performers_restriction_type` varchar(128) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'no_restrictions' COMMENT 'Ð¢Ð¸Ð¿ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŽ',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__logistic_place_groups__zone_id` (`zone_id`),
  KEY `idx__logistic_place_groups__is_enabled__zone_id` (`is_enabled`,`zone_id`),
  KEY `idx__logistic_place_groups__created_at` (`created_at`),
  KEY `idx__logistic_place_groups__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=7797 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistic_place_groups_places`
--

DROP TABLE IF EXISTS `logistic_place_groups_places`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistic_place_groups_places` (
  `logistic_place_group_id` int(11) NOT NULL,
  `place_id` int(11) NOT NULL,
  PRIMARY KEY (`logistic_place_group_id`,`place_id`),
  KEY `IDX_2CE9C5A9F270675E` (`logistic_place_group_id`),
  KEY `IDX_2CE9C5A9DA6A219` (`place_id`),
  CONSTRAINT `FK_2CE9C5A9DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `FK_2CE9C5A9F270675E` FOREIGN KEY (`logistic_place_group_id`) REFERENCES `logistic_place_groups` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_admin_place_permissions`
--

DROP TABLE IF EXISTS `logistics_admin_place_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_admin_place_permissions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `admin_id` int(11) NOT NULL COMMENT 'ID администратора',
  `place_id` int(11) NOT NULL COMMENT 'ID ресторана',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__logistics_user_place_permissions__admin_id__place_id` (`admin_id`,`place_id`),
  KEY `idx__logistics_user_place_permissions__created_at` (`created_at`),
  KEY `idx__logistics_user_place_permissions__updated_at` (`updated_at`),
  KEY `ux__logistics_user_place_permissions__admin_id` (`admin_id`)
) ENGINE=InnoDB AUTO_INCREMENT=39 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Права ';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_admin_retail_permissions`
--

DROP TABLE IF EXISTS `logistics_admin_retail_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_admin_retail_permissions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `admin_id` int(11) NOT NULL COMMENT 'ID администратора',
  `place_id` int(11) NOT NULL COMMENT 'ID ресторана',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__logistics_user_retail_permissions__admin_id__place_id` (`admin_id`,`place_id`),
  KEY `idx__logistics_user_retail_permissions__created_at` (`created_at`),
  KEY `idx__logistics_user_retail_permissions__updated_at` (`updated_at`),
  KEY `ux__logistics_user_retail_permissions__admin_id` (`admin_id`)
) ENGINE=InnoDB AUTO_INCREMENT=987 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Права мониторинга заказов ртейла';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_brand_comments`
--

DROP TABLE IF EXISTS `logistics_brand_comments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_brand_comments` (
  `brand_id` int(11) NOT NULL,
  `comment` varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`brand_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_antifraud_queue`
--

DROP TABLE IF EXISTS `logistics_courier_antifraud_queue`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_antifraud_queue` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) NOT NULL COMMENT 'ID курьера',
  `detects_string` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT 'Строка для проверки',
  `retries_remaining` int(11) NOT NULL COMMENT 'Оставшееся количество попыток',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_antifraud_queue__retries_remaining` (`retries_remaining`),
  KEY `idx__logistics_courier_antifraud_queue__created_at` (`created_at`),
  KEY `idx__logistics_courier_antifraud_queue__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Очередь для курьерского антифрода';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_mailing_tasks`
--

DROP TABLE IF EXISTS `logistics_courier_mailing_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_mailing_tasks` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_mailing_id` int(11) NOT NULL,
  `courier_id` int(11) NOT NULL COMMENT 'ID курьера',
  `message` text COLLATE utf8_unicode_ci NOT NULL COMMENT 'Сообщение',
  `status` enum('created','in_queue','sent','failed') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Статус отправки(DC2Type:courier_mailing_status)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_mailing_tasks__courier_mailing_id` (`courier_mailing_id`),
  KEY `idx__logistics_courier_mailing_tasks__status` (`status`),
  KEY `idx__logistics_courier_mailing_tasks__created_at` (`created_at`),
  KEY `idx__logistics_courier_mailing_tasks__updated_at` (`updated_at`),
  CONSTRAINT `fk__logistics_courier_mailing_tasks__courier_mailing_id` FOREIGN KEY (`courier_mailing_id`) REFERENCES `logistics_courier_mailings` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=43781782 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Задачи в рассылках для курьеров';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_mailings`
--

DROP TABLE IF EXISTS `logistics_courier_mailings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_mailings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `courier_count` int(11) NOT NULL COMMENT 'Количество курьеров в рассылке',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Дата создания(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `finished_at` datetime DEFAULT NULL COMMENT 'Дата выполнения(DC2Type:datetimetz)',
  `admin_id` int(11) DEFAULT NULL COMMENT 'Автор рассылки',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_mailings__created_at` (`created_at`),
  KEY `idx__logistics_courier_mailings__updated_at` (`updated_at`),
  KEY `idx__logistics_courier_mailings__finished_at` (`finished_at`)
) ENGINE=InnoDB AUTO_INCREMENT=27287 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Рассылки для курьеров';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_poll_reminders`
--

DROP TABLE IF EXISTS `logistics_courier_poll_reminders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_poll_reminders` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) NOT NULL COMMENT 'ID курьера',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_poll_reminders__created_at` (`created_at`),
  KEY `idx__logistics_courier_poll_reminders__updated_at` (`updated_at`),
  KEY `idx__logistics_courier_poll_reminders__created_at_courier_id` (`created_at`,`courier_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6649157 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Напоминания об опросах курьеров';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_poll_responses`
--

DROP TABLE IF EXISTS `logistics_courier_poll_responses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_poll_responses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `poll_id` int(11) NOT NULL COMMENT 'ID ??????',
  `courier_id` int(11) NOT NULL COMMENT 'ID ???????',
  `selected_variant_id` int(11) DEFAULT NULL COMMENT 'ID ?????????? ????????',
  `poll_message_id` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ID ????????? ? ???????',
  `response_received_at` datetime DEFAULT NULL COMMENT '????? ?????? ?? ?????(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `response` text COLLATE utf8_unicode_ci COMMENT 'ÐžÑ‚Ð²ÐµÑ‚ Ð½Ð° Ð¾Ð¿Ñ€Ð¾Ñ (Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ Ð¾Ð¿Ñ€Ð¾ÑÐ° Ð±ÐµÐ· Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð²)',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_poll_responses__created_at` (`created_at`),
  KEY `idx__logistics_courier_poll_responses__updated_at` (`updated_at`),
  KEY `idx__logistics_courier_poll_responses__poll_message_id` (`poll_message_id`),
  KEY `idx__logistics_courier_poll_responses__poll_id__courier_id` (`poll_id`,`courier_id`)
) ENGINE=InnoDB AUTO_INCREMENT=14902167 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????? ???????? ?? ??????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_poll_variants`
--

DROP TABLE IF EXISTS `logistics_courier_poll_variants`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_poll_variants` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `poll_id` int(11) NOT NULL COMMENT 'ID опроса',
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Вариант ответа',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_poll_variants__created_at` (`created_at`),
  KEY `idx__logistics_courier_poll_variants__updated_at` (`updated_at`),
  KEY `idx__logistics_courier_poll_variants__poll_id` (`poll_id`),
  CONSTRAINT `_fk__logistics_courier_poll_variants__poll_id` FOREIGN KEY (`poll_id`) REFERENCES `logistics_courier_polls` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=480 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Опросы курьеров';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_polls`
--

DROP TABLE IF EXISTS `logistics_courier_polls`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_polls` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `alias` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT '????? ??????',
  `title` text COLLATE utf8_unicode_ci NOT NULL COMMENT '???? ??????',
  `max_reaction_time` int(11) DEFAULT NULL COMMENT '????? ???????? ?????? (???)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `poll_type` enum('poll','inlinePoll','freeAnswer') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'poll' COMMENT 'Ð¢Ð¸Ð¿ Ð¾Ð¿Ñ€Ð¾ÑÐ° (poll/inlinePoll/freeAnswer)(DC2Type:courier_poll_type)',
  `group` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ??????',
  `deleted_at` datetime DEFAULT NULL COMMENT 'Время отключения опроса',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__logistics_courier_polls__alias` (`alias`),
  KEY `idx__logistics_courier_polls__created_at` (`created_at`),
  KEY `idx__logistics_courier_polls__updated_at` (`updated_at`),
  KEY `idx__logistics_courier_polls__group` (`group`)
) ENGINE=InnoDB AUTO_INCREMENT=108 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='?????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_ratings`
--

DROP TABLE IF EXISTS `logistics_courier_ratings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_ratings` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `external_id` bigint(20) NOT NULL COMMENT 'ID записи во внешней системе(DC2Type:int64)',
  `courier_id` int(11) NOT NULL COMMENT 'ID курьера',
  `period_started_at` date NOT NULL COMMENT 'Дата начала периода',
  `period_finished_at` date NOT NULL COMMENT 'Дата окончания периода',
  `rating` decimal(10,6) NOT NULL COMMENT 'Рейтинг',
  `group` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Группа по рейтингу',
  `comment` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT 'Комментарий к рейтингу',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__logistics_courier_ratings__external_id` (`external_id`),
  KEY `idx__logistics_courier_ratings__courier_id` (`courier_id`),
  KEY `idx__logistics_courier_ratings__created_at` (`created_at`),
  KEY `idx__logistics_courier_ratings__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_shift_salary`
--

DROP TABLE IF EXISTS `logistics_courier_shift_salary`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_shift_salary` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `external_id` bigint(20) DEFAULT NULL COMMENT 'ID записи во внешней системе(DC2Type:int64)',
  `courier_id` int(11) NOT NULL COMMENT 'ID курьера',
  `shift_id` bigint(20) NOT NULL COMMENT 'ID смены(DC2Type:int64)',
  `date` date NOT NULL COMMENT 'Дата смены',
  `profit` decimal(10,2) NOT NULL COMMENT 'Доход за смену',
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Валюта',
  `lost_profit` decimal(10,2) NOT NULL COMMENT 'Упущенная выгода за смену',
  `tips_profit` decimal(10,2) NOT NULL COMMENT 'Чаевые за смену',
  `distance_to_customer` decimal(7,4) NOT NULL COMMENT 'Километраж от ресторана до клиента по всем заказам за смену',
  `amount_per_km_to_customer` decimal(10,2) DEFAULT NULL COMMENT 'Сумма за километр',
  `order_count` int(11) NOT NULL DEFAULT '0' COMMENT 'Количество заказов за смену, которые были доставлены / отменены с причиной ''Клиент не вышел на связь''',
  `planned_time` int(11) DEFAULT NULL COMMENT 'Плановое время на слоте в секундах',
  `actual_time` int(11) NOT NULL COMMENT 'Фактическое время на слоте в секундах',
  `share_offline_time` decimal(10,6) NOT NULL COMMENT 'Доля офлайн на слоте',
  `amount_per_pickup` decimal(10,2) NOT NULL COMMENT 'За взятие заказа',
  `amount_per_drop_off` decimal(10,2) NOT NULL COMMENT 'За доставку заказа',
  `lost_profit_late_pickup` decimal(10,2) NOT NULL COMMENT 'Упущенная выгода из-за позднего взятия заказа',
  `lost_profit_drop_off` decimal(10,2) NOT NULL COMMENT 'Упущенная выгода из-за поздней доставки',
  `minimal_amount_profit` decimal(10,2) NOT NULL COMMENT 'Доплата по минималке',
  `is_newbee` tinyint(1) NOT NULL COMMENT 'Курьер-новичок',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__logistics_courier_shift_salary__external_id` (`external_id`),
  KEY `idx__logistics_courier_shift_salary__courier_id__date` (`courier_id`,`date`),
  KEY `idx__logistics_courier_shift_salary__created_at` (`created_at`),
  KEY `idx__logistics_courier_shift_salary__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_tip_commissions`
--

DROP TABLE IF EXISTS `logistics_courier_tip_commissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_tip_commissions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `commission` decimal(5,2) NOT NULL COMMENT 'Комиссия (%)',
  `fixed_commission` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Фиксированная комиссия (с валютой)(DC2Type:money)',
  `acquiring_commission` decimal(5,2) NOT NULL COMMENT 'Комиссия за эквайринг (%)',
  `marketing_commission` decimal(5,2) NOT NULL COMMENT 'Маркетинговая комиссия (%)',
  `active_until` datetime DEFAULT NULL COMMENT 'Ставки комиссии активны по(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_tip_commissions__active_until` (`active_until`),
  KEY `idx__logistics_courier_tip_commissions__created_at` (`created_at`),
  KEY `idx__logistics_courier_tip_commissions__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_tip_status_history`
--

DROP TABLE IF EXISTS `logistics_courier_tip_status_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_tip_status_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `tip_id` bigint(20) NOT NULL COMMENT '(DC2Type:int64)',
  `old_status` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Старый статус чаевых',
  `new_status` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Новый статус чаевых',
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_tip_status_history__tip_id` (`tip_id`),
  KEY `idx__logistics_courier_tip_status_history__created_at` (`created_at`),
  CONSTRAINT `fk__logistics_courier_tip_status_history__tip_id` FOREIGN KEY (`tip_id`) REFERENCES `logistics_courier_tips` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=104670447 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='История статусов чаевых';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_tips`
--

DROP TABLE IF EXISTS `logistics_courier_tips`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_tips` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `courier_id` int(11) NOT NULL,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'orderNr заказа',
  `status` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Статус чаевых',
  `description` text COLLATE utf8_unicode_ci COMMENT 'Комментарий к чаевым',
  `amount` decimal(10,2) NOT NULL COMMENT 'Сумма выплаты в рублях',
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Валюта',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_tips__courier_id` (`courier_id`),
  KEY `idx__logistics_courier_tips__order_nr__courier_id` (`order_nr`,`courier_id`),
  KEY `idx__logistics_courier_tips__order_nr__created_at` (`created_at`),
  KEY `idx__logistics_courier_tips__order_nr__updated_at` (`updated_at`),
  KEY `idx__logistics_courier_tips__status__updated_at` (`status`,`updated_at`),
  CONSTRAINT `fk__logistics_courier_tips__courier_id` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=21022062 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Чаевые курьерам';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_courier_work_licenses`
--

DROP TABLE IF EXISTS `logistics_courier_work_licenses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_courier_work_licenses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `courier_id` int(11) NOT NULL,
  `license_id` int(11) NOT NULL,
  `active_until` datetime NOT NULL COMMENT 'Действителен до(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx__logistics_courier_work_licenses__courier_id` (`courier_id`),
  KEY `idx__logistics_courier_work_licenses__license_id` (`license_id`),
  KEY `idx__logistics_courier_work_licenses__active_until` (`active_until`),
  KEY `idx__logistics_courier_work_licenses__created_at` (`created_at`),
  KEY `idx__logistics_courier_work_licenses__updated_at` (`updated_at`),
  CONSTRAINT `fk__logistics_courier_work_licenses__courier_id` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`),
  CONSTRAINT `fk__logistics_courier_work_licenses__license_id` FOREIGN KEY (`license_id`) REFERENCES `logistics_region_work_licenses` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Патенты курьеров';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_deliveries`
--

DROP TABLE IF EXISTS `logistics_deliveries`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_deliveries` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `status` varchar(64) COLLATE utf8_unicode_ci DEFAULT 'delivery_not_processed' COMMENT 'Delivery status',
  `time_to_prepare` int(11) NOT NULL COMMENT 'Time to prepare',
  `time_to_delivery` int(11) NOT NULL COMMENT 'Time to delivery',
  `delivery_to` datetime NOT NULL COMMENT 'Must be delivered to client at time(DC2Type:datetimetz)',
  `delivery_info_id` int(11) DEFAULT NULL COMMENT 'Delivery info ID',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `courier_id` int(11) DEFAULT NULL COMMENT 'Courier ID',
  `courier_type` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Courier travel type',
  `place_coordinates_latitude` decimal(10,6) NOT NULL,
  `place_coordinates_longitude` decimal(10,6) NOT NULL,
  `customer_coordinates_latitude` decimal(10,6) NOT NULL,
  `customer_coordinates_longitude` decimal(10,6) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__logistics_deliveries__order_number__status` (`status`,`order_number`),
  KEY `idx__logistics_deliveries__courier_id__status` (`courier_id`,`status`),
  KEY `idx__logistics_deliveries__order_number` (`order_number`)
) ENGINE=InnoDB AUTO_INCREMENT=5146572 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_deliveries_info`
--

DROP TABLE IF EXISTS `logistics_deliveries_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_deliveries_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `order_id` int(11) NOT NULL COMMENT 'Order ID',
  `order_is_cash` tinyint(1) NOT NULL COMMENT 'Pay by cash',
  `region_id` int(11) NOT NULL COMMENT 'Region ID',
  `region_timezone` varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'Europe/Moscow' COMMENT 'Region time zone',
  `place_id` int(11) NOT NULL COMMENT 'Place ID',
  `place_group_id` int(11) DEFAULT NULL COMMENT 'Place group ID',
  `place_zone_id` int(11) DEFAULT NULL COMMENT 'Zone ID',
  `extra_can_be_delivered_earlier` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Can be order delivered to client earlier.',
  `place_courier_delivery_zone_id` int(11) DEFAULT NULL COMMENT 'Courier Delivery Zone ID',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5146572 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_delivery_batching_targets`
--

DROP TABLE IF EXISTS `logistics_delivery_batching_targets`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_delivery_batching_targets` (
  `type` varchar(255) NOT NULL COMMENT 'Тип ограничивающей сущности, курьер/ресторан',
  `type_pk` bigint(20) NOT NULL COMMENT 'Id ограничивающей  сущности, ресторана/курьера',
  PRIMARY KEY (`type`,`type_pk`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_delivery_histories`
--

DROP TABLE IF EXISTS `logistics_delivery_histories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_delivery_histories` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `delivery_id` int(11) NOT NULL,
  `courier_id` int(11) DEFAULT NULL COMMENT 'Courier ID',
  `status` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Delivery order status',
  `coordinates_latitude` decimal(10,6) DEFAULT NULL,
  `coordinates_longitude` decimal(10,6) DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `IDX_53587BCF12136921` (`delivery_id`),
  KEY `idx__logistics_delivery_histories__courier_id__status` (`courier_id`,`status`),
  CONSTRAINT `FK_53587BCF12136921` FOREIGN KEY (`delivery_id`) REFERENCES `logistics_deliveries` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=30636552 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_history`
--

DROP TABLE IF EXISTS `logistics_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `type` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ????????',
  `pk` bigint(20) NOT NULL COMMENT '???? ????????',
  `dump` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT '??????? ????????? ????????',
  `changeset` longtext COLLATE utf8_unicode_ci COMMENT '?????????',
  `update_type` varchar(3) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ?????????',
  `user_id` int(11) DEFAULT NULL COMMENT 'ID ????????????, ???????????? ?????????',
  `user_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??? ????????????, ???????????? ?????????',
  `tag` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??? ????????, ? ??????? ????????? ????????? (?? ????????? ?? ??, ??? ? ? type)',
  `tag_pk` bigint(20) DEFAULT NULL COMMENT '???? ????????, ? ??????? ????????? ????????? (?? ????????? ?? ??, ??? ? ? pk)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_history__tag__tag__pk__created_at` (`tag`,`tag_pk`,`created_at`),
  KEY `idx__logistics_history__tag__created_at` (`tag`,`created_at`),
  KEY `idx__logistics_history__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=331720907 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ????????? ????????????? ?????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_ongoing_deliveries_data`
--

DROP TABLE IF EXISTS `logistics_ongoing_deliveries_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_ongoing_deliveries_data` (
  `id` int(11) NOT NULL,
  `place_id` int(11) NOT NULL,
  `courier_id` int(11) DEFAULT NULL,
  `delivery_date` datetime DEFAULT NULL COMMENT '??????????? ????  ????? ???????? ??????(DC2Type:datetimetz)',
  `status` enum('created','accepted','arrived_to_source','taken','arrived_to_destination','finished') COLLATE utf8_unicode_ci DEFAULT 'created' COMMENT '??????? ?????? ????????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `source_latitude` decimal(10,6) NOT NULL,
  `source_longitude` decimal(10,6) NOT NULL,
  `destination_latitude` decimal(10,6) NOT NULL,
  `destination_longitude` decimal(10,6) NOT NULL,
  `estimated_taken_at` datetime DEFAULT NULL COMMENT '??????????? ????? ????????(arrival) ??????? ? ????????(DC2Type:datetimetz)',
  `zone_id` int(11) DEFAULT NULL COMMENT '????????????? ?????????? ???? ????????, ? ??????? ????????? ????????',
  `is_delayed` tinyint(1) DEFAULT NULL COMMENT '??????? ?????????? ????????',
  `region_id` int(11) NOT NULL,
  `can_be_delivered_before_promise` tinyint(4) NOT NULL,
  `weight` int(11) DEFAULT NULL COMMENT '??? ?????? ? ???????',
  `courier_assigned_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼Ð¾Ð³Ð¾ Ð·Ð°ÐºÐ°Ð·Ð°',
  `pool` varchar(40) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Пул источника доставки',
  PRIMARY KEY (`id`),
  KEY `idx__lodd__courier_id` (`courier_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='???????????? ??????? ??????? ???????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_order_performers`
--

DROP TABLE IF EXISTS `logistics_order_performers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_order_performers` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа',
  `action` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Вид выполняемых работ',
  `courier_id` int(11) DEFAULT NULL COMMENT 'Id курьера',
  `performer_name` varchar(767) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ФИО исполнителя',
  `performer_inn` varchar(12) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ИНН исполнителя',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID номера телефона курьера',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `phone_number_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID номера телефона исполнителя',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_order_performers__order_nr` (`order_nr`),
  KEY `idx__logistics_order_performers__created_at` (`created_at`),
  KEY `idx__logistics_order_performers__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=19720547 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Исполнители заказа';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_order_surge_surcharges`
--

DROP TABLE IF EXISTS `logistics_order_surge_surcharges`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_order_surge_surcharges` (
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_surge` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Заказ при сурже',
  `amount` decimal(20,2) NOT NULL COMMENT 'Сумма',
  `currency` varchar(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Валюта (код)',
  `is_fallback` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Является фоллбеком',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`order_nr`),
  KEY `idx__logistics_order_surge_surcharges__created_at` (`created_at`),
  KEY `idx__logistics_order_surge_surcharges__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Доплаты за сурж';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_performer_notifications`
--

DROP TABLE IF EXISTS `logistics_performer_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_performer_notifications` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `claim_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ID заявки Cargo',
  `park_driver_profile_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'ID профиля исполнителя',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__logistics_performer_notifications__claim_id__profile_id` (`claim_id`,`park_driver_profile_id`),
  KEY `idx__logistics_performer_notifications__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=225085557 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_picker_order_requests`
--

DROP TABLE IF EXISTS `logistics_picker_order_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_picker_order_requests` (
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '????? ??????',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ????????? ??????',
  `picker_comment` varchar(4096) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????????? ???????? ? ??????',
  `pack_description` varchar(4096) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '???????? ???????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `status_updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `package_ready_at` datetime DEFAULT NULL,
  PRIMARY KEY (`order_nr`),
  KEY `idx__logistics_picker_order_requests__created_at` (`created_at`),
  KEY `idx__logistics_picker_order_requests__updated_at` (`updated_at`),
  KEY `idx__logistics_picker_order_requests__status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_place_order_status`
--

DROP TABLE IF EXISTS `logistics_place_order_status`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_place_order_status` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'orderNr ??????',
  `status` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT '????????????? ??????',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__logistics_place_order_status__order_nr` (`order_nr`),
  KEY `idx__logistics_place_order_status__created_at` (`created_at`),
  KEY `idx__logistics_place_order_status__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=342190387 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='????????????? ??????? ??????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_place_order_status_history`
--

DROP TABLE IF EXISTS `logistics_place_order_status_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_place_order_status_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `status_id` bigint(20) NOT NULL COMMENT '(DC2Type:int64)',
  `old_status` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '?????? ????????????? ??????',
  `new_status` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT '????? ????????????? ??????',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__logistics_place_order_status_history__status_id` (`status_id`),
  KEY `idx__logistics_place_order_status_history__created_at` (`created_at`),
  CONSTRAINT `_fk__logistics_place_order_status_history__status_id` FOREIGN KEY (`status_id`) REFERENCES `logistics_place_order_status` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=342189677 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='??????? ????????????? ???????? ??????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_region_work_licenses`
--

DROP TABLE IF EXISTS `logistics_region_work_licenses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_region_work_licenses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `alias` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Алиас патента',
  `region_id` int(11) NOT NULL COMMENT 'ID региона',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Название патента',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx__logistics_region_work_licenses__region_id` (`region_id`),
  KEY `idx__logistics_region_work_licenses__created_at` (`created_at`),
  KEY `idx__logistics_region_work_licenses__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=41 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Патенты в регионах';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_taxi_dispatch_outdated_requests`
--

DROP TABLE IF EXISTS `logistics_taxi_dispatch_outdated_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_taxi_dispatch_outdated_requests` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `reason` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??????? ????????????? ???????? ????? ??? ??????',
  `external_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????????????? ??????',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ????????? ??????',
  `offer_price` decimal(10,2) DEFAULT NULL COMMENT '?????????????? ????????? ??????',
  `final_price` decimal(10,2) DEFAULT NULL COMMENT '???????? ????????? ??????',
  `currency` char(3) COLLATE utf8_unicode_ci DEFAULT NULL,
  `request_source_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'default',
  `planned_source_arrival_at` datetime DEFAULT NULL COMMENT '???????????? ????? ???????? ? ????? ?????? ???????',
  `reordered_at` datetime DEFAULT NULL COMMENT 'Ð’Ñ€ÐµÐ¼Ñ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ° Ñ€Ð¾Ð·Ñ‹Ð³Ñ€Ñ‹ÑˆÐ° Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ¹',
  `performer_draft_at` datetime DEFAULT NULL COMMENT 'Ð’Ñ€ÐµÐ¼Ñ Ð³Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚Ð¸ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ¹',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `performer_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'Ð˜Ð¼Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ',
  `legal_info` varchar(512) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'Ð®Ñ€Ð¸Ð´Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_taxi_dispatch_outdated_requests__created_at` (`created_at`),
  KEY `idx__logistics_taxi_dispatch_outdated_requests__updated_at` (`updated_at`),
  KEY `idx__logistics_taxi_dispatch_outdated_requests__order_nr` (`order_nr`),
  KEY `idx__logistics_taxi_dispatch_outdated_requests__external_id` (`external_id`),
  KEY `idx__logistics_taxi_dispatch_outdated_requests__status` (`status`)
) ENGINE=InnoDB AUTO_INCREMENT=2614587 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_taxi_dispatch_request_eats_tags`
--

DROP TABLE IF EXISTS `logistics_taxi_dispatch_request_eats_tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_taxi_dispatch_request_eats_tags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа',
  `user_id` int(11) NOT NULL COMMENT 'Идентификатор пользователя',
  `tags` json NOT NULL COMMENT 'Теги пользователя',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__logistics_taxi_dispatch_request_eats_tags__created_at` (`created_at`),
  KEY `idx__logistics_taxi_dispatch_request_eats_tags__updated_at` (`updated_at`),
  KEY `idx__logistics_taxi_dispatch_request_eats_tags__order_nr` (`order_nr`)
) ENGINE=InnoDB AUTO_INCREMENT=44960172 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_taxi_dispatch_requests`
--

DROP TABLE IF EXISTS `logistics_taxi_dispatch_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_taxi_dispatch_requests` (
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `reason` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??????? ????????????? ???????? ????? ??? ??????',
  `external_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????????????? ??????',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ????????? ??????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `offer_price` decimal(10,2) DEFAULT NULL COMMENT 'ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð·Ð°ÑÐ²ÐºÐ¸',
  `final_price` decimal(10,2) DEFAULT NULL COMMENT 'Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð·Ð°ÑÐ²ÐºÐ¸',
  `currency` char(3) COLLATE utf8_unicode_ci DEFAULT NULL,
  `request_source_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'default',
  `planned_source_arrival_at` datetime DEFAULT NULL COMMENT '???????????? ????? ???????? ? ????? ?????? ???????',
  `reordered_at` datetime DEFAULT NULL COMMENT 'Ð’Ñ€ÐµÐ¼Ñ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ° Ñ€Ð¾Ð·Ñ‹Ð³Ñ€Ñ‹ÑˆÐ° Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ¹',
  `performer_draft_at` datetime DEFAULT NULL COMMENT 'Ð’Ñ€ÐµÐ¼Ñ Ð³Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚Ð¸ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ¹',
  `performer_location_latitude` decimal(10,6) DEFAULT NULL COMMENT 'Ð¨Ð¸Ñ€Ð¾Ñ‚Ð° Ð¼ÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ ÐºÑƒÑ€ÑŒÐµÑ€Ð° cargo',
  `performer_location_longitude` decimal(10,6) DEFAULT NULL COMMENT 'Ð”Ð¾Ð»Ð³Ð¾Ñ‚Ð° Ð¼ÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ ÐºÑƒÑ€ÑŒÐµÑ€Ð° cargo',
  `performer_location_updated_at` datetime DEFAULT NULL COMMENT 'Ð’Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð»Ð¾ÐºÐ°Ñ†Ð¸Ð¸ ÐºÑƒÑ€ÑŒÐµÑ€Ð° cargo',
  `attempts` smallint(6) NOT NULL DEFAULT '1' COMMENT 'ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº',
  `revision` mediumint(9) NOT NULL DEFAULT '0' COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ñ€ÐµÐ²Ð¸Ð·Ð¸Ð¸',
  `version` int(11) DEFAULT NULL COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ð²ÐµÑ€ÑÐ¸Ð¸(Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸)',
  `performer_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¸Ð¼Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ',
  `legal_info` varchar(512) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'Ð®Ñ€Ð¸Ð´Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ',
  `price_revision` int(11) NOT NULL DEFAULT '0' COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ñ€ÐµÐ²Ð¸Ð·Ð¸Ð¸ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸',
  `car_model` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ',
  `car_color` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¦Ð²ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ',
  `car_number` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ',
  `transport_type` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¢Ð¸Ð¿ Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð°',
  `user_request_revision` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ð²ÐµÑ€ÑÐ¸Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°',
  `performer_first_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'Ð˜Ð¼Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ',
  PRIMARY KEY (`order_nr`),
  KEY `idx__logistics_taxi_dispatch_requests__created_at` (`created_at`),
  KEY `idx__logistics_taxi_dispatch_requests__updated_at` (`updated_at`),
  KEY `idx__logistics_taxi_dispatch_requests__external_id` (`external_id`),
  KEY `idx__logistics_taxi_dispatch_requests__status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_taxi_imported_journal_cursors`
--

DROP TABLE IF EXISTS `logistics_taxi_imported_journal_cursors`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_taxi_imported_journal_cursors` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `request_source_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ?????????',
  `cursor_value` text COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ???????????????? ???????',
  `events_count` int(11) NOT NULL DEFAULT '0' COMMENT '?????????? ??????????????? ???????',
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__imported_journal_cursors__created_at` (`created_at`),
  KEY `idx__imported_journal_cursors__request_source_type__created_at` (`request_source_type`,`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=304817467 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `logistics_taxi_performer_phone_info`
--

DROP TABLE IF EXISTS `logistics_taxi_performer_phone_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `logistics_taxi_performer_phone_info` (
  `order_nr` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа',
  `phone` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер телефона',
  `ext` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Добавочный номер',
  `expires_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`order_nr`),
  KEY `idx__logistics_taxi_performer_phone_info__expires_at` (`expires_at`),
  KEY `idx__logistics_taxi_performer_phone_info__created_at` (`created_at`),
  KEY `idx__logistics_taxi_performer_phone_info__updated_at` (`updated_at`),
  CONSTRAINT `__fk__logistics_taxi_performer_phone_info__order_nr` FOREIGN KEY (`order_nr`) REFERENCES `logistics_taxi_dispatch_requests` (`order_nr`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `masked_calls`
--

DROP TABLE IF EXISTS `masked_calls`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `masked_calls` (
  `uid` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `masked_phone_number_id` int(11) DEFAULT NULL,
  `started_at` datetime NOT NULL,
  `finished_at` datetime NOT NULL,
  `caller_id` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
  `record_url` longtext COLLATE utf8_unicode_ci NOT NULL,
  `order_nr` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `user_id` int(11) NOT NULL,
  `record_status` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `duration` int(11) NOT NULL,
  `call_status` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `status` int(11) NOT NULL,
  `place_id` int(11) NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`uid`),
  KEY `IDX_9991140AEEB28D96` (`masked_phone_number_id`),
  KEY `idx_order_nr` (`order_nr`),
  KEY `idx_user_id` (`user_id`),
  KEY `idx_masked_calls_started_at` (`started_at`),
  KEY `idx__masked_calls__updated_at` (`updated_at`),
  CONSTRAINT `_FK_9991140AEEB28D96` FOREIGN KEY (`masked_phone_number_id`) REFERENCES `masked_phones` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `masked_phones`
--

DROP TABLE IF EXISTS `masked_phones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `masked_phones` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL,
  `expires_at` datetime NOT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  `locked_to` datetime DEFAULT NULL,
  `original_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `uuid` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `region_internal_code` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `proxy_number` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `extension` varchar(10) COLLATE utf8_unicode_ci DEFAULT NULL,
  `scenario` smallint(6) NOT NULL DEFAULT '0',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ð·Ð°ÐºÐ°Ð·Ð°',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx_proxy_phone` (`proxy_number`,`extension`),
  KEY `idx__masked_phones__uuid` (`uuid`),
  KEY `idx__masked_phones__original_number__scenario` (`original_number`,`scenario`),
  KEY `idx__masked_phones__order_nr` (`order_nr`),
  KEY `idx__masked_phones__created_at` (`created_at`),
  KEY `idx__masked_phones__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=183721342 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `new_places_request_feedbacks`
--

DROP TABLE IF EXISTS `new_places_request_feedbacks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `new_places_request_feedbacks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `full_address` varchar(1000) COLLATE utf8_unicode_ci NOT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  `platform` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
  `app_version` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `user_agent` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1728527 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `notification_idempotency_keys`
--

DROP TABLE IF EXISTS `notification_idempotency_keys`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `notification_idempotency_keys` (
  `idempotency_key` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `notification_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`idempotency_key`),
  KEY `idx__notification_idempotency_keys__created_at` (`created_at`),
  KEY `idx__notification_idempotency_keys__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `notifications`
--

DROP TABLE IF EXISTS `notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `notifications` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type_id` int(11) DEFAULT NULL,
  `context` text COLLATE utf8_unicode_ci,
  `status` tinyint(4) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__notifications__updated_at` (`updated_at`),
  KEY `idx__notifications__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1807088712 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `notifications_history`
--

DROP TABLE IF EXISTS `notifications_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `notifications_history` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `order_id` int(11) DEFAULT NULL,
  `notification_id` varchar(255) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__notifications_history_order_id` (`order_id`),
  KEY `idx__notifications_history_user_id` (`user_id`),
  KEY `idx__notifications_history_updated_at` (`updated_at`),
  KEY `idx__notifications_history_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=381335722 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `object_cloner_tasks`
--

DROP TABLE IF EXISTS `object_cloner_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `object_cloner_tasks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `original_id` int(11) NOT NULL,
  `external_id` int(11) NOT NULL,
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `task_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `started_at` datetime DEFAULT NULL,
  `completed_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__object_cloner_tasks__external_id__task_type` (`external_id`,`task_type`)
) ENGINE=InnoDB AUTO_INCREMENT=421187 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_accounting_corrections`
--

DROP TABLE IF EXISTS `order_accounting_corrections`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_accounting_corrections` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `type` enum('goods','delivery') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:accounting_correction_type)',
  `amount` double NOT NULL,
  `ticket_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL,
  `admin_id` int(11) NOT NULL,
  `payment_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `initial_amount` double DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__order_accounting_corrections__admin_id` (`admin_id`),
  KEY `idx__order_accounting_corrections__created_at` (`created_at`),
  KEY `idx__order_accounting_corrections__updated_at` (`updated_at`),
  CONSTRAINT `fk__order_accounting_corrections__admin_id` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=56792 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_accounting_corrections_reports`
--

DROP TABLE IF EXISTS `order_accounting_corrections_reports`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_accounting_corrections_reports` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `admin_id` int(11) NOT NULL,
  `status` tinyint(3) unsigned DEFAULT '0',
  `date_from` datetime NOT NULL,
  `date_to` datetime NOT NULL,
  `link` text COLLATE utf8_unicode_ci,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__order_accounting_corrections_reports__created_at` (`created_at`),
  KEY `idx__order_accounting_corrections_reports__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=557 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_acknowledgments`
--

DROP TABLE IF EXISTS `order_acknowledgments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_acknowledgments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) DEFAULT NULL,
  `new_order_sent_at` datetime DEFAULT NULL,
  `new_order_received_at` datetime DEFAULT NULL,
  `update_items_sent_at` datetime DEFAULT NULL,
  `update_items_received_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_D5B975E8D9F6D38` (`order_id`)
) ENGINE=InnoDB AUTO_INCREMENT=571983777 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_cancel_communications`
--

DROP TABLE IF EXISTS `order_cancel_communications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_cancel_communications` (
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_communicated` smallint(6) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`order_nr`),
  KEY `idx__order_cancel_communications__created_at` (`created_at`),
  KEY `idx__order_cancel_communications__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_cancel_reactions`
--

DROP TABLE IF EXISTS `order_cancel_reactions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_cancel_reactions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `group` enum('order.cancel.reaction.client_charge','order.cancel.reaction.compensation','order.cancel.reaction.restoration_reimbursement','order.cancel.reaction.notification','order.cancel.reaction.unblock','order.cancel.reaction.return_promocode') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:reaction_type)',
  `payload` json NOT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=32 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_cancel_reason_groups`
--

DROP TABLE IF EXISTS `order_cancel_reason_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_cancel_reason_groups` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `code` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `access_mask_for_order_flow` smallint(6) unsigned NOT NULL DEFAULT '15',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_reason_groups_code_unique` (`code`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_cancel_reason_reactions`
--

DROP TABLE IF EXISTS `order_cancel_reason_reactions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_cancel_reason_reactions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `reason_id` int(10) unsigned NOT NULL,
  `reaction_id` int(10) unsigned NOT NULL,
  `auto` tinyint(1) NOT NULL DEFAULT '0',
  `payment_type` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `IDX_F35D6DDE59BB1592` (`reason_id`),
  KEY `IDX_F35D6DDE813C7171` (`reaction_id`),
  CONSTRAINT `FK_F35D6DDE59BB1592` FOREIGN KEY (`reason_id`) REFERENCES `order_cancel_reasons` (`id`),
  CONSTRAINT `FK_F35D6DDE813C7171` FOREIGN KEY (`reaction_id`) REFERENCES `order_cancel_reactions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3074 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_cancel_reasons`
--

DROP TABLE IF EXISTS `order_cancel_reasons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_cancel_reasons` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `group_id` int(10) unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `code` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `position` smallint(5) unsigned DEFAULT NULL,
  `type` enum('native','marketplace') COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `deactivated_at` datetime DEFAULT NULL,
  `is_system` tinyint(1) NOT NULL DEFAULT '0',
  `access_mask_for_order_flow` smallint(6) unsigned NOT NULL DEFAULT '15',
  PRIMARY KEY (`id`),
  KEY `IDX_1C37F749FE54D947` (`group_id`),
  KEY `idx__order_cancel_reasons__position` (`position`),
  CONSTRAINT `FK_1C37F749FE54D947` FOREIGN KEY (`group_id`) REFERENCES `order_cancel_reason_groups` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8003 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_cancel_tasks`
--

DROP TABLE IF EXISTS `order_cancel_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_cancel_tasks` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_cancel_id` int(10) unsigned NOT NULL,
  `reaction_id` int(10) unsigned NOT NULL,
  `status` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `description` longtext COLLATE utf8_unicode_ci,
  PRIMARY KEY (`id`),
  KEY `IDX_A4FC8C41CFEA94FA` (`order_cancel_id`),
  KEY `IDX_A4FC8C41813C7171` (`reaction_id`),
  KEY `idx__order_cancel_tasks__status` (`status`),
  KEY `idx__order_cancel_tasks__created_at` (`created_at`),
  KEY `idx__order_cancel_tasks__updated_at` (`updated_at`),
  CONSTRAINT `__FK_A4FC8C41813C7171` FOREIGN KEY (`reaction_id`) REFERENCES `order_cancel_reactions` (`id`),
  CONSTRAINT `__FK_A4FC8C41CFEA94FA` FOREIGN KEY (`order_cancel_id`) REFERENCES `order_cancels` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=257090017 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_cancels`
--

DROP TABLE IF EXISTS `order_cancels`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_cancels` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `reason_id` int(10) unsigned NOT NULL,
  `order_id` int(11) NOT NULL,
  `admin_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_532960958D9F6D38` (`order_id`),
  KEY `IDX_5329609559BB1592` (`reason_id`),
  KEY `fk__order_cancels__admin_id` (`admin_id`),
  KEY `idx__order_cancels__admin_id` (`admin_id`),
  KEY `idx__order_cancels__created_at` (`created_at`),
  KEY `idx__order_cancels__updated_at` (`updated_at`),
  CONSTRAINT `_FK_5329609559BB1592` FOREIGN KEY (`reason_id`) REFERENCES `order_cancel_reasons` (`id`),
  CONSTRAINT `_FK_532960958D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`),
  CONSTRAINT `__fk__order_cancels__admin_id` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=120649657 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_change_log`
--

DROP TABLE IF EXISTS `order_change_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_change_log` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_order_change_log_order_nr` (`order_nr`),
  KEY `idx_order_change_log_created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=2486353392 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_composition_change_offers`
--

DROP TABLE IF EXISTS `order_composition_change_offers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_composition_change_offers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `change_id` int(11) DEFAULT NULL,
  `operations` json NOT NULL COMMENT '???????????? ????????? ? ??????? ??????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `original_operations` json DEFAULT NULL COMMENT '???????????? ????????? ? ??????? ??????',
  `is_cost_increases` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'ÐŸÐ¾Ð²Ñ‹ÑÐ¸Ñ‚ Ð»Ð¸ ÑÑ‚Ð¾Ñ‚ Ð¾Ñ„Ñ„ÐµÑ€ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ',
  PRIMARY KEY (`id`),
  KEY `idx__order_composition_change_offers__change_id` (`change_id`),
  KEY `idx__order_composition_change_offers__created_at` (`created_at`),
  KEY `idx__order_composition_change_offers__updated_at` (`updated_at`),
  CONSTRAINT `_FK_F6E70C9E213C8BF4` FOREIGN KEY (`change_id`) REFERENCES `order_composition_changes` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=32789302 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_composition_changes`
--

DROP TABLE IF EXISTS `order_composition_changes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_composition_changes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '????????????? ??????',
  `place_id` int(11) NOT NULL COMMENT '????????????? ?????????',
  `extendable_until` datetime NOT NULL COMMENT '?????, ????? ???????? ?????? ????????? ????? ?????? ? ??????',
  `applicable_until` datetime DEFAULT NULL COMMENT '?????, ????? ???????? ???????????? ??? ?? ?????? ??????? ?????',
  `applied_offer_id` int(11) DEFAULT NULL COMMENT '????????????? ?????????? ??????',
  `applied_at` datetime DEFAULT NULL COMMENT '?????, ????? ??? ?????? ?????',
  `refused_at` datetime DEFAULT NULL COMMENT '?????, ????? ???? ??????? ??????? ?? ??????',
  `decision_author` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??? ???? ??????? ???????',
  `timezone` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '???????? ??????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `currency` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ?????? ??????',
  `offer_added_at` datetime DEFAULT NULL COMMENT '????? ?????????? ??????',
  `draft_applied_at` datetime DEFAULT NULL COMMENT '?????, ????? ????? ??? ????????',
  `draft_must_be_applied_till` datetime DEFAULT NULL COMMENT '?????, ????? ??????? ?????? ???????????',
  `attempt` int(11) NOT NULL DEFAULT '0' COMMENT '????? ??????? ?????????? ?????????',
  `is_cost_increase_allowed` tinyint(1) NOT NULL DEFAULT '0' COMMENT '????????? ?? ???????? ????????? ?????? ??? ????????????',
  `auto_close_without_offers_after` datetime DEFAULT NULL COMMENT 'Ð’Ñ€ÐµÐ¼Ñ, Ð¿Ð¾ÑÐ»Ðµ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°Ñ‚ÑŒÑÑ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_composition_changes__order_nr` (`order_nr`),
  KEY `idx__order_composition_changes__place_id` (`place_id`),
  KEY `idx__order_composition_changes__applicable_until` (`applicable_until`),
  KEY `idx__order_composition_changes__applied_at` (`applied_at`),
  KEY `idx__order_composition_changes__created_at` (`created_at`),
  KEY `idx__order_composition_changes__updated_at` (`updated_at`),
  KEY `idx__order_composition_changes__draft_must_be_applied_till` (`draft_must_be_applied_till`)
) ENGINE=InnoDB AUTO_INCREMENT=33479457 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_courier_billings`
--

DROP TABLE IF EXISTS `order_courier_billings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_courier_billings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ð·Ð°ÐºÐ°Ð·Ð°',
  `courier_id` int(11) NOT NULL,
  `is_sent_to_fns` tinyint(1) NOT NULL DEFAULT '0',
  `is_sent_to_billing` tinyint(1) NOT NULL DEFAULT '0',
  `finished_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `amount` decimal(10,2) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `fns_cheque_id` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  `fns_cheque_url` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  `is_cancelled_in_fns` tinyint(1) NOT NULL DEFAULT '0',
  `is_cancelled` tinyint(1) NOT NULL DEFAULT '0',
  `is_offline_cheque` tinyint(1) NOT NULL DEFAULT '0',
  `offline_cheque_id` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `offline_key_id` bigint(20) DEFAULT NULL,
  `offline_cheque_hash` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `payment_type` enum('delivery','tip') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'delivery' COMMENT '??? ??????, ?? ??????? ???????????????? ??????(DC2Type:courier_order_payment_type)',
  `fail_reason` text COLLATE utf8_unicode_ci,
  `external_payment_id` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹',
  PRIMARY KEY (`id`),
  KEY `idx__order_courier_billings__courier_id` (`courier_id`),
  KEY `idx__order_courier_billings__created_at` (`created_at`),
  KEY `idx__order_courier_billings__order_nr` (`order_nr`),
  KEY `idx__order_courier_billings__updated_at` (`updated_at`),
  KEY `idx__order_courier_billings__order_nr__external_payment_id` (`order_nr`,`external_payment_id`)
) ENGINE=InnoDB AUTO_INCREMENT=148351147 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_creation_restriction_events`
--

DROP TABLE IF EXISTS `order_creation_restriction_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_creation_restriction_events` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Eater phone number',
  `platform` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Application platform',
  `app_version` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Application version',
  `created_at` datetime NOT NULL COMMENT 'Date when record was created(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_creation_restriction_events__created_at` (`created_at`),
  KEY `idx__order_creation_restriction_events__phone_number` (`phone_number`),
  KEY `idx__order_creation_restriction_events__app_version` (`app_version`)
) ENGINE=InnoDB AUTO_INCREMENT=45892 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_crm_comments`
--

DROP TABLE IF EXISTS `order_crm_comments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_crm_comments` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `operator_id` int(11) NOT NULL,
  `deleted_operator_id` int(11) DEFAULT NULL,
  `comment` text COLLATE utf8_unicode_ci,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `deleted_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__order_crm_comments__order_nr` (`order_nr`),
  KEY `idx__order_crm_comments__operator_id` (`operator_id`),
  KEY `idx__order_crm_comments__created_at` (`created_at`),
  KEY `idx__order_crm_comments__deleted_at` (`deleted_at`),
  KEY `idx__order_crm_comments__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=19753372 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_delivery_info`
--

DROP TABLE IF EXISTS `order_delivery_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_delivery_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `actual_arrived_to_place` datetime DEFAULT NULL COMMENT '??????????? ????  ????? ???????? ??????? ? ????????(DC2Type:datetimetz)',
  `actual_order_taken` datetime DEFAULT NULL COMMENT '??????????? ????  ????? ????????? ???????? ?????? ?? ?????????(DC2Type:datetimetz)',
  `actual_arrived_to_customer` datetime DEFAULT NULL COMMENT '??????????? ????  ????? ???????? ??????? ? ???????(DC2Type:datetimetz)',
  `planned_arrived_to_place` datetime DEFAULT NULL COMMENT '??????????? ????  ????? ???????? ??????? ? ????????(DC2Type:datetimetz)',
  `planned_order_taken` datetime DEFAULT NULL COMMENT '??????????? ????  ????? ????????? ???????? ?????? ?? ?????????(DC2Type:datetimetz)',
  `planned_arrived_to_customer` datetime DEFAULT NULL COMMENT '??????????? ????  ????? ???????? ??????? ? ???????(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `max_place_arrival_time` datetime DEFAULT NULL COMMENT '???????????? ?? ??????? ??????? ????? ???????? ? ????????(DC2Type:datetimetz)',
  `max_customer_arrival_time` datetime DEFAULT NULL COMMENT '???????????? ?? ??????? ??????? ????? ???????? ? ???????(DC2Type:datetimetz)',
  `distance_to_place` decimal(9,3) DEFAULT NULL COMMENT '???????????? ?? ??????? ??????? ?????????? ?? ?????????',
  `distance_to_customer` decimal(9,3) DEFAULT NULL COMMENT '???????????? ?? ??????? ??????? ?????????? ?? ???????',
  `is_distance_to_place_precise` tinyint(1) NOT NULL DEFAULT '0' COMMENT '???????? ?? ?????? ???????? ?? ????????? ?????? (??????????? ?? ?????? ?? ??????)',
  `is_distance_to_customer_precise` tinyint(1) NOT NULL DEFAULT '0' COMMENT '???????? ?? ?????? ???????? ?? ??????? ?????? (??????????? ?? ?????? ?? ??????)',
  `actualized_customer_arrival_time` datetime DEFAULT NULL COMMENT '??????????????? ?? ??????? ??????? ??????? ????? ???????? ? ???????',
  `actualized_place_arrival_time` datetime DEFAULT NULL,
  `batched_with_order_id` int(11) DEFAULT NULL,
  `is_first` tinyint(1) DEFAULT NULL,
  `batched_orders` json DEFAULT NULL COMMENT 'Ð˜Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹ ÑÐ±Ð°Ñ‚Ñ‡ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð°ÐºÐ°Ð·Ð¾Ð² Ð¿Ð¾ Ð¿Ð¾Ñ€ÑÐ´ÐºÑƒ',
  `first_batched_order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐÐ¾Ð¼ÐµÑ€ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð·Ð°ÐºÐ°Ð·Ð° Ð² Ð±Ð°Ñ‚Ñ‡Ðµ',
  `is_pickup_needed` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð° ÑÐ±Ð¾Ñ€ÐºÐ°',
  `pickup_duration` mediumint(9) NOT NULL DEFAULT '0' COMMENT 'ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ ÑÐ±Ð¾Ñ€ÐºÐ¸ Ð² ÑÐµÐºÑƒÐ½Ð´Ð°Ñ…',
  `meta_info` json DEFAULT NULL COMMENT 'ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½Ð°Ñ Ð¼ÐµÑ‚Ð°Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ',
  `flow_type` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¤Ð»Ð¾Ñƒ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ¹ Ð½Ð° Ð·Ð°ÐºÐ°Ð·',
  PRIMARY KEY (`id`),
  KEY `IDX_136B180D8D9F6D38` (`order_id`),
  KEY `idx__order_delivery_info__created_at` (`created_at`),
  KEY `idx__order_delivery_info__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=715566057 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='???????????? ??????? ? ?????????? ???????? ?? ??????? ???????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_delivery_straight_distances`
--

DROP TABLE IF EXISTS `order_delivery_straight_distances`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_delivery_straight_distances` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `distance_to_place` decimal(9,3) DEFAULT NULL COMMENT '??????????? ?? ?????? ?????????? ?? ??????? ?? ?????????',
  `assign_time_distance` tinyint(1) NOT NULL DEFAULT '0' COMMENT '???????? ?? ?????????? ??????, ???????????? ??? ??????????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `IDX_FEF4AA8F8D9F6D38` (`order_id`),
  KEY `idx__order_delivery_straight_distances__created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='???????????? ??????? ??? ?????? ???????? ????????? ????????';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_delivery_timing_offers`
--

DROP TABLE IF EXISTS `order_delivery_timing_offers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_delivery_timing_offers` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_id` int(10) unsigned NOT NULL,
  `cooking_time_minutes` int(10) unsigned DEFAULT NULL COMMENT '????? ??????? ?????? ? ???????',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `total_delivery_time_minutes` int(11) DEFAULT NULL COMMENT '????? ????? ???????? ?????? ? ???????',
  `route_time_minutes` int(11) DEFAULT NULL COMMENT '????? ??????????? ?? ?????? ? ???????',
  `delivery_date` datetime DEFAULT NULL COMMENT '???? ????????(DC2Type:datetimetz)',
  `max_send_date` datetime DEFAULT NULL COMMENT '???????????? ???? ???????? ? ????????(DC2Type:datetimetz)',
  `min_send_date` datetime DEFAULT NULL COMMENT 'ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð°Ñ‚Ð° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð² Ñ€ÐµÑÑ‚Ð¾Ñ€Ð°Ð½(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_delivery_timing_offers__order_id` (`order_id`),
  KEY `idx__order_delivery_timing_offers__order_id` (`order_id`),
  KEY `idx__order_delivery_timing_offers__created_at` (`created_at`),
  KEY `idx__order_delivery_timing_offers__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=340031422 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_delivery_zone`
--

DROP TABLE IF EXISTS `order_delivery_zone`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_delivery_zone` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `courier_delivery_zone_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `fk__order_delivery_zone__order_id` (`order_id`),
  KEY `fk__order_delivery_zone__courier_delivery_zone_id` (`courier_delivery_zone_id`),
  CONSTRAINT `order_delivery_zone_ibfk_2` FOREIGN KEY (`courier_delivery_zone_id`) REFERENCES `courier_delivery_zones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=533462817 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_eats_cart`
--

DROP TABLE IF EXISTS `order_eats_cart`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_eats_cart` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `eats_cart_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `revision` int(11) NOT NULL,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `synced` tinyint(1) NOT NULL DEFAULT '0',
  `sync_attempts` tinyint(1) unsigned DEFAULT '0',
  `synced_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_eats_cart__order_nr__eats_cart_id` (`order_nr`,`eats_cart_id`),
  KEY `idx__order_eats_cart__synced` (`synced`),
  KEY `idx__order_eats_cart__eats_cart_id` (`eats_cart_id`),
  KEY `idx__order_eats_cart__created_at` (`created_at`),
  KEY `idx__order_eats_cart__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=88961392 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_feedbacks`
--

DROP TABLE IF EXISTS `order_feedbacks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_feedbacks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `comment` varchar(300) COLLATE utf8_unicode_ci DEFAULT NULL,
  `rating` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `place_id` int(11) NOT NULL,
  `status` smallint(6) NOT NULL,
  `feedback_filled_at` datetime DEFAULT NULL,
  `contact_requested` tinyint(1) DEFAULT NULL,
  `notification_sent_at` datetime DEFAULT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `IDX_C2EB4471DA6A219` (`place_id`),
  KEY `order_feedback_status_idx` (`status`),
  KEY `idx__order_feedbacks__updated_at` (`updated_at`),
  KEY `idx__order_feedbacks__place_id__status__created_at` (`place_id`,`status`,`created_at`),
  KEY `idx__order_feedbacks__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=719438277 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_feedbacks_bk`
--

DROP TABLE IF EXISTS `order_feedbacks_bk`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_feedbacks_bk` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) NOT NULL COMMENT 'Order number',
  `comment` varchar(1000) DEFAULT NULL COMMENT 'Customer feedback',
  `rating` float DEFAULT NULL COMMENT 'Customer rating',
  `feedback_at` datetime NOT NULL COMMENT 'Feedback received at',
  `meta` json DEFAULT NULL COMMENT 'JSON string',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_feedbacks_bk__order_nr` (`order_nr`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=209582 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_feedbacks_predefined_comments_linker`
--

DROP TABLE IF EXISTS `order_feedbacks_predefined_comments_linker`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_feedbacks_predefined_comments_linker` (
  `predefined_comment_id` int(11) NOT NULL,
  `order_feedback_id` int(11) NOT NULL,
  PRIMARY KEY (`order_feedback_id`,`predefined_comment_id`),
  KEY `IDX_CFEE02EB831C4F53` (`predefined_comment_id`),
  KEY `IDX_CFEE02EBC9FBD701` (`order_feedback_id`),
  CONSTRAINT `FK_60F03C94831C4F53` FOREIGN KEY (`predefined_comment_id`) REFERENCES `predefined_comments` (`id`) ON DELETE CASCADE,
  CONSTRAINT `FK_60F03C94C9FBD701` FOREIGN KEY (`order_feedback_id`) REFERENCES `order_feedbacks` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_integration_info`
--

DROP TABLE IF EXISTS `order_integration_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_integration_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) DEFAULT NULL,
  `additional_number` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `yandex_uuid` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `masked_phone_number_id` int(11) DEFAULT NULL,
  `external_place_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `sent_to_place_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `approved_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `real_place_id` int(11) DEFAULT NULL COMMENT 'Place ID that actually cooked the order',
  `courier_can_be_assigned` tinyint(1) DEFAULT NULL COMMENT 'Courier can or cannot be assigned',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_integration_order_id` (`order_id`),
  KEY `idx_origin_id` (`origin_id`),
  KEY `IDX_9C011850EEB28D96` (`masked_phone_number_id`),
  KEY `idx__order_integration_info__external_place_id` (`external_place_id`),
  KEY `idx__order_integration_info__approved_at` (`approved_at`),
  KEY `idx_updated_at` (`updated_at`),
  KEY `idx__order_integration_info__created_at` (`created_at`),
  KEY `idx__order_integration_info__additional_number` (`additional_number`),
  CONSTRAINT `FK_9C0118508D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`),
  CONSTRAINT `FK_9C011850EEB28D96` FOREIGN KEY (`masked_phone_number_id`) REFERENCES `masked_phones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=725243377 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_junk_payments`
--

DROP TABLE IF EXISTS `order_junk_payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_junk_payments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `order_id` int(11) NOT NULL,
  `blocked_amount_rational` decimal(13,2) DEFAULT NULL COMMENT 'Blocked amount',
  `charged_amount_rational` decimal(13,2) DEFAULT NULL COMMENT 'Charged amount',
  PRIMARY KEY (`id`),
  KEY `idx__order_junk_payments__created_at` (`created_at`),
  KEY `idx__order_junk_payments__updated_at` (`updated_at`),
  KEY `idx__order_junk_payments__order_id` (`order_id`)
) ENGINE=InnoDB AUTO_INCREMENT=541534072 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_marketing_promos`
--

DROP TABLE IF EXISTS `order_marketing_promos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_marketing_promos` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `promo_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Marketing promo type(DC2Type:order_marketing_promo_type)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `yandex_uid` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'User yandex uid',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Entity created at',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Entity updated at',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_marketing_promos__order_nr__promo_type` (`order_nr`,`promo_type`),
  KEY `idx__order_marketing_promos__yandex_uid` (`yandex_uid`),
  KEY `idx__order_marketing_promos__created_at` (`created_at`),
  KEY `idx__order_marketing_promos__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1792567 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_meta_information`
--

DROP TABLE IF EXISTS `order_meta_information`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_meta_information` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Идентификатор заказа',
  `meta_information` json DEFAULT NULL COMMENT 'Произвольная метаинформация',
  `created_at` datetime NOT NULL COMMENT 'Дата создания',
  `updated_at` datetime NOT NULL COMMENT 'Дата обновления',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_meta_information__order_nr` (`order_nr`),
  KEY `idx__order_meta_information__created_at` (`created_at`),
  KEY `idx__order_meta_information__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=377447582 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_performers`
--

DROP TABLE IF EXISTS `order_performers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_performers` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `performer_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Performer type(DC2Type:order_performer_type)',
  `performer_id` bigint(20) unsigned DEFAULT NULL COMMENT 'Performer entity id if known(DC2Type:int64)',
  `client_id` bigint(20) unsigned DEFAULT NULL COMMENT 'Performer balance client id(DC2Type:int64)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_performers__order_nr__performer_type` (`order_nr`,`performer_type`),
  KEY `idx__order_performers__created_at` (`created_at`),
  KEY `idx__order_performers__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=19733797 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_problem_dictionary`
--

DROP TABLE IF EXISTS `order_problem_dictionary`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_problem_dictionary` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_custom_input` tinyint(1) NOT NULL,
  `sort` int(11) NOT NULL DEFAULT '0',
  `reason_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `dictionary_type` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=63 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_refunds`
--

DROP TABLE IF EXISTS `order_refunds`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_refunds` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) DEFAULT NULL,
  `amount` int(11) NOT NULL,
  `amount_rational` decimal(13,2) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_889F93928D9F6D38` (`order_id`),
  KEY `idx__order_refunds__created_at` (`created_at`),
  CONSTRAINT `__FK_889F93928D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3622692 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_catalog_identities`
--

DROP TABLE IF EXISTS `order_revision_catalog_identities`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_catalog_identities` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `item_id` bigint(20) unsigned DEFAULT NULL,
  `option_id` bigint(20) unsigned DEFAULT NULL,
  `identity` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `provider` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when record was created',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_catalog_identities__item_id` (`item_id`),
  KEY `idx__order_revision_catalog_identities__option_id` (`option_id`),
  KEY `idx__order_revision_catalog_identities__created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_changes`
--

DROP TABLE IF EXISTS `order_revision_changes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_changes` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `request_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Unique idempotency key',
  `original_revision_id` int(10) unsigned NOT NULL COMMENT 'Changes from revision',
  `result_revision_id` int(10) unsigned NOT NULL COMMENT 'Changes to revision',
  `source` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Subject of changes',
  `reason_code` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Changes reason code',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_revision_changes__request_id` (`request_id`),
  KEY `idx__order_revision_changes__original_revision_id` (`original_revision_id`),
  KEY `idx__order_revision_changes__result_revision_id` (`result_revision_id`),
  KEY `idx__order_revision_changes__created_at` (`created_at`),
  KEY `idx__order_revision_changes__updated_at` (`updated_at`),
  CONSTRAINT `fk__order_revision_changes__original_revision_id` FOREIGN KEY (`original_revision_id`) REFERENCES `order_revisions` (`id`),
  CONSTRAINT `fk__order_revision_changes__result_revision_id` FOREIGN KEY (`result_revision_id`) REFERENCES `order_revisions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=44328137 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_compositions`
--

DROP TABLE IF EXISTS `order_revision_compositions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_compositions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_compositions__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=751441882 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_deliveries`
--

DROP TABLE IF EXISTS `order_revision_deliveries`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_deliveries` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `delivery_cost` int(11) NOT NULL DEFAULT '0',
  `delivery_cost_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Delivery cost',
  `assembly_cost_rational` decimal(13,2) unsigned NOT NULL DEFAULT '0.00' COMMENT 'Order assembly cost',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_deliveries__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=704629782 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_discounts`
--

DROP TABLE IF EXISTS `order_revision_discounts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_discounts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `revision_id` int(10) unsigned DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `promo_discount_by_service` int(11) NOT NULL DEFAULT '0',
  `promo_discount_by_service_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Discount by service provider',
  `promo_discount_by_place` int(11) NOT NULL DEFAULT '0',
  `promo_discount_by_place_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Discount by place provider',
  `promocode_discount` int(11) NOT NULL DEFAULT '0',
  `promocode_discount_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Promocode discount',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_discounts__revision_id` (`revision_id`),
  KEY `idx__order_revision_discounts__updated_at` (`updated_at`),
  CONSTRAINT `__fk__order_revision_discounts__revision_id` FOREIGN KEY (`revision_id`) REFERENCES `order_revisions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=757271042 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_drafts`
--

DROP TABLE IF EXISTS `order_revision_drafts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_drafts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `change_id` int(10) unsigned NOT NULL,
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Draft task status(DC2Type:order_revision_draft_status_type)',
  `refuse_reason` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Draft refuse reason',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when task was created',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when task was updated',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_revision_drafts__change_id` (`change_id`),
  KEY `idx__order_revision_drafts__order_nr` (`order_nr`),
  KEY `idx__order_revision_drafts__created_at` (`created_at`),
  KEY `idx__order_revision_drafts__updated_at` (`updated_at`),
  CONSTRAINT `_fk__order_revision_drafts__change_id` FOREIGN KEY (`change_id`) REFERENCES `order_revision_changes` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=40878367 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_item_options`
--

DROP TABLE IF EXISTS `order_revision_item_options`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_item_options` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `item_id` int(10) unsigned NOT NULL,
  `place_menu_option_id` bigint(20) unsigned DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `price` int(10) unsigned NOT NULL DEFAULT '0',
  `price_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Price per one option',
  `quantity` smallint(5) unsigned NOT NULL DEFAULT '1',
  `quantity_rational` decimal(12,3) unsigned DEFAULT NULL COMMENT 'Quantity of option',
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `group_id` int(10) unsigned DEFAULT NULL COMMENT 'Place menu option group id',
  `group_origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `group_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `vat` smallint(6) DEFAULT NULL COMMENT 'Vat(tax) of option',
  `standalone_item` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Is it standalone item?',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_item_options__item_id` (`item_id`),
  KEY `idx__order_revision_item_options__place_menu_option_id` (`place_menu_option_id`),
  KEY `idx__order_revision_item_options__updated_at` (`updated_at`),
  CONSTRAINT `_fk__order_revision_item_options__item_id` FOREIGN KEY (`item_id`) REFERENCES `order_revision_items` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1015245212 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_item_promos`
--

DROP TABLE IF EXISTS `order_revision_item_promos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_item_promos` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `promo_id` int(10) unsigned NOT NULL,
  `quantity` smallint(5) unsigned NOT NULL DEFAULT '1',
  `quantity_rational` decimal(12,3) unsigned DEFAULT NULL COMMENT 'Quantity of promo',
  `discount_per_item` int(10) unsigned NOT NULL DEFAULT '0',
  `discount_per_item_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Discount per item',
  `discount_total` int(10) unsigned NOT NULL DEFAULT '0',
  `discount_total_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Total discount',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_item_promos__promo_id` (`promo_id`),
  KEY `idx__order_revision_item_promos__updated_at` (`updated_at`),
  CONSTRAINT `__fk__order_revision_item_promos__promo_id` FOREIGN KEY (`promo_id`) REFERENCES `order_revision_promos` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=76275152 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_items`
--

DROP TABLE IF EXISTS `order_revision_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_items` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `composition_id` int(10) unsigned NOT NULL,
  `place_menu_item_id` int(11) DEFAULT NULL COMMENT 'Place menu item id',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` longtext COLLATE utf8_unicode_ci,
  `price` int(10) unsigned NOT NULL DEFAULT '0',
  `price_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Price per item',
  `weight` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `ordinary` tinyint(1) NOT NULL DEFAULT '0',
  `vat` smallint(6) DEFAULT NULL,
  `item_id` bigint(20) unsigned DEFAULT NULL COMMENT 'Cart item id',
  `quantity` smallint(5) unsigned NOT NULL DEFAULT '1',
  `quantity_rational` decimal(12,3) unsigned DEFAULT NULL COMMENT 'Quantity of item',
  `item_promo_id` int(10) unsigned DEFAULT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `gram_weight` int(10) unsigned DEFAULT NULL COMMENT 'Weight in grams per item',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_revision_items__item_promo_id` (`item_promo_id`),
  KEY `idx__order_revision_items__composition_id` (`composition_id`),
  KEY `idx__order_revision_items__place_menu_item_id` (`place_menu_item_id`),
  KEY `idx__order_revision_items__updated_at` (`updated_at`),
  CONSTRAINT `_fk__order_revision_items__composition_id` FOREIGN KEY (`composition_id`) REFERENCES `order_revision_compositions` (`id`),
  CONSTRAINT `_fk__order_revision_items__item_promo_id` FOREIGN KEY (`item_promo_id`) REFERENCES `order_revision_item_promos` (`id`),
  CONSTRAINT `_fk__order_revision_items__place_menu_item_id` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3639530727 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_items_promos`
--

DROP TABLE IF EXISTS `order_revision_items_promos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_items_promos` (
  `item_id` int(10) unsigned NOT NULL,
  `promo_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`item_id`,`promo_id`),
  KEY `idx__order_revision_items_promos__item_id` (`item_id`),
  KEY `idx__order_revision_items_promos__promo_id` (`promo_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_promocodes`
--

DROP TABLE IF EXISTS `order_revision_promocodes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_promocodes` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `promocode_id` int(11) DEFAULT NULL,
  `code` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `code_type` varchar(16) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'other',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `discount_total` decimal(10,2) DEFAULT NULL,
  `discount_percent` decimal(10,2) DEFAULT NULL,
  `discount_limit` decimal(10,2) DEFAULT NULL COMMENT 'Discount limit for percent discount',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_promocodes__promocode_id` (`promocode_id`),
  KEY `idx__order_revision_promocodes__updated_at` (`updated_at`),
  CONSTRAINT `__fk__order_revision_promocodes__promocode_id` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=33860602 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_promos`
--

DROP TABLE IF EXISTS `order_revision_promos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_promos` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `revision_id` int(10) unsigned DEFAULT NULL,
  `promo_id` int(10) unsigned DEFAULT NULL COMMENT 'FK promos',
  `external_promo_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Additional promo type(DC2Type:order_revision_promo_type)',
  `quantity` int(10) unsigned NOT NULL DEFAULT '1',
  `discount` int(10) unsigned DEFAULT '0',
  `discount_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Discount of promo',
  `provider_discount` enum('own','place') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'own' COMMENT '(DC2Type:promo_provider_discount_type)',
  `promo_bonuses` json DEFAULT NULL COMMENT 'Applied promo bonuses information',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_promos__revision_id` (`revision_id`),
  KEY `idx__order_revision_promos__promo_id` (`promo_id`),
  KEY `idx__order_revision_promos__updated_at` (`updated_at`),
  CONSTRAINT `fk__order_revision_promos__promo_id` FOREIGN KEY (`promo_id`) REFERENCES `promos` (`id`),
  CONSTRAINT `fk__order_revision_promos__revision_id` FOREIGN KEY (`revision_id`) REFERENCES `order_revisions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=103398427 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revision_push_tasks`
--

DROP TABLE IF EXISTS `order_revision_push_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revision_push_tasks` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `revision_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Can contain both revision and sub revision id',
  `payload` json DEFAULT NULL COMMENT 'Push task arguments',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_revision_push_tasks__created_at` (`created_at`),
  KEY `idx__order_revision_push_tasks__order_nr__reivison_id` (`order_nr`,`revision_id`)
) ENGINE=InnoDB AUTO_INCREMENT=50940407 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_revisions`
--

DROP TABLE IF EXISTS `order_revisions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_revisions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `composition_id` int(10) unsigned NOT NULL,
  `admin_id` int(11) DEFAULT NULL,
  `cost_for_customer` int(11) NOT NULL DEFAULT '0',
  `cost_for_customer_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Cost for customer',
  `cost_for_place` int(11) NOT NULL DEFAULT '0',
  `cost_for_place_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Cost for place',
  `items_cost` int(11) NOT NULL DEFAULT '0',
  `items_cost_rational` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Items cost',
  `delivery_cost` int(11) NOT NULL DEFAULT '0',
  `service_fee` decimal(13,2) unsigned DEFAULT NULL COMMENT 'Service fee',
  `currency_code` char(3) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Alphabetic ISO 4217 currency code',
  `promocode_id` int(10) unsigned DEFAULT NULL,
  `delivery_id` int(10) unsigned NOT NULL,
  `delivery_date` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `timezone` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_revisions__created_at` (`created_at`),
  KEY `idx__order_revisions__composition_id` (`composition_id`),
  KEY `idx__order_revisions__promocode_id` (`promocode_id`),
  KEY `idx__order_revisions__admin_id` (`admin_id`),
  KEY `idx__order_revisions__order_id` (`order_id`),
  KEY `idx__order_revisions__delivery_id` (`delivery_id`),
  KEY `idx__order_revisions__updated_at` (`updated_at`),
  CONSTRAINT `_fk__order_revisions__admin_id` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=757282447 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_send_event_log`
--

DROP TABLE IF EXISTS `order_send_event_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_send_event_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK',
  `time_to_send` datetime DEFAULT NULL COMMENT 'Время отправки',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа',
  `payload` json DEFAULT NULL COMMENT 'Дополнительные данные для события',
  `created_at` datetime NOT NULL COMMENT 'Дата создания',
  `updated_at` datetime NOT NULL COMMENT 'Дата изменения',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Поле дискриминатора',
  `order_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Тип заказа',
  PRIMARY KEY (`id`),
  KEY `idx__order_send_event_log__order_nr` (`order_nr`),
  KEY `idx__order_send_event_log__created_at` (`created_at`),
  KEY `idx__order_send_event_log__updated_at` (`updated_at`),
  KEY `idx__order_send_event_log__time_to_send` (`time_to_send`)
) ENGINE=InnoDB AUTO_INCREMENT=46556934 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_send_event_producer_health_check`
--

DROP TABLE IF EXISTS `order_send_event_producer_health_check`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_send_event_producer_health_check` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `first_failed_producing_time` datetime DEFAULT NULL COMMENT 'Время первой неуспешной отправки, с момента, как RMQ стал недоступен',
  `last_failed_producing_time` datetime DEFAULT NULL COMMENT 'Время последней неуспешной отправки, с момента, как RMQ стал недоступен',
  `last_success_retry_producing_time` datetime DEFAULT NULL COMMENT 'Время последней успешной переотправки',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_send_events`
--

DROP TABLE IF EXISTS `order_send_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_send_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order nr',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Type',
  `payload` json NOT NULL COMMENT 'Useful info of event',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_send_events__order_nr` (`order_nr`),
  KEY `idx__order_send_events__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=12523874 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Events that could affect order sending process';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_send_requests`
--

DROP TABLE IF EXISTS `order_send_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_send_requests` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order nr',
  `delivery_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Delivery type',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Status',
  `date_to_send` datetime NOT NULL COMMENT 'When to send',
  `is_fast_food` tinyint(1) NOT NULL COMMENT 'is fastFood or not',
  `place_id` int(11) NOT NULL COMMENT 'PlaceId',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__order_send_requests__order_nr` (`order_nr`),
  KEY `idx__order_send_requests__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=2106809 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Intentions of orders sending';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_sending_records`
--

DROP TABLE IF EXISTS `order_sending_records`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_sending_records` (
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_finished` tinyint(1) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  PRIMARY KEY (`order_nr`),
  KEY `idx__order_sending_records__created_at` (`created_at`),
  KEY `idx__order_sending_records__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_sent_queue_marks`
--

DROP TABLE IF EXISTS `order_sent_queue_marks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_sent_queue_marks` (
  `id` int(11) NOT NULL,
  `queued_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_stats`
--

DROP TABLE IF EXISTS `order_stats`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_stats` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Order number',
  `user_id` int(10) unsigned NOT NULL COMMENT 'User id from users',
  `place_id` int(10) unsigned NOT NULL COMMENT 'Place id from places',
  `brand_id` int(10) unsigned NOT NULL COMMENT 'Brand id from brands',
  `business` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Place business type',
  `application` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Application used when order created',
  `payment_method_code` smallint(6) DEFAULT NULL COMMENT 'Order payment method code from payment_methods',
  `count` int(10) unsigned NOT NULL COMMENT 'Count of orders',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_stats__order_nr` (`order_nr`),
  KEY `idx__order_stats__user_id` (`user_id`),
  KEY `idx__order_stats__created_at` (`created_at`),
  KEY `idx__order_stats__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=776102177 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_sub_revision_customer_services`
--

DROP TABLE IF EXISTS `order_sub_revision_customer_services`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_sub_revision_customer_services` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `sub_revision_id` bigint(20) NOT NULL COMMENT '(DC2Type:int64)',
  `customer_service_id` bigint(20) NOT NULL COMMENT '(DC2Type:int64)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when record was created',
  PRIMARY KEY (`id`),
  KEY `idx__order_sub_revision_customer_services__sub_revision_id` (`sub_revision_id`),
  KEY `idx__order_sub_revision_customer_services__customer_service_id` (`customer_service_id`),
  KEY `idx__order_sub_revision_customer_services__created_at` (`created_at`),
  CONSTRAINT `fk__order_sub_revision_customer_services__customer_service_id` FOREIGN KEY (`customer_service_id`) REFERENCES `payment_flow_products` (`id`),
  CONSTRAINT `fk__order_sub_revision_customer_services__sub_revision_id` FOREIGN KEY (`sub_revision_id`) REFERENCES `order_sub_revisions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7413262 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Additional customer services for order revision';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_sub_revision_refunds`
--

DROP TABLE IF EXISTS `order_sub_revision_refunds`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_sub_revision_refunds` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `sub_revision_id` bigint(20) NOT NULL COMMENT '(DC2Type:int64)',
  `products_to_refund` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT 'Products to refund dto',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when record was created',
  PRIMARY KEY (`id`),
  KEY `idx__order_sub_revision_refunds__sub_revision_id` (`sub_revision_id`),
  KEY `idx__order_sub_revision_refunds__created_at` (`created_at`),
  CONSTRAINT `fk__order_sub_revision_refunds__sub_revision_id` FOREIGN KEY (`sub_revision_id`) REFERENCES `order_sub_revisions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3951607 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Order revision refunds';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_sub_revisions`
--

DROP TABLE IF EXISTS `order_sub_revisions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_sub_revisions` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `revision_id` int(10) unsigned NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Date when record was created',
  PRIMARY KEY (`id`),
  KEY `idx__order_sub_revisions__revision_id` (`revision_id`),
  KEY `idx__order_sub_revisions__created_at` (`created_at`),
  CONSTRAINT `fk__order_sub_revisions__revision_id` FOREIGN KEY (`revision_id`) REFERENCES `order_revisions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11364662 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Order revision after final status';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_surges`
--

DROP TABLE IF EXISTS `order_surges`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_surges` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `level` int(10) unsigned NOT NULL DEFAULT '0',
  `additional_delivery_cost` int(10) unsigned NOT NULL DEFAULT '0',
  `additional_delivery_time_factor` int(10) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_order_surge_unique` (`order_id`),
  KEY `idx__order_surges__created_at` (`created_at`),
  CONSTRAINT `_FK_E73E9DD88D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=710919517 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_time_to_place_override`
--

DROP TABLE IF EXISTS `order_time_to_place_override`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_time_to_place_override` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `courier_id` int(11) NOT NULL,
  `time_to_place` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_order_id_courier_id` (`order_id`,`courier_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_user_information`
--

DROP TABLE IF EXISTS `order_user_information`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_user_information` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'OrderNr',
  `eater_id` int(11) NOT NULL COMMENT 'eater_id',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ?????????? ? ????????????',
  `yandex_uid` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'User yandex uid',
  `personal_phone_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '????? ? personal_phone_id ? ??????? Taxi.Personal',
  `personal_email_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '????? ? personal_email_id ? ??????? Taxi.Personal',
  `device_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '???? ????????',
  `updated_at` datetime NOT NULL COMMENT '???? ??????????',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__order_user_information__order_nr` (`order_nr`),
  KEY `idx__order_user_information__created_at` (`created_at`),
  KEY `idx__order_user_information__updated_at` (`updated_at`),
  KEY `idx__order_user_information__personal_phone_id` (`personal_phone_id`),
  KEY `idx__order_user_information__eater_id` (`eater_id`),
  KEY `idx__order_user_information__yandex_uid` (`yandex_uid`)
) ENGINE=InnoDB AUTO_INCREMENT=297846507 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `orders`
--

DROP TABLE IF EXISTS `orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `address_city` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `address_street` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_house` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_entrance` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_floor` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_office` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_comment` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_reliable` tinyint(1) DEFAULT NULL,
  `address_full` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_short` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_plot` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_building` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `courier_id` int(11) DEFAULT NULL,
  `adopted_by_courier` tinyint(1) NOT NULL,
  `adopted_by_courier_at` datetime DEFAULT NULL,
  `courier_arrived_to_place_at` datetime DEFAULT NULL,
  `courier_assigned_at` datetime DEFAULT NULL,
  `arrived_to_customer_at` datetime DEFAULT NULL,
  `taken_at` datetime DEFAULT NULL,
  `moved_to_delivery_at` datetime DEFAULT NULL,
  `delivered_at` datetime DEFAULT NULL,
  `time_to_delivery` int(11) DEFAULT NULL,
  `time_to_delivery_min` int(11) DEFAULT NULL,
  `time_to_delivery_max` int(11) DEFAULT NULL,
  `pre_delivery_time` int(11) NOT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  `notify_priority` datetime NOT NULL,
  `notify_priority_up_reason` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `operator_id` int(11) DEFAULT NULL,
  `operator_assigned_at` datetime DEFAULT NULL,
  `external_order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `amount_blocked` int(11) NOT NULL DEFAULT '0',
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL,
  `amount_charged` int(11) NOT NULL DEFAULT '0',
  `actual_amount` int(11) DEFAULT NULL,
  `amount_client_paid` int(11) DEFAULT NULL,
  `card_payment_failed_at` datetime DEFAULT NULL,
  `payment_method_id` int(11) NOT NULL,
  `payment_status` smallint(6) NOT NULL DEFAULT '0',
  `payment_service` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `place_payment_method_id` int(11) NOT NULL,
  `payture_card_id` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `payture_order_id` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `payture_session_id` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `user_id` int(11) NOT NULL,
  `yandex_uid` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `user_address_id` int(11) DEFAULT NULL,
  `crm_comment` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `first_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `user_agent` varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL,
  `change_on` int(11) DEFAULT NULL,
  `persons_quantity` int(11) DEFAULT NULL,
  `sort_priority` datetime NOT NULL,
  `status` smallint(6) NOT NULL,
  `is_asap` tinyint(1) NOT NULL,
  `is_comment_transmitted` tinyint(1) NOT NULL DEFAULT '0',
  `is_delayed` tinyint(1) NOT NULL DEFAULT '0',
  `started_at` datetime DEFAULT NULL,
  `call_center_confirmed_at` datetime DEFAULT NULL,
  `cancelled_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `sent_to_restaurant_at` datetime DEFAULT NULL,
  `place_confirmed_at` datetime DEFAULT NULL,
  `restaurant_received_at` datetime DEFAULT NULL,
  `reminded_call_at` datetime DEFAULT NULL,
  `remind_at` datetime DEFAULT NULL,
  `reminded_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `cancel_reason_id` int(11) DEFAULT NULL,
  `cart_id` bigint(20) DEFAULT NULL,
  `place_id` int(11) NOT NULL,
  `device_id` int(11) DEFAULT NULL,
  `feedback_id` int(11) DEFAULT NULL,
  `promocode_id` int(11) DEFAULT NULL,
  `sorry_promocode_sent_at` datetime DEFAULT NULL,
  `logistic_approve_needed` tinyint(1) NOT NULL DEFAULT '0',
  `available_delivery_delay` int(11) NOT NULL DEFAULT '0',
  `place_call_requested_at` datetime DEFAULT NULL,
  `type` enum('native','marketplace') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:order_type)',
  `processing_type` enum('native','marketplace','fast_food','store') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '(DC2Type:order_processing_type)',
  `address_doorcode` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `region_id` int(11) unsigned DEFAULT NULL,
  `place_commission` decimal(4,2) DEFAULT NULL,
  `place_acquiring_commission` decimal(4,2) DEFAULT NULL,
  `time_to_place` int(11) DEFAULT NULL,
  `place_delivery_zone_id` int(10) unsigned DEFAULT NULL,
  `finished_at` datetime DEFAULT NULL,
  `fully_payed` tinyint(1) NOT NULL DEFAULT '0',
  `legal_info_id` int(11) DEFAULT NULL,
  `latest_revision_id` int(10) unsigned DEFAULT NULL,
  `taxi_user_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `app` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð˜Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ñ Ñ€ÐµÐºÐ²ÐµÑÑ‚Ð°',
  `flow_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT 'native' COMMENT 'Order Flow identity',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_E52FFDEE1AD5CDBF` (`cart_id`),
  UNIQUE KEY `order_nr_idx` (`order_nr`),
  UNIQUE KEY `UNIQ_E52FFDEE9E53D244` (`payture_order_id`),
  UNIQUE KEY `UNIQ_E52FFDEED906FC5D` (`external_order_nr`),
  UNIQUE KEY `UNIQ_E52FFDEED249A887` (`feedback_id`),
  KEY `IDX_E52FFDEEA76ED395` (`user_id`),
  KEY `IDX_E52FFDEEE3D8151C` (`courier_id`),
  KEY `IDX_E52FFDEEC76C06D9` (`promocode_id`),
  KEY `idx_created_at` (`created_at`),
  KEY `IDX_E52FFDEE584598A3` (`operator_id`),
  KEY `IDX_E52FFDEEEE1A430C` (`cancel_reason_id`),
  KEY `idx_sort_priority` (`sort_priority`),
  KEY `idx_notify_priority` (`notify_priority`),
  KEY `IDX_E52FFDEE52D06999` (`user_address_id`),
  KEY `IDX_E52FFDEE94A4C7D4` (`device_id`),
  KEY `idx_payture_session_id` (`payture_session_id`),
  KEY `idx_phone_number` (`phone_number`),
  KEY `idx_status_courier_delivered` (`status`,`courier_id`,`delivered_at`),
  KEY `fk_orders_region` (`region_id`),
  KEY `idx_place_confirmed_at` (`place_confirmed_at`),
  KEY `idx_restaurant_received_at` (`restaurant_received_at`),
  KEY `idx_finished_at` (`finished_at`),
  KEY `IDX_E52FFDEEDA6A219` (`place_id`),
  KEY `IDX_E52FFDEE9AB05F96` (`legal_info_id`),
  KEY `IDX_E52FFDEEC6556E3E` (`latest_revision_id`),
  KEY `idx__orders__place_id__status__type` (`place_id`,`status`,`type`),
  KEY `idx_place_delivery_zone_id` (`place_delivery_zone_id`),
  KEY `idx__orders__yandex_uid` (`yandex_uid`),
  KEY `idx__orders__courier_assigned_at` (`courier_assigned_at`),
  KEY `idx__orders__updated_at` (`updated_at`),
  CONSTRAINT `FK_E52FFDEE52D06999` FOREIGN KEY (`user_address_id`) REFERENCES `user_addresses` (`id`) ON DELETE SET NULL,
  CONSTRAINT `FK_E52FFDEE584598A3` FOREIGN KEY (`operator_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `FK_E52FFDEE94A4C7D4` FOREIGN KEY (`device_id`) REFERENCES `user_devices` (`id`) ON DELETE SET NULL,
  CONSTRAINT `FK_E52FFDEEA76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`),
  CONSTRAINT `FK_E52FFDEEC6556E3E` FOREIGN KEY (`latest_revision_id`) REFERENCES `order_revisions` (`id`),
  CONSTRAINT `FK_E52FFDEEC76C06D9` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`),
  CONSTRAINT `FK_E52FFDEED249A887` FOREIGN KEY (`feedback_id`) REFERENCES `order_feedbacks` (`id`),
  CONSTRAINT `FK_E52FFDEEDA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `FK_E52FFDEEE3D8151C` FOREIGN KEY (`courier_id`) REFERENCES `couriers` (`id`),
  CONSTRAINT `FK_E52FFDEEEE1A430C` FOREIGN KEY (`cancel_reason_id`) REFERENCES `order_problem_dictionary` (`id`),
  CONSTRAINT `__FK_E52FFDEE9AB05F96` FOREIGN KEY (`legal_info_id`) REFERENCES `legal_info` (`id`),
  CONSTRAINT `fk_orders_region` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=724887232 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `parser_start_log`
--

DROP TABLE IF EXISTS `parser_start_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `parser_start_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_FFDA4FC7DA6A219` (`place_id`),
  KEY `IDX_FFDA4FC7A76ED395` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=475267017 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_debt`
--

DROP TABLE IF EXISTS `payment_debt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_debt` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'disaster' COMMENT 'Debt type',
  `amount` decimal(13,2) NOT NULL COMMENT 'Debt amount value',
  `sync_status` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð´Ð¾Ð»Ð³Ð° Ð¸ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°',
  `close_reason` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ÐŸÑ€Ð¸Ð·Ð½Ð°Ðº Ð¸ Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð° Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ Ð´Ð¾Ð»Ð³ Ð·Ð°ÐºÑ€Ñ‹Ñ‚',
  `cancelled_at` datetime DEFAULT NULL COMMENT 'Datetime debt cancelled',
  `ready_for_auth_at` datetime DEFAULT NULL COMMENT 'Datetime order delivered',
  `authorized_at` datetime DEFAULT NULL COMMENT 'Datetime debt authorized ',
  `rejected_at` datetime DEFAULT NULL COMMENT 'Datetime debt rejected',
  `cleared_at` datetime DEFAULT NULL COMMENT 'Datetime debt cleared',
  `compensated_at` datetime DEFAULT NULL COMMENT 'Datetime debt was compensated to place',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__payment_debt__order_nr` (`order_nr`),
  KEY `idx__payment_debt__created_at` (`created_at`),
  KEY `idx__payment_debt__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1021342 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_error_log`
--

DROP TABLE IF EXISTS `payment_error_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_error_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `payment_order_id` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `request` longtext COLLATE utf8_unicode_ci NOT NULL,
  `response` longtext COLLATE utf8_unicode_ci NOT NULL,
  `error_code` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=37620017 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_flow_compositions`
--

DROP TABLE IF EXISTS `payment_flow_compositions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_flow_compositions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__payment_flow_compositions__created_at` (`created_at`),
  KEY `idx__payment_flow_compositions__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=2208024747 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_flow_invoices`
--

DROP TABLE IF EXISTS `payment_flow_invoices`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_flow_invoices` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_id` int(10) unsigned NOT NULL COMMENT 'ID ??????',
  `document_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID ???? ?? ??????? ???????',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ???? (DC2Type:order_flow_payment_bundle_invoice_type)',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????? ???? (DC2Type:order_flow_payment_bundle_invoice_status)',
  `cancel_reason` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????? ??????',
  `created_at` datetime NOT NULL COMMENT '???? ????????',
  `updated_at` datetime NOT NULL COMMENT '???? ??????????',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__payment_flow_invoices__document_id` (`document_id`),
  KEY `idx__payment_flow_invoices__order_id` (`order_id`),
  KEY `idx__payment_flow_invoices__created_at` (`created_at`),
  KEY `idx__payment_flow_invoices__updated_at` (`updated_at`),
  CONSTRAINT `fk__payment_flow_invoices__order_id` FOREIGN KEY (`order_id`) REFERENCES `payment_flow_orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1375579157 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_flow_orders`
--

DROP TABLE IF EXISTS `payment_flow_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_flow_orders` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `composition_id` int(10) unsigned NOT NULL COMMENT 'Composition of order products',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Unique order Nr',
  `status` smallint(6) NOT NULL COMMENT 'Payment flow order status',
  `payment_system` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment system code',
  `payture_session_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payture session id',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `payment_status` int(11) DEFAULT NULL COMMENT 'Payment status',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__payment_flow_orders__order_nr` (`order_nr`),
  KEY `idx__payment_flow_orders__composition_id` (`composition_id`),
  KEY `idx__payment_flow_orders__created_at` (`created_at`),
  KEY `idx__payment_flow_orders__updated_at` (`updated_at`),
  CONSTRAINT `fk__payment_flow_orders__composition_id` FOREIGN KEY (`composition_id`) REFERENCES `payment_flow_compositions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=660327957 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_flow_product_payments`
--

DROP TABLE IF EXISTS `payment_flow_product_payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_flow_product_payments` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_id` int(10) unsigned NOT NULL,
  `payment_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `amount` decimal(11,2) NOT NULL,
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'RUB' COMMENT '(DC2Type:order_flow_payment_bundle_payment_currency)',
  `status` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `external_user_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `card_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `payment_method` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'card' COMMENT '(DC2Type:order_flow_payment_bundle_payment_payment_method)',
  `extra_params` json DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `refund_started_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__payment_flow_product_payments__payment_id` (`payment_id`),
  KEY `idx__payment_flow_product_payments__order_id` (`order_id`),
  KEY `idx__payment_flow_product_payments__created_at` (`created_at`),
  KEY `idx__payment_flow_product_payments__refund_started_at` (`refund_started_at`),
  CONSTRAINT `_fk__payment_flow_product_payments__order_id` FOREIGN KEY (`order_id`) REFERENCES `payment_flow_orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=21846592 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_flow_products`
--

DROP TABLE IF EXISTS `payment_flow_products`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_flow_products` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `composition_id` int(10) unsigned NOT NULL COMMENT 'Composition this product belongs to',
  `parent_product_id` bigint(20) DEFAULT NULL COMMENT 'Parent product ID from the same table',
  `invoice_id` int(10) unsigned DEFAULT NULL,
  `identity` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Product unit identity',
  `number` int(10) unsigned NOT NULL COMMENT 'Concrete unit number in set',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Product name',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Type of product',
  `price_for_customer` decimal(11,2) NOT NULL COMMENT 'The price customer will pay for the product',
  `currency` varchar(3) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Currency code',
  `vat` smallint(6) DEFAULT NULL COMMENT 'Vat in percents, except -1 = tax free',
  `client_id` int(10) unsigned DEFAULT NULL COMMENT 'Balance client id',
  `discounts` json DEFAULT NULL COMMENT 'Information about product discounts',
  `partial_refund_available` tinyint(1) DEFAULT NULL COMMENT 'Is partial refund available for product',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__payment_flow_products__composition_id` (`composition_id`),
  KEY `idx__payment_flow_products__parent_product_id` (`parent_product_id`),
  KEY `idx__payment_flow_products__invoice_id` (`invoice_id`),
  KEY `idx__payment_flow_products__created_at` (`created_at`),
  KEY `idx__payment_flow_products__updated_at` (`updated_at`),
  CONSTRAINT `__fk__payment_flow_products__invoice_id` FOREIGN KEY (`invoice_id`) REFERENCES `payment_flow_invoices` (`id`),
  CONSTRAINT `fk__payment_flow_products__composition_id` FOREIGN KEY (`composition_id`) REFERENCES `payment_flow_compositions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=17103671862 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_flow_products_payments`
--

DROP TABLE IF EXISTS `payment_flow_products_payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_flow_products_payments` (
  `product_payment_id` int(10) unsigned NOT NULL,
  `product_id` bigint(20) NOT NULL,
  PRIMARY KEY (`product_payment_id`,`product_id`),
  KEY `idx__payment_flow_products_payments__product_payment_id` (`product_payment_id`),
  KEY `idx__payment_flow_products_payments__product_id` (`product_id`),
  CONSTRAINT `__fk__payment_flow_product_payments__product_payment_id` FOREIGN KEY (`product_payment_id`) REFERENCES `payment_flow_product_payments` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk__payment_flow_products_payments__product_id` FOREIGN KEY (`product_id`) REFERENCES `payment_flow_products` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_flow_refund_products`
--

DROP TABLE IF EXISTS `payment_flow_refund_products`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_flow_refund_products` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `product_id` bigint(20) DEFAULT NULL,
  `refund_id` int(10) unsigned NOT NULL,
  `value_amount` decimal(11,2) DEFAULT NULL COMMENT 'Amount that was actually refunded',
  `created_at` datetime NOT NULL COMMENT 'Creating date',
  `updated_at` datetime NOT NULL COMMENT 'Updating date',
  PRIMARY KEY (`id`),
  KEY `idx__payment_flow_refund_products__refund_id` (`refund_id`),
  KEY `fk__payment_flow_refund_products__product_id` (`product_id`),
  KEY `idx__payment_flow_refund_products__created_at` (`created_at`),
  KEY `idx__payment_flow_refund_products__updated_at` (`updated_at`),
  CONSTRAINT `_fk__payment_flow_refund_products__product_id` FOREIGN KEY (`product_id`) REFERENCES `payment_flow_products` (`id`),
  CONSTRAINT `_fk__payment_flow_refund_products__refund_id` FOREIGN KEY (`refund_id`) REFERENCES `payment_flow_refunds` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=28693772 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Reference table between products and refunds';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_flow_refunds`
--

DROP TABLE IF EXISTS `payment_flow_refunds`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_flow_refunds` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL COMMENT 'Creating date',
  `updated_at` datetime NOT NULL COMMENT 'Updating date',
  `status` smallint(6) NOT NULL COMMENT 'Status',
  `order_fiscal_info_id` int(11) DEFAULT NULL COMMENT 'Reference with OrderFiscalInfo',
  `order_id` int(10) unsigned NOT NULL,
  `type` varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Refund type: delivery or products',
  `document_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'cheque idempotency key',
  `idempotency_key` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Refund idempotency key',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__payment_flow_refunds__document_id` (`document_id`),
  KEY `fk__payment_flow_refunds__order_id` (`order_id`),
  KEY `idx__payment_flow_refunds__created_at` (`created_at`),
  KEY `idx__payment_flow_refunds__updated_at` (`updated_at`),
  CONSTRAINT `fk__payment_flow_refunds__order_id` FOREIGN KEY (`order_id`) REFERENCES `payment_flow_orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9958267 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='List of products to refund';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_log`
--

DROP TABLE IF EXISTS `payment_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `status` enum('New','PreAuthorized3DS','Authorized','Voided','Charged','RefundInitialized','Refunded','Forwarded','Rejected','Error','Chargeback') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment statuses(DC2Type:payment_log_status)',
  `description` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'description of rejected status',
  `auth_code` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'auth code',
  `ref_number` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'transaction identity RRN',
  `created_at` datetime NOT NULL COMMENT 'when record created',
  `payment_order_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Detailed history about cashless payments',
  `amount` int(11) DEFAULT NULL COMMENT 'Affected amount',
  `type` enum('one-step','two-step') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment type. For example: one-step, two-step(DC2Type:payment_log_type)',
  `transaction_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Not used EDADEV-24995',
  `three_ds` tinyint(1) DEFAULT NULL COMMENT 'with 3ds or not',
  `payment_system` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment system. Examples: Visa, MasterCard',
  `bank_human_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Bank human name',
  PRIMARY KEY (`id`),
  KEY `IDX_B85CA9F18D9F6D38` (`order_id`),
  CONSTRAINT `__FK_B85CA9F18D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=884816487 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_methods`
--

DROP TABLE IF EXISTS `payment_methods`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_methods` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `code` tinyint(3) unsigned NOT NULL,
  `enabled` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=18 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_system_orders`
--

DROP TABLE IF EXISTS `payment_system_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_system_orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `payment_id` decimal(24,10) unsigned NOT NULL,
  `payment_method` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_8A541E2360A4EAE` (`order_nr`),
  UNIQUE KEY `UNIQ_8A541E24C3A3BB` (`payment_id`)
) ENGINE=InnoDB AUTO_INCREMENT=198782 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payments`
--

DROP TABLE IF EXISTS `payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `payment_method_id` int(10) unsigned NOT NULL DEFAULT '3',
  `account_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `blocked_at` datetime DEFAULT NULL,
  `unblocked_at` datetime DEFAULT NULL,
  `charged_at` datetime DEFAULT NULL,
  `refunded_at` datetime DEFAULT NULL,
  `failed_at` datetime DEFAULT NULL,
  `status` enum('created','blocked','unblocked','charged','refunded','failed') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:payment_status)',
  `admin_id` int(11) DEFAULT NULL,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `charged_amount` int(11) NOT NULL DEFAULT '0',
  `charged_amount_rational` decimal(13,2) DEFAULT NULL COMMENT 'Charged amount',
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'RUB',
  `updated_at` datetime DEFAULT '2019-10-15 00:00:00',
  `payment_terminal_id` varchar(250) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment terminal id',
  `payment_card_id` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__payments__order_nr` (`order_nr`),
  KEY `fk__payments__payment_method_id` (`payment_method_id`),
  KEY `idx__payments__payment_method_id` (`payment_method_id`),
  KEY `idx__payments__updated_at` (`updated_at`),
  KEY `idx__payments__payment_card_id` (`payment_card_id`),
  CONSTRAINT `_fk__payments__payment_card_id` FOREIGN KEY (`payment_card_id`) REFERENCES `finance_payment_cards` (`id`),
  CONSTRAINT `_fk__payments__payment_method_id` FOREIGN KEY (`payment_method_id`) REFERENCES `payment_methods` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=658734827 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payture_notifications`
--

DROP TABLE IF EXISTS `payture_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payture_notifications` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `payture_order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Payture Order Id',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order Nr',
  `notification_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order Nr',
  `transaction_date` datetime DEFAULT NULL COMMENT 'Transaction Date(DC2Type:datetimetz)',
  `card_number` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Card Number',
  `amount` int(11) DEFAULT NULL COMMENT 'Amount',
  `is_success` tinyint(1) NOT NULL COMMENT 'Is payment success',
  `error_code` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Error Code',
  `payment_system` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Payment System',
  `bank_human_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Bank Human Name',
  `is_processed` tinyint(1) NOT NULL COMMENT 'Is payment proccessed',
  `request_params` json NOT NULL COMMENT 'Request Params',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `unique_id_card` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Unique Id Card',
  PRIMARY KEY (`id`),
  KEY `idx__payture_notifications__created_at` (`created_at`),
  KEY `idx__payture_notifications__order_nr` (`order_nr`),
  KEY `idx__payture_notifications__notification_type` (`notification_type`),
  KEY `idx__payture_notifications__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=726196207 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payture_user_tracking_notifications`
--

DROP TABLE IF EXISTS `payture_user_tracking_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payture_user_tracking_notifications` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `merchant_contract` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Наименование платежного Терминала',
  `transaction_date` datetime DEFAULT NULL COMMENT 'Дата проведения платежа',
  `session_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID платежной сессии',
  `order_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Идентификатор заказа в Payture',
  `success` tinyint(1) NOT NULL COMMENT 'Признак успешного ответа от Payture',
  `tracking_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Идентификатор трекинга',
  `events` json NOT NULL COMMENT 'Список эвентов в json формате',
  `created_at` datetime NOT NULL COMMENT 'Дата создания',
  `updated_at` datetime DEFAULT NULL COMMENT 'Дата обновления',
  PRIMARY KEY (`id`),
  KEY `idx__payture_user_tracking_notifications__created_at` (`created_at`),
  KEY `idx__payture_user_tracking_notifications__updated_at` (`updated_at`),
  KEY `idx__payture_user_tracking_notifications__tracking_id` (`tracking_id`),
  KEY `idx__payture_user_tracking_notifications__order_id` (`order_id`)
) ENGINE=InnoDB AUTO_INCREMENT=218629052 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `penalty_rules`
--

DROP TABLE IF EXISTS `penalty_rules`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penalty_rules` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `business` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  `delivery_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `penalty_percent` smallint(5) unsigned NOT NULL,
  `start_date` date NOT NULL,
  `finish_date` date NOT NULL,
  `duration` int(10) unsigned DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `max_gmv_percent` smallint(5) unsigned DEFAULT NULL,
  `real_max_gmv_percent` decimal(5,2) DEFAULT NULL COMMENT '(DC2Type:decimal_as_float)',
  PRIMARY KEY (`id`),
  KEY `idx__penalty_rules__created_at` (`created_at`),
  KEY `idx__penalty_rules__updated_at` (`updated_at`),
  KEY `idx__penalty_rules__type__start_date__finish_date` (`type`,`start_date`,`finish_date`)
) ENGINE=InnoDB AUTO_INCREMENT=323 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `penalty_rules_brands`
--

DROP TABLE IF EXISTS `penalty_rules_brands`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penalty_rules_brands` (
  `penalty_rule_id` int(11) NOT NULL,
  `brand_id` int(11) NOT NULL,
  PRIMARY KEY (`penalty_rule_id`,`brand_id`),
  KEY `idx__penalty_rules_brands__penalty_rule_id` (`penalty_rule_id`),
  KEY `idx__penalty_rules_brands__brand_id` (`brand_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `penalty_rules_brands_excluded`
--

DROP TABLE IF EXISTS `penalty_rules_brands_excluded`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penalty_rules_brands_excluded` (
  `penalty_rule_id` int(11) NOT NULL,
  `brand_id` int(11) NOT NULL,
  PRIMARY KEY (`penalty_rule_id`,`brand_id`),
  KEY `idx__penalty_rules_brands__penalty_rule_id` (`penalty_rule_id`),
  KEY `idx__penalty_rules_brands__brand_id` (`brand_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `penalty_rules_clients`
--

DROP TABLE IF EXISTS `penalty_rules_clients`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penalty_rules_clients` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `penalty_rule_id` int(10) unsigned NOT NULL,
  `client_id` int(10) unsigned NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__penalty_rules_clients__created_at` (`created_at`),
  KEY `idx__penalty_rules_clients__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=211 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `penalty_rules_clients_excluded`
--

DROP TABLE IF EXISTS `penalty_rules_clients_excluded`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penalty_rules_clients_excluded` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `penalty_rule_id` int(10) unsigned NOT NULL,
  `client_id` int(10) unsigned NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__penalty_rules_clients_excluded__created_at` (`created_at`),
  KEY `idx__penalty_rules_clients_excluded__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=4519 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `penalty_rules_log`
--

DROP TABLE IF EXISTS `penalty_rules_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penalty_rules_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `admin_id` int(11) NOT NULL,
  `date` datetime NOT NULL COMMENT '(DC2Type:date_immutable)',
  `action` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `penalty_rule` json NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__penalty_rules_log__created_at` (`created_at`),
  KEY `idx__penalty_rules_log__updated_at` (`updated_at`),
  KEY `idx__penalty_rules_log__date` (`date`),
  KEY `fk__penalty_rules_log__admin_id` (`admin_id`),
  CONSTRAINT `fk__penalty_rules_log__admin_id` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=471 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `penalty_rules_notifications`
--

DROP TABLE IF EXISTS `penalty_rules_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penalty_rules_notifications` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `notifications_accepted` tinyint(1) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__penalty_rule_notifications__place_id` (`place_id`),
  KEY `idx__penalty_rule_notifications__created_at` (`created_at`),
  KEY `idx__penalty_rule_notifications__updated_at` (`updated_at`),
  CONSTRAINT `fk__penalty_rule_notifications__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1291812 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `penalty_rules_regions`
--

DROP TABLE IF EXISTS `penalty_rules_regions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penalty_rules_regions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `penalty_rule_id` int(10) unsigned NOT NULL,
  `region_id` int(10) unsigned NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__penalty_rules_regions__created_at` (`created_at`),
  KEY `idx__penalty_rules_regions__updated_at` (`updated_at`),
  KEY `idx__penalty_rules_regions__penalty_rule_id` (`penalty_rule_id`),
  KEY `idx__penalty_rules_regions__region_id` (`region_id`)
) ENGINE=InnoDB AUTO_INCREMENT=194 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `phone_verification_codes`
--

DROP TABLE IF EXISTS `phone_verification_codes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `phone_verification_codes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `code` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `active` tinyint(1) NOT NULL,
  `failed_tries` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_288DE43FA76ED395` (`user_id`),
  KEY `idx_pv_codes_deactivated_at` (`deactivated_at`),
  CONSTRAINT `FK_A2B276EFA76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4222647 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `pictures`
--

DROP TABLE IF EXISTS `pictures`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `pictures` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `picture_title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `discr` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=134877 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_account_report_send_requests`
--

DROP TABLE IF EXISTS `place_account_report_send_requests`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_account_report_send_requests` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `status` varchar(16) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'new',
  `places` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:simple_array)',
  `preset_period_type` varchar(16) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'week',
  `period_group_by` varchar(16) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'week',
  `period_begin` datetime DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)',
  `period_end` datetime DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)',
  `metrics` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:simple_array)',
  `with_raw_data` tinyint(1) NOT NULL DEFAULT '1',
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `file_format` varchar(4) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'xls',
  `vendor_user_id` int(10) unsigned NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__place_account_report_send_requests__vendor_user_id` (`vendor_user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=35737 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_additional_images`
--

DROP TABLE IF EXISTS `place_additional_images`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_additional_images` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) DEFAULT NULL,
  `place_category_id` int(11) DEFAULT NULL,
  `image_id` int(11) DEFAULT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT '1',
  `sort` smallint(5) unsigned NOT NULL DEFAULT '100',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__place_additional_images__place_id` (`place_id`),
  KEY `idx__place_additional_images__place_category_id` (`place_category_id`),
  KEY `idx__place_additional_images__image_id` (`image_id`),
  KEY `idx__place_additional_images__created_at` (`created_at`),
  KEY `idx__place_additional_images__updated_at` (`updated_at`),
  CONSTRAINT `fk__place_additional_images__image_id` FOREIGN KEY (`image_id`) REFERENCES `pictures` (`id`),
  CONSTRAINT `fk__place_additional_images__place_category_id` FOREIGN KEY (`place_category_id`) REFERENCES `place_categories` (`id`),
  CONSTRAINT `fk__place_additional_images__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=22034 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_average_cheque`
--

DROP TABLE IF EXISTS `place_average_cheque`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_average_cheque` (
  `place_id` int(11) NOT NULL,
  `aov_rub` int(11) NOT NULL,
  `aov_lcy` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`place_id`),
  KEY `idx__place_average_cheque__place_id` (`place_id`),
  KEY `idx__place_average_cheque__created_at` (`created_at`),
  KEY `idx__place_average_cheque__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_average_rating_sources`
--

DROP TABLE IF EXISTS `place_average_rating_sources`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_average_rating_sources` (
  `place_id` int(11) NOT NULL,
  `source_place_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`place_id`,`source_place_id`),
  UNIQUE KEY `ux__place_average_rating_sources__place_id` (`place_id`),
  KEY `idx__place_average_rating_sources__created_at` (`created_at`),
  KEY `idx__place_average_rating_sources__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_active_contracts`
--

DROP TABLE IF EXISTS `place_billing_active_contracts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_active_contracts` (
  `client_id` int(11) NOT NULL,
  `contract_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`client_id`),
  KEY `_fk__place_billing_active_contracts__place_billing_contracts` (`contract_id`),
  CONSTRAINT `_fk__place_billing_active_contracts__place_billing_contracts` FOREIGN KEY (`contract_id`) REFERENCES `place_billing_contracts` (`id`),
  CONSTRAINT `fk__place_billing_active_contracts__place_billing_clients` FOREIGN KEY (`client_id`) REFERENCES `place_billing_clients` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_client_places`
--

DROP TABLE IF EXISTS `place_billing_client_places`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_client_places` (
  `place_id` int(11) NOT NULL,
  `client_id` int(11) NOT NULL,
  PRIMARY KEY (`place_id`,`client_id`),
  UNIQUE KEY `ux__place_billing_client_places__place_id` (`place_id`),
  KEY `idx__place_billing_client_places__client_id` (`client_id`),
  CONSTRAINT `fk__place_billing_client_places__client_id` FOREIGN KEY (`client_id`) REFERENCES `place_billing_clients` (`id`),
  CONSTRAINT `fk__place_billing_client_places__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_client_places_history`
--

DROP TABLE IF EXISTS `place_billing_client_places_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_client_places_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `place_id` int(11) NOT NULL,
  `client_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__place_billing_client_places_history__place_id` (`place_id`),
  KEY `idx__place_billing_client_places_history__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=17347 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_clients`
--

DROP TABLE IF EXISTS `place_billing_clients`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_clients` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `balance_internal_id` int(10) unsigned DEFAULT NULL,
  `prefix` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `phone` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `city` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `bit_settings` int(10) unsigned NOT NULL DEFAULT '2' COMMENT '(DC2Type:bit_mask)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `inn` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `delivery_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'native',
  `deactivated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)',
  `country_code` varchar(2) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'RU',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_billing_clients__prefix__inn__delivery_type` (`prefix`,`inn`,`delivery_type`),
  UNIQUE KEY `ux__place_billing_clients__balance_internal_id` (`balance_internal_id`),
  KEY `idx__place_billing_clients__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=11017452 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_contracts`
--

DROP TABLE IF EXISTS `place_billing_contracts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_contracts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `person_id` int(11) NOT NULL,
  `balance_internal_id` int(10) unsigned DEFAULT NULL,
  `balance_external_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `contract_type` varchar(16) COLLATE utf8_unicode_ci NOT NULL,
  `is_active` tinyint(1) NOT NULL,
  `is_canceled` tinyint(1) NOT NULL,
  `is_deactivated` tinyint(1) NOT NULL,
  `start_date` date NOT NULL,
  `finish_date` date DEFAULT NULL,
  `accept_payment_form_url` varchar(1024) COLLATE utf8_unicode_ci DEFAULT NULL,
  `offer_accepted` tinyint(1) NOT NULL,
  `offer_accepted_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `accept_payment_request_id` int(10) unsigned DEFAULT NULL,
  `accept_payment_invoice_id` int(10) unsigned DEFAULT NULL,
  `accept_payment_public_pdf_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `real_start_date` date DEFAULT NULL,
  `print_form_date` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_billing_contracts__balance_internal_id` (`balance_internal_id`),
  KEY `idx__place_billing_contracts__person_id` (`person_id`),
  KEY `idx__place_billing_contracts__accept_payment_invoice_id` (`accept_payment_invoice_id`),
  KEY `idx__place_billing_contracts__balance_external_id` (`balance_external_id`),
  KEY `idx__place_billing_contracts__created_at` (`created_at`),
  KEY `idx__place_billing_contracts__updated_at` (`updated_at`),
  CONSTRAINT `__fk__place_billing_contracts__person_id` FOREIGN KEY (`person_id`) REFERENCES `place_billing_persons` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=307892 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_error_log`
--

DROP TABLE IF EXISTS `place_billing_error_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_error_log` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `source` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `identifier` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `message` longtext COLLATE utf8_unicode_ci,
  `details` json NOT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__place_billing_error_log__source__identifier__created_at` (`source`,`identifier`,`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=5029197 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_franchisee_clients`
--

DROP TABLE IF EXISTS `place_billing_franchisee_clients`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_franchisee_clients` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `client_id` int(11) NOT NULL,
  `franchiser_client_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_billing_franchisee_clients__client_id` (`client_id`),
  KEY `idx__place_billing_franchisee_clients__franchiser_client_id` (`franchiser_client_id`),
  KEY `idx__place_billing_franchisee_clients__created_at` (`created_at`),
  KEY `idx__place_billing_franchisee_clients__updated_at` (`updated_at`),
  CONSTRAINT `_fk__place_billing_franchisee_clients__client_id` FOREIGN KEY (`client_id`) REFERENCES `place_billing_clients` (`id`),
  CONSTRAINT `_fk__place_billing_franchisee_clients__franchiser_client_id` FOREIGN KEY (`franchiser_client_id`) REFERENCES `place_billing_clients` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_person_places`
--

DROP TABLE IF EXISTS `place_billing_person_places`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_person_places` (
  `place_id` int(11) NOT NULL,
  `person_id` int(11) NOT NULL,
  PRIMARY KEY (`place_id`,`person_id`),
  UNIQUE KEY `ux__place_billing_person_places__place_id` (`place_id`),
  KEY `idx__place_billing_person_places__person_id` (`person_id`),
  CONSTRAINT `_fk__place_billing_person_places__person_id` FOREIGN KEY (`person_id`) REFERENCES `place_billing_persons` (`id`),
  CONSTRAINT `fk__place_billing_person_places__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_person_places_history`
--

DROP TABLE IF EXISTS `place_billing_person_places_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_person_places_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `place_id` int(11) NOT NULL,
  `person_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__place_billing_person_places_history__place_id` (`place_id`),
  KEY `idx__place_billing_person_places_history__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=14892 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_billing_persons`
--

DROP TABLE IF EXISTS `place_billing_persons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_billing_persons` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `client_id` int(11) NOT NULL,
  `balance_internal_id` int(10) unsigned DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `legal_name` varchar(512) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `phone` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `inn` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `kpp` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `legal_address` varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL,
  `legal_address_postcode` varchar(6) COLLATE utf8_unicode_ci DEFAULT NULL,
  `post_address` varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL,
  `postcode` varchar(6) COLLATE utf8_unicode_ci DEFAULT NULL,
  `post_suffix` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `account` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `bik` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `signer_name` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `signer_position` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `authority_doc_type` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `authority_doc_details` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `bank` longtext COLLATE utf8_unicode_ci,
  `org_type` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `kbe` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `iik` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `legal_name_local` varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL,
  `legal_address_local` varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL,
  `signer_name_local` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_billing_persons__client_id__inn` (`client_id`,`inn`),
  UNIQUE KEY `ux__place_billing_persons__balance_internal_id` (`balance_internal_id`),
  KEY `idx__place_billing_persons__client_id` (`client_id`),
  CONSTRAINT `__fk__place_billing_persons__client_id` FOREIGN KEY (`client_id`) REFERENCES `place_billing_clients` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=263882 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_categories`
--

DROP TABLE IF EXISTS `place_categories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_categories` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `is_quick_filter` tinyint(1) NOT NULL DEFAULT '0',
  `picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `sort` int(11) NOT NULL,
  `is_api_enabled` tinyint(1) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`),
  KEY `ix__place_categories__api_enabled` (`is_api_enabled`)
) ENGINE=InnoDB AUTO_INCREMENT=919 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_category_image_placeholders`
--

DROP TABLE IF EXISTS `place_category_image_placeholders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_category_image_placeholders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_category_id` int(11) DEFAULT NULL,
  `image_id` int(11) DEFAULT NULL,
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__place_category_image_placeholders__place_category_id` (`place_category_id`),
  KEY `idx__place_category_image_placeholders__image_id` (`image_id`),
  CONSTRAINT `fk__place_category_image_placeholders__image_id` FOREIGN KEY (`image_id`) REFERENCES `pictures` (`id`),
  CONSTRAINT `fk__place_category_image_placeholders__place_category_id` FOREIGN KEY (`place_category_id`) REFERENCES `place_categories` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=41037 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_client_categories`
--

DROP TABLE IF EXISTS `place_client_categories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_client_categories` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) unsigned DEFAULT NULL,
  `place_id` int(11) DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `sort` int(11) NOT NULL DEFAULT '100',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `deactivated_at` datetime DEFAULT NULL,
  `level` smallint(5) unsigned NOT NULL DEFAULT '0',
  `origin_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `idx__place_client_categories__parent_id` (`parent_id`),
  KEY `idx__place_client_categories__place_id` (`place_id`),
  KEY `idx__place_client_categories__updated_at` (`updated_at`),
  KEY `idx__place_client_categories__place_id__deactivated_at` (`place_id`,`deactivated_at`),
  CONSTRAINT `__fk__place_client_categories__place_client_categories_id` FOREIGN KEY (`parent_id`) REFERENCES `place_client_categories` (`id`),
  CONSTRAINT `__fk__place_client_categories__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=236765322 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_client_categories_place_menu_categories`
--

DROP TABLE IF EXISTS `place_client_categories_place_menu_categories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_client_categories_place_menu_categories` (
  `place_client_category_id` int(11) unsigned NOT NULL,
  `place_menu_category_id` int(11) NOT NULL,
  PRIMARY KEY (`place_client_category_id`,`place_menu_category_id`),
  KEY `idx__pcc_pmc__place_client_category_id` (`place_client_category_id`),
  KEY `idx__pcc_pmc__place_menu_category_id` (`place_menu_category_id`),
  CONSTRAINT `fk__pcc_pmc__place_client_category_id` FOREIGN KEY (`place_client_category_id`) REFERENCES `place_client_categories` (`id`),
  CONSTRAINT `fk__pcc_pmc__place_menu_category_id` FOREIGN KEY (`place_menu_category_id`) REFERENCES `place_menu_categories` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_client_category_pictures`
--

DROP TABLE IF EXISTS `place_client_category_pictures`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_client_category_pictures` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `place_client_category_id` int(10) unsigned NOT NULL,
  `url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `sort` tinyint(3) unsigned NOT NULL DEFAULT '100',
  `enabled` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `deactivated_at` datetime DEFAULT NULL,
  `vendor_updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__place_client_category_pictures__place_client_category_id` (`place_client_category_id`),
  KEY `idx__place_client_category_pictures__cat_id_enabled_deactivated` (`place_client_category_id`,`enabled`,`deactivated_at`),
  CONSTRAINT `_fk__place_client_categories__id` FOREIGN KEY (`place_client_category_id`) REFERENCES `place_client_categories` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=132346532 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_commissions`
--

DROP TABLE IF EXISTS `place_commissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_commissions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `fixed_commission` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '(DC2Type:money)',
  `commission` decimal(4,2) DEFAULT NULL,
  `acquiring_commission` decimal(4,2) DEFAULT NULL,
  `available_from` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `available_to` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `fixed_commission_value` int(11) DEFAULT NULL,
  `fixed_commission_currency` char(3) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'delivery',
  `commission_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'delivery',
  PRIMARY KEY (`id`),
  KEY `idx__place_commissions__place_id` (`place_id`),
  KEY `idx__place_commissions__shipping_type` (`shipping_type`),
  KEY `idx__place_commissions__commission_type` (`commission_type`),
  KEY `idx__place_commissions__created_at` (`created_at`),
  KEY `idx__place_commissions__updated_at` (`updated_at`),
  CONSTRAINT `_fk__place_commissions__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `_fk__place_commissions__shipping_type` FOREIGN KEY (`shipping_type`) REFERENCES `shipping_type_dictionary` (`shipping_type`)
) ENGINE=InnoDB AUTO_INCREMENT=1889167 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_delivery_zone_delivery_cost_thresholds`
--

DROP TABLE IF EXISTS `place_delivery_zone_delivery_cost_thresholds`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_delivery_zone_delivery_cost_thresholds` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `zone_id` int(11) NOT NULL,
  `delivery_cost` int(11) NOT NULL,
  `order_price` int(11) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__place_delivery_zone_delivery_cost_thresholds__zone_id` (`zone_id`),
  CONSTRAINT `fk__place_delivery_zone_cost_thresholds__place_delivery_zones` FOREIGN KEY (`zone_id`) REFERENCES `place_delivery_zones` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_delivery_zone_migration_log`
--

DROP TABLE IF EXISTS `place_delivery_zone_migration_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_delivery_zone_migration_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `old_place_id` int(11) NOT NULL,
  `old_place_zone_id` int(11) DEFAULT NULL,
  `new_place_id` int(11) NOT NULL,
  `new_place_zone_id` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__place_delivery_zone_migration_log__old_place_id` (`old_place_id`),
  KEY `idx__place_delivery_zone_migration_log__old_place_zone_id` (`old_place_zone_id`),
  KEY `idx__place_delivery_zone_migration_log__new_place_id` (`new_place_id`),
  KEY `idx__place_delivery_zone_migration_log__new_place_zone_id` (`new_place_zone_id`),
  CONSTRAINT `fk__place_delivery_zone_migration_log__new_place_id` FOREIGN KEY (`new_place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `fk__place_delivery_zone_migration_log__new_place_zone_id` FOREIGN KEY (`new_place_zone_id`) REFERENCES `place_delivery_zones` (`id`),
  CONSTRAINT `fk__place_delivery_zone_migration_log__old_place_id` FOREIGN KEY (`old_place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `fk__place_delivery_zone_migration_log__old_place_zone_id` FOREIGN KEY (`old_place_zone_id`) REFERENCES `place_delivery_zones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=50187 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_delivery_zone_vertices`
--

DROP TABLE IF EXISTS `place_delivery_zone_vertices`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_delivery_zone_vertices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `zone_id` int(11) NOT NULL,
  `number` int(11) DEFAULT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__place_delivery_zone_vertices__zone_id` (`zone_id`),
  KEY `idx__place_delivery_zone_vertices__created_at` (`created_at`),
  CONSTRAINT `_fk__place_delivery_zone_vertices__place_delivery_zones` FOREIGN KEY (`zone_id`) REFERENCES `place_delivery_zones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1334805392 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_delivery_zone_working_schedule`
--

DROP TABLE IF EXISTS `place_delivery_zone_working_schedule`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_delivery_zone_working_schedule` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `zone_id` int(11) NOT NULL,
  `weekday` varchar(9) COLLATE utf8_unicode_ci NOT NULL,
  `from` varchar(5) COLLATE utf8_unicode_ci NOT NULL,
  `duration` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__place_delivery_zone_working_schedule__zone_id` (`zone_id`),
  KEY `idx__place_delivery_zone_working_schedule__updated_at` (`updated_at`),
  CONSTRAINT `_fk__place_delivery_zone_working_schedule__place_delivery_zones` FOREIGN KEY (`zone_id`) REFERENCES `place_delivery_zones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=753465772 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_delivery_zones`
--

DROP TABLE IF EXISTS `place_delivery_zones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_delivery_zones` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `delivery_condition_id` int(11) DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `courier_type` varchar(16) COLLATE utf8_unicode_ci NOT NULL,
  `average_marketplace_delivery_time` int(11) DEFAULT NULL,
  `is_synced_schedule` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `deactivated_at` datetime DEFAULT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT '1',
  `type` char(16) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'manual',
  `time_of_arrival` int(11) DEFAULT NULL,
  `shipping_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'delivery',
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_delivery_zones__place_id__origin_id` (`place_id`,`origin_id`),
  KEY `idx__place_delivery_zones__place_id` (`place_id`),
  KEY `idx__place_delivery_zones__delivery_condition_id` (`delivery_condition_id`),
  KEY `idx__place_delivery_zones__type__deactivated_at` (`type`,`deactivated_at`),
  KEY `idx__place_delivery_zones__shipping_type` (`shipping_type`),
  KEY `idx__place_delivery_zones__created_at` (`created_at`),
  KEY `idx__place_delivery_zones__updated_at` (`updated_at`),
  KEY `idx__place_delivery_zones__enabled` (`enabled`),
  CONSTRAINT `__fk__place_delivery_zones__delivery_condition` FOREIGN KEY (`delivery_condition_id`) REFERENCES `delivery_conditions` (`id`),
  CONSTRAINT `__fk__place_delivery_zones__places` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `_fk__place_delivery_zones__shipping_type` FOREIGN KEY (`shipping_type`) REFERENCES `shipping_type_dictionary` (`shipping_type`)
) ENGINE=InnoDB AUTO_INCREMENT=4024512 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_es_index_additional_fields`
--

DROP TABLE IF EXISTS `place_es_index_additional_fields`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_es_index_additional_fields` (
  `place_id` int(11) NOT NULL,
  `data` longtext COLLATE utf8_unicode_ci,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`place_id`),
  CONSTRAINT `fk__place_es_index_additional_fields__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_feed_info`
--

DROP TABLE IF EXISTS `place_feed_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_feed_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `place_types` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:array)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_3F85537DDA6A219` (`place_id`),
  CONSTRAINT `FK_3F85537DDA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=449292 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_feeds_options`
--

DROP TABLE IF EXISTS `place_feeds_options`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_feeds_options` (
  `place_id` int(11) NOT NULL,
  `google_keywords` text COLLATE utf8_unicode_ci,
  `google_stopwords` text COLLATE utf8_unicode_ci,
  `yandex_keywords` text COLLATE utf8_unicode_ci,
  `yandex_stopwords` text COLLATE utf8_unicode_ci,
  `extra_words` text COLLATE utf8_unicode_ci,
  `area` text COLLATE utf8_unicode_ci,
  `is_standalone` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`place_id`),
  KEY `ix__place_feeds_options__updated_at__created_at` (`updated_at`,`created_at`),
  CONSTRAINT `fk__place_feeds_options__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_group_settings`
--

DROP TABLE IF EXISTS `place_group_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_group_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parser_filters` longtext COLLATE utf8_unicode_ci,
  `use_dynamic_config` tinyint(1) NOT NULL DEFAULT '0',
  `menu_item_sort_source` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `delivery_zone_parser` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `delivery_zone_parser_options` longtext COLLATE utf8_unicode_ci COMMENT '(DC2Type:array)',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `menu_statistics_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `menu_parser_images_download_strategy` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'by_item',
  `availability_statistics_enabled` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8397 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_group_types`
--

DROP TABLE IF EXISTS `place_group_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_group_types` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_7E9EAF35E237E06` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_groups`
--

DROP TABLE IF EXISTS `place_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `integration_engine_id` int(11) DEFAULT NULL,
  `organization_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `options` longtext COLLATE utf8_unicode_ci COMMENT '(DC2Type:json_array)',
  `menu_parser_enabled` tinyint(1) NOT NULL,
  `order_sender_enabled` tinyint(1) NOT NULL,
  `parser_days_of_week` varchar(7) COLLATE utf8_unicode_ci NOT NULL,
  `parser_hours` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `stop_list_aggregator` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `price_parser_aggregator` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `price_parser_times` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `menu_parser_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `menu_parser_options` longtext COLLATE utf8_unicode_ci COMMENT '(DC2Type:json_array)',
  `need_order_email_notification` tinyint(1) NOT NULL DEFAULT '0',
  `delay_to_auto_confirm` int(11) NOT NULL DEFAULT '2',
  `picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `type_id` int(11) DEFAULT NULL,
  `vox_implant_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `vox_implant_client_permission_delay` tinyint(1) NOT NULL DEFAULT '0',
  `immediately_send_orders` tinyint(1) NOT NULL DEFAULT '0',
  `place_group_setting_id` int(11) DEFAULT NULL,
  `is_fast_food` tinyint(1) NOT NULL DEFAULT '0',
  `use_integration_kernel` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `places_stop_list_aggregator` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `is_duplicate_to_vendor` tinyint(1) NOT NULL DEFAULT '0',
  `stock_reset_limit` int(11) NOT NULL DEFAULT '0',
  `use_chunked_synchronizer` tinyint(1) NOT NULL DEFAULT '0',
  `native_vox_implant_strategy` tinyint(1) NOT NULL DEFAULT '0',
  `place_schedule_parser_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `place_schedule_parser_days_of_week` varchar(7) COLLATE utf8_unicode_ci DEFAULT NULL,
  `place_schedule_parser_hours` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `use_nomenclature_service_synchronization` tinyint(1) NOT NULL DEFAULT '0',
  `use_stop_list_chunked_updater` tinyint(1) NOT NULL DEFAULT '0',
  `use_client_categories_synchronization_with_menu` tinyint(1) NOT NULL DEFAULT '0',
  `updating_to_terminal_status` tinyint(1) NOT NULL DEFAULT '0',
  `place_schedule_parser_closing_time_correction` int(10) unsigned DEFAULT NULL COMMENT 'Поправка на время закрытия в минутах',
  `place_schedule_parser_excluded_place_ids` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `ignore_redis_lock` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_52A33E195E237E06` (`name`),
  KEY `IDX_52A33E19A7414DA9` (`integration_engine_id`),
  KEY `FK_52A33E19C54C8C93` (`type_id`),
  KEY `fk__place_groups__place_group_setting_id` (`place_group_setting_id`),
  KEY `idx__place_groups__created_at` (`created_at`),
  KEY `idx__place_groups__updated_at` (`updated_at`),
  CONSTRAINT `__FK_52A33E19A7414DA9` FOREIGN KEY (`integration_engine_id`) REFERENCES `integration_engines` (`id`),
  CONSTRAINT `__FK_52A33E19C54C8C93` FOREIGN KEY (`type_id`) REFERENCES `place_group_types` (`id`),
  CONSTRAINT `__fk__place_groups__place_group_setting_id` FOREIGN KEY (`place_group_setting_id`) REFERENCES `place_group_settings` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=227047 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_info`
--

DROP TABLE IF EXISTS `place_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `commission` decimal(4,2) DEFAULT NULL,
  `fixed_commission` int(10) unsigned DEFAULT NULL,
  `acquiring_commission` decimal(4,2) DEFAULT NULL,
  `vat` int(11) NOT NULL DEFAULT '0',
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `legal_info_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_13C41BB9AB05F96` (`legal_info_id`),
  CONSTRAINT `FK_13C41BB9AB05F96` FOREIGN KEY (`legal_info_id`) REFERENCES `legal_info` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=803852 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_legal_info`
--

DROP TABLE IF EXISTS `place_legal_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_legal_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `bank_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `bank_account` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `bank_bic` varchar(11) COLLATE utf8_unicode_ci DEFAULT NULL,
  `correspondence_address` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `signer_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `signer_position` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `base_document_type` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `base_document_information` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `fias_code` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `contract_currency_code` varchar(3) COLLATE utf8_unicode_ci NOT NULL,
  `registration_country` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `external_contract_number` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `representative_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `contract_type` varchar(12) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__place_legal_info__place_id` (`place_id`),
  CONSTRAINT `fk__place_legal_info__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=74991 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_log`
--

DROP TABLE IF EXISTS `place_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `enabled` tinyint(1) NOT NULL DEFAULT '0',
  `disable_details_comment` text COLLATE utf8_unicode_ci,
  `disable_details_available_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `place_id` int(11) NOT NULL,
  `admin_id` int(11) DEFAULT NULL,
  `disable_details_status` int(11) DEFAULT NULL,
  `disable_details_reason` int(11) DEFAULT NULL,
  `disable_details_last_call_date` datetime DEFAULT NULL,
  `brand_log_id` int(11) DEFAULT NULL,
  `disable_details_vendor_user_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_808D0E34642B8210` (`admin_id`),
  KEY `IDX_808D0E34DA6A219` (`place_id`),
  KEY `IDX_BRAND_LOG_ID` (`brand_log_id`),
  KEY `idx__place_log__created_at` (`created_at`),
  KEY `idx__place_log__updated_at` (`updated_at`),
  KEY `idx__place_log__place_id__created_at` (`place_id`,`created_at`),
  CONSTRAINT `__FK_808D0E34642B8210` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `__FK_808D0E34DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`) ON DELETE CASCADE,
  CONSTRAINT `__FK_BRAND_LOG_ID` FOREIGN KEY (`brand_log_id`) REFERENCES `brand_log` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=55813977 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_barcodes`
--

DROP TABLE IF EXISTS `place_menu_barcodes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_barcodes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `value` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_menu_barcodes__value` (`value`),
  KEY `idx__place_menu_barcodes__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=22133487 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_categories`
--

DROP TABLE IF EXISTS `place_menu_categories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_categories` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_special_offer` tinyint(1) NOT NULL,
  `picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `sort` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  `use_in_popularity_calculations` tinyint(1) NOT NULL DEFAULT '1',
  `available` tinyint(1) NOT NULL DEFAULT '1',
  `reactivate_at` datetime DEFAULT NULL,
  `schedule_mode` enum('auto','manual') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'auto',
  `schedule_description` varchar(250) COLLATE utf8_unicode_ci DEFAULT NULL,
  `is_synced_schedule` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `uuid` varchar(36) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_29AD986FDA6A219` (`place_id`),
  KEY `idx__place_menu_categories__uuid` (`uuid`),
  KEY `idx__place_menu_categories__created_at` (`created_at`),
  KEY `idx__place_menu_categories__updated_at` (`updated_at`),
  KEY `idx__place_menu_categories__available__reactivate_at` (`available`,`reactivate_at`),
  CONSTRAINT `FK_29AD986FDA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=32395727 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_category_schedule`
--

DROP TABLE IF EXISTS `place_menu_category_schedule`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_category_schedule` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `place_menu_category_id` int(11) NOT NULL,
  `weekday` varchar(9) COLLATE utf8_unicode_ci NOT NULL,
  `from` varchar(5) COLLATE utf8_unicode_ci NOT NULL,
  `duration` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_C55E5F8A8C31569F` (`place_menu_category_id`),
  CONSTRAINT `_FK_C55E5F8A8C31569F` FOREIGN KEY (`place_menu_category_id`) REFERENCES `place_menu_categories` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=13033257487 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_fiscal_data`
--

DROP TABLE IF EXISTS `place_menu_fiscal_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_fiscal_data` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `entity_id` bigint(20) unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `entity_type` enum('place_menu_item','place_menu_option') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:place_menu_fiscal_data_type)',
  `price` decimal(18,4) NOT NULL DEFAULT '0.0000' COMMENT '(DC2Type:decimal_as_float)',
  `vat` decimal(18,4) NOT NULL DEFAULT '0.0000' COMMENT '(DC2Type:decimal_as_float)',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_menu_fiscal_data__entity_type__entity_id` (`entity_type`,`entity_id`),
  KEY `idx__place_menu_fiscal_data__created_at` (`created_at`),
  KEY `idx__place_menu_fiscal_data__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=43522202 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_item_inner_options`
--

DROP TABLE IF EXISTS `place_menu_item_inner_options`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_item_inner_options` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_menu_item_id` int(11) NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `group_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `group_origin_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `min_amount` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `max_amount` tinyint(3) unsigned DEFAULT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_614629E74B01DD59` (`place_menu_item_id`),
  KEY `idx__place_menu_item_inner_options__deactivated_at` (`deactivated_at`),
  KEY `idx__place_menu_item_inner_options__updated_at` (`updated_at`),
  CONSTRAINT `_FK_614629E74B01DD59` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=273805897 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_item_nutrients`
--

DROP TABLE IF EXISTS `place_menu_item_nutrients`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_item_nutrients` (
  `place_menu_item_id` bigint(20) unsigned NOT NULL,
  `calories` decimal(18,4) NOT NULL,
  `proteins` decimal(18,4) NOT NULL,
  `fats` decimal(18,4) NOT NULL,
  `carbohydrates` decimal(18,4) NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  `deactivated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  PRIMARY KEY (`place_menu_item_id`),
  KEY `idx__place_menu_item_nutrients__created_at` (`created_at`),
  KEY `idx__place_menu_item_nutrients__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_item_picture_additional_info`
--

DROP TABLE IF EXISTS `place_menu_item_picture_additional_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_item_picture_additional_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_menu_item_id` int(11) NOT NULL,
  `etag` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `last_modified` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `checksum` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `vendor_updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `bytes_size` int(11) NOT NULL DEFAULT '0',
  `vendor_hash` text COLLATE utf8_unicode_ci,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_place_menu_item_id` (`place_menu_item_id`),
  CONSTRAINT `FK_54AB09AA4B01DD59` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=350936207 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_item_retail_info`
--

DROP TABLE IF EXISTS `place_menu_item_retail_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_item_retail_info` (
  `place_menu_item_id` int(11) NOT NULL,
  `vendor_code` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `location` text COLLATE utf8_unicode_ci,
  `composition` text COLLATE utf8_unicode_ci,
  `nutritional_value` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `purpose` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `storage_requirements` text COLLATE utf8_unicode_ci,
  `expires_in` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `vendor_country` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `package_info` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `vendor_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `barcode_value` text COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:simple_array)',
  `barcode_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `barcode_weight_encoding` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `measure_value` int(10) unsigned NOT NULL,
  `measure_quantum` double unsigned DEFAULT NULL,
  `measure_unit` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `volume_value` int(10) unsigned DEFAULT NULL,
  `volume_unit` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `is_catch_weight` tinyint(1) NOT NULL,
  `original_price` int(10) unsigned DEFAULT NULL,
  `decimal_original_price` decimal(18,4) DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  PRIMARY KEY (`place_menu_item_id`),
  KEY `idx__place_menu_item_retail_info__created_at` (`created_at`),
  KEY `idx__place_menu_item_retail_info__updated_at` (`updated_at`),
  KEY `idx__place_menu_item_retail_info__vendor_code` (`vendor_code`),
  CONSTRAINT `_fk__place_menu_item_retail_info__place_menu_item_id` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_item_retail_info_barcodes`
--

DROP TABLE IF EXISTS `place_menu_item_retail_info_barcodes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_item_retail_info_barcodes` (
  `place_menu_item_id` int(11) NOT NULL,
  `place_menu_barcode_id` int(11) NOT NULL,
  PRIMARY KEY (`place_menu_item_id`,`place_menu_barcode_id`),
  KEY `idx__place_menu_item_retail_info_barcodes__place_menu_item_id` (`place_menu_item_id`),
  KEY `idx__place_menu_item_retail_info_barcodes__place_menu_barcode_id` (`place_menu_barcode_id`),
  CONSTRAINT `fk__place_menu_item_retail_info_barcodes__place_menu_barcode_id` FOREIGN KEY (`place_menu_barcode_id`) REFERENCES `place_menu_barcodes` (`id`),
  CONSTRAINT `fk__place_menu_item_retail_info_barcodes__place_menu_item_id` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_item_retail_info` (`place_menu_item_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_item_stock`
--

DROP TABLE IF EXISTS `place_menu_item_stock`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_item_stock` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_menu_item_id` int(11) NOT NULL,
  `in_stock` int(11) DEFAULT '0',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `fk__place_menu_item_stock__place_menu_item_id` (`place_menu_item_id`),
  KEY `idx__place_menu_item_stock__updated_at` (`updated_at`),
  CONSTRAINT `__fk__place_menu_item_stock__place_menu_item_id` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=725525182 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_items`
--

DROP TABLE IF EXISTS `place_menu_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_menu_category_id` int(11) DEFAULT NULL,
  `place_id` int(11) DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `short_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `description` longtext COLLATE utf8_unicode_ci,
  `price` int(11) NOT NULL,
  `decimal_price` decimal(18,4) NOT NULL DEFAULT '0.0000',
  `old_price` int(10) unsigned DEFAULT NULL,
  `sort` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `available` tinyint(1) NOT NULL DEFAULT '1',
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `weight` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `picture_ratio` double DEFAULT NULL,
  `picture_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `reactivate_at` datetime DEFAULT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  `promotional_item_id` int(11) DEFAULT NULL,
  `ordinary` tinyint(1) NOT NULL DEFAULT '0',
  `vat` int(11) DEFAULT NULL,
  `is_choosable` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `adult` tinyint(1) NOT NULL DEFAULT '0',
  `shipping_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'all',
  `uuid` varchar(36) COLLATE utf8_unicode_ci DEFAULT NULL,
  `decimal_old_price` decimal(18,4) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_5E725C228C31569F` (`place_menu_category_id`),
  KEY `IDX_5E725C22581669F2` (`promotional_item_id`),
  KEY `idx_item_reactivate_at` (`reactivate_at`),
  KEY `idx_menu_item_picture` (`picture`),
  KEY `idx_item_deactivated_at` (`deactivated_at`),
  KEY `idx_menu_item_created_at` (`created_at`),
  KEY `idx_menu_item_updated_at` (`updated_at`),
  KEY `idx__place_menu_items__place_id__deactivated_at` (`place_id`,`deactivated_at`),
  KEY `idx_menu_item_place_id_origin_id` (`place_id`,`origin_id`),
  KEY `idx__place_menu_items__available__reactivate_at` (`available`,`reactivate_at`),
  KEY `idx__place_menu_items__shipping_type` (`shipping_type`),
  KEY `idx__place_menu_items__uuid` (`uuid`),
  CONSTRAINT `_FK_5E725C228C31569F` FOREIGN KEY (`place_menu_category_id`) REFERENCES `place_menu_categories` (`id`),
  CONSTRAINT `_FK_5E725C22DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `_fk__place_menu_items__shipping_type` FOREIGN KEY (`shipping_type`) REFERENCES `shipping_type_dictionary` (`shipping_type`)
) ENGINE=InnoDB AUTO_INCREMENT=638083287 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_option_groups`
--

DROP TABLE IF EXISTS `place_menu_option_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_option_groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_menu_item_id` int(11) DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `min_selected_options` int(11) DEFAULT NULL,
  `max_selected_options` int(11) DEFAULT NULL,
  `is_required` tinyint(1) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  `sort` tinyint(1) unsigned NOT NULL DEFAULT '100',
  PRIMARY KEY (`id`),
  KEY `IDX_251AB9534B01DD59` (`place_menu_item_id`),
  KEY `idx__place_menu_option_groups__updated_at` (`updated_at`),
  CONSTRAINT `_FK_251AB9534B01DD59` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=161099012 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_options`
--

DROP TABLE IF EXISTS `place_menu_options`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_options` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `place_menu_option_group_id` int(11) DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `price` int(11) NOT NULL,
  `decimal_price` decimal(18,4) NOT NULL DEFAULT '0.0000',
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `reactivate_at` datetime DEFAULT NULL,
  `multiplier` tinyint(3) unsigned NOT NULL DEFAULT '1',
  `min_amount` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `max_amount` tinyint(3) unsigned DEFAULT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  `vat` int(11) DEFAULT NULL,
  `sort` int(11) NOT NULL DEFAULT '100',
  PRIMARY KEY (`id`),
  KEY `IDX_895B7580AD45F871` (`place_menu_option_group_id`),
  KEY `idx_option_reactivate_at` (`reactivate_at`),
  KEY `idx_option_deactivated_at` (`deactivated_at`),
  KEY `idx__place_menu_options__place_menu_option_group_id__origin_id` (`place_menu_option_group_id`,`origin_id`),
  KEY `idx__place_menu_options__is_active` (`is_active`),
  KEY `idx__place_menu_options__is_active__deactivated_at` (`is_active`,`deactivated_at`,`reactivate_at`),
  KEY `idx__place_menu_options__updated_at` (`updated_at`),
  KEY `idx__place_menu_options__is_active__reactivate_at` (`is_active`,`reactivate_at`),
  CONSTRAINT `FK_895B7580AD45F871` FOREIGN KEY (`place_menu_option_group_id`) REFERENCES `place_menu_option_groups` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1956798382 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_menu_versions`
--

DROP TABLE IF EXISTS `place_menu_versions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_menu_versions` (
  `place_id` int(11) NOT NULL,
  `version` timestamp NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`place_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_moderation_approved_values`
--

DROP TABLE IF EXISTS `place_moderation_approved_values`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_moderation_approved_values` (
  `type` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `value` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`type`,`value`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_moderation_ml_status`
--

DROP TABLE IF EXISTS `place_moderation_ml_status`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_moderation_ml_status` (
  `queue_id` bigint(20) NOT NULL,
  `rule_id` int(11) NOT NULL,
  `status` varchar(20) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`queue_id`,`rule_id`),
  KEY `idx__place_moderation_ml_status__updated_at` (`updated_at`),
  CONSTRAINT `fk__place_moderation_ml_status__queue_id` FOREIGN KEY (`queue_id`) REFERENCES `place_moderation_queue` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_moderation_queue`
--

DROP TABLE IF EXISTS `place_moderation_queue`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_moderation_queue` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `category_id` int(11) DEFAULT NULL,
  `item_id` int(11) DEFAULT NULL,
  `type` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `status` varchar(20) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'new',
  `data` json DEFAULT NULL,
  `moderator_id` int(11) DEFAULT NULL,
  `started_at` datetime DEFAULT NULL,
  `finished_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `hidden` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `idx__place_moderation_queue__place_id` (`place_id`),
  KEY `idx__place_moderation_queue__status` (`status`),
  KEY `idx__place_moderation_queue__type` (`type`),
  KEY `idx__place_moderation_queue__created_at` (`created_at`),
  KEY `idx__place_moderation_queue__finished_at` (`finished_at`),
  KEY `idx__place_moderation_queue__moderator_id` (`moderator_id`),
  KEY `idx__place_moderation_queue__updated_at` (`updated_at`),
  KEY `idx__place_moderation_queue__type__place_id` (`type`,`place_id`),
  KEY `idx__place_moderation_queue__type__place_id__hidden` (`type`,`place_id`,`hidden`),
  KEY `idx__place_moderation_queue__type__status` (`type`,`status`),
  KEY `idx__place_moderation_queue__status__hidden` (`status`,`hidden`)
) ENGINE=InnoDB AUTO_INCREMENT=40554342 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_moderation_queue_reasons`
--

DROP TABLE IF EXISTS `place_moderation_queue_reasons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_moderation_queue_reasons` (
  `queue_id` bigint(20) NOT NULL,
  `reason_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`queue_id`,`reason_id`),
  KEY `fk__place_moderation_queue_reasons__reason_id` (`reason_id`),
  KEY `idx__place_moderation_queue_reasons__updated_at` (`updated_at`),
  CONSTRAINT `fk__place_moderation_queue_reasons__queue_id` FOREIGN KEY (`queue_id`) REFERENCES `place_moderation_queue` (`id`),
  CONSTRAINT `fk__place_moderation_queue_reasons__reason_id` FOREIGN KEY (`reason_id`) REFERENCES `place_moderation_reasons` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_moderation_reasons`
--

DROP TABLE IF EXISTS `place_moderation_reasons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_moderation_reasons` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `content_type` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `text` text COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `hidden` tinyint(1) NOT NULL DEFAULT '0',
  `sort` smallint(5) unsigned NOT NULL DEFAULT '100',
  PRIMARY KEY (`id`),
  KEY `idx__place_moderation_reasons__updated_at` (`updated_at`),
  KEY `idx__place_moderation_reasons__content_type` (`content_type`),
  KEY `idx__place_moderation_reasons__hidden` (`hidden`)
) ENGINE=InnoDB AUTO_INCREMENT=251 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_moderation_reject_reasons`
--

DROP TABLE IF EXISTS `place_moderation_reject_reasons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_moderation_reject_reasons` (
  `queue_id` bigint(20) unsigned NOT NULL,
  `reason_id` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`queue_id`,`reason_id`),
  KEY `idx__place_moderation_reject_reasons__created_at` (`created_at`),
  KEY `idx__place_moderation_reject_reasons__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_payment_methods`
--

DROP TABLE IF EXISTS `place_payment_methods`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_payment_methods` (
  `place_id` int(11) NOT NULL,
  `payment_method_id` int(11) unsigned NOT NULL,
  `enabled` tinyint(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`place_id`,`payment_method_id`),
  KEY `IDX_7D589356DA6A219` (`place_id`),
  KEY `IDX_7D5893565AA1164F` (`payment_method_id`),
  CONSTRAINT `FK_7D5893565AA1164F` FOREIGN KEY (`payment_method_id`) REFERENCES `payment_methods` (`id`),
  CONSTRAINT `FK_7D589356DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_phone_numbers`
--

DROP TABLE IF EXISTS `place_phone_numbers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_phone_numbers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) DEFAULT NULL,
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_55B0F871DA6A219` (`place_id`),
  KEY `idx_place_phone_numbers_phone_number_type` (`phone_number`,`type`),
  KEY `idx__place_phone_numbers__updated_at` (`updated_at`),
  KEY `idx__place_phone_numbers__created_at` (`created_at`),
  CONSTRAINT `_FK_55B0F871DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=74304112 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_quick_filters`
--

DROP TABLE IF EXISTS `place_quick_filters`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_quick_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `category_id` int(11) DEFAULT NULL,
  `enabled` int(11) NOT NULL DEFAULT '0',
  `sort` int(11) DEFAULT '0',
  `picture` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `wizard_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `slug` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `genitive` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `photo_id` int(11) DEFAULT NULL,
  `promo_photo_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uidx_place_quick_filters_slug` (`slug`),
  KEY `idx__place_quick_filters__photo_id` (`photo_id`),
  KEY `idx__place_quick_filters__promo_photo_id` (`promo_photo_id`),
  CONSTRAINT `fk__place_quick_filters__photo_id` FOREIGN KEY (`photo_id`) REFERENCES `pictures` (`id`),
  CONSTRAINT `fk__place_quick_filters__promo_photo_id` FOREIGN KEY (`promo_photo_id`) REFERENCES `pictures` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=174 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_rating`
--

DROP TABLE IF EXISTS `place_rating`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_rating` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `place_id` int(11) NOT NULL,
  `rating_date` date NOT NULL COMMENT '(DC2Type:date_immutable)',
  `show_rating` tinyint(1) NOT NULL,
  `user_rating` decimal(5,4) NOT NULL DEFAULT '0.0000',
  `cancel_rating` decimal(5,4) NOT NULL DEFAULT '0.0000',
  `final_rating` decimal(5,4) NOT NULL DEFAULT '0.0000',
  `user_rating_count` int(11) NOT NULL DEFAULT '0',
  `cancel_rating_count` int(11) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_rating__place_id__rating_date` (`place_id`,`rating_date`),
  KEY `idx__place_rating__created_at` (`created_at`),
  KEY `idx__place_rating__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=65396013 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_schedule`
--

DROP TABLE IF EXISTS `place_schedule`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_schedule` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `weekday` varchar(9) COLLATE utf8_unicode_ci NOT NULL,
  `from` varchar(5) COLLATE utf8_unicode_ci NOT NULL,
  `duration` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_7063F678DA6A219` (`place_id`),
  KEY `idx__place_schedule__updated_at` (`updated_at`),
  CONSTRAINT `_FK_7063F678DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=127549382 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_self_onboarding_passed_checks`
--

DROP TABLE IF EXISTS `place_self_onboarding_passed_checks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_self_onboarding_passed_checks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `checker` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `passed_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__place_self_onboarding_passed_checks__passed_at` (`passed_at`),
  KEY `idx__place_self_onboarding_passed_checks__place_id__checker` (`place_id`,`checker`)
) ENGINE=InnoDB AUTO_INCREMENT=611477 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_sites`
--

DROP TABLE IF EXISTS `place_sites`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_sites` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `site_url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__place_sites__place_id` (`place_id`),
  KEY `idx__place_sites__created_at` (`created_at`),
  KEY `idx__place_sites__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=436342 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_tips`
--

DROP TABLE IF EXISTS `place_tips`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_tips` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `place_id` int(11) NOT NULL,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `amount` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:money)',
  `amount_value` int(10) unsigned DEFAULT NULL,
  `amount_currency` varchar(3) COLLATE utf8_unicode_ci DEFAULT NULL,
  `status` varchar(128) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'registered',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__place_tips__order_nr` (`order_nr`),
  KEY `idx__place_tips__place_id` (`place_id`),
  KEY `idx__place_tips__created_at` (`created_at`),
  KEY `idx__place_tips__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=833597 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `place_types_list`
--

DROP TABLE IF EXISTS `place_types_list`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `place_types_list` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `code` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk__place_types_list__code` (`code`)
) ENGINE=InnoDB AUTO_INCREMENT=42 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `places`
--

DROP TABLE IF EXISTS `places`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `places` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `price_category_id` int(11) DEFAULT NULL,
  `name` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `picture` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `picture_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `rating` decimal(3,2) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `launched_at` datetime DEFAULT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  `address_city` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `address_street` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_house` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_entrance` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_floor` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_office` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_comment` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_reliable` tinyint(1) DEFAULT NULL,
  `address_full` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_short` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `average_preparation_time` int(11) NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` longtext COLLATE utf8_unicode_ci,
  `enabled` tinyint(1) NOT NULL DEFAULT '0',
  `slug` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `address_plot` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address_building` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `bounding_box_left_bottom_latitude` decimal(10,6) NOT NULL,
  `bounding_box_left_bottom_longitude` decimal(10,6) NOT NULL,
  `bounding_box_right_top_latitude` decimal(10,6) NOT NULL,
  `bounding_box_right_top_longitude` decimal(10,6) NOT NULL,
  `place_group_id` int(11) DEFAULT NULL,
  `origin_menu_source` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `payment_method_id` int(11) NOT NULL DEFAULT '2',
  `crm_comment` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `company_tin` varchar(12) COLLATE utf8_unicode_ci DEFAULT NULL,
  `company_kpp` varchar(9) COLLATE utf8_unicode_ci DEFAULT NULL,
  `origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `smartomato_user_id` int(11) DEFAULT NULL,
  `special_menu_origin_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `disable_details_comment` text COLLATE utf8_unicode_ci,
  `disable_details_available_at` datetime DEFAULT NULL,
  `disable_details_status` int(11) DEFAULT NULL,
  `disable_details_reason` int(11) DEFAULT NULL,
  `disable_details_last_call_date` datetime DEFAULT NULL,
  `is_updatable_images_on_parsing` tinyint(1) NOT NULL DEFAULT '1',
  `parser_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `popularity_algorithm` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'automatic_editable',
  `place_info_id` int(11) DEFAULT NULL,
  `promo_available` tinyint(1) NOT NULL DEFAULT '0',
  `autocalls_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `type` enum('native','marketplace') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:place_type)',
  `couriers_type` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `average_marketplace_delivery_time` int(11) DEFAULT NULL,
  `is_fast_food` tinyint(1) NOT NULL DEFAULT '0',
  `sort` tinyint(3) unsigned NOT NULL DEFAULT '100',
  `address_doorcode` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `region_id` int(10) unsigned NOT NULL,
  `footer_description` text COLLATE utf8_unicode_ci,
  `visibility_mode` enum('on','off','preview','removed') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'off' COMMENT '(DC2Type:visibility_mode)',
  `average_rating_value` decimal(5,4) DEFAULT NULL,
  `average_rating_count` int(11) NOT NULL DEFAULT '0',
  `average_rating_created_at` datetime DEFAULT NULL,
  `average_rating_show` tinyint(1) NOT NULL DEFAULT '0',
  `ads_allowed` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `contract` enum('primary','secondary','dark_kitchen') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'primary' COMMENT '(DC2Type:place_contract)',
  `price_category_autocalculate_enabled` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `brand_id` int(11) unsigned DEFAULT NULL,
  `avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `courier_delivery_zone_id` int(11) DEFAULT NULL,
  `lpr_email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `report_email` varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL,
  `accountancy_email` varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL,
  `delivery_condition_id` int(11) DEFAULT NULL,
  `sales_id` int(11) DEFAULT NULL,
  `disable_details_vendor_user_id` int(11) DEFAULT NULL,
  `legal_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `legal_address` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `reg_number` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `salesforce_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `bit_settings` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '(DC2Type:bit_mask)',
  `availability_strategy` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `extra_preparation_minutes` int(4) DEFAULT NULL,
  `extra_preparation_valid_to` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `preparation_time` int(11) NOT NULL DEFAULT '0',
  `address_client_comment` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `onboarding_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'directive',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_FEAF6C55989D9B62` (`slug`),
  UNIQUE KEY `UNIQ_FEAF6C556947D603` (`place_info_id`),
  UNIQUE KEY `ux__places__salesforce_id` (`salesforce_id`),
  KEY `IDX_FEAF6C55159FD1F4` (`price_category_id`),
  KEY `IDX_FEAF6C55D40F3EC4` (`place_group_id`),
  KEY `IDX_FEAF6C552BC6946D` (`smartomato_user_id`),
  KEY `idx_place_picture` (`picture`),
  KEY `fk_places_region` (`region_id`),
  KEY `idx_launched_at` (`launched_at`),
  KEY `fk__place__brand` (`brand_id`),
  KEY `fk__places__courier_delivery_zone` (`courier_delivery_zone_id`),
  KEY `idx_place_created_at` (`created_at`),
  KEY `idx_place_updated_at` (`updated_at`),
  KEY `IDX_FEAF6C5517F46AB2` (`delivery_condition_id`),
  KEY `IDX_ADMIN_SALES_ID` (`sales_id`),
  KEY `idx__places__origin_id` (`origin_id`),
  KEY `idx__places__extra_preparation_minutes` (`extra_preparation_minutes`),
  KEY `idx__places__enabled` (`enabled`),
  CONSTRAINT `FK_ADMIN_SALES_ID` FOREIGN KEY (`sales_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `FK_FEAF6C5517F46AB2` FOREIGN KEY (`delivery_condition_id`) REFERENCES `delivery_conditions` (`id`),
  CONSTRAINT `_FK_FEAF6C55159FD1F4` FOREIGN KEY (`price_category_id`) REFERENCES `price_categories` (`id`),
  CONSTRAINT `_FK_FEAF6C552BC6946D` FOREIGN KEY (`smartomato_user_id`) REFERENCES `smartomato_users` (`id`),
  CONSTRAINT `_FK_FEAF6C556947D603` FOREIGN KEY (`place_info_id`) REFERENCES `place_info` (`id`),
  CONSTRAINT `_FK_FEAF6C55D40F3EC4` FOREIGN KEY (`place_group_id`) REFERENCES `place_groups` (`id`),
  CONSTRAINT `_fk_places_region` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`),
  CONSTRAINT `fk__places__courier_delivery_zone` FOREIGN KEY (`courier_delivery_zone_id`) REFERENCES `courier_delivery_zones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=590912 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `places_categories`
--

DROP TABLE IF EXISTS `places_categories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `places_categories` (
  `place_id` int(11) NOT NULL,
  `place_category_id` int(11) NOT NULL,
  `sort` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `source` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'salesforce',
  PRIMARY KEY (`place_id`,`place_category_id`),
  KEY `IDX_4A7668CDDA6A219` (`place_id`),
  KEY `IDX_4A7668CD1CB3D546` (`place_category_id`),
  CONSTRAINT `_FK_4A7668CD1CB3D546` FOREIGN KEY (`place_category_id`) REFERENCES `place_categories` (`id`),
  CONSTRAINT `_FK_4A7668CDDA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `places_fines_appeals`
--

DROP TABLE IF EXISTS `places_fines_appeals`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `places_fines_appeals` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `fine_id` int(10) unsigned NOT NULL COMMENT 'Reference to places_fines_by_orders',
  `amount` varchar(250) NOT NULL COMMENT 'Appealed amount',
  `ticket` varchar(250) DEFAULT NULL COMMENT 'Appeal ticket id if exists',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `fk__places_fines_appeals__fine_id` (`fine_id`),
  KEY `idx__places_fines_appeals__created_at` (`created_at`) USING BTREE,
  KEY `idx__places_fines_appeals__updated_at` (`updated_at`) USING BTREE,
  CONSTRAINT `_fk__places_fines_appeals__fine_id` FOREIGN KEY (`fine_id`) REFERENCES `places_fines_by_orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11912 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `places_fines_by_orders`
--

DROP TABLE IF EXISTS `places_fines_by_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `places_fines_by_orders` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(250) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order number',
  `client_id` int(10) unsigned NOT NULL COMMENT 'Balance client id',
  `fine_reason` varchar(255) CHARACTER SET utf8 NOT NULL COMMENT 'Fine reason: cancel, refund',
  `fine_reason_id` int(10) unsigned DEFAULT NULL COMMENT 'Fine reason id',
  `fine_conditions` json NOT NULL COMMENT 'List of fines available for place',
  `must_charge` tinyint(4) NOT NULL COMMENT 'Fine must be charged or not',
  `actual_amount` varchar(250) CHARACTER SET utf8 NOT NULL COMMENT 'Fine amount',
  `calculated_amount` varchar(250) CHARACTER SET utf8 NOT NULL COMMENT 'Calculated fine amount',
  `currency` varchar(255) CHARACTER SET utf8 NOT NULL COMMENT 'Fine currency',
  `fine_billing_date` datetime NOT NULL COMMENT 'Fine transaction in billing',
  `extra_data` json DEFAULT NULL COMMENT 'Fines extra data',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx__places_fines_by_orders__created_at` (`created_at`) USING BTREE,
  KEY `idx__places_fines_by_orders__updated_at` (`updated_at`) USING BTREE,
  KEY `idx__places_fines_by_orders__client_id` (`client_id`) USING BTREE,
  KEY `idx__places_fines_by_orders__order_nr` (`order_nr`)
) ENGINE=InnoDB AUTO_INCREMENT=4291767 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `places_wizard_sorting`
--

DROP TABLE IF EXISTS `places_wizard_sorting`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `places_wizard_sorting` (
  `place_id` int(11) NOT NULL,
  `sort` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`place_id`),
  CONSTRAINT `fk__places_wizard_sorting__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `popular_menu_items`
--

DROP TABLE IF EXISTS `popular_menu_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `popular_menu_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `menu_item_id` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `sort` int(11) NOT NULL DEFAULT '100',
  PRIMARY KEY (`id`),
  KEY `IDX_34EB61EADA6A219` (`place_id`),
  KEY `IDX_34EB61EA9AB44FE0` (`menu_item_id`),
  CONSTRAINT `FK_34EB61EA9AB44FE0` FOREIGN KEY (`menu_item_id`) REFERENCES `place_menu_items` (`id`),
  CONSTRAINT `FK_34EB61EADA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=527461112 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `pre_orders`
--

DROP TABLE IF EXISTS `pre_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `pre_orders` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Order number',
  `uuid` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Order unique identifier',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__pre_orders__uuid` (`uuid`),
  UNIQUE KEY `ux__pre_orders__order_nr` (`order_nr`),
  KEY `idx__pre_orders__created_at` (`created_at`),
  KEY `idx__pre_orders__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=757669102 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `predefined_comments`
--

DROP TABLE IF EXISTS `predefined_comments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `predefined_comments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `comment` varchar(300) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `group_code` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `generate_sorrycode` tinyint(1) unsigned DEFAULT '0',
  `calculate_average_rating_place` tinyint(1) NOT NULL DEFAULT '0',
  `access_mask_for_order_flow` smallint(6) unsigned NOT NULL DEFAULT '1',
  `deleted_at` datetime DEFAULT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx__predefined_comments__created_at` (`created_at`),
  KEY `idx__predefined_comments__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=112 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `price_categories`
--

DROP TABLE IF EXISTS `price_categories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `price_categories` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `value` decimal(3,2) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_8E7B496C5E237E06` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `procaas_events`
--

DROP TABLE IF EXISTS `procaas_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `procaas_events` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `scope` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `queue` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `item_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `idempotency_key` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `payload` json NOT NULL,
  `due` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `extra_order_key` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__procaas_events__scope` (`scope`),
  KEY `idx__procaas_events__queue` (`queue`),
  KEY `idx__procaas_events__item_id` (`item_id`),
  KEY `idx__procaas_events__idempotency_key` (`idempotency_key`),
  KEY `idx__procaas_events__created_at` (`created_at`),
  KEY `idx__procaas_events__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1048648867 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_bonus_item_predefined_options`
--

DROP TABLE IF EXISTS `promo_bonus_item_predefined_options`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_bonus_item_predefined_options` (
  `promo_bonus_item_id` int(10) unsigned NOT NULL,
  `place_menu_option_id` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`promo_bonus_item_id`,`place_menu_option_id`),
  KEY `IDX_B6D4576B60BF3956` (`promo_bonus_item_id`),
  KEY `IDX_B6D4576B95824C77` (`place_menu_option_id`),
  CONSTRAINT `__FK_B6D4576B60BF3956` FOREIGN KEY (`promo_bonus_item_id`) REFERENCES `promo_bonus_items` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_bonus_items`
--

DROP TABLE IF EXISTS `promo_bonus_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_bonus_items` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `promo_bonus_id` int(10) unsigned NOT NULL,
  `place_menu_item_id` int(11) NOT NULL,
  `quantity` tinyint(3) unsigned NOT NULL DEFAULT '1',
  `has_predefined_options` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__promo_bonus_items__promo_bonus_id__place_menu_item_id` (`promo_bonus_id`,`place_menu_item_id`),
  KEY `IDX_E041C1ACA18B735E` (`promo_bonus_id`),
  KEY `IDX_E041C1AC4B01DD59` (`place_menu_item_id`),
  CONSTRAINT `_FK_E041C1AC4B01DD59` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`),
  CONSTRAINT `_FK_E041C1ACA18B735E` FOREIGN KEY (`promo_bonus_id`) REFERENCES `promo_bonuses` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=461077 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_bonuses`
--

DROP TABLE IF EXISTS `promo_bonuses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_bonuses` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `promo_id` int(10) unsigned NOT NULL,
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `discount_type` enum('total','percent','cash_back') COLLATE utf8_unicode_ci DEFAULT NULL,
  `discount` decimal(8,2) unsigned DEFAULT NULL,
  `item_mode` enum('any','all') COLLATE utf8_unicode_ci DEFAULT NULL,
  `quantity` tinyint(3) unsigned DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_8D4177E0D0C07AFF` (`promo_id`),
  CONSTRAINT `FK_8D4177E0D0C07AFF` FOREIGN KEY (`promo_id`) REFERENCES `promos` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=437462 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_place_group_to_place`
--

DROP TABLE IF EXISTS `promo_place_group_to_place`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_place_group_to_place` (
  `promo_place_group_id` int(10) unsigned NOT NULL,
  `place_id` int(11) NOT NULL,
  `is_excluded` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`promo_place_group_id`,`place_id`),
  KEY `IDX_AAC50CE6D48C7547` (`promo_place_group_id`),
  KEY `IDX_AAC50CE6DA6A219` (`place_id`),
  CONSTRAINT `_FK_AAC50CE6D48C7547` FOREIGN KEY (`promo_place_group_id`) REFERENCES `promo_place_groups` (`id`),
  CONSTRAINT `_FK_AAC50CE6DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_place_groups`
--

DROP TABLE IF EXISTS `promo_place_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_place_groups` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `promo_mode` varchar(3) COLLATE utf8_unicode_ci NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `hidden_at` datetime DEFAULT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__promo_place_groups__deactivated_at` (`deactivated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=133292 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_place_state_log`
--

DROP TABLE IF EXISTS `promo_place_state_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_place_state_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `promo_id` int(10) unsigned NOT NULL,
  `started_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `stop_reason` int(11) NOT NULL DEFAULT '0',
  `stop_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `fk__promo_place_state_log__place_id` (`place_id`),
  KEY `fk__promo_place_state_log__promo_id` (`promo_id`),
  KEY `idx__promo_place_state_log__created_at` (`created_at`),
  KEY `idx__promo_place_state_log__updated_at` (`updated_at`),
  CONSTRAINT `_fk__promo_place_state_log__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`),
  CONSTRAINT `_fk__promo_place_state_log__promo_id` FOREIGN KEY (`promo_id`) REFERENCES `promos` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5041617 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_requirement_items`
--

DROP TABLE IF EXISTS `promo_requirement_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_requirement_items` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `promo_requirement_id` int(10) unsigned NOT NULL,
  `place_menu_item_id` int(11) NOT NULL,
  `quantity` tinyint(3) unsigned NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__promo_requirement_items__requirement_id__menu_item_id` (`promo_requirement_id`,`place_menu_item_id`),
  KEY `IDX_3A809E367BD424F4` (`promo_requirement_id`),
  KEY `IDX_3A809E364B01DD59` (`place_menu_item_id`),
  KEY `idx__promo_requirement_item__updated_at` (`updated_at`),
  CONSTRAINT `__FK_3A809E364B01DD59` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`),
  CONSTRAINT `__FK_3A809E367BD424F4` FOREIGN KEY (`promo_requirement_id`) REFERENCES `promo_requirements` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=481616037 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_requirements`
--

DROP TABLE IF EXISTS `promo_requirements`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_requirements` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `promo_id` int(10) unsigned NOT NULL,
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `amount` int(10) unsigned DEFAULT NULL,
  `item_mode` enum('any','all') COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_E8B866BDD0C07AFF` (`promo_id`),
  CONSTRAINT `FK_E8B866BDD0C07AFF` FOREIGN KEY (`promo_id`) REFERENCES `promos` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=478727 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_schedule`
--

DROP TABLE IF EXISTS `promo_schedule`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_schedule` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `promo_id` int(10) unsigned NOT NULL,
  `weekday` varchar(9) COLLATE utf8_unicode_ci NOT NULL,
  `from` varchar(5) COLLATE utf8_unicode_ci NOT NULL,
  `duration` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk__promo_schedule__promo` (`promo_id`),
  CONSTRAINT `fk__promo_schedule__promo` FOREIGN KEY (`promo_id`) REFERENCES `promos` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3271287 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promo_types`
--

DROP TABLE IF EXISTS `promo_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promo_types` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(70) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `picture_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `picture_enabled` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `sort` smallint(6) NOT NULL DEFAULT '100',
  `picture_avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `template_slug` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `policy_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=94 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocode_assign_tasks`
--

DROP TABLE IF EXISTS `promocode_assign_tasks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocode_assign_tasks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `action` enum('assign','unassign') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:promocode_assign_action_type)',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `codes` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:simple_array)',
  PRIMARY KEY (`id`),
  KEY `idx__promocode_assign_task__phone_number` (`phone_number`)
) ENGINE=InnoDB AUTO_INCREMENT=2390411 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocode_courier_coupons`
--

DROP TABLE IF EXISTS `promocode_courier_coupons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocode_courier_coupons` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `idempotency_key` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Unique request key',
  `program_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Courier coupon program name',
  `coupon` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Generated coupon code',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Entity created at',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Entity updated at',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__promocode_courier_coupons__idempotency_key` (`idempotency_key`),
  KEY `idx__promocode_courier_coupons__coupon` (`coupon`),
  KEY `idx__promocode_courier_coupons__created_at` (`created_at`),
  KEY `idx__promocode_courier_coupons__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=12879257 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocode_discount_parts`
--

DROP TABLE IF EXISTS `promocode_discount_parts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocode_discount_parts` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `coupon` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Coupon code',
  `provider` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Discount provider(DC2Type:promocode_bundle_discount_provider)',
  `discount_currency_code` char(3) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Alphabetic ISO 4217 currency code',
  `discount_total` decimal(13,2) DEFAULT NULL COMMENT 'Discount total',
  `discount_percent` int(11) DEFAULT NULL COMMENT 'Discount percent',
  `discount_limit` decimal(13,2) DEFAULT NULL COMMENT 'Discount limit for percentage use',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Entity created at',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Entity updated at',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx__promocode_discount_parts__coupon__provider` (`coupon`,`provider`),
  KEY `idx__promocode_discount_parts__created_at` (`created_at`),
  KEY `idx__promocode_discount_parts__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=3903292 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocode_loyalty_coupons`
--

DROP TABLE IF EXISTS `promocode_loyalty_coupons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocode_loyalty_coupons` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `eater_id` bigint(20) unsigned NOT NULL COMMENT 'Eater id(DC2Type:int64)',
  `program_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Loyalty internal program name',
  `coupon` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Coupon code',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Entity created at',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Entity updated at',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__promocode_loyalty_coupons__eater_id__program_name` (`eater_id`,`program_name`),
  KEY `idx__promocode_loyalty_coupons__created_at` (`created_at`),
  KEY `idx__promocode_loyalty_coupons__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=291087 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocode_referrals`
--

DROP TABLE IF EXISTS `promocode_referrals`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocode_referrals` (
  `user_id` int(11) NOT NULL,
  `promocode_id` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`user_id`),
  KEY `idx__promocode_referrals__promocode_id` (`promocode_id`),
  KEY `idx__promocode_referrals__created_at` (`created_at`),
  CONSTRAINT `fk__promocode_referrals__promocode_id` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocode_validation_attempts`
--

DROP TABLE IF EXISTS `promocode_validation_attempts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocode_validation_attempts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_identity` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Some string that identifies user',
  `context` json DEFAULT NULL COMMENT 'Validation context',
  `created_at` datetime NOT NULL COMMENT 'Date when record created',
  PRIMARY KEY (`id`),
  KEY `idx__promocode_validation_attempts__user_identity__created_at` (`user_identity`,`created_at`),
  KEY `idx__promocode_validation_attempts__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=196774042 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocodes`
--

DROP TABLE IF EXISTS `promocodes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocodes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `owner_id` int(11) DEFAULT NULL,
  `code_type` varchar(16) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'other',
  `description` varchar(250) COLLATE utf8_unicode_ci DEFAULT '',
  `code` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `expired_at` datetime DEFAULT NULL,
  `discount_total` decimal(10,2) DEFAULT NULL,
  `discount_percent` decimal(10,2) DEFAULT NULL,
  `discount_limit` decimal(10,2) DEFAULT NULL COMMENT 'Discount limit for percent discount',
  `constraints` json DEFAULT NULL COMMENT 'Constraints for promocode application',
  `country_id` int(11) NOT NULL DEFAULT '35',
  `updated_at` datetime NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `is_multi_user` tinyint(1) NOT NULL DEFAULT '0',
  `minimal_cart_total` int(11) NOT NULL DEFAULT '0',
  `is_first_order_only` tinyint(1) NOT NULL DEFAULT '1',
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_card_payment_only` tinyint(1) NOT NULL DEFAULT '1',
  `usage_limit` int(11) DEFAULT NULL,
  `is_first_max_orders` tinyint(1) NOT NULL DEFAULT '0',
  `admin_id` int(11) DEFAULT NULL,
  `blocked_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `code_idx` (`code`),
  KEY `IDX_F21112507E3C61F9` (`owner_id`),
  KEY `IDX_F2111250642B8210` (`admin_id`),
  KEY `idx_expired_at` (`expired_at`),
  KEY `idx__deleted_at__type__expired_at` (`deleted_at`,`type`,`expired_at`),
  KEY `idx_code_type_expired_at` (`code_type`,`expired_at`),
  KEY `idx_promocodes_created_at` (`created_at`),
  KEY `idx__promocodes__country_id` (`country_id`),
  KEY `idx__promocodes__updated_at` (`updated_at`),
  CONSTRAINT `FK_F2111250642B8210` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `FK_F21112507E3C61F9` FOREIGN KEY (`owner_id`) REFERENCES `users` (`id`),
  CONSTRAINT `_fk__promocodes__country_id` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=953969482 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocodes_apply_to_places`
--

DROP TABLE IF EXISTS `promocodes_apply_to_places`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocodes_apply_to_places` (
  `promocode_id` int(11) NOT NULL,
  `place_id` int(11) NOT NULL,
  PRIMARY KEY (`promocode_id`,`place_id`),
  KEY `IDX_7AC886E5C76C06D9` (`promocode_id`),
  KEY `IDX_7AC886E5DA6A219` (`place_id`),
  CONSTRAINT `FK_7AC886E5C76C06D9` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`),
  CONSTRAINT `FK_7AC886E5DA6A219` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocodes_drafts`
--

DROP TABLE IF EXISTS `promocodes_drafts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocodes_drafts` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'Draft ID',
  `uuid` varchar(250) NOT NULL COMMENT 'Inique draft ID',
  `code` varchar(60) DEFAULT NULL COMMENT 'Promocode',
  `prefix` varchar(60) DEFAULT NULL COMMENT 'Prefix for promocodes generation',
  `data` json DEFAULT NULL COMMENT 'Draft parameters',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Draft created at',
  `updated_at` datetime DEFAULT NULL COMMENT 'Draft updated at',
  `status` varchar(100) NOT NULL COMMENT 'Draft status',
  PRIMARY KEY (`id`),
  KEY `idx__promocodes_drafts__created_at` (`created_at`) USING BTREE,
  KEY `idx__promocodes_drafts__updated_at` (`updated_at`) USING BTREE,
  KEY `idx__promocodes_drafts__code` (`code`) USING BTREE,
  KEY `idx__promocodes_drafts__prefix` (`prefix`) USING BTREE,
  KEY `idx__promocodes_drafts__uuid` (`uuid`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=83262 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocodes_phones`
--

DROP TABLE IF EXISTS `promocodes_phones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocodes_phones` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `promocode_id` int(11) NOT NULL,
  `phone_number` varchar(50) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk__promocodes_phones__promocode_id__phone_number` (`promocode_id`,`phone_number`),
  KEY `idx__promocodes_phones__phone_number` (`phone_number`),
  CONSTRAINT `_fk__promocodes_phones__promocode_id` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=117830417 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocodes_place_menu_items`
--

DROP TABLE IF EXISTS `promocodes_place_menu_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocodes_place_menu_items` (
  `promocode_id` int(11) NOT NULL,
  `place_menu_item_id` int(11) NOT NULL,
  PRIMARY KEY (`promocode_id`,`place_menu_item_id`),
  KEY `idx__promocodes_place_menu_items__promocode_id` (`promocode_id`),
  KEY `idx__promocodes_place_menu_items__place_menu_item_id` (`place_menu_item_id`),
  CONSTRAINT `fk__promocodes_place_menu_items__place_menu_item_id` FOREIGN KEY (`place_menu_item_id`) REFERENCES `place_menu_items` (`id`),
  CONSTRAINT `fk__promocodes_place_menu_items__promocode_id` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocodes_regions`
--

DROP TABLE IF EXISTS `promocodes_regions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocodes_regions` (
  `promocode_id` int(11) NOT NULL,
  `region_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`promocode_id`,`region_id`),
  KEY `fk__regions__id` (`region_id`),
  CONSTRAINT `_fk__promocodes__id` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`),
  CONSTRAINT `_fk__regions__id` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocodes_usage`
--

DROP TABLE IF EXISTS `promocodes_usage`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocodes_usage` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `promocode_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Order number',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `order_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_1298E9BDC76C06D9` (`promocode_id`),
  KEY `IDX_1298E9BDA76ED395` (`user_id`),
  KEY `idx__promocode_usage__created_at` (`created_at`),
  KEY `idx__promocodes_usage__updated_at` (`updated_at`),
  KEY `idx__promocodes_usage__user_id__promocode_id` (`user_id`,`promocode_id`),
  KEY `idx__promocodes_usage__phone_number__promocode_id` (`phone_number`,`promocode_id`),
  KEY `idx__promocodes_usage__order_nr` (`order_nr`),
  CONSTRAINT `FK_1298E9BDA76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`),
  CONSTRAINT `FK_1298E9BDC76C06D9` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=31530432 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promocodes_users`
--

DROP TABLE IF EXISTS `promocodes_users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promocodes_users` (
  `promocode_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`promocode_id`,`user_id`),
  KEY `IDX_D6F01224C76C06D9` (`promocode_id`),
  KEY `IDX_D6F01224A76ED395` (`user_id`),
  KEY `idx__promocode_users__updated_at` (`updated_at`),
  CONSTRAINT `_FK_D6F01224A76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `_FK_D6F01224C76C06D9` FOREIGN KEY (`promocode_id`) REFERENCES `promocodes` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `promos`
--

DROP TABLE IF EXISTS `promos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `promos` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `type_id` int(10) unsigned NOT NULL,
  `promo_place_group_id` int(10) unsigned DEFAULT NULL,
  `status` enum('new','approved','enabled','disabled','completed','not_approved','not_approved_max_limit') COLLATE utf8_unicode_ci DEFAULT 'new',
  `name` varchar(70) COLLATE utf8_unicode_ci NOT NULL,
  `description` varchar(140) COLLATE utf8_unicode_ci NOT NULL,
  `is_auto` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `maximum_quantity` int(10) unsigned NOT NULL DEFAULT '1',
  `priority` tinyint(3) NOT NULL DEFAULT '100',
  `started_at` datetime DEFAULT NULL,
  `ended_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `picture_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `picture_enabled` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `additional_picture_id` int(11) DEFAULT NULL,
  `schedule_description` varchar(70) COLLATE utf8_unicode_ci DEFAULT NULL,
  `provider_discount` enum('place','own') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'own',
  `picture_avatarnica_identity` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `native_delivery_radius` int(11) DEFAULT NULL,
  `marketplace_delivery_radius` int(11) DEFAULT NULL,
  `policy_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'all',
  `author_id` int(11) DEFAULT NULL,
  `moderator_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_31D1F705C54C8C93` (`type_id`),
  KEY `IDX_31D1F705D48C7547` (`promo_place_group_id`),
  KEY `idx__promos__shipping_type` (`shipping_type`),
  KEY `fk__promos__author_id` (`author_id`),
  KEY `fk__promos__moderator_id` (`moderator_id`),
  CONSTRAINT `FK_31D1F705C54C8C93` FOREIGN KEY (`type_id`) REFERENCES `promo_types` (`id`),
  CONSTRAINT `FK_31D1F705D48C7547` FOREIGN KEY (`promo_place_group_id`) REFERENCES `promo_place_groups` (`id`),
  CONSTRAINT `fk__promos__author_id` FOREIGN KEY (`author_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `fk__promos__moderator_id` FOREIGN KEY (`moderator_id`) REFERENCES `admins` (`id`),
  CONSTRAINT `fk__promos_shipping_type` FOREIGN KEY (`shipping_type`) REFERENCES `shipping_type_dictionary` (`shipping_type`)
) ENGINE=InnoDB AUTO_INCREMENT=387572 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `push_notifications`
--

DROP TABLE IF EXISTS `push_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `push_notifications` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `user_device_id` int(11) DEFAULT NULL,
  `order_id` int(11) DEFAULT NULL,
  `status` smallint(6) NOT NULL,
  `message_title` longtext COLLATE utf8_unicode_ci NOT NULL,
  `message_body` longtext COLLATE utf8_unicode_ci NOT NULL,
  `deeplink` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `sent_at` datetime DEFAULT NULL,
  `api_response` longtext COLLATE utf8_unicode_ci,
  `sms_fallback` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `type` tinyint(4) NOT NULL DEFAULT '0',
  `user_notification_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_5B9B7E4FA76ED395` (`user_id`),
  KEY `IDX_5B9B7E4F8D9F6D38` (`order_id`),
  KEY `IDX_5B9B7E4F94444A30` (`user_device_id`),
  KEY `idx_push_created_at` (`created_at`),
  KEY `idx__push_notifications__updated_at` (`updated_at`),
  CONSTRAINT `FK_5B9B7E4F8D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`),
  CONSTRAINT `FK_5B9B7E4F94444A30` FOREIGN KEY (`user_device_id`) REFERENCES `user_devices` (`id`),
  CONSTRAINT `FK_5B9B7E4FA76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1172146652 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `recurrent_payments`
--

DROP TABLE IF EXISTS `recurrent_payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `recurrent_payments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) DEFAULT NULL,
  `payture_order_id` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `amount` int(11) NOT NULL DEFAULT '0',
  `amount_rational` decimal(13,2) DEFAULT NULL,
  `is_refunded` tinyint(1) NOT NULL DEFAULT '0',
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `refunded_amount` int(11) NOT NULL DEFAULT '0',
  `refunded_amount_rational` decimal(13,2) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_38FD21498D9F6D38` (`order_id`),
  KEY `idx__recurrent_payments__updated_at` (`updated_at`),
  CONSTRAINT `FK_38FD21498D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=484912 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `region_delivery_conditions`
--

DROP TABLE IF EXISTS `region_delivery_conditions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `region_delivery_conditions` (
  `region_id` int(11) NOT NULL,
  `delivery_condition_id` int(11) NOT NULL,
  `time_of_arrival` smallint(6) NOT NULL,
  `enabled` tinyint(1) NOT NULL,
  `courier_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'pedestrian',
  PRIMARY KEY (`region_id`,`delivery_condition_id`,`time_of_arrival`,`courier_type`),
  KEY `idx__region_delivery_conditions__region_id` (`region_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `region_geobase`
--

DROP TABLE IF EXISTS `region_geobase`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `region_geobase` (
  `region_id` int(10) unsigned NOT NULL,
  `geoid` int(10) unsigned NOT NULL,
  PRIMARY KEY (`region_id`,`geoid`),
  UNIQUE KEY `uk__region_geobase__geoid` (`geoid`),
  CONSTRAINT `fk__region_geobase__region_id` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `region_geometry`
--

DROP TABLE IF EXISTS `region_geometry`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `region_geometry` (
  `region_id` int(11) unsigned NOT NULL,
  `timezone` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `geometry` geometry NOT NULL,
  PRIMARY KEY (`region_id`),
  SPATIAL KEY `idx__region_geometry__geometry` (`geometry`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `region_logistics_settings`
--

DROP TABLE IF EXISTS `region_logistics_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `region_logistics_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `region_id` int(11) NOT NULL COMMENT 'ID региона, к которому относится настройка',
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Имя настройки',
  `value` longtext COLLATE utf8_unicode_ci COMMENT 'Значение настройки',
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__region_logistics_settings__region_id__name` (`region_id`,`name`),
  KEY `idx__region_logistics_settings__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=32463 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Логистические настройки регионов. Если записи какой-то настройки для региона нет - используется значение по умолчанию';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `region_payment_methods`
--

DROP TABLE IF EXISTS `region_payment_methods`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `region_payment_methods` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `region_id` int(11) unsigned NOT NULL,
  `type` enum('native','marketplace') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:place_type)',
  `payment_method_id` int(11) unsigned NOT NULL,
  `enabled` tinyint(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_region_payment_methods_unique` (`region_id`,`type`,`payment_method_id`),
  KEY `IDX_564ABDC98260155` (`region_id`),
  KEY `IDX_564ABDC5AA1164F` (`payment_method_id`),
  CONSTRAINT `FK_564ABDC5AA1164F` FOREIGN KEY (`payment_method_id`) REFERENCES `payment_methods` (`id`),
  CONSTRAINT `FK_564ABDC98260155` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2073 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `region_schedule`
--

DROP TABLE IF EXISTS `region_schedule`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `region_schedule` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `region_id` int(10) unsigned NOT NULL,
  `specific_delivery_type` varchar(16) COLLATE utf8_unicode_ci NOT NULL,
  `weekday` varchar(9) COLLATE utf8_unicode_ci NOT NULL,
  `from` varchar(5) COLLATE utf8_unicode_ci NOT NULL,
  `duration` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__region_schedule__region_id__specific_delivery_type` (`region_id`,`specific_delivery_type`),
  CONSTRAINT `fk__region_schedule__region_id` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=34469 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `region_zones_upload_history`
--

DROP TABLE IF EXISTS `region_zones_upload_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `region_zones_upload_history` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `region_id` int(11) NOT NULL,
  `changeset` longtext COLLATE utf8_unicode_ci,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4682 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `regions`
--

DROP TABLE IF EXISTS `regions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `regions` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `is_available` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `is_default` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `name` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `center_location_latitude` decimal(10,6) NOT NULL,
  `center_location_longitude` decimal(10,6) NOT NULL,
  `bounding_box_left_top_latitude` decimal(10,6) NOT NULL,
  `bounding_box_left_top_longitude` decimal(10,6) NOT NULL,
  `bounding_box_right_bottom_latitude` decimal(10,6) NOT NULL,
  `bounding_box_right_bottom_longitude` decimal(10,6) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `vox_implant_code` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `vox_implant_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `slug` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `prepositional` varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `region_setting_id` int(11) NOT NULL,
  `timezone` varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'Europe/Moscow',
  `sort` smallint(5) unsigned NOT NULL DEFAULT '100',
  `oktmo` varchar(11) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_subregion_id` int(11) DEFAULT NULL,
  `country_id` int(11) NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `native_max_delivery_fee` decimal(11,2) DEFAULT NULL,
  `yandex_taxi_max_delivery_fee` decimal(11,2) DEFAULT NULL,
  `courier_training_type` enum('online','offline') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип обучения курьеров(DC2Type:courier_training_type)',
  `agglomeration_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `mvp_id` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk__bounding_box` (`bounding_box_left_top_latitude`,`bounding_box_left_top_longitude`,`bounding_box_right_bottom_latitude`,`bounding_box_right_bottom_longitude`),
  KEY `FK_A26779F3CFD28993` (`region_setting_id`),
  KEY `ix__regions__timezone` (`timezone`),
  KEY `fk__regions__country_id` (`country_id`),
  CONSTRAINT `FK_A26779F3CFD28993` FOREIGN KEY (`region_setting_id`) REFERENCES `region_settings` (`id`),
  CONSTRAINT `regions_ibfk_1` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2093 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `remote_files`
--

DROP TABLE IF EXISTS `remote_files`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `remote_files` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `admin_id` int(11) DEFAULT NULL COMMENT 'Идентификатор пользователя админки, загрузившего файл',
  `created_at` datetime NOT NULL,
  `tag` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тэг(тип файла), влияет на расположение во внешнем хранилище',
  `original_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Локальное (пользовательское) наименование файла',
  `storage_key` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Наименование файла во внешнем хранилище',
  `expires_at` datetime DEFAULT NULL COMMENT 'Дата и время до которых файл будет храниться',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `storage` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'eda-internal' COMMENT 'Внешнее хранилище',
  PRIMARY KEY (`id`),
  UNIQUE KEY `tag_storage_key_idx` (`tag`,`storage_key`),
  KEY `IDX_F9BFD385642B8210` (`admin_id`),
  CONSTRAINT `FK_9095E158642B8210` FOREIGN KEY (`admin_id`) REFERENCES `admins` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=286037 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Справочник файлов во внешнем хранилище (S3)';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `report_build_files`
--

DROP TABLE IF EXISTS `report_build_files`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `report_build_files` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `report_build_id` int(11) NOT NULL,
  `filename` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `path` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `size` int(11) DEFAULT NULL,
  `status` int(11) NOT NULL,
  `date_processed` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `report_build_id` (`report_build_id`),
  CONSTRAINT `report_build_files_ibfk_1` FOREIGN KEY (`report_build_id`) REFERENCES `report_builds` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=98207 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `report_builds`
--

DROP TABLE IF EXISTS `report_builds`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `report_builds` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `date_requested` datetime DEFAULT NULL,
  `report_type` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `payload` json DEFAULT NULL,
  `status` int(11) NOT NULL,
  `date_processed` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=49747 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `reports`
--

DROP TABLE IF EXISTS `reports`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `reports` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `owner_id` int(11) NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `executed_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `params` longtext COLLATE utf8_unicode_ci,
  `type` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `deferred` tinyint(1) NOT NULL DEFAULT '1',
  `started_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_F11FA7457E3C61F9` (`owner_id`),
  CONSTRAINT `FK_F11FA7457E3C61F9` FOREIGN KEY (`owner_id`) REFERENCES `admins` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=99012 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `restapp_menu_revisions`
--

DROP TABLE IF EXISTS `restapp_menu_revisions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `restapp_menu_revisions` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `place_id` int(11) NOT NULL,
  `revision` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `started_at` datetime NOT NULL,
  `finished_at` datetime NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__restapp_menu_revisions` (`place_id`,`revision`),
  KEY `idx__restapp_menu_revisions__created_at` (`created_at`),
  KEY `idx__restapp_menu_revisions__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `restapp_promo_place_groups`
--

DROP TABLE IF EXISTS `restapp_promo_place_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `restapp_promo_place_groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `partner_id` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `place_ids` text COLLATE utf8_unicode_ci NOT NULL,
  `promo_place_group_id` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__promo_place_groups__partner_id__promo_place_group_id` (`partner_id`,`promo_place_group_id`),
  KEY `idx__promo_place_groups__partner_id` (`partner_id`),
  KEY `idx__promo_place_groups__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=44557 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `role_permissions`
--

DROP TABLE IF EXISTS `role_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `role_permissions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `role_id` int(11) NOT NULL,
  `permission` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_1FBA94E6D60322AC` (`role_id`),
  CONSTRAINT `FK_1FBA94E6D60322AC` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14587 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `roles`
--

DROP TABLE IF EXISTS `roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `roles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `idm_slug` varchar(128) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__roles__idm_slug` (`idm_slug`)
) ENGINE=InnoDB AUTO_INCREMENT=349 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `salesforce_place_updates`
--

DROP TABLE IF EXISTS `salesforce_place_updates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `salesforce_place_updates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `salesforce_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `update_data` json NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__salesforce_place_updates__salesforce_id` (`salesforce_id`),
  KEY `idx__salesforce_place_updates__updated_at` (`updated_at`),
  KEY `idx__salesforce_place_updates__created_at` (`created_at`),
  KEY `fk__salesforce_place_updates__place_id` (`place_id`),
  CONSTRAINT `fk__salesforce_place_updates__place_id` FOREIGN KEY (`place_id`) REFERENCES `places` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=223397 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `salesforce_revisions`
--

DROP TABLE IF EXISTS `salesforce_revisions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `salesforce_revisions` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `place_id` int(11) NOT NULL,
  `account` text COLLATE utf8_unicode_ci,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__salesforce_revisions__place_id` (`place_id`),
  KEY `idx__salesforce_revisions__created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `schedule_intervals`
--

DROP TABLE IF EXISTS `schedule_intervals`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `schedule_intervals` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `type_id` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `external_id` bigint(20) unsigned NOT NULL,
  `weekday` smallint(5) unsigned NOT NULL,
  `from` smallint(5) unsigned NOT NULL,
  `to` smallint(5) unsigned NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `deactivated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__schedule_intervals__type_id__external_id` (`type_id`,`external_id`),
  KEY `idx__schedule_intervals__updated_at` (`updated_at`),
  KEY `idx__schedule_intervals__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=191883932 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `schedule_redefined_dates`
--

DROP TABLE IF EXISTS `schedule_redefined_dates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `schedule_redefined_dates` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `type_id` int(11) unsigned NOT NULL,
  `external_id` int(11) unsigned NOT NULL,
  `date` date NOT NULL,
  `from` smallint(5) unsigned NOT NULL,
  `to` smallint(5) unsigned NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `deactivated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__schedule_redefined_dates__type_id__external_id` (`type_id`,`external_id`),
  KEY `idx__schedule_redefined_dates__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=10968987 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `schedule_sync_schemes`
--

DROP TABLE IF EXISTS `schedule_sync_schemes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `schedule_sync_schemes` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `type_id` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `external_id` bigint(20) unsigned NOT NULL,
  `synced_with_type_id` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `synced_with_external_id` bigint(20) unsigned NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetime_immutable)',
  `deactivated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__schedule_sync_schemes__type_id__external_id` (`type_id`,`external_id`),
  KEY `idx__schedule_sync_schemes__sync_type_id__sync_external_id` (`synced_with_type_id`,`synced_with_external_id`),
  KEY `idx__schedule_sync_schemes__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=1629214922 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `search_synonyms`
--

DROP TABLE IF EXISTS `search_synonyms`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `search_synonyms` (
  `search_word_id` int(11) NOT NULL,
  `search_synonym_id` int(11) NOT NULL,
  PRIMARY KEY (`search_word_id`,`search_synonym_id`),
  KEY `IDX_9E401F626E86AC17` (`search_word_id`),
  KEY `IDX_9E401F6254AD4244` (`search_synonym_id`),
  CONSTRAINT `FK_9E401F6254AD4244` FOREIGN KEY (`search_synonym_id`) REFERENCES `search_words` (`id`),
  CONSTRAINT `FK_9E401F626E86AC17` FOREIGN KEY (`search_word_id`) REFERENCES `search_words` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `search_words`
--

DROP TABLE IF EXISTS `search_words`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `search_words` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(8) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'synonym',
  `word` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_word_type` (`word`,`type`)
) ENGINE=InnoDB AUTO_INCREMENT=553 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `segmentation_user_loyalty_log`
--

DROP TABLE IF EXISTS `segmentation_user_loyalty_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `segmentation_user_loyalty_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `segmentation_user_id` int(11) NOT NULL,
  `initial_loyalty_level` int(11) DEFAULT NULL,
  `recalculated_loyalty_level` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11596704 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `segmentation_user_statistic`
--

DROP TABLE IF EXISTS `segmentation_user_statistic`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `segmentation_user_statistic` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `segmentation_user_id` int(11) NOT NULL,
  `month` tinyint(3) unsigned NOT NULL,
  `year` smallint(5) unsigned NOT NULL,
  `cooked_orders_count` int(10) unsigned NOT NULL,
  `compensations_count` int(10) unsigned NOT NULL,
  `orders_canceled_by_client_count` int(10) unsigned NOT NULL,
  `orders_with_promocode_count` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx__sus__segmentation_user_id__month__year` (`segmentation_user_id`,`month`,`year`),
  CONSTRAINT `fk__segmentation_user_statistic__segmentation_user_id` FOREIGN KEY (`segmentation_user_id`) REFERENCES `crm_users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=180250709 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `send_report_jobs`
--

DROP TABLE IF EXISTS `send_report_jobs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `send_report_jobs` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `status` smallint(6) NOT NULL,
  `type` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `recipient` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `subject` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `additional_info` varchar(500) COLLATE utf8_unicode_ci NOT NULL,
  `errors` varchar(500) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  `updated_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz_immutable)',
  PRIMARY KEY (`id`),
  KEY `idx__send_report_jobs__place_id` (`place_id`),
  KEY `idx__send_report_jobs__created_at` (`created_at`),
  KEY `idx__send_report_jobs__updated_at` (`updated_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `seo_params`
--

DROP TABLE IF EXISTS `seo_params`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `seo_params` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `seo_text` longtext COLLATE utf8_unicode_ci,
  `url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `settings`
--

DROP TABLE IF EXISTS `settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `value` longtext COLLATE utf8_unicode_ci,
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_E545A0C55E237E06` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=808 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `shipping_type_dictionary`
--

DROP TABLE IF EXISTS `shipping_type_dictionary`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `shipping_type_dictionary` (
  `shipping_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`shipping_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `shop_operational_settings`
--

DROP TABLE IF EXISTS `shop_operational_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `shop_operational_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) NOT NULL,
  `pickup_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'not_specified',
  `payment_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'not_specified',
  `merchant_category_code` varchar(4) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `assembly_cost` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__shop_operational_settings__place_id` (`place_id`),
  KEY `idx__shop_operational_settings__created_at` (`created_at`),
  KEY `idx__shop_operational_settings__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=84923 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `smartomato_users`
--

DROP TABLE IF EXISTS `smartomato_users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `smartomato_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `login` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `organization_id` int(11) NOT NULL,
  `client_id` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `service_mark` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `sms_log`
--

DROP TABLE IF EXISTS `sms_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `sms_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `order_id` int(11) DEFAULT NULL,
  `order_status` smallint(6) DEFAULT NULL,
  `phone` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `text` varchar(512) COLLATE utf8_unicode_ci NOT NULL,
  `message_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_A9E43D70A76ED395` (`user_id`),
  KEY `IDX_A9E43D708D9F6D38` (`order_id`),
  KEY `idx_sms_created_at` (`created_at`),
  CONSTRAINT `_FK_A9E43D708D9F6D38` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`),
  CONSTRAINT `_FK_A9E43D70A76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=311408197 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `static_page_countries`
--

DROP TABLE IF EXISTS `static_page_countries`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `static_page_countries` (
  `static_page_id` int(11) NOT NULL,
  `country_id` int(11) NOT NULL,
  PRIMARY KEY (`static_page_id`,`country_id`),
  KEY `fk__static_page_countries__static_page_id` (`static_page_id`),
  KEY `fk__static_page_countries__country_id` (`country_id`),
  CONSTRAINT `fk__static_page_countries__country_id` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk__static_page_countries__static_page_id` FOREIGN KEY (`static_page_id`) REFERENCES `static_pages` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `static_page_regions`
--

DROP TABLE IF EXISTS `static_page_regions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `static_page_regions` (
  `static_page_id` int(11) NOT NULL,
  `region_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`static_page_id`,`region_id`),
  KEY `fk__static_page_regions__static_page_id` (`static_page_id`),
  KEY `fk__static_page_regions__region_id` (`region_id`),
  CONSTRAINT `fk__static_page_regions__region_id` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk__static_page_regions__static_page_id` FOREIGN KEY (`static_page_id`) REFERENCES `static_pages` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `static_pages`
--

DROP TABLE IF EXISTS `static_pages`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `static_pages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `content` longtext COLLATE utf8_unicode_ci NOT NULL,
  `slug` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `page_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'app',
  `description` varchar(500) COLLATE utf8_unicode_ci DEFAULT NULL,
  `active` tinyint(1) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=139 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `suppliers`
--

DROP TABLE IF EXISTS `suppliers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `suppliers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `logistic_place_group_id` int(11) DEFAULT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '???????????? ??????????',
  `external_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??????? ????????????? ??????????',
  `type` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ??????????',
  `subtype` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT '???-??? ??????????(?????? ??? ?????, planned/unplanned)',
  `travel_type` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ??????????? ??????????',
  `region_id` int(11) NOT NULL COMMENT '????????????? ??????? ?????????? ??????????',
  `available_until` datetime NOT NULL COMMENT '????? ????? ???????? ????????? ????? ?? ????????(DC2Type:datetimetz)',
  `app_version` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `is_picker` tinyint(1) NOT NULL DEFAULT '0' COMMENT '????? ?? ???? ?????????',
  `is_special_collector` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Ð’Ñ‹Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ±Ð¾Ñ€Ñ‰Ð¸Ðº',
  `is_rover` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Ð¯Ð²Ð»ÑÐµÑ‚ÑÑ Ñ€Ð¾Ð²ÐµÑ€Ð¾Ð¼',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__suppliers__external_id__type` (`external_id`,`type`),
  KEY `IDX_AC28B95CF270675E` (`logistic_place_group_id`),
  CONSTRAINT `__FK_AC28B95CF270675E` FOREIGN KEY (`logistic_place_group_id`) REFERENCES `logistic_place_groups` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=52441632 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `surge_region`
--

DROP TABLE IF EXISTS `surge_region`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `surge_region` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `region_id` int(10) unsigned NOT NULL,
  `damper_x` int(11) NOT NULL DEFAULT '1',
  `damper_y` int(11) NOT NULL DEFAULT '2',
  `native_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `marketplace_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `store_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `order_delivery_delta` int(11) NOT NULL DEFAULT '10',
  `calculator_type` enum('manual_threshold_aware','automatic_threshold_aware','automatic_summer_time_threshold_aware') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'manual_threshold_aware' COMMENT '(DC2Type:surge_calculator_type)',
  `minimal_courier_count` int(11) NOT NULL DEFAULT '5',
  `store_old_delta_window_weight` decimal(3,2) DEFAULT '0.30',
  `store_couriers_arrival_limit_time` int(11) DEFAULT '210',
  PRIMARY KEY (`id`),
  KEY `FK_DCC4EA3D98260155` (`region_id`),
  CONSTRAINT `_FK_DCC4EA3D98260155` FOREIGN KEY (`region_id`) REFERENCES `regions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14193 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `surge_region_thresholds`
--

DROP TABLE IF EXISTS `surge_region_thresholds`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `surge_region_thresholds` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `surge_region_id` int(10) unsigned NOT NULL,
  `type` enum('native','marketplace','store') COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:place_type)',
  `level` int(10) unsigned NOT NULL,
  `zone_capacity` int(10) unsigned NOT NULL DEFAULT '100',
  `value` double NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_surge_region_thresholds_unique_surge` (`surge_region_id`,`type`,`level`),
  CONSTRAINT `__FK_1665D99C726AAEE0` FOREIGN KEY (`surge_region_id`) REFERENCES `surge_region` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=77204 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `taxi_payment_events`
--

DROP TABLE IF EXISTS `taxi_payment_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `taxi_payment_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `service_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `event_specific_data` json NOT NULL,
  `account_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `occurred_at` datetime NOT NULL,
  `created_at` datetime NOT NULL,
  `event_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__taxi_payment_events__order_nr__event_type` (`order_nr`,`event_type`),
  KEY `idx__taxi_payment_events__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=123274307 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `test`
--

DROP TABLE IF EXISTS `test`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `test` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tmp_user_addresses_restored`
--

DROP TABLE IF EXISTS `tmp_user_addresses_restored`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tmp_user_addresses_restored` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `city` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `street` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `house` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `entrance` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `floor` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `office` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `comment` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `full` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `short` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `reliable` tinyint(1) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `type_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  `type_id` int(11) DEFAULT NULL,
  `plot` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `building` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `last_used_at` datetime DEFAULT NULL,
  `doorcode` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `uri` text COLLATE utf8_unicode_ci,
  `is_geo_coords_checked` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT 'Ð¤Ð»Ð°Ð³, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð»Ð¸ Ð°Ð´Ñ€ÐµÑ Ð² Ð³ÐµÐ¾ÐºÐ¾Ð´ÐµÑ€Ðµ',
  PRIMARY KEY (`id`),
  KEY `IDX_6F2AF8F2A76ED395` (`user_id`),
  KEY `idx_user_addresses_created_at` (`created_at`),
  KEY `idx_user_addresses_updated_at` (`updated_at`),
  KEY `idx__user_addresses__is_geo_coords_checked` (`is_geo_coords_checked`)
) ENGINE=InnoDB AUTO_INCREMENT=23879281 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tracking_calculation_log`
--

DROP TABLE IF EXISTS `tracking_calculation_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tracking_calculation_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Номер заказа',
  `courier_id` int(11) NOT NULL COMMENT 'Идентификатор курьера',
  `travel_type` enum('pedestrian','bicycle','electric_bicycle','vehicle','motorcycle') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип перемещения доставщика(DC2Type:courier_travel_type)',
  `destination_type` enum('destination','source') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип точки назначения(DC2Type:route_destination_type)',
  `calculation_source_type` enum('max_arrival','actualisation','cargo_api','cargo_native_fallback') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип источника расчета(DC2Type:arrival_calculation_source_type)',
  `tracking_result_storage_type` enum('max_arrival','actualisation','straight_calculation','creation_forecast') COLLATE utf8_unicode_ci NOT NULL COMMENT 'Тип хранения результата(DC2Type:tracking_result_storage_type)',
  `start_location_latitude` decimal(10,6) DEFAULT NULL COMMENT 'Широта стартовой локации',
  `start_location_longitude` decimal(10,6) DEFAULT NULL COMMENT 'Долгота стартовой локации',
  `expected_arrival_at` datetime NOT NULL COMMENT 'Прогноз прибытия к цели',
  `raw_expected_arrival_at` datetime DEFAULT NULL COMMENT 'Сырой расчет из роутера',
  `meta_info` json DEFAULT NULL COMMENT 'Детализация расчета маршрута',
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx__tracking_calculation_log__created_at` (`created_at`),
  KEY `idx__tracking_calculation_log__order_nr__courier_id` (`order_nr`,`courier_id`),
  KEY `idx__tracking_calculation_log__destination__calculation_type` (`destination_type`,`calculation_source_type`)
) ENGINE=InnoDB AUTO_INCREMENT=4265543512 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tracking_show_log`
--

DROP TABLE IF EXISTS `tracking_show_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tracking_show_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `tracking_calculation_log_id` bigint(20) DEFAULT NULL COMMENT '(DC2Type:int64)',
  `order_nr` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '????? ??????',
  `courier_id` int(11) NOT NULL COMMENT '????????????? ???????',
  `travel_type` enum('pedestrian','bicycle','electric_bicycle','vehicle','motorcycle') COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ??????????? ??????????(DC2Type:courier_travel_type)',
  `destination_type` enum('destination','source') COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ????? ??????????(DC2Type:route_destination_type)',
  `tracking_result_storage_type` enum('max_arrival','actualisation','straight_calculation','creation_forecast') COLLATE utf8_unicode_ci NOT NULL COMMENT '??? ???????? ??????????(DC2Type:tracking_result_storage_type)',
  `expected_arrival_at` datetime NOT NULL COMMENT '??????? ???????? ? ????',
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_86991EF4C9E25ED5` (`tracking_calculation_log_id`),
  KEY `idx__tracking_show_log__created_at` (`created_at`),
  KEY `idx__tracking_show_log__order_nr__courier_id` (`order_nr`,`courier_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ui_settings`
--

DROP TABLE IF EXISTS `ui_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ui_settings` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `value` varchar(255) COLLATE utf8_unicode_ci DEFAULT '',
  `type` enum('bool','int','float','string') COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uniq_name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_addresses`
--

DROP TABLE IF EXISTS `user_addresses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_addresses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `city` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `street` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `house` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `entrance` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `floor` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `office` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `comment` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `full` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `short` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `reliable` tinyint(1) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `type_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `location_latitude` decimal(10,6) NOT NULL,
  `location_longitude` decimal(10,6) NOT NULL,
  `type_id` int(11) DEFAULT NULL,
  `plot` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `building` varchar(60) COLLATE utf8_unicode_ci DEFAULT NULL,
  `last_used_at` datetime DEFAULT NULL,
  `doorcode` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `uri` text COLLATE utf8_unicode_ci,
  `is_geo_coords_checked` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT 'Ð¤Ð»Ð°Ð³, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð»Ð¸ Ð°Ð´Ñ€ÐµÑ Ð² Ð³ÐµÐ¾ÐºÐ¾Ð´ÐµÑ€Ðµ',
  PRIMARY KEY (`id`),
  KEY `IDX_6F2AF8F2A76ED395` (`user_id`),
  KEY `idx_user_addresses_created_at` (`created_at`),
  KEY `idx_user_addresses_updated_at` (`updated_at`),
  KEY `idx__user_addresses__is_geo_coords_checked` (`is_geo_coords_checked`),
  CONSTRAINT `_FK_6F2AF8F2A76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=130062412 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_auth_history`
--

DROP TABLE IF EXISTS `user_auth_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_auth_history` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `device_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `auth_token` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `user_agent` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `platform` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `remote_addr` varchar(40) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk__user_auth_history__user_id__device_id` (`user_id`,`device_id`),
  KEY `ix__user_auth_history__user_id` (`user_id`),
  KEY `idx__user_auth_history__created_at` (`created_at`),
  KEY `idx__user_auth_history__updated_at` (`updated_at`),
  CONSTRAINT `_fk__user_id__users__id` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=164552147 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_device_tokens`
--

DROP TABLE IF EXISTS `user_device_tokens`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_device_tokens` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `device_id` int(11) NOT NULL,
  `type` varchar(16) COLLATE utf8_unicode_ci NOT NULL,
  `token` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `device_type` (`device_id`,`type`),
  KEY `IDX_97C4CDC594A4C7D4` (`device_id`),
  CONSTRAINT `FK_97C4CDC594A4C7D4` FOREIGN KEY (`device_id`) REFERENCES `user_devices` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=343574907 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_devices`
--

DROP TABLE IF EXISTS `user_devices`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_devices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `auth_token` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `active` tinyint(1) NOT NULL DEFAULT '1',
  `os` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `os_version` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `app_version` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `model` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  `device_id` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  `brand` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL,
  `code_version` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `push_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `uuid` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `xiva_registered` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `auth_token` (`auth_token`),
  KEY `IDX_490A5090A76ED395` (`user_id`),
  KEY `idx_user_devices_created_at` (`created_at`),
  KEY `idx_user_devices_brand` (`brand`),
  KEY `idx__user_devices__updated_at` (`updated_at`),
  CONSTRAINT `__FK_490A5090A76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=279159352 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_mobile_device`
--

DROP TABLE IF EXISTS `user_mobile_device`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_mobile_device` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `os` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `os_version` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `app_version` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `code_version` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `brand` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL,
  `model` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  `device_id` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  `active` tinyint(1) NOT NULL DEFAULT '1',
  `is_apple_device` tinyint(1) NOT NULL DEFAULT '0',
  `push_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `xiva_registered` tinyint(1) NOT NULL DEFAULT '0',
  `token` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  `additional_token` varchar(256) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  KEY `idx__user_mobile_device__user_id` (`user_id`),
  CONSTRAINT `fk__user_mobile_device__user_id` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_notifications`
--

DROP TABLE IF EXISTS `user_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_notifications` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Название уведомления',
  `event` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Событие, при котором будет отправлено уведомление',
  `push_template` text COLLATE utf8_unicode_ci COMMENT 'Шаблон пуша',
  `sms_template` text COLLATE utf8_unicode_ci COMMENT 'Шаблон смс',
  `subject` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Тема сообщения',
  `deeplink` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Deeplink',
  `extra_placeholders` json DEFAULT NULL COMMENT 'Дополнительные заполняемые поля для ручной отправки, которые могут быть подставлены в шаблон',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  `deleted_at` datetime DEFAULT NULL,
  `transport_type` smallint(6) NOT NULL DEFAULT '1' COMMENT 'Тип транспорта, бинароное поле, значения берутся здесь: NotificationBundleExtensionNotificationBundleExtension::TYPES',
  `taxi_deeplink` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Deeplink для пушей, которые идут через такси',
  `magnit_deeplink` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Deeplink для пушей, которые идут через приложение Магнита',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=194 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Шаблоны уведомлений пользователей';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_order_counter`
--

DROP TABLE IF EXISTS `user_order_counter`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_order_counter` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `place_id` int(11) NOT NULL,
  `order_delivered_count` int(11) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_id_place_id` (`user_id`,`place_id`),
  KEY `idx_user_place` (`user_id`,`place_id`)
) ENGINE=InnoDB AUTO_INCREMENT=199626067 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_payment_methods`
--

DROP TABLE IF EXISTS `user_payment_methods`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_payment_methods` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `payment_method_id` int(10) unsigned NOT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL COMMENT '(DC2Type:datetimetz)',
  `updated_at` datetime DEFAULT NULL COMMENT '(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_user_payment_methods_unique` (`user_id`,`payment_method_id`),
  KEY `idx_user_payment_methods_user_id` (`user_id`),
  KEY `idx_user_payment_methods_payment_method_id` (`payment_method_id`),
  CONSTRAINT `FK_5D77950C5AA1164F` FOREIGN KEY (`payment_method_id`) REFERENCES `payment_methods` (`id`),
  CONSTRAINT `FK_5D77950CA76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=34983 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_unique_notifications`
--

DROP TABLE IF EXISTS `user_unique_notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_unique_notifications` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '(DC2Type:int64)',
  `user_id` int(11) DEFAULT NULL,
  `key` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Ключ для отсева ранее отправленных нотификаций',
  `created_at` datetime DEFAULT NULL COMMENT 'Дата/время события нотификации(DC2Type:datetimetz)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux__user_unique_notifications__user_id__key` (`user_id`,`key`),
  KEY `idx__user_unique_notifications__created_at` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=97584682 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_verification_codes`
--

DROP TABLE IF EXISTS `user_verification_codes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_verification_codes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `code` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `active` tinyint(1) NOT NULL,
  `failed_tries` int(11) NOT NULL,
  `ip_address` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `deactivated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_uv_codes_deactivated_at` (`deactivated_at`),
  KEY `idx__phone_number__created_at` (`phone_number`,`created_at`),
  KEY `idx__user_verification_codes__ip_address__created_at` (`ip_address`,`created_at`),
  KEY `idx__user_verification_codes__created_at` (`created_at`),
  KEY `idx__user_verification_codes__updated_at` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=276454133 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `first_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '???',
  `last_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '???????',
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '?????. ? ??????????? ???????, ????????? email_canonical',
  `personal_email_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¡Ð²ÑÐ·ÑŒ Ñ personal_email_id Ð² ÑÐµÑ€Ð²Ð¸ÑÐµ Taxi.Personal',
  `uuid` char(36) COLLATE utf8_unicode_ci NOT NULL COMMENT '(DC2Type:guid) ???????????? ??? ???????? ???????????????? id ??? ???????? ? ????????? ? ????????.',
  `last_login` datetime DEFAULT NULL COMMENT '????-????? ?????????? ????? ? ???????',
  `last_region_id` int(10) unsigned DEFAULT NULL COMMENT '??????, ?????? ???????????? ?????? ????????? ?????. ??????? ?? ??????? ????????? ??? ??????',
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '??????????????? ??????? ???????????? ? ??????? ????? ??????',
  `personal_phone_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¡Ð²ÑÐ·ÑŒ Ñ personal_phone_id Ð² ÑÐµÑ€Ð²Ð¸ÑÐµ Taxi.Personal',
  `phone_number_confirmed` tinyint(1) NOT NULL COMMENT '??????????? ?? ?????????? ?????',
  `payture_password` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '?????? ???????????? ??? ?????????? ???????? ? ???????. ???????????? ????, ????? ???????? ?? ????????',
  `created_at` datetime NOT NULL,
  `deactivated_at` datetime DEFAULT NULL COMMENT '???????????? ??? fake-delete ???????????? ????? ???????',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `banned_at` datetime DEFAULT NULL COMMENT '???? ???? ????????????',
  `ban_reason` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '??????? ????',
  `invitecode_id` int(11) DEFAULT NULL COMMENT '??????-???',
  `order_last_delayed_at` datetime DEFAULT NULL COMMENT '????-????? ?????????? ??????????? ? ?????????? ??????',
  `is_test_account` tinyint(1) NOT NULL DEFAULT '0' COMMENT '???? ???????? ????????',
  `profile_filled` tinyint(1) NOT NULL DEFAULT '0' COMMENT '???? ????????????? ???????',
  `client_type` enum('common','corporate') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'common' COMMENT '??? ???????: ??????? ??? ?????????????',
  `settings` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '(DC2Type:bit_mask) ??????? ?????. ?????? ?????? ??????, ???? ?? ???????? ??????????? ??????? ?????????? ? ???? ???? / ?? ?????',
  `last_order_finished_at` datetime DEFAULT NULL COMMENT '????-????? ?????????? ????????????? ??????',
  `passport_uid` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¡Ð²ÑÐ·ÑŒ Ñ Passport UID',
  `passport_uid_type` tinyint(1) unsigned DEFAULT NULL COMMENT 'Ð¢Ð¸Ð¿ Ð¿Ð°ÑÐ¿Ð¾Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ uid Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ',
  `phone_country_code` varchar(2) COLLATE utf8_unicode_ci DEFAULT 'RU' COMMENT '??? ??????, ??????? ??????????? ??????? ???????????? ? ???? phone_number',
  `type` varchar(35) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Ð¢Ð¸Ð¿ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ',
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_1483A5E9D17F50A6` (`uuid`),
  UNIQUE KEY `UNIQ_1483A5E9F3E68347` (`invitecode_id`),
  UNIQUE KEY `ux__users__passport_uid` (`passport_uid`),
  KEY `idx_user_phone_number` (`phone_number`),
  KEY `idx_users_created_at` (`created_at`),
  KEY `FK_1483A5E998260155` (`last_region_id`),
  KEY `idx_users_updated_at` (`updated_at`),
  KEY `idx_users_email` (`email`),
  KEY `idx__users__last_order_finished_at` (`last_order_finished_at`),
  KEY `idx__users__personal_phone_id` (`personal_phone_id`),
  KEY `idx__users__personal_email_id` (`personal_email_id`),
  KEY `idx__users__type` (`type`),
  CONSTRAINT `FK_1483A5E998260155` FOREIGN KEY (`last_region_id`) REFERENCES `regions` (`id`),
  CONSTRAINT `FK_1483A5E9F3E68347` FOREIGN KEY (`invitecode_id`) REFERENCES `promocodes` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=332720537 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2022-01-28  1:00:30
SET SQL_MODE='NO_AUTO_VALUE_ON_ZERO';
SET FOREIGN_KEY_CHECKS=0;

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
INSERT INTO settings (id, name, value, created_at) VALUES (375, 'is_zendesk_enabled', 0, NOW());

UPDATE region_settings SET is_send_order_to_place_only_after_courier_assignment=0 WHERE id in (1, 11);
UPDATE region_settings SET is_send_order_to_place_only_after_courier_assignment=1 WHERE id=7;

/* END OF DUMP */

default:
    queues:
      - default
      - regular_default
      - regular_invite
      - regular_block
      - newbie_default
      - newbie_invite
      - newbie_block
      - no_license_plate_countries

    default_config:
        success_result_flag: true
        block_tolerance: 1
        block_tolerance_trash: 2

        checks_for_success:
          - reason: NO_QUALITY
            enabled: true
          - reason: INVALID_SEATCASE
            enabled: false
          - reason: DIRTY_RUGS
            enabled: false
          - reason: INTERIOR_TRASH
            enabled: true
          - reason: NO_COLOR
            enabled: true
          - reason: DIRTY_SEATS
            enabled: true
          - reason: NO_BRANDING
            enabled: true
          - reason: YES_DIRTY
            enabled: true
          - reason: NO_MODEL
            enabled: true
          - reason: NO_HARD_DEFECT
            enabled: true
          - reason: NO_NUMBER_VIEW
            enabled: true
          - reason: NO_NUMBER
            enabled: true
          - reason: NO_PHOTO
            enabled: true

        checks_for_block:
          - reason: NO_QUALITY
            enabled: true
          - reason: INVALID_SEATCASE
            enabled: false
          - reason: DIRTY_RUGS
            enabled: false
          - reason: INTERIOR_TRASH
            enabled: false
          - reason: NO_COLOR
            enabled: false
          - reason: DIRTY_SEATS
            enabled: false
          - reason: NO_BRANDING
            enabled: false
          - reason: YES_DIRTY
            enabled: false
          - reason: NO_MODEL
            enabled: false
          - reason: NO_HARD_DEFECT
            enabled: false
          - reason: NO_NUMBER_VIEW
            enabled: false
          - reason: NO_NUMBER
            enabled: true
          - reason: NO_PHOTO
            enabled: true

    queue_configs_override:
      - queue_name: regular_invite
        success_result_flag: false
      - queue_name: regular_block
        success_result_flag: false
      - queue_name: newbie_invite
        success_result_flag: false
      - queue_name: newbie_block
        success_result_flag: false
      - queue_name: no_license_plate_countries
        success_result_flag: false
        checks_for_block:
          - reason: NO_NUMBER
            enabled: false

description: Настройки проверки ДКК в разных очередях
tags: ['notfallback']
maintainers: [ploshkin]
schema:
    type: object
    additionalProperties: false
    properties:
        queues:
            type: array
            items:
                type: string
        default_config:
            $ref: '#/definitions/Config'
        queue_configs_override:
            type: array
            items:
                $ref: '#/definitions/QueueConfig'
    required:
      - queues
      - default_config
      - queue_configs_override

    definitions:
        Config:
            type: object
            additionalProperties: false
            properties:
                success_result_flag:
                    description: можно ли выдавать успешную резолюцию
                    type: boolean
                block_tolerance:
                    description: |
                        максимальное количество блоков подряд,
                        которое может поставить ручка ML
                    type: integer
                block_tolerance_trash:
                    description: |
                        максимальное количество блоков подряд,
                        которое может поставить ручка ML за плохие фото экстерьера
                    type: integer
                checks_for_success:
                    type: array
                    items:
                        $ref: '#/definitions/ReasonFlag'
                checks_for_block:
                    type: array
                    items:
                        $ref: '#/definitions/ReasonFlag'
            required:
              - success_result_flag
              - block_tolerance
              - block_tolerance_trash
              - checks_for_success
              - checks_for_block

        QueueConfig:
            type: object
            additionalProperties: false
            properties:
                queue_name:
                    type: string
                success_result_flag:
                    description: можно ли выдавать успешную резолюцию
                    type: boolean
                block_tolerance:
                    description: |
                        максимальное количество блоков подряд,
                        которое может поставить ручка ML
                    type: integer
                block_tolerance_trash:
                    description: |
                        максимальное количество блоков подряд,
                        которое может поставить ручка ML за плохие фото экстерьера
                    type: integer
                checks_for_success:
                    type: array
                    items:
                        $ref: '#/definitions/ReasonFlag'
                checks_for_block:
                    type: array
                    items:
                        $ref: '#/definitions/ReasonFlag'
            required:
              - queue_name

        ReasonFlag:
            type: object
            additionalProperties: false
            properties:
                reason:
                    type: string
                enabled:
                    type: boolean
            required:
              - reason
              - enabled

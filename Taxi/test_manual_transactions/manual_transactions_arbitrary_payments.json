{
  "docs": [
    {
      "created": "2019-11-20T15:13:02.832000+00:00",
      "data": {
        "draft_details": {
          "approvals": [
            "login-1",
            "login-2"
          ],
          "author": "login-3",
          "draft_id": "draft-id-1",
          "tickets": [
            "ticket-1",
            "ticket-2"
          ]
        },
        "num_transactions": 2,
        "request_id": "123",
        "transaction_time": "2020-10-05T16:36:12.817933+00:00",
        "transaction_type": "arbitrary_payments",
        "yt_path": "//test_yt_path"
      },
      "doc_id": 1001,
      "event_at": "2019-11-20T15:13:02.832000+00:00",
      "external_event_ref": "123",
      "external_obj_id": "taxi/manual_transactions/123",
      "kind": "manual_transactions",
      "process_at": "2019-11-20T15:13:02.832000+00:00",
      "service": "billing-subventions",
      "status": "new",
      "tags": []
    }
  ],
  "expected_accounts": [],
  "expected_docs": [],
  "expected_docs_updated": [
    {
      "data": {
        "processed_num_transactions": 2,
        "transaction_id/0": {},
        "transaction_id/1": {}
      },
      "doc_id": 1001,
      "idempotency_key": "transaction_id/0"
    }
  ],
  "expected_entities": [],
  "expected_orders": [
    {
      "data": {
        "base_doc_id": 1001,
        "event_version": 1,
        "payments": [
          {
            "amount": "2000",
            "billing_client_id": "123456",
            "contract_id": "78910",
            "currency": "RUB",
            "invoice_date": "2020-09-24T10:00:00.000000+00:00",
            "payload": {
              "alias_id": "5a1ff0cf35a02ac5ba0f3288fbb433d1",
              "amount_details": {
                "base_amount": "108.0000",
                "base_currency": "RUB",
                "contract_currency_rate": "1.00000"
              },
              "base_doc_id": 5407611740054,
              "detailed_product": "trip_payment",
              "driver_details": {
                "db_id": "9631c10823c24a918599d6814912714e",
                "uuid": "75cf15d290174ee9bcb63d8ed526065a"
              },
              "external_payment_id": "61759ed004e943896b662c07",
              "oebs_mvp_id": "mvp",
              "order_id": "21a55c0e60d32342bdf208f88badb0a9",
              "product": "trip_payment",
              "service_id": 124,
              "terminal_id": 57000407,
              "transaction_type": "payment"
            },
            "payment_kind": "trip_payment_card"
          }
        ],
        "schema_version": "v2",
        "support_info": {
          "data": {
            "approvals": [
              "login-1",
              "login-2"
            ],
            "author": "login-3",
            "draft_id": "draft-id-1",
            "tickets": [
              "ticket-1",
              "ticket-2"
            ]
          },
          "kind": "v1/manual_transaction/arbitrary_payments"
        },
        "template_entries": [],
        "topic_begin_at": "2020-10-05T16:36:12.817933+00:00"
      },
      "event_at": "2020-10-05T16:36:12.817933+00:00",
      "external_ref": "1",
      "kind": "arbitrary_payout",
      "topic": "taxi/manual_transaction_payout/123/0"
    },
    {
      "data": {
        "base_doc_id": 1001,
        "event_version": 1,
        "payments": [
          {
            "amount": "-1000",
            "billing_client_id": "123456",
            "contract_id": "78910",
            "currency": "RUB",
            "invoice_date": "2020-09-24T10:00:00.000000+00:00",
            "payload": {
              "alias_id": "5a1ff0cf35a02ac5ba0f3288fbb433d1",
              "amount_details": {
                "base_amount": "108.0000",
                "base_currency": "RUB",
                "contract_currency_rate": "1.00000"
              },
              "base_doc_id": 5407611740054,
              "detailed_product": "trip_payment",
              "driver_details": {
                "db_id": "9631c10823c24a918599d6814912714e",
                "uuid": "75cf15d290174ee9bcb63d8ed526065a"
              },
              "external_payment_id": "61759ed004e943896b662c07",
              "oebs_mvp_id": "mvp",
              "order_id": "21a55c0e60d32342bdf208f88badb0a9",
              "product": "trip_payment",
              "service_id": 124,
              "terminal_id": 57000407,
              "transaction_type": "refund"
            },
            "payment_kind": "trip_payment_card"
          }
        ],
        "schema_version": "v2",
        "support_info": {
          "data": {
            "approvals": [
              "login-1",
              "login-2"
            ],
            "author": "login-3",
            "draft_id": "draft-id-1",
            "tickets": [
              "ticket-1",
              "ticket-2"
            ]
          },
          "kind": "v1/manual_transaction/arbitrary_payments"
        },
        "template_entries": [],
        "topic_begin_at": "2020-10-05T16:36:12.817933+00:00"
      },
      "event_at": "2020-10-05T16:36:12.817933+00:00",
      "external_ref": "1",
      "kind": "arbitrary_payout",
      "topic": "taxi/manual_transaction_payout/123/1"
    }
  ],
  "yt_table_data": [
    {
      "amount": "2000",
      "billing_client_id": "123456",
      "contract_id": "78910",
      "currency": "RUB",
      "detailed_product": "trip_payment",
      "due": null,
      "invoice_date": "2020-09-24T10:00:00.000000+00:00",
      "oebs_mvp_id": "mvp",
      "product": "trip_payment",
      "service_id": 124,
      "tariff_class": null,
      "template_entries": [],
      "tlog_payload": {
        "alias_id": "5a1ff0cf35a02ac5ba0f3288fbb433d1",
        "amount_details": {
          "base_amount": "108.0000",
          "base_currency": "RUB",
          "contract_currency_rate": "1.00000"
        },
        "base_doc_id": 5407611740054,
        "driver_details": {
          "db_id": "9631c10823c24a918599d6814912714e",
          "uuid": "75cf15d290174ee9bcb63d8ed526065a"
        },
        "external_payment_id": "61759ed004e943896b662c07",
        "order_id": "21a55c0e60d32342bdf208f88badb0a9",
        "terminal_id": 57000407
      },
      "transaction_type": "payment"
    },
    {
      "amount": "1000",
      "billing_client_id": "123456",
      "contract_id": "78910",
      "currency": "RUB",
      "detailed_product": "trip_payment",
      "due": null,
      "invoice_date": "2020-09-24T10:00:00.000000+00:00",
      "oebs_mvp_id": "mvp",
      "product": "trip_payment",
      "service_id": 124,
      "tariff_class": null,
      "template_entries": [],
      "tlog_payload": {
        "alias_id": "5a1ff0cf35a02ac5ba0f3288fbb433d1",
        "amount_details": {
          "base_amount": "108.0000",
          "base_currency": "RUB",
          "contract_currency_rate": "1.00000"
        },
        "base_doc_id": 5407611740054,
        "driver_details": {
          "db_id": "9631c10823c24a918599d6814912714e",
          "uuid": "75cf15d290174ee9bcb63d8ed526065a"
        },
        "external_payment_id": "61759ed004e943896b662c07",
        "order_id": "21a55c0e60d32342bdf208f88badb0a9",
        "terminal_id": 57000407
      },
      "transaction_type": "refund"
    }
  ]
}

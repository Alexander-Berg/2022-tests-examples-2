{
  "$blueprint:rule_event_handled": {
    "journal_entries": [
      {
        "$journal_entry": {
          "agreement_id": "subvention_agreement/1/default/group_id/goal_rule_group_id",
          "all_reasons": [],
          "delta": {
            "$money": "1 XXX"
          },
          "details": {
            "$journal_entry_details": {
              "order_id": "some_order_id"
            }
          },
          "entity": {
            "$factory:driver_entity": {
              "external_id": "unique_driver_id/5bab4bf979b9e5513fe5ec4a"
            }
          },
          "event_at": {
            "$datetime": "2018-05-10T00:00:00+00:00"
          },
          "sub_account": "num_orders"
        }
      }
    ],
    "shift_ended_events": [
      {
        "$blueprint:shift_ended": {
          "agreement_ref": {
            "$agreement_ref": "subvention_agreement/1/default/group_id/goal_rule_group_id"
          },
          "antifraud_rule": {
            "$antifraud_rule": {
              "days_span": 2,
              "kind": "goal",
              "last_shift_date": {
                "$date": "2018-05-11"
              },
              "zone_name": "moscow"
            }
          },
          "commission_input": null,
          "driver": null,
          "last_date": {
            "$date": "2018-05-11"
          },
          "pay_after": {
            "$datetime": "2018-05-12T04:00:00+03:00"
          },
          "pay_to": {
            "$entity": {
              "external_id": "taximeter_driver_id/some_db_id/some_uuid",
              "kind": "driver"
            }
          },
          "payment_id": "2018-05-11",
          "possible_frauder": {
            "$antifraud_driver": {
              "driver_license_personal_ids": [
                "8hd93jdlakhf84030ejd9390z"
              ],
              "driver_licenses": [
                "some_driver_license"
              ],
              "unique_driver_id": {
                "$oid": "5bab4bf979b9e5513fe5ec4a"
              }
            }
          },
          "rule_data": {
            "$shift_ended_rule_data": {
              "data": {
                "currency": "RUB",
                "group_id": "goal_rule_group_id",
                "steps": [
                  {
                    "bonus_amount": "1000",
                    "group_member_id": "goal_rule_id",
                    "id": "goal_rule_id",
                    "max_num_orders_exc": 20,
                    "min_num_orders": 10
                  },
                  {
                    "bonus_amount": "2000",
                    "group_member_id": "goal_rule_second_id",
                    "id": "goal_rule_second_id",
                    "min_num_orders": 20
                  }
                ],
                "zone_name": "moscow"
              },
              "subvention_type": {
                "$subvention_type": "do_x_get_y"
              }
            }
          },
          "use_stats_of": {
            "$entity": {
              "external_id": "unique_driver_id/5bab4bf979b9e5513fe5ec4a",
              "kind": "driver"
            }
          }
        }
      }
    ]
  }
}

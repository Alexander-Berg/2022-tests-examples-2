{
  "total": 1,
  "upstreams": [
    {
      "meta": {
        "annotations": {},
        "auth": {
          "staff": {
            "owners": {
              "groupIds": [
                "50889"
              ],
              "logins": [
                "robot-taxi-clown",
                "eatroshkin",
                "glush",
                "sgrebenyukov",
                "nikkraev",
                "broom",
                "oxcd8o",
                "sokogen",
                "nikslim",
                "isharov",
                "nanny-robot"
              ]
            }
          },
          "type": "STAFF"
        },
        "author": "robot-taxi-clown",
        "comment": "-",
        "ctime": "2021-01-26T16:47:10.907276Z",
        "generation": "1",
        "id": "default",
        "mtime": "2021-01-26T17:15:58.978936Z",
        "namespaceId": "clownductor.taxi.tst.yandex.net",
        "version": "04a8928f-45d8-43b0-8866-82e2d3dff6f3"
      },
      "spec": {
        "deleted": false,
        "labels": {
          "order": "99999999"
        },
        "type": "YANDEX_BALANCER",
        "yandexBalancer": {
          "config": {
            "modules": [],
            "regexpSection": {
              "matcher": {
                "matchAnd": [],
                "matchOr": []
              },
              "nested": {
                "modules": [
                  {
                    "headers": {
                      "append": [],
                      "appendFunc": {},
                      "appendFuncWeak": {},
                      "appendWeak": [],
                      "copy": [],
                      "copyWeak": [],
                      "create": [],
                      "createFunc": {
                        "X-Real-IP": "realip"
                      },
                      "createFuncWeak": {},
                      "createWeak": [
                        {
                          "key": "Host",
                          "value": "clownductor.taxi.tst.yandex.net"
                        }
                      ],
                      "delete": ""
                    },
                    "modules": []
                  },
                  {
                    "modules": [],
                    "shared": {
                      "uuid": "backends"
                    }
                  },
                  {
                    "balancer2": {
                      "active": {
                        "delay": "2s",
                        "request": "GET /ping HTTP/1.1\\nHost: clownductor.taxi.tst.yandex.net\\nUser-agent: l7-balancer\\n\\n"
                      },
                      "activeSkipAttempts": 0,
                      "attempts": 1,
                      "attemptsFile": "",
                      "backends": [],
                      "balancingPolicy": {
                        "uniquePolicy": {}
                      },
                      "fConnectionAttempts": {
                        "countBackendsParams": {},
                        "type": "COUNT_BACKENDS"
                      },
                      "generatedProxyBackends": {
                        "endpointSets": [],
                        "gencfgGroups": [],
                        "ignoreDuplicates": false,
                        "includeBackends": {
                          "ids": [
                            "taxi_clownductor_testing_default"
                          ],
                          "type": "BY_ID"
                        },
                        "instances": [],
                        "nannySnapshots": [],
                        "proxyOptions": {
                          "allowConnectionUpgrade": false,
                          "allowConnectionUpgradeWithoutConnectionHeader": false,
                          "backendReadTimeout": "",
                          "backendTimeout": "60s",
                          "backendWriteTimeout": "",
                          "buffering": false,
                          "clientReadTimeout": "",
                          "clientWriteTimeout": "",
                          "connectTimeout": "70ms",
                          "deprecatedFailOn5xx": false,
                          "deprecatedFailOnEmptyReply": false,
                          "deprecatedHttpBackend": false,
                          "failOn5xx": false,
                          "keepaliveCount": 1,
                          "keepaliveTimeout": "60s",
                          "resolveTimeout": "",
                          "statusCodeBlacklist": [],
                          "statusCodeBlacklistExceptions": [],
                          "switchedBackendTimeout": "",
                          "watchClientClose": false
                        }
                      },
                      "hedgedDelay": "",
                      "onError": {
                        "errordocument": {
                          "base64": "",
                          "content": "Service unavailable",
                          "file": "",
                          "forceConnClose": false,
                          "remainHeaders": "",
                          "status": 504
                        },
                        "modules": []
                      },
                      "onStatusCode": [],
                      "returnLast5xx": false,
                      "rewindLimit": 0,
                      "statusCodeBlacklist": [],
                      "statusCodeBlacklistExceptions": []
                    },
                    "modules": []
                  }
                ]
              }
            }
          },
          "mode": "FULL_MODE",
          "yaml": "\n---\nregexp_section:\n  matcher: {}\n  modules:\n    - headers:\n        create_weak:\n          Host: clownductor.taxi.tst.yandex.net\n        create_func:\n          X-Real-IP: realip\n    - shared:\n        uuid: 'backends'\n    - balancer2:\n        connection_attempts: !f count_backends()\n        attempts: 1\n        unique_policy: {}\n        active:\n          delay: '2s'\n          request: 'GET /ping HTTP/1.1\\nHost: clownductor.taxi.tst.yandex.net\\nUser-agent: l7-balancer\\n\\n'  # noqa: E501\n        generated_proxy_backends:\n          proxy_options:\n            backend_timeout: 60s\n            connect_timeout: 70ms\n            keepalive_count: 1\n            keepalive_timeout: 60s\n            fail_on_5xx: false\n          include_backends:\n            type: BY_ID\n            ids: [taxi_clownductor_testing]\n        on_error:\n          errordocument:\n            status: 504\n            content: \"Service unavailable\""
        }
      },
      "statuses": [
        {
          "active": {
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_man": {
              "message": "",
              "reason": "",
              "status": "True"
            },
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_sas": {
              "message": "",
              "reason": "",
              "status": "True"
            }
          },
          "ctime": "2021-01-26T17:15:58.978936Z",
          "id": "04a8928f-45d8-43b0-8866-82e2d3dff6f3",
          "inProgress": {
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_man": {
              "message": "",
              "meta": {
                "nannyStaticFile": {
                  "snapshots": []
                },
                "type": "NANNY_STATIC_FILE"
              },
              "reason": "",
              "status": "False"
            },
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_sas": {
              "message": "",
              "meta": {
                "nannyStaticFile": {
                  "snapshots": []
                },
                "type": "NANNY_STATIC_FILE"
              },
              "reason": "",
              "status": "False"
            }
          },
          "validated": {
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_man": {
              "message": "",
              "reason": "",
              "status": "True"
            },
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_sas": {
              "message": "",
              "reason": "",
              "status": "True"
            }
          }
        }
      ]
    },
    {
      "meta": {
        "annotations": {},
        "auth": {
          "staff": {
            "owners": {
              "groupIds": [
                "50889"
              ],
              "logins": [
                "robot-taxi-clown",
                "eatroshkin",
                "glush",
                "sgrebenyukov",
                "nikkraev",
                "broom",
                "oxcd8o",
                "sokogen",
                "nikslim",
                "isharov",
                "nanny-robot"
              ]
            }
          },
          "type": "STAFF"
        },
        "author": "robot-taxi-clown",
        "comment": "-",
        "ctime": "2021-01-26T16:47:10.907276Z",
        "generation": "1",
        "id": "testing-upstream",
        "mtime": "2021-01-26T17:15:58.978936Z",
        "namespaceId": "clownductor.taxi.tst.yandex.net",
        "version": "04a8928f-45d8-43b0-8866-82e2d3dff6f3"
      },
      "spec": {
        "deleted": false,
        "labels": {
          "order": "99999999"
        },
        "type": "YANDEX_BALANCER",
        "yandexBalancer": {
          "config": {
            "modules": [],
            "regexpSection": {
              "matcher": {
                "matchAnd": [],
                "matchOr": []
              },
              "nested": {
                "modules": [
                  {
                    "headers": {
                      "append": [],
                      "appendFunc": {},
                      "appendFuncWeak": {},
                      "appendWeak": [],
                      "copy": [],
                      "copyWeak": [],
                      "create": [],
                      "createFunc": {
                        "X-Real-IP": "realip"
                      },
                      "createFuncWeak": {},
                      "createWeak": [
                        {
                          "key": "Host",
                          "value": "clownductor.taxi.tst.yandex.net"
                        }
                      ],
                      "delete": ""
                    },
                    "modules": []
                  },
                  {
                    "modules": [],
                    "shared": {
                      "uuid": "backends"
                    }
                  },
                  {
                    "balancer2": {
                      "active": {
                        "delay": "2s",
                        "request": "GET /ping HTTP/1.1\\nHost: clownductor.taxi.tst.yandex.net\\nUser-agent: l7-balancer\\n\\n"
                      },
                      "activeSkipAttempts": 0,
                      "attempts": 1,
                      "attemptsFile": "",
                      "backends": [],
                      "balancingPolicy": {
                        "uniquePolicy": {}
                      },
                      "fConnectionAttempts": {
                        "countBackendsParams": {},
                        "type": "COUNT_BACKENDS"
                      },
                      "generatedProxyBackends": {
                        "endpointSets": [],
                        "gencfgGroups": [],
                        "ignoreDuplicates": false,
                        "includeBackends": {
                          "ids": [
                            "taxi_clownductor_testing"
                          ],
                          "type": "BY_ID"
                        },
                        "instances": [],
                        "nannySnapshots": [],
                        "proxyOptions": {
                          "allowConnectionUpgrade": false,
                          "allowConnectionUpgradeWithoutConnectionHeader": false,
                          "backendReadTimeout": "",
                          "backendTimeout": "60s",
                          "backendWriteTimeout": "",
                          "buffering": false,
                          "clientReadTimeout": "",
                          "clientWriteTimeout": "",
                          "connectTimeout": "70ms",
                          "deprecatedFailOn5xx": false,
                          "deprecatedFailOnEmptyReply": false,
                          "deprecatedHttpBackend": false,
                          "failOn5xx": false,
                          "keepaliveCount": 1,
                          "keepaliveTimeout": "60s",
                          "resolveTimeout": "",
                          "statusCodeBlacklist": [],
                          "statusCodeBlacklistExceptions": [],
                          "switchedBackendTimeout": "",
                          "watchClientClose": false
                        }
                      },
                      "hedgedDelay": "",
                      "onError": {
                        "errordocument": {
                          "base64": "",
                          "content": "Service unavailable",
                          "file": "",
                          "forceConnClose": false,
                          "remainHeaders": "",
                          "status": 504
                        },
                        "modules": []
                      },
                      "onStatusCode": [],
                      "returnLast5xx": false,
                      "rewindLimit": 0,
                      "statusCodeBlacklist": [],
                      "statusCodeBlacklistExceptions": []
                    },
                    "modules": []
                  }
                ]
              }
            }
          },
          "mode": "FULL_MODE",
          "yaml": "\n---\nregexp_section:\n  matcher: {}\n  modules:\n    - headers:\n        create_weak:\n          Host: clownductor.taxi.tst.yandex.net\n        create_func:\n          X-Real-IP: realip\n    - shared:\n        uuid: 'backends'\n    - balancer2:\n        connection_attempts: !f count_backends()\n        attempts: 1\n        unique_policy: {}\n        active:\n          delay: '2s'\n          request: 'GET /ping HTTP/1.1\\nHost: clownductor.taxi.tst.yandex.net\\nUser-agent: l7-balancer\\n\\n'  # noqa: E501\n        generated_proxy_backends:\n          proxy_options:\n            backend_timeout: 60s\n            connect_timeout: 70ms\n            keepalive_count: 1\n            keepalive_timeout: 60s\n            fail_on_5xx: false\n          include_backends:\n            type: BY_ID\n            ids: [taxi_clownductor_testing]\n        on_error:\n          errordocument:\n            status: 504\n            content: \"Service unavailable\""
        }
      },
      "statuses": [
        {
          "active": {
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_man": {
              "message": "",
              "reason": "",
              "status": "True"
            },
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_sas": {
              "message": "",
              "reason": "",
              "status": "True"
            }
          },
          "ctime": "2021-01-26T17:15:58.978936Z",
          "id": "04a8928f-45d8-43b0-8866-82e2d3dff6f3",
          "inProgress": {
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_man": {
              "message": "",
              "meta": {
                "nannyStaticFile": {
                  "snapshots": []
                },
                "type": "NANNY_STATIC_FILE"
              },
              "reason": "",
              "status": "False"
            },
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_sas": {
              "message": "",
              "meta": {
                "nannyStaticFile": {
                  "snapshots": []
                },
                "type": "NANNY_STATIC_FILE"
              },
              "reason": "",
              "status": "False"
            }
          },
          "validated": {
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_man": {
              "message": "",
              "reason": "",
              "status": "True"
            },
            "clownductor.taxi.tst.yandex.net:clownductor.taxi.tst.yandex.net_sas": {
              "message": "",
              "reason": "",
              "status": "True"
            }
          }
        }
      ]
    }
  ]
}

{
  "bank_h2h_resp": {
    "/h2h/v1/get_document_details": [
      {
        "json": {
          "response": {
            "status_info": {
              "instruction_statuses": [
                {
                  "instruction_id": "0",
                  "original_money": {
                    "amount": "1500.25",
                    "currency": "RUB"
                  },
                  "status": "FINISHED",
                  "status_history": [
                    {
                      "date": "2022-07-08",
                      "new_status": "FINISHED"
                    }
                  ],
                  "taken_money": {
                    "amount": "100.15",
                    "currency": "RUB"
                  }
                }
              ]
            }
          },
          "response_jwt": ""
        },
        "status": 200
      }
    ],
    "/h2h/v1/process_document": [
      {
        "json": {
          "response": {
            "status_info": {
              "instruction_statuses": []
            }
          },
          "response_jwt": ""
        },
        "status": 200
      }
    ]
  },
  "billing_replication_resp": {
    "/v2/contract/by_id/": [
      {
        "json": {
          "DT": "2019-03-15",
          "EXTERNAL_ID": "ОФ-123456/12",
          "ID": null,
          "YANDEX_BANK_ACCOUNT_ID": null,
          "YANDEX_BANK_ENABLED": 1,
          "YANDEX_BANK_WALLET_ID": "some wallet id",
          "YANDEX_BANK_WALLET_PAY": 1,
          "client_id": "1234343"
        },
        "status": 200
      }
    ]
  },
  "expected_bank_document": {
    "document_id": "1/4",
    "instructions": [
      {
        "additional_attributes": {
          "pro_category_id": "PAYMENT_ORDER",
          "pro_order_id": "6d5144addb183c86acee401124cb2c1f"
        },
        "creditor": {
          "accessor": {
            "type": "EXTERNAL_WALLET_ID",
            "value": "some wallet id"
          }
        },
        "debtor": {
          "accessor": {
            "type": "ACCOUNT_NUMBER",
            "value": "40700000000000000000"
          }
        },
        "instruction_id": "0",
        "money": {
          "amount": "1400.10",
          "currency": "RUB"
        },
        "payment_type": "PAYMENT_ORDER",
        "purpose_of_payment": "Опл.по Дог. ОФ-123456/12 от 2019-03-15 1400.10 руб",
        "settlement_date": "2022-06-01",
        "statement_attributes": {
          "contract": "3697999",
          "guid": "1/4"
        },
        "type": "business.credit.001"
      }
    ]
  },
  "expected_bank_document_details_request": {
    "document_id": "1/1"
  },
  "expected_payment_event_log": [
    {
      "amount": "1500.25",
      "amount_applied": "0.00",
      "external_payment_id": null,
      "id": 1,
      "idempotency_key": "NEW",
      "payment_id": 1,
      "status": "NEW",
      "updates": {
        "payment_group": "PAYMENT",
        "pro_payload": {
          "pro_category_id": "PAYMENT_ORDER",
          "pro_order_id": "6d5144addb183c86acee401124cb2c1f"
        }
      }
    },
    {
      "amount": "1500.25",
      "amount_applied": "0.00",
      "external_payment_id": "1/1",
      "id": 2,
      "idempotency_key": "1/1/SENT_TO_BANK",
      "payment_id": 1,
      "status": "SENT_TO_BANK",
      "updates": {
        "bank_response": {}
      }
    },
    {
      "amount": "1500.25",
      "amount_applied": "100.15",
      "external_payment_id": "1/1",
      "id": 3,
      "idempotency_key": "1/1/PARTIALLY_COMPLETED",
      "payment_id": 1,
      "status": "PARTIALLY_COMPLETED",
      "updates": {
        "document_status_info": {
          "instruction_statuses": [
            {
              "instruction_id": "0",
              "original_money": {
                "amount": "1500.25",
                "currency": "RUB"
              },
              "status": "FINISHED",
              "status_history": [
                {
                  "date": "2022-07-08",
                  "new_status": "FINISHED"
                }
              ],
              "taken_money": {
                "amount": "100.15",
                "currency": "RUB"
              }
            }
          ]
        }
      }
    },
    {
      "amount": "1400.10",
      "amount_applied": "0.00",
      "external_payment_id": null,
      "id": 4,
      "idempotency_key": "1/1/PREPARED_TO_RESEND",
      "payment_id": 1,
      "status": "PREPARED_TO_RESEND",
      "updates": {}
    },
    {
      "amount": "1400.10",
      "amount_applied": "0.00",
      "external_payment_id": "1/4",
      "id": 5,
      "idempotency_key": "1/4/SENT_TO_BANK",
      "payment_id": 1,
      "status": "SENT_TO_BANK",
      "updates": {
        "bank_response": {
          "status_info": {
            "instruction_statuses": []
          }
        }
      }
    }
  ],
  "expected_stq_calls": [
    {
      "args": null,
      "eta": "2022-06-01T00:00:00.000000+00:00",
      "kwargs": null,
      "task_id": "1"
    }
  ]
}

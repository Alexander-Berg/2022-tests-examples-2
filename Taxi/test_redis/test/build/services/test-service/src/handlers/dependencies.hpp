/* THIS FILE IS AUTOGENERATED, DON'T EDIT! */

#pragma once

#include <memory>
#include <type_traits>

#include <userver/components/component_fwd.hpp>
#include <userver/concurrent/background_task_storage_fwd.hpp>
#include <userver/dynamic_config/source.hpp>
#include <userver/utils/statistics/metrics_storage_fwd.hpp>

#include <codegen/impl/caches.hpp>
#include <custom/dependencies.hpp>
#include <userver/storages/redis/component.hpp>

namespace handlers {

struct Dependencies final {
  dynamic_config::Snapshot config;
  utils::statistics::MetricsStoragePtr metrics;
  concurrent::BackgroundTaskStorage& bts;
  custom::Dependencies::Extra extra;

  std::shared_ptr<storages::redis::Client> redis_db1;
  std::shared_ptr<storages::redis::Client> redis_db2;
  std::shared_ptr<storages::redis::Client> redis_db3;
};

class DependenciesFactory final {
 public:
  DependenciesFactory(const components::ComponentConfig&,
                      const components::ComponentContext&);
  ~DependenciesFactory();

  Dependencies GetDependencies() const;

 private:
  const dynamic_config::Source config_source_;
  utils::statistics::MetricsStoragePtr metrics_storage_;
  mutable concurrent::BackgroundTaskStorageFastPimpl bts_;
  custom::Dependencies custom_dependencies_;
  std::shared_ptr<storages::redis::Client> redis_db1_;
  std::shared_ptr<storages::redis::Client> redis_db2_;
  std::shared_ptr<storages::redis::Client> redis_db3_;
};

}  // namespace handlers

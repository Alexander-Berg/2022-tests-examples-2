{
  "doc": {
    "$Doc": {
      "data": {
        "$Data": {
          "active_contracts": [
            {
              "currency": "RUB",
              "firm_id": 42,
              "id": 1,
              "target": "oebs"
            }
          ],
          "agreement": {
            "ref": "subscription/doc_id/12011990",
            "rule_data": {
              "counter": "A",
              "currency": "RUB",
              "rule_id": "2d8e0d52-1767-402d-a572-3976bbcb29a9",
              "steps": [
                {
                  "amount": "100.0000",
                  "nrides": 10
                }
              ],
              "type": "goal"
            }
          },
          "antifraud": {
            "antifraud_id": "some_antifraud_id",
            "decision": "pay"
          },
          "contract": {
            "currency": "RUB",
            "firm_id": 42,
            "id": 1,
            "service_id": 111,
            "target": "oebs"
          },
          "contract_payment": {
            "contract_id": 1,
            "currency_rate": "0.001",
            "donate_multiplier": "1.06",
            "is_netting": false,
            "service_id": 111,
            "value": {
              "amount": "6",
              "currency": "USD"
            }
          },
          "driver": {
            "billing_client_id": "some_billing_client_id",
            "clid": "some_clid",
            "driver_license_personal_id": "some_driver_license_personal_id",
            "driver_profile_id": "some_driver_profile_id",
            "park_id": "some_park_id",
            "unique_driver_id": "some_unique_driver_id"
          },
          "pay_per_contract": "yes",
          "payment": {
            "amount": "100",
            "amount_per_contract": "80",
            "step_nrides": 10
          },
          "payment_meta": {
            "budget_id": "some_budget_id",
            "city_id": "MSK",
            "country_code": "rus",
            "oebs_mvp_id": "MSKc",
            "payment_ref": "some_payment_ref",
            "service_to_contract": {
              "111": 1,
              "128": 1
            },
            "subvention_ref": "some_subvention_ref",
            "tariff_class": "econom",
            "tariff_zone": "moscow",
            "time_zone": "Europe/Moscow"
          },
          "shift": {
            "duration_in_days": 7,
            "end": "2020-07-05T21:00:00.000000+00:00",
            "start": "2020-06-28T21:00:00.000000+00:00"
          },
          "version": 1
        }
      },
      "entry_ids": [],
      "event_at": {
        "$datetime": "1991-06-18T07:15:00+03:00"
      },
      "external_ref": "some_external_ref_idk",
      "id": 18061991,
      "kind": "taxi_goal_shift",
      "process_at": {
        "$datetime": "1991-06-18T07:15:00+03:00"
      },
      "revision": 1,
      "status": "create_payment_entries",
      "topic": "some_topic_idk"
    }
  },
  "expected_journal_repo_type": {
    "$type": "billing.accounts._billing_accounts.BillingJournal"
  },
  "expected_query": {
    "$load_py_json": "_expected_per_contract_query.json"
  }
}

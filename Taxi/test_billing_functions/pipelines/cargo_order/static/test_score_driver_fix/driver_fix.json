{
  "cargo_order": {
    "$Doc": {
      "data": {
        "contracts": {
          "items": [
            {
              "currency": "USD",
              "id": 1
            }
          ],
          "service_to_contract": {
            "137": 1
          }
        },
        "driver": {
          "activity_points": 50,
          "available_tariff_classes": [
            "selfdriving",
            "econom",
            "business"
          ],
          "billing_client_id": "100500",
          "clid": "some_clid",
          "driver_license_personal_id": "some_driver_license_personal_id",
          "driver_profile_id": "some_driver_profile_id",
          "park_id": "some_park_id",
          "profile_payment_type_restrictions": "none",
          "unique_driver_id": "some_uniq_driver_id"
        },
        "driver_mode": {
          "additional_profile_tags": [
            "some_additional_tag"
          ],
          "mode": "driver_fix",
          "subscription": {
            "doc_id": 12345678,
            "rule_id": "_id/some_rule_id",
            "shift_close_time": "00:00:00+03:00",
            "start": "2020-01-01T00:00:00.000000+03:00"
          }
        },
        "order_info": {
          "billing_at": "2022-04-01T10:00:00.000000+03:00",
          "city_id": "Москва",
          "claims": [
            {
              "taxi_alias_id": "some_alias_id_1",
              "taxi_order_id": "some_order_id_1"
            },
            {
              "taxi_alias_id": "some_alias_id_2",
              "taxi_order_id": "some_order_id_2"
            }
          ],
          "completed_at": "2022-04-01T11:00:00.000000+03:00",
          "due": "2022-04-01T00:00:00+03:00",
          "has_lightbox": false,
          "has_sticker": false,
          "id": "28e560e5a7c26a6bbc3ba9b73ab9657a",
          "is_cargo": false,
          "need_dispatcher_acceptance": false,
          "oebs_mvp_id": "MSKc",
          "payment_type": "card",
          "started_at": "2022-04-01T09:00:00.000000+03:00",
          "status": "finished",
          "subvention_geoareas": [
            "msk-iter4-pol4",
            "msk-polyinpoly-test"
          ],
          "tags": [],
          "tariff_class": "business",
          "taxi_status": "complete",
          "time_zone": "Europe/Moscow",
          "zone_name": "moscow"
        },
        "version": 1
      },
      "entry_ids": [],
      "event_at": {
        "$datetime": "2022-04-01T00:00:00.000000+03:00"
      },
      "external_ref": "1",
      "id": 1234567890,
      "kind": "cargo_order",
      "process_at": {
        "$datetime": "2022-04-01T00:00:00.000000+03:00"
      },
      "revision": 1,
      "status": "score_driver_fix",
      "topic": "taxi/alias_id/902fe475af72677caea7b8f49db06905"
    }
  },
  "expected_query": {
    "$Query": {
      "driver": {
        "$Driver": {
          "clid": "some_clid",
          "driver_profile_id": "some_driver_profile_id",
          "park_id": "some_park_id",
          "unique_driver_id": "some_uniq_driver_id"
        }
      },
      "driver_fix_subscription": {
        "$Subscription": {
          "doc_id": 12345678,
          "rule_id": "_id/some_rule_id",
          "shift_close_time": "00:00:00+03:00",
          "start": {
            "$datetime": "2019-12-31T21:00:00.000000+00:00"
          }
        }
      },
      "max_order_age_to_open_shift": {
        "$timedelta": {
          "hours": 1
        }
      },
      "now": {
        "$datetime": "2020-12-22T08:48:39.046000+00:00"
      },
      "order": {
        "$Order": {
          "accepted_by_driver_at": {
            "$datetime": "2022-04-01T07:00:00.000000+00:00"
          },
          "closed_without_accept": false,
          "completed_at": {
            "$datetime": "2022-04-01T08:00:00.000000+00:00"
          },
          "cost": {
            "$decimal": "0"
          },
          "cost_for_driver": null,
          "coupon_value": null,
          "discount_value": null,
          "is_amended": false,
          "need_dispatcher_acceptance": false,
          "park_corp_vat": null,
          "payment_type": {
            "$payment_type": "card"
          },
          "started_at": {
            "$datetime": "2022-04-01T06:00:00.000000+00:00"
          },
          "status": "finished",
          "taxi_status": "complete",
          "time_zone": "Europe/Moscow"
        }
      }
    }
  },
  "expected_results": {
    "$DriverFix": {
      "agreement_id": "agreement_id",
      "balances_change": {
        "$BalancesChange": {
          "coupon": "0",
          "discount": "0",
          "guarantee": "0",
          "income": "0",
          "intervals": [],
          "minutes_on_order": "0"
        }
      },
      "shift_ended_doc_id": 12345
    }
  }
}

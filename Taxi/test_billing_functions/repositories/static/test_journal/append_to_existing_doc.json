{
  "existing_doc": {
    "$Doc": {
      "data": {
        "entries": [
          {
            "account_id": 1,
            "amount": "100",
            "created": "2021-06-18T00:00:00.000000+00:00",
            "details": {},
            "doc_ref": 111111,
            "event_at": "2021-06-18T07:15:00.000000+00:00",
            "id": 1,
            "idempotency_key": "this_idempotency_key"
          },
          {
            "account_id": 2,
            "amount": "100",
            "created": "2021-06-18T00:00:00.000000+00:00",
            "details": {},
            "doc_ref": 111111,
            "event_at": "2021-06-18T07:15:00.000000+00:00",
            "id": 2,
            "idempotency_key": "that_idempotency_key"
          }
        ]
      },
      "entry_ids": [],
      "event_at": {
        "$datetime": "2021-06-18T00:00:00+00:00"
      },
      "external_ref": "#",
      "id": 1,
      "kind": "taxi_order_journal",
      "process_at": {
        "$datetime": "2021-06-18T00:00:00+00:00"
      },
      "revision": 1,
      "status": "complete",
      "topic": "alias_id"
    }
  },
  "expected_doc": {
    "$Doc": {
      "data": {
        "entries": [
          {
            "account_id": 1,
            "amount": "100",
            "created": "2021-06-18T00:00:00.000000+00:00",
            "details": {},
            "doc_ref": 111111,
            "event_at": "2021-06-18T07:15:00.000000+00:00",
            "id": 1,
            "idempotency_key": "this_idempotency_key"
          },
          {
            "account_id": 2,
            "amount": "100",
            "created": "2021-06-18T00:00:00.000000+00:00",
            "details": {},
            "doc_ref": 111111,
            "event_at": "2021-06-18T07:15:00.000000+00:00",
            "id": 2,
            "idempotency_key": "that_idempotency_key"
          },
          {
            "account_id": 2,
            "amount": "100",
            "created": "2021-06-18T00:00:00.000000+00:00",
            "details": {},
            "doc_ref": 111112,
            "event_at": "2021-06-18T07:15:00.000000+00:00",
            "id": 3,
            "idempotency_key": "other_idempotency_key"
          }
        ]
      },
      "entry_ids": [],
      "event_at": {
        "$datetime": "2021-06-18T00:00:00+00:00"
      },
      "external_ref": "#",
      "id": 1,
      "kind": "taxi_order_journal",
      "process_at": {
        "$datetime": "2021-06-18T00:00:00+00:00"
      },
      "revision": 2,
      "status": "complete",
      "topic": "alias_id"
    }
  },
  "expected_result": [
    {
      "$AppendedEntry": {
        "account_id": 2,
        "amount": {
          "$decimal": "100"
        },
        "created": {
          "$datetime": "2021-06-18T00:00:00+00:00"
        },
        "details": {},
        "doc_ref": 111112,
        "event_at": {
          "$datetime": "2021-06-18T07:15:00+00:00"
        },
        "id": 3,
        "idempotency_key": "other_idempotency_key"
      }
    }
  ],
  "request": [
    {
      "$CreateEntryRequest": {
        "account_id": 2,
        "amount": {
          "$decimal": "100"
        },
        "details": {},
        "doc_ref": 111112,
        "event_at": {
          "$datetime": "2021-06-18T07:15:00+00:00"
        },
        "idempotency_key": "other_idempotency_key"
      }
    }
  ]
}

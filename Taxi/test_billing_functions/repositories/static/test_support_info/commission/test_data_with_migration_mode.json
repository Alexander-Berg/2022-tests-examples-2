{
  "config_variables": {
    "BILLING_FUNCTIONS_CREATE_COMMISSION_SUPPORT_INFO_DOC": true
  },
  "expected": {
    "doc_id": 5000,
    "docs": [
      {
        "data": {
          "support_info": {
            "data": {
              "agreements": [
                {
                  "data": {
                    "commission": {
                      "calculations": [
                        {
                          "args": [
                            {
                              "amount": "1.62",
                              "currency": "USD"
                            }
                          ],
                          "op": "set",
                          "reason": "set_from_mul_cost_by_rate",
                          "value": {
                            "amount": "1.62",
                            "currency": "USD"
                          }
                        }
                      ],
                      "value": {
                        "amount": "1.62",
                        "currency": "USD"
                      }
                    },
                    "contract_id": "call_center_id",
                    "cost": {
                      "calculations": [
                        {
                          "args": [
                            {
                              "amount": "100",
                              "currency": "USD"
                            }
                          ],
                          "op": "set",
                          "reason": "set_from_cost_for_client",
                          "value": {
                            "amount": "100",
                            "currency": "USD"
                          }
                        }
                      ],
                      "value": {
                        "amount": "100",
                        "currency": "USD"
                      }
                    },
                    "vat": {
                      "calculations": [
                        {
                          "args": [
                            {
                              "amount": "0.32",
                              "currency": "USD"
                            }
                          ],
                          "op": "set",
                          "reason": "set_from_mul_by_vat_rate",
                          "value": {
                            "amount": "0.32",
                            "currency": "USD"
                          }
                        }
                      ],
                      "value": {
                        "amount": "0.32",
                        "currency": "USD"
                      }
                    },
                    "vat_rate": {
                      "calculations": [
                        {
                          "args": [
                            {
                              "amount": "1.2",
                              "currency": "XXX"
                            }
                          ],
                          "op": "set",
                          "reason": "set_from_contract_rate",
                          "value": {
                            "amount": "1.2",
                            "currency": "XXX"
                          }
                        }
                      ],
                      "value": {
                        "amount": "1.2",
                        "currency": "XXX"
                      }
                    }
                  },
                  "kind": "call_center"
                },
                {
                  "data": {
                    "commission": {
                      "calculations": [
                        {
                          "args": [
                            {
                              "amount": "2.00",
                              "currency": "USD"
                            }
                          ],
                          "op": "set",
                          "reason": "set_from_mul_cost_by_rate",
                          "value": {
                            "amount": "2.00",
                            "currency": "USD"
                          }
                        }
                      ],
                      "value": {
                        "amount": "2.00",
                        "currency": "USD"
                      }
                    },
                    "contract_id": "acquiring_id",
                    "cost": {
                      "calculations": [
                        {
                          "args": [
                            {
                              "amount": "100",
                              "currency": "USD"
                            }
                          ],
                          "op": "set",
                          "reason": "set_from_park_ride_sum",
                          "value": {
                            "amount": "100",
                            "currency": "USD"
                          }
                        }
                      ],
                      "value": {
                        "amount": "100",
                        "currency": "USD"
                      }
                    },
                    "vat": {
                      "calculations": [
                        {
                          "args": [
                            {
                              "amount": "0.00",
                              "currency": "USD"
                            }
                          ],
                          "op": "set",
                          "reason": "set_from_mul_by_vat_rate",
                          "value": {
                            "amount": "0.00",
                            "currency": "USD"
                          }
                        }
                      ],
                      "value": {
                        "amount": "0.00",
                        "currency": "USD"
                      }
                    },
                    "vat_rate": {
                      "calculations": [
                        {
                          "args": [
                            {
                              "amount": "1.00",
                              "currency": "XXX"
                            }
                          ],
                          "op": "set",
                          "reason": "set_from_contract_rate",
                          "value": {
                            "amount": "1.00",
                            "currency": "XXX"
                          }
                        }
                      ],
                      "value": {
                        "amount": "1.00",
                        "currency": "XXX"
                      }
                    }
                  },
                  "kind": "acquiring"
                }
              ],
              "search_params": {
                "due": "2021-01-01T03:00:00+03:00",
                "payment_type": "applepay",
                "tags": [
                  "some_tag"
                ],
                "tariff_class": "some_tariff_class",
                "zone_name": "some_zone_name"
              }
            },
            "kind": "taxi/v1/order/commission"
          }
        },
        "event_at": "2021-01-01T00:00:00+00:00",
        "external_event_ref": "1/taxi/v1/order/commission",
        "external_obj_id": "support_info/alias_id/some_alias_id",
        "journal_entries": [],
        "kind": "support_info",
        "process_at": "2021-01-01T00:00:00+00:00",
        "service": "billing-functions",
        "status": "complete",
        "tags": []
      }
    ]
  },
  "query": {
    "$load_py_json": "commission/_query_with_enabled_migration_mode.json"
  }
}

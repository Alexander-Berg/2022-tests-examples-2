{
  "expected_match_requests": [
    {
      "activity_points": 50,
      "geoareas": [
        "ga"
      ],
      "geonode": "a/b/c",
      "has_lightbox": true,
      "has_sticker": true,
      "reference_time": "2021-01-01T03:00:00+03:00",
      "tags": [
        "tag"
      ],
      "tariff_class": "econom",
      "timezone": "Europe/Moscow",
      "unique_driver_id": "000000000000000000000000",
      "zone": "moscow"
    }
  ],
  "expected_rules": [
    {
      "$SingleRideRule": {
        "amount": {
          "$decimal": "100"
        },
        "budget_id": "budget1",
        "id": "id1",
        "is_geo": false
      }
    },
    {
      "$GoalRule": {
        "budget_id": "budget2",
        "counter": "counter",
        "currency": "RUB",
        "id": "id2",
        "is_personal": false,
        "steps": [
          {
            "$GoalRuleStep": {
              "amount": {
                "$decimal": "100"
              },
              "nrides": 2
            }
          }
        ],
        "window": {
          "$GoalRuleWindow": {
            "end": {
              "$datetime": "2021-01-02T00:00:00+00:00"
            },
            "number": 1,
            "size": 2,
            "start": {
              "$datetime": "2021-01-01T00:00:00+00:00"
            }
          }
        }
      }
    },
    {
      "$SingleOnTopRule": {
        "amount": {
          "$decimal": "500"
        },
        "budget_id": "budget3",
        "id": "id3",
        "is_geo": true
      }
    }
  ],
  "match_responses": [
    {
      "matches": [
        {
          "amount": "100",
          "rule": {
            "budget_id": "budget1",
            "draft_id": "did",
            "end": "2021-01-02T00:00:00+00:00",
            "id": "id1",
            "rates": [
              {
                "bonus_amount": "100",
                "start": "00:00",
                "week_day": "mon"
              }
            ],
            "rule_type": "single_ride",
            "schedule_ref": "ref_id",
            "start": "2021-01-01T00:00:00+00:00",
            "tariff_class": "econom",
            "updated_at": "2020-01-01T00:00:00+00:00",
            "zone": "moscow"
          },
          "type": "single_ride"
        },
        {
          "rule": {
            "budget_id": "budget2",
            "currency": "RUB",
            "end": "2021-01-02T00:00:00+00:00",
            "id": "id2",
            "is_personal": false,
            "start": "2021-01-01T00:00:00+00:00",
            "updated_at": "2020-01-01T00:00:00+00:00",
            "window_size": 2
          },
          "type": "goal",
          "window": {
            "counter": "counter",
            "end": "2021-01-02T00:00:00+00:00",
            "number": 1,
            "start": "2021-01-01T00:00:00+00:00",
            "steps": [
              {
                "amount": "100",
                "nrides": 2
              }
            ]
          }
        },
        {
          "amount": "500",
          "rule": {
            "budget_id": "budget3",
            "end": "2021-01-02T00:00:00+00:00",
            "geoarea": "msk",
            "id": "id3",
            "start": "2021-01-01T00:00:00+00:00",
            "tariff_class": "econom",
            "zone": "moscow"
          },
          "type": "single_ontop"
        }
      ]
    }
  ],
  "query": {
    "$Query": {
      "activity_points": 50,
      "driver_zone": "moscow",
      "geoareas": [
        "ga"
      ],
      "geonode": "a/b/c",
      "has_lightbox": true,
      "has_sticker": true,
      "order_zone": "kursk",
      "profile_payment_type_restrictions": "none",
      "profile_tariff_classes": [
        "econom",
        "business"
      ],
      "reference_time": {
        "$datetime": "2021-01-01T03:00:00+03:00"
      },
      "rule_types": null,
      "tags": [
        "tag"
      ],
      "tariff_class": "econom",
      "timezone": "Europe/Moscow",
      "unique_driver_id": "000000000000000000000000"
    }
  }
}

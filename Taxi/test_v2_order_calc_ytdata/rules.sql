INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (52, 'requirements', 'Calculate price for requirements', 'CODE_52', 'both_side', 'ioann-v', 36120, 'GENERATE(L(req,B(B(fix,.,F(requirements)),.,F(simple))),I(simple_cost=0.000000),C(),U(simple_cost=B(GV(simple_cost),+,T(B(GV(req),in,B(B(fix,.,F(tariff)),.,F(requirement_prices))),B(B(B(fix,.,F(tariff)),.,F(requirement_prices)),.,GV(req)),0.000000))));GENERATE(L(req,B(B(fix,.,F(requirements)),.,F(select))),I(select_cost=0.000000),C(GENERATE(L(opt,B(GV(req),.,F(second))),I(options_cost=0.000000),C(),U(options_cost=B(GV(options_cost),+,T(B(T(B(GV(opt),.,F(independent)),B(B(B(GV(req),.,F(first)),+,"."),+,B(GV(opt),.,F(name))),B(GV(req),.,F(first))),in,B(B(fix,.,F(tariff)),.,F(requirement_prices))),B(B(B(fix,.,F(tariff)),.,F(requirement_prices)),.,T(B(GV(opt),.,F(independent)),B(B(B(GV(req),.,F(first)),+,"."),+,B(GV(opt),.,F(name))),B(GV(req),.,F(first)))),0.000000))))),U(select_cost=B(GV(select_cost),+,GV(options_cost))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(GV(simple_cost),+,GV(select_cost)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-01-10 18:23:11.5857+03', NULL, false);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (47, 'waiting', 'Ожидание в точке А', 'CODE_47', 'both_side', 'ioann-v', 36117, 'IF(B(B(B(B(ride,.,F(ride)),.,F(waiting_time)),-,B(T(U(?,B(B(fix,.,F(tariff)),.,F(transfer_prices))),B(U(*,B(B(fix,.,F(tariff)),.,F(transfer_prices))),.,F(waiting_price)),B(B(fix,.,F(tariff)),.,F(waiting_price))),.,F(free_waiting_time))),>,0.000000),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(B(B(B(ride,.,F(ride)),.,F(waiting_time)),-,B(T(U(?,B(B(fix,.,F(tariff)),.,F(transfer_prices))),B(U(*,B(B(fix,.,F(tariff)),.,F(transfer_prices))),.,F(waiting_price)),B(B(fix,.,F(tariff)),.,F(waiting_price))),.,F(free_waiting_time))),*,B(T(U(?,B(B(fix,.,F(tariff)),.,F(transfer_prices))),B(U(*,B(B(fix,.,F(tariff)),.,F(transfer_prices))),.,F(waiting_price)),B(B(fix,.,F(tariff)),.,F(waiting_price))),.,F(price_per_minute))),/,60.000000),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-01-10 16:58:10.98126+03', NULL, false);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (49, 'coupon', 'Применение купона', 'CODE_49', 'both_side', 'ioann-v', 36122, 'IF(U(?,B(fix,.,F(coupon))),E("price_before_coupon",U(*,B(ride,.,F(price))));IF(U(?,B(U(*,B(fix,.,F(coupon))),.,F(percent))),IF(U(?,B(U(*,B(fix,.,F(coupon))),.,F(limit))),CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-03-04 16:16:08.979035+03', NULL, true);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (51, 'yaplus', 'Яндекс.Плюс', 'CODE_51', 'both_side', 'ioann-v', 36119, 'IF(B(B(fix,.,F(user_data)),.,F(has_yaplus)),IF(U(?,B(B(fix,.,F(category_data)),.,F(yaplus_coeff))),CR(boarding=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting)))));CR(boarding=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting)))', '2020-03-31 19:59:22.421645+03', NULL, true);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (50, 'paid_supply', 'Платная подача', 'CODE_50', 'both_side', 'ioann-v', 36124, 'IF(U(?,B(B(fix,.,F(category_data)),.,F(disable_paid_supply))),IF(B(B(B(fix,.,F(category_data)),.,F(decoupling)),&&,U(*,B(B(fix,.,F(category_data)),.,F(disable_paid_supply)))),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))));IF(U(?,B(fix,.,F(paid_supply_price))),CR(boarding=B(B(B(ride,.,F(price)),.,F(boarding)),+,U(*,B(fix,.,F(paid_supply_price)))),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-04-08 18:51:07.504417+03', NULL, true);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (100, 'explicit_antisurge', 'Явный антисурж', 'CODE_100', 'both_side', 'ioann-v', 47450, 'IF(U(?,B(fix,.,F(discount))),IF(B(B(B(U(*,B(fix,.,F(discount))),.,F(restrictions)),.,F(max_absolute_value)),==,1000000.0),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))));IF(U(?,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),IF(B(B(B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(value)),<,B(B(fix,.,F(surge_params)),.,F(value))),&&,B(B(B(fix,.,F(surge_params)),.,F(value)),<,1.000000)),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(T(U(?,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(surcharge_alpha))),U(*,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(surcharge_alpha))),1.000000),*,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(value))),*,B(B(ride,.,F(price)),.,F(distance))),time=B(B(T(U(?,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(surcharge_alpha))),U(*,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(surcharge_alpha))),1.000000),*,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(value))),*,B(B(ride,.,F(price)),.,F(time))),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-03-27 14:08:07.244107+03', NULL, true);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (101, 'waiting_in_transit', 'Ожидание в пути', 'CODE_101', 'both_side', 'ioann-v', 47374, 'IF(B(B(B(ride,.,F(ride)),.,F(waiting_in_transit_time)),>,0.000000),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(B(ride,.,F(price)),.,F(transit_waiting)),+,B(B(B(ride,.,F(ride)),.,F(waiting_in_transit_time)),*,T(B("waiting_in_transit",in,B(B(fix,.,F(tariff)),.,F(requirement_prices))),B(B(B(fix,.,F(tariff)),.,F(requirement_prices)),.,"waiting_in_transit"),0.000000))),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-03-27 14:22:06.904244+03', NULL, true);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (106, 'coupon', 'Применение купона', 'CODE_106', 'both_side', 'ioann-v', 47603, 'IF(U(?,B(fix,.,F(coupon))),E("price_before_coupon",U(*,B(ride,.,F(price))));IF(U(?,B(U(*,B(fix,.,F(coupon))),.,F(percent))),IF(U(?,B(U(*,B(fix,.,F(coupon))),.,F(limit))),CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-03-04 16:16:08.979035+03', NULL, true);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (142, 'explicit_antisurge', 'Явный антисурж', 'CODE_142', 'both_side', 'ioann-v', 52236, 'IF(U(?,B(fix,.,F(discount))),IF(B(B(B(U(*,B(fix,.,F(discount))),.,F(restrictions)),.,F(max_absolute_value)),==,1000000.0),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))));IF(U(?,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),IF(B(B(B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(value)),<,B(B(fix,.,F(surge_params)),.,F(value))),&&,B(B(B(fix,.,F(surge_params)),.,F(value)),<,1.000000)),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(T(U(?,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(surcharge_alpha))),U(*,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(surcharge_alpha))),1.000000),*,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(value))),*,B(B(ride,.,F(price)),.,F(distance))),time=B(B(T(U(?,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(surcharge_alpha))),U(*,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(surcharge_alpha))),1.000000),*,B(U(*,B(B(fix,.,F(surge_params)),.,F(explicit_antisurge))),.,F(value))),*,B(B(ride,.,F(price)),.,F(time))),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-03-27 14:08:07.244107+03', NULL, false);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (99, 'surge', 'Применение суржа', 'CODE_99', 'both_side', 'ioann-v', 47448, 'IF(U(?,B(fix,.,F(discount))),IF(B(B(B(U(*,B(fix,.,F(discount))),.,F(restrictions)),.,F(max_absolute_value)),==,1000000.0),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))));CR(boarding=B(B(B(B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),1.000000),1.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000)),+,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000)),*,B(B(ride,.,F(price)),.,F(boarding))),+,B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge))),0.000000),0.000000))),distance=B(B(B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),1.000000),1.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000)),+,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000)),*,B(B(ride,.,F(price)),.,F(distance))),time=B(B(B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),1.000000),1.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000)),+,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000)),*,B(B(ride,.,F(price)),.,F(time))),waiting=B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000),*,B(B(ride,.,F(price)),.,F(waiting))),requirements=B(B(B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),1.000000),1.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000)),+,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000)),*,B(B(ride,.,F(price)),.,F(requirements))),transit_waiting=B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000),*,B(B(ride,.,F(price)),.,F(transit_waiting))),destination_waiting=B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000),*,B(B(ride,.,F(price)),.,F(destination_waiting))))', '2020-03-27 14:08:22.326137+03', NULL, true);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (141, 'surge', 'Применение суржа', 'CODE_141', 'both_side', 'ioann-v', 52235, 'IF(U(?,B(fix,.,F(discount))),IF(B(B(B(U(*,B(fix,.,F(discount))),.,F(restrictions)),.,F(max_absolute_value)),==,1000000.0),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))));CR(boarding=B(B(B(B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),1.000000),1.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000)),+,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000)),*,B(B(ride,.,F(price)),.,F(boarding))),+,B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge))),0.000000),0.000000))),distance=B(B(B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),1.000000),1.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000)),+,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000)),*,B(B(ride,.,F(price)),.,F(distance))),time=B(B(B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),1.000000),1.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000)),+,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000)),*,B(B(ride,.,F(price)),.,F(time))),waiting=B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000),*,B(B(ride,.,F(price)),.,F(waiting))),requirements=B(B(B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_alpha))),1.000000),1.000000),*,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000)),+,T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),T(U(?,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),U(*,B(B(fix,.,F(surge_params)),.,F(surcharge_beta))),0.000000),0.000000)),*,B(B(ride,.,F(price)),.,F(requirements))),transit_waiting=B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000),*,B(B(ride,.,F(price)),.,F(transit_waiting))),destination_waiting=B(T(B(B(B(fix,.,F(surge_params)),.,F(value)),>=,1.000000),B(B(fix,.,F(surge_params)),.,F(value)),1.000000),*,B(B(ride,.,F(price)),.,F(destination_waiting))))', '2020-03-27 14:08:22.326137+03', NULL, false);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (143, 'waiting_in_transit', 'Ожидание в пути', 'CODE_143', 'both_side', 'ioann-v', 52237, 'IF(B(B(B(ride,.,F(ride)),.,F(waiting_in_transit_time)),>,0.000000),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(B(ride,.,F(price)),.,F(transit_waiting)),+,B(B(B(ride,.,F(ride)),.,F(waiting_in_transit_time)),*,T(B("waiting_in_transit",in,B(B(fix,.,F(tariff)),.,F(requirement_prices))),B(B(B(B(fix,.,F(tariff)),.,F(requirement_prices)),.,"waiting_in_transit"),/,60.000000),0.000000))),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-03-27 14:22:06.904244+03', NULL, false);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (152, 'yaplus', 'Яндекс.Плюс', 'CODE_152', 'both_side', 'ioann-v', 53368, 'IF(B(B(fix,.,F(user_data)),.,F(has_yaplus)),IF(U(?,B(B(fix,.,F(category_data)),.,F(yaplus_coeff))),CR(boarding=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(B(U(*,B(ride,.,F(price))),*,U(*,B(B(fix,.,F(category_data)),.,F(yaplus_coeff)))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting)))));CR(boarding=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(U(*,B(ride,.,F(price))),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting)))', '2020-03-31 19:59:22.421645+03', NULL, false);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (177, 'paid_supply', 'Платная подача', 'CODE_177', 'both_side', 'ioann-v', 55193, 'IF(U(?,B(B(fix,.,F(category_data)),.,F(disable_paid_supply))),IF(B(B(B(fix,.,F(category_data)),.,F(decoupling)),&&,U(*,B(B(fix,.,F(category_data)),.,F(disable_paid_supply)))),CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))));IF(U(?,B(fix,.,F(paid_supply_price))),CR(boarding=B(B(B(ride,.,F(price)),.,F(boarding)),+,U(*,B(fix,.,F(paid_supply_price)))),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-04-08 18:51:07.504417+03', NULL, false);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (144, 'coupon', 'Применение купона', 'CODE_144', 'both_side', 'ioann-v', 52238, 'IF(U(?,B(fix,.,F(coupon))),E("price_before_coupon",U(*,B(ride,.,F(price))));IF(U(?,B(U(*,B(fix,.,F(coupon))),.,F(percent))),IF(U(?,B(U(*,B(fix,.,F(coupon))),.,F(limit))),CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-03-04 16:16:08.979035+03', NULL, true);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (178, 'coupon', 'Применение купона', 'CODE_178', 'both_side', 'ioann-v', 56425, 'IF(U(?,B(fix,.,F(coupon))),E("price_before_coupon",U(*,B(ride,.,F(price))));IF(U(?,B(U(*,B(fix,.,F(coupon))),.,F(percent))),IF(U(?,B(U(*,B(fix,.,F(coupon))),.,F(limit))),CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),>,0.000000),B(U(*,B(ride,.,F(price))),-,T(B(U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),<,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),U(*,B(U(*,B(fix,.,F(coupon))),.,F(limit))),B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(B(U(*,B(ride,.,F(price))),*,U(*,B(U(*,B(fix,.,F(coupon))),.,F(percent)))),/,100.000000)),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(boarding)),distance=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(distance)),time=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(time)),waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(waiting)),requirements=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(requirements)),transit_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(transit_waiting)),destination_waiting=B(B(B(T(B(B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),>,0.000000),B(U(*,B(ride,.,F(price))),-,B(U(*,B(fix,.,F(coupon))),.,F(value))),0.000000),/,U(*,B(ride,.,F(price)))),*,B(ride,.,F(price))),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-03-04 16:16:08.979035+03', NULL, false);
INSERT INTO price_modifications.rules (rule_id, name, description, source_code, policy, author, approvals_id, ast, updated, pmv_task_id, deleted) VALUES (179, 'requirements_multipliers', 'Требования-мультипликаторы', 'CODE_179', 'both_side', 'ioann-v', 56724, 'IF(U(?,B(B(fix,.,F(tariff)),.,F(requirement_multipliers))),GENERATE(L(req,B(B(fix,.,F(requirements)),.,F(select))),I(req_multiplier=1.000000),C(GENERATE(L(opt,B(GV(req),.,F(second))),I(options_multiplier=1.000000),C(),U(options_multiplier=B(GV(options_multiplier),*,T(B(T(B(GV(opt),.,F(independent)),B(B(B(GV(req),.,F(first)),+,"."),+,B(GV(opt),.,F(name))),B(GV(req),.,F(first))),in,U(*,B(B(fix,.,F(tariff)),.,F(requirement_multipliers)))),B(U(*,B(B(fix,.,F(tariff)),.,F(requirement_multipliers))),.,T(B(GV(opt),.,F(independent)),B(B(B(GV(req),.,F(first)),+,"."),+,B(GV(opt),.,F(name))),B(GV(req),.,F(first)))),1.000000))))),U(req_multiplier=B(GV(req_multiplier),*,GV(options_multiplier))));CR(boarding=B(B(B(ride,.,F(price)),*,GV(req_multiplier)),.,F(boarding)),distance=B(B(B(ride,.,F(price)),*,GV(req_multiplier)),.,F(distance)),time=B(B(B(ride,.,F(price)),*,GV(req_multiplier)),.,F(time)),waiting=B(B(B(ride,.,F(price)),*,GV(req_multiplier)),.,F(waiting)),requirements=B(B(B(ride,.,F(price)),*,GV(req_multiplier)),.,F(requirements)),transit_waiting=B(B(B(ride,.,F(price)),*,GV(req_multiplier)),.,F(transit_waiting)),destination_waiting=B(B(B(ride,.,F(price)),*,GV(req_multiplier)),.,F(destination_waiting))));CR(boarding=B(B(ride,.,F(price)),.,F(boarding)),distance=B(B(ride,.,F(price)),.,F(distance)),time=B(B(ride,.,F(price)),.,F(time)),waiting=B(B(ride,.,F(price)),.,F(waiting)),requirements=B(B(ride,.,F(price)),.,F(requirements)),transit_waiting=B(B(ride,.,F(price)),.,F(transit_waiting)),destination_waiting=B(B(ride,.,F(price)),.,F(destination_waiting)))', '2020-04-16 14:39:26.213024+03', NULL, false);

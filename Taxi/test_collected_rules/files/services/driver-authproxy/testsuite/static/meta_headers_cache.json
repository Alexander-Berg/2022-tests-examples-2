[
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://taximeter.yandex.rostaxi.org/driver/v1/noauth"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/driver/v1/noauth"
      },
      "variants": [
        {
          "description": "Основной вариант использования",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "X-Driver-Session",
                "required": true,
                "type": "header"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "Bearer 1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "Authorization",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Для запросов, отправляемых приложением до входа в профиль",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) без водительской сессии",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "driver_authproxy_rules",
        "prefix": "/driver/v1/noauth",
        "priority": 100,
        "rule_name": "/driver/v1/noauth"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://example.com"
      },
      "proxy": {
        "auth-type": "driver-session",
        "cookies-enabled": false,
        "proxy-401": true
      },
      "rule_type": "driver-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://taximeter.yandex.rostaxi.org/driver/v1/noauth/cookie"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/driver/v1/noauth/cookie"
      },
      "variants": [
        {
          "description": "Основной вариант использования",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "X-Driver-Session",
                "required": true,
                "type": "header"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "Bearer 1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "Authorization",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Для запросов, отправляемых приложением до входа в профиль",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) без водительской сессии",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Для запросов от webview",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent от приложения ПРО",
                "example-value": "Taximeter 9.75",
                "name": "webviewuseragent",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "webviewparkid",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "webviewparkid",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "webviewbearertoken",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией (через cookies)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Для запросов от webview, отправляемых приложением до входа в профиль",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent от приложения ПРО",
                "example-value": "Taximeter 9.75",
                "name": "webviewuseragent",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) без водительской сессии (через cookies)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "driver_authproxy_rules",
        "prefix": "/driver/v1/noauth/cookie",
        "priority": 200,
        "rule_name": "/driver/v1/noauth/cookie"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://example.com"
      },
      "proxy": {
        "auth-type": "driver-session",
        "cookies-enabled": true,
        "cookies-to-proxy": [
          "foobarcookie"
        ],
        "proxy-401": true
      },
      "rule_type": "driver-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://taximeter.yandex.rostaxi.org/driver/v1/auth"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/driver/v1/auth"
      },
      "variants": [
        {
          "description": "Основной вариант использования",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "X-Driver-Session",
                "required": true,
                "type": "header"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "Bearer 1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "Authorization",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "driver_authproxy_rules",
        "prefix": "/driver/v1/auth",
        "priority": 300,
        "rule_name": "/driver/v1/auth"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://example.com"
      },
      "proxy": {
        "auth-type": "driver-session",
        "cookies-enabled": false,
        "proxy-401": false
      },
      "rule_type": "driver-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://taximeter.yandex.rostaxi.org/driver/v1/cookie"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/driver/v1/cookie"
      },
      "variants": [
        {
          "description": "Основной вариант использования",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "X-Driver-Session",
                "required": true,
                "type": "header"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "Bearer 1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "Authorization",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Для запросов от webview",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent от приложения ПРО",
                "example-value": "Taximeter 9.75",
                "name": "webviewuseragent",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "webviewparkid",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "webviewparkid",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "webviewbearertoken",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией (через cookies)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "driver_authproxy_rules",
        "prefix": "/driver/v1/cookie",
        "priority": 400,
        "rule_name": "/driver/v1/cookie"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://example.com"
      },
      "proxy": {
        "auth-type": "driver-session",
        "cookies-enabled": true,
        "cookies-to-proxy": [
          "foobarcookie"
        ],
        "proxy-401": false
      },
      "rule_type": "driver-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://taximeter.yandex.rostaxi.org/driver/v1/passport_only"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/driver/v1/passport_only"
      },
      "variants": [
        {
          "description": "Для запросов после проверки пользователя, но до получения сессии",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "Bearer 1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "Authorization",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) без водительской сессии, но возможно с паспортным токеном",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Для запросов от webview после проверки пользователя, но до получения сессии",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent от приложения ПРО",
                "example-value": "Taximeter 9.75",
                "name": "webviewuseragent",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "webviewbearertoken",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) без водительской сессии, но возможно с паспортным токеном (через cookies)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "driver_authproxy_rules",
        "prefix": "/driver/v1/passport_only",
        "priority": 500,
        "rule_name": "/driver/v1/passport_only"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://example.com"
      },
      "proxy": {
        "auth-type": "optional-passport-only",
        "cookies-enabled": true,
        "proxy-401": false
      },
      "rule_type": "driver-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://taximeter.yandex.rostaxi.org/driver/v1/probability_percent/30_70"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/30/driver/v1/probability_percent/30_70"
      },
      "variants": [
        {
          "description": "Основной вариант использования",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "X-Driver-Session",
                "required": true,
                "type": "header"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "Bearer 1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "Authorization",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Для запросов от webview",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent от приложения ПРО",
                "example-value": "Taximeter 9.75",
                "name": "webviewuseragent",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "webviewparkid",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "webviewparkid",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "webviewbearertoken",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией (через cookies)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "driver_authproxy_rules",
        "prefix": "/driver/v1/probability_percent/30_70",
        "priority": 600,
        "probability": 30,
        "rule_name": "/driver/v1/probability_percent/30_70"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://example.com/30"
      },
      "proxy": {
        "auth-type": "driver-session",
        "cookies-enabled": true,
        "proxy-401": false
      },
      "rule_type": "driver-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://taximeter.yandex.rostaxi.org/driver/v1/probability_percent/30_70"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/70/driver/v1/probability_percent/30_70"
      },
      "variants": [
        {
          "description": "Основной вариант использования",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent",
                "example-value": "yandex-taxi/4.36.0.dev_denistimoshin_ Android/9 (Xiaomi; Redmi Note 7)",
                "name": "User-Agent",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "X-Driver-Session",
                "required": true,
                "type": "header"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "Bearer 1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "Authorization",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Для запросов от webview",
          "input_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, например \"ru\" или \"en\".\n",
                "example-value": "ru",
                "name": "Accept-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "User-Agent от приложения ПРО",
                "example-value": "Taximeter 9.75",
                "name": "webviewuseragent",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "webviewparkid",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "Токен сессии ПРО",
                "example-value": "session",
                "name": "webviewparkid",
                "required": true,
                "type": "cookie"
              },
              {
                "description": "OAuth-токен приложения.\nПаспортный токен должен иметь scope из конфига\n[DRIVER_AUTHPROXY_PASSPORT_SCOPES](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/DRIVER_AUTHPROXY_PASSPORT_SCOPES)\n",
                "example-value": "1.4044179413.2177.1652961264.1621425264357.73300.INVALIDINVALID6N.sUv_B7I4e_M0VyuR6839434-iLAy8MsdfaergSfdVv0-114Gp01xXJsdfsdfsSDFFSDFfsfd87869234V3mGXJYJtqFauEQv_De87w.s0oh1cU9qz_WKB725Ircag",
                "name": "webviewbearertoken",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от ПРО (Таксометра) с водительской сессией (через cookies)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип приложения (taximeter/uber/vezet)",
                "example-value": "taximeter",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Платформа приложения (android/ios)",
                "example-value": "android",
                "name": "X-Request-Platform",
                "required": true,
                "type": "header"
              },
              {
                "description": "Версия приложения",
                "example-value": "9.75",
                "name": "X-Request-Application-Version",
                "required": true,
                "type": "header"
              },
              {
                "description": "Тип версии приложения (production/beta/и т.п.)",
                "example-value": "production",
                "name": "X-Request-Version-Type",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id парка",
                "example-value": "park_1",
                "name": "X-YaTaxi-Park-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id профиля в парке",
                "example-value": "driver_profile_1",
                "name": "X-YaTaxi-Driver-Profile-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Id курьера Яндекс.Еды (при наличии)",
                "example-value": "courier_id_1",
                "name": "X-YaEda-CourierId",
                "required": false,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": false,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "driver_authproxy_rules",
        "prefix": "/driver/v1/probability_percent/30_70",
        "priority": 700,
        "probability": 70,
        "rule_name": "/driver/v1/probability_percent/30_70 1"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://example.com/70"
      },
      "proxy": {
        "auth-type": "driver-session",
        "cookies-enabled": true,
        "proxy-401": false
      },
      "rule_type": "driver-authproxy"
    }
  }
]

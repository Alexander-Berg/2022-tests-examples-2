[
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/apikey"
        }
      ],
      "upstream_url": {
        "url": "/apikey"
      },
      "variants": [
        {
          "description": "Запрос бэкенда",
          "input_data": {
            "parameters": [
              {
                "description": "API ключ\n",
                "example-value": "f9e71b0314dc4d23b6c0bc423cb734c9",
                "name": "X-YaTaxi-API-Key",
                "required": true,
                "type": "header"
              },
              {
                "description": "Название сервиса, запросившего ресурс\n",
                "example-value": "the-best-external-service",
                "name": "X-YaTaxi-External-Service",
                "required": true,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от бэкенда с API-ключом",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Название сервиса, запросившего ресурс\n",
                "example-value": "the-best-external-service",
                "name": "X-YaTaxi-External-Service",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/apikey",
        "priority": 100,
        "rule_name": "/apikey"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "api-key",
        "logins": [
          "some-service",
          "other-service"
        ],
        "proxy_401": false
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/apikey_no_logins"
        }
      ],
      "upstream_url": {
        "url": "/apikey_no_logins"
      },
      "variants": [
        {
          "description": "Запрос бэкенда",
          "input_data": {
            "parameters": [
              {
                "description": "API ключ\n",
                "example-value": "f9e71b0314dc4d23b6c0bc423cb734c9",
                "name": "X-YaTaxi-API-Key",
                "required": true,
                "type": "header"
              },
              {
                "description": "Название сервиса, запросившего ресурс\n",
                "example-value": "the-best-external-service",
                "name": "X-YaTaxi-External-Service",
                "required": true,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от бэкенда с API-ключом",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Название сервиса, запросившего ресурс\n",
                "example-value": "the-best-external-service",
                "name": "X-YaTaxi-External-Service",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/apikey_no_logins",
        "priority": 100,
        "rule_name": "/apikey_no_logins"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "api-key",
        "proxy_401": false
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/session"
        }
      ],
      "upstream_url": {
        "url": "/session"
      },
      "variants": [
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Сессия браузера.\n",
                "example-value": "3:1622106996.5.0.1622106996604:GiiVVxWBABINVALIDAYCKg:9.1|4053884789.0.2|348276.52732.yl_vdokwSOMESOMESOMEe9efbJE",
                "name": "Session_id",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от фронтэнда с Passport SessionId",
          "upstream_data": {
            "parameters": [
              {
                "description": "Логин пользователя из Yandex Passport",
                "example-value": "root",
                "name": "X-Yandex-Login",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": true,
                "type": "header"
              },
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              },
              {
                "description": "[TVM user ticket](https://wiki.yandex-team.ru/taxi/backend/userver/tvm/user/).\nВыписан на имя uid пользователя (default uid в тикете),\nкоторый авторизован проксей.\n",
                "example-value": "3:user:CA0Q__________9_Gg4KAggBEAEg0oXYzAQoAQ:QnebQMbHdRoF04l985knaMHBnhh5SaFE2klzWiZW4f88V2MSzZ7KhIjIewFDe6jSKB1UXY2j0tGkDPZc6_jEdDl8WBOWjKYfie8jvYi_kj5SsJQAoUcNqMzm2b-2O8h__fm79_8s_EIsWjgDssEutAFpuC0IbJFcjtsomhTMl-w",
                "name": "X-Ya-User-Ticket",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от фронтэнда с авторизационными заголовками от  exams-training-platform (Киоска)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "X-Auth-User-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Роль пользователя\n",
                "example-value": "admin",
                "name": "X-Auth-User-Role",
                "required": true,
                "type": "header"
              },
              {
                "description": "Конкатенированный набор аутентификационных заголовков\n",
                "example-value": "qwe@qwe.qwe 8Vl38f-_cVZpAIofX4W00g 5jvyzT7aOt_MbhpPuRHy5Q 1643363090 Bearer",
                "name": "X-Auth-Original",
                "required": true,
                "type": "header"
              },
              {
                "description": "Организация пользователя\n",
                "example-value": "1",
                "name": "X-Auth-Organization-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/session",
        "priority": 100,
        "rule_name": "/session"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "session-or-legacy",
        "proxy_401": false
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/legacy"
        }
      ],
      "upstream_url": {
        "url": "/legacy"
      },
      "variants": [
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Сессия браузера.\n",
                "example-value": "3:1622106996.5.0.1622106996604:GiiVVxWBABINVALIDAYCKg:9.1|4053884789.0.2|348276.52732.yl_vdokwSOMESOMESOMEe9efbJE",
                "name": "Session_id",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от фронтэнда с Passport SessionId",
          "upstream_data": {
            "parameters": [
              {
                "description": "Логин пользователя из Yandex Passport",
                "example-value": "root",
                "name": "X-Yandex-Login",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": true,
                "type": "header"
              },
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              },
              {
                "description": "[TVM user ticket](https://wiki.yandex-team.ru/taxi/backend/userver/tvm/user/).\nВыписан на имя uid пользователя (default uid в тикете),\nкоторый авторизован проксей.\n",
                "example-value": "3:user:CA0Q__________9_Gg4KAggBEAEg0oXYzAQoAQ:QnebQMbHdRoF04l985knaMHBnhh5SaFE2klzWiZW4f88V2MSzZ7KhIjIewFDe6jSKB1UXY2j0tGkDPZc6_jEdDl8WBOWjKYfie8jvYi_kj5SsJQAoUcNqMzm2b-2O8h__fm79_8s_EIsWjgDssEutAFpuC0IbJFcjtsomhTMl-w",
                "name": "X-Ya-User-Ticket",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от фронтэнда с авторизационными заголовками от  exams-training-platform (Киоска)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "X-Auth-User-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Роль пользователя\n",
                "example-value": "admin",
                "name": "X-Auth-User-Role",
                "required": true,
                "type": "header"
              },
              {
                "description": "Конкатенированный набор аутентификационных заголовков\n",
                "example-value": "qwe@qwe.qwe 8Vl38f-_cVZpAIofX4W00g 5jvyzT7aOt_MbhpPuRHy5Q 1643363090 Bearer",
                "name": "X-Auth-Original",
                "required": true,
                "type": "header"
              },
              {
                "description": "Организация пользователя\n",
                "example-value": "1",
                "name": "X-Auth-Organization-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/legacy",
        "priority": 100,
        "rule_name": "/legacy"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "session-or-legacy",
        "proxy_401": false
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/session401"
        }
      ],
      "upstream_url": {
        "url": "/session401"
      },
      "variants": [
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Сессия браузера.\n",
                "example-value": "3:1622106996.5.0.1622106996604:GiiVVxWBABINVALIDAYCKg:9.1|4053884789.0.2|348276.52732.yl_vdokwSOMESOMESOMEe9efbJE",
                "name": "Session_id",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от фронтэнда с Passport SessionId",
          "upstream_data": {
            "parameters": [
              {
                "description": "Логин пользователя из Yandex Passport",
                "example-value": "root",
                "name": "X-Yandex-Login",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": true,
                "type": "header"
              },
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              },
              {
                "description": "[TVM user ticket](https://wiki.yandex-team.ru/taxi/backend/userver/tvm/user/).\nВыписан на имя uid пользователя (default uid в тикете),\nкоторый авторизован проксей.\n",
                "example-value": "3:user:CA0Q__________9_Gg4KAggBEAEg0oXYzAQoAQ:QnebQMbHdRoF04l985knaMHBnhh5SaFE2klzWiZW4f88V2MSzZ7KhIjIewFDe6jSKB1UXY2j0tGkDPZc6_jEdDl8WBOWjKYfie8jvYi_kj5SsJQAoUcNqMzm2b-2O8h__fm79_8s_EIsWjgDssEutAFpuC0IbJFcjtsomhTMl-w",
                "name": "X-Ya-User-Ticket",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от фронтэнда с авторизационными заголовками от  exams-training-platform (Киоска)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "X-Auth-User-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Роль пользователя\n",
                "example-value": "admin",
                "name": "X-Auth-User-Role",
                "required": true,
                "type": "header"
              },
              {
                "description": "Конкатенированный набор аутентификационных заголовков\n",
                "example-value": "qwe@qwe.qwe 8Vl38f-_cVZpAIofX4W00g 5jvyzT7aOt_MbhpPuRHy5Q 1643363090 Bearer",
                "name": "X-Auth-Original",
                "required": true,
                "type": "header"
              },
              {
                "description": "Организация пользователя\n",
                "example-value": "1",
                "name": "X-Auth-Organization-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос без или с неавторизованными заголовками Passport или legacy",
          "input_data": {
            "parameters": []
          },
          "name": "Неавторизованный запрос с авторизационными заголовками  Passport SessionId или exams-training-platform",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/session401",
        "priority": 100,
        "rule_name": "/session401"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "session-or-legacy",
        "proxy_401": true
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/legacy401"
        }
      ],
      "upstream_url": {
        "url": "/legacy401"
      },
      "variants": [
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Сессия браузера.\n",
                "example-value": "3:1622106996.5.0.1622106996604:GiiVVxWBABINVALIDAYCKg:9.1|4053884789.0.2|348276.52732.yl_vdokwSOMESOMESOMEe9efbJE",
                "name": "Session_id",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от фронтэнда с Passport SessionId",
          "upstream_data": {
            "parameters": [
              {
                "description": "Логин пользователя из Yandex Passport",
                "example-value": "root",
                "name": "X-Yandex-Login",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": true,
                "type": "header"
              },
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              },
              {
                "description": "[TVM user ticket](https://wiki.yandex-team.ru/taxi/backend/userver/tvm/user/).\nВыписан на имя uid пользователя (default uid в тикете),\nкоторый авторизован проксей.\n",
                "example-value": "3:user:CA0Q__________9_Gg4KAggBEAEg0oXYzAQoAQ:QnebQMbHdRoF04l985knaMHBnhh5SaFE2klzWiZW4f88V2MSzZ7KhIjIewFDe6jSKB1UXY2j0tGkDPZc6_jEdDl8WBOWjKYfie8jvYi_kj5SsJQAoUcNqMzm2b-2O8h__fm79_8s_EIsWjgDssEutAFpuC0IbJFcjtsomhTMl-w",
                "name": "X-Ya-User-Ticket",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от фронтэнда с авторизационными заголовками от  exams-training-platform (Киоска)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "X-Auth-User-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Роль пользователя\n",
                "example-value": "admin",
                "name": "X-Auth-User-Role",
                "required": true,
                "type": "header"
              },
              {
                "description": "Конкатенированный набор аутентификационных заголовков\n",
                "example-value": "qwe@qwe.qwe 8Vl38f-_cVZpAIofX4W00g 5jvyzT7aOt_MbhpPuRHy5Q 1643363090 Bearer",
                "name": "X-Auth-Original",
                "required": true,
                "type": "header"
              },
              {
                "description": "Организация пользователя\n",
                "example-value": "1",
                "name": "X-Auth-Organization-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос без или с неавторизованными заголовками Passport или legacy",
          "input_data": {
            "parameters": []
          },
          "name": "Неавторизованный запрос с авторизационными заголовками  Passport SessionId или exams-training-platform",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/legacy401",
        "priority": 100,
        "rule_name": "/legacy401"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "session-or-legacy",
        "proxy_401": true
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/session/rewrite"
        }
      ],
      "upstream_url": {
        "url": "/rewritten/session"
      },
      "variants": [
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Сессия браузера.\n",
                "example-value": "3:1622106996.5.0.1622106996604:GiiVVxWBABINVALIDAYCKg:9.1|4053884789.0.2|348276.52732.yl_vdokwSOMESOMESOMEe9efbJE",
                "name": "Session_id",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос от фронтэнда с Passport SessionId",
          "upstream_data": {
            "parameters": [
              {
                "description": "Логин пользователя из Yandex Passport",
                "example-value": "root",
                "name": "X-Yandex-Login",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": true,
                "type": "header"
              },
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              },
              {
                "description": "[TVM user ticket](https://wiki.yandex-team.ru/taxi/backend/userver/tvm/user/).\nВыписан на имя uid пользователя (default uid в тикете),\nкоторый авторизован проксей.\n",
                "example-value": "3:user:CA0Q__________9_Gg4KAggBEAEg0oXYzAQoAQ:QnebQMbHdRoF04l985knaMHBnhh5SaFE2klzWiZW4f88V2MSzZ7KhIjIewFDe6jSKB1UXY2j0tGkDPZc6_jEdDl8WBOWjKYfie8jvYi_kj5SsJQAoUcNqMzm2b-2O8h__fm79_8s_EIsWjgDssEutAFpuC0IbJFcjtsomhTMl-w",
                "name": "X-Ya-User-Ticket",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              }
            ]
          },
          "name": "Запрос от фронтэнда с авторизационными заголовками от  exams-training-platform (Киоска)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "Токен сессии пользователя\n",
                "example-value": "8Vl38f-_cVZpAIofX4W00g",
                "name": "access-token",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор клиента\n",
                "example-value": "5jvyzT7aOt_MbhpPuRHy5Q",
                "name": "client",
                "required": false,
                "type": "header"
              },
              {
                "description": "Таймстамп истечения токена\n",
                "example-value": "1643363090",
                "name": "expiry",
                "required": false,
                "type": "header"
              },
              {
                "description": "Тип токена\n",
                "example-value": "Bearer",
                "name": "token-type",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "uid",
                "required": false,
                "type": "header"
              },
              {
                "description": "Идентификатор пользователя\n",
                "example-value": "qwe@qwe.qwe",
                "name": "X-Auth-User-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "Роль пользователя\n",
                "example-value": "admin",
                "name": "X-Auth-User-Role",
                "required": true,
                "type": "header"
              },
              {
                "description": "Конкатенированный набор аутентификационных заголовков\n",
                "example-value": "qwe@qwe.qwe 8Vl38f-_cVZpAIofX4W00g 5jvyzT7aOt_MbhpPuRHy5Q 1643363090 Bearer",
                "name": "X-Auth-Original",
                "required": true,
                "type": "header"
              },
              {
                "description": "Организация пользователя\n",
                "example-value": "1",
                "name": "X-Auth-Organization-Id",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/session/rewrite",
        "priority": 100,
        "rule_name": "/session/rewrite"
      },
      "output": {
        "attempts": 1,
        "rewrite_path_prefix": "/rewritten/session",
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "session-or-legacy",
        "proxy_401": false
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/csrf_token"
        }
      ],
      "upstream_url": {
        "url": "/csrf_token"
      },
      "variants": [
        {
          "description": "Запрос CSRF-токена, который не приводит к обращению в upstream, на запрос отвечает сам авторизационный прокси. Подробную информацию про режим работы можно найти [на вики](https://wiki.yandex-team.ru/taxi/backend/authproxies/#csrftoken). Ручка настраивается через [конфиг EXAMS_AUTHPROXY_CSRF_TOKEN](https://tariff-editor.taxi.yandex-team.ru/dev/configs/edit/EXAMS_AUTHPROXY_CSRF_TOKEN)",
          "input_data": {
            "parameters": []
          },
          "name": "CSRF Token generator",
          "upstream_data": {
            "parameters": []
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/csrf_token",
        "priority": 1200,
        "rule_name": "/csrf_token"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "csrf-token-generator",
        "proxy_401": false
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/legacy/login"
        }
      ],
      "upstream_url": {
        "url": "/legacy/login"
      },
      "variants": [
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": []
          },
          "name": "Запрос от фронтэнда с авторизационными заголовками от  exams-training-platform (Киоска)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/legacy/login",
        "priority": 1200,
        "rule_name": "/legacy/login"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "legacy-no-auth",
        "proxy_401": false
      },
      "rule_type": "exams-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://exams-authproxy.taxi.yandex.net/"
        }
      ],
      "upstream_url": {
        "url": "/"
      },
      "variants": [
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": []
          },
          "name": "Запрос от фронтэнда с авторизационными заголовками от  exams-training-platform (Киоска)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "Информация о пользовательском приложении.\nПредставляет из себя список пар ключ=значение,\nразделенных запятыми.\nРезультат работы `ua_parser::DetectApplication()`.\n",
                "example-value": "app_brand=yauber,app_name=mobileweb_uber_kz_android,app_build=release,platform_ver1=9,app_ver1=3,app_ver2=85,app_ver3=1",
                "name": "X-Request-Application",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "",
        "maintained_by": "taxi_quality_control",
        "prefix": "/",
        "priority": 1200,
        "rule_name": "proxy_all"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": ""
      },
      "proxy": {
        "auth_type": "legacy-no-auth",
        "proxy_401": false
      },
      "rule_type": "exams-authproxy"
    }
  }
]

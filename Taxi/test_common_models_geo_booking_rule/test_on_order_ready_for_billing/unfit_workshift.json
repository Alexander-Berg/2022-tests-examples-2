{
  "balances": [],
  "event": {
    "$order_ready_for_billing_doc": {
      "order": {
        "$order": {
          "accepted_by_driver_at": {
            "$datetime": "2018-12-10T00:00:00+03:00"
          },
          "completed_at": {
            "$datetime": "2018-12-10T01:00:00+03:00"
          },
          "due": {
            "$datetime": "2018-12-10T00:01:00+03:00"
          }
        }
      }
    }
  },
  "expected_event_handled": {
    "$blueprint:rule_event_handled": {
      "journal_entries": [
        {
          "$journal_entry": {
            "agreement_id": "subvention_agreement/1/default/_id/12345678901234567890abcd",
            "all_reasons": [
              {
                "$factory:unfit_reason": {
                  "code": "workshift",
                  "details": {
                    "allowed_values": {
                      "$interval": {
                        "end": {
                          "$datetime": "2018-12-10T01:00:00+03:00"
                        },
                        "start": {
                          "$datetime": "2018-12-10T00:45:00+03:00"
                        }
                      }
                    },
                    "value": {
                      "$datetime": "2018-12-10T00:00:00+03:00"
                    }
                  },
                  "sub_kind": "in"
                }
              }
            ],
            "delta": {
              "$money": "300 RUB"
            },
            "details": null,
            "entity": {
              "$entity": {
                "external_id": "unique_driver_id/5bab4bf979b9e5513fe5ec4a",
                "kind": "driver"
              }
            },
            "event_at": {
              "$datetime": "2018-12-10T00:00:00+03:00"
            },
            "sub_account": "unfit/income"
          }
        },
        {
          "$journal_entry": {
            "agreement_id": "subvention_agreement/1/default/_id/12345678901234567890abcd",
            "all_reasons": [
              {
                "$factory:unfit_reason": {
                  "code": "workshift",
                  "details": {
                    "allowed_values": {
                      "$interval": {
                        "end": {
                          "$datetime": "2018-12-10T01:00:00+03:00"
                        },
                        "start": {
                          "$datetime": "2018-12-10T00:45:00+03:00"
                        }
                      }
                    },
                    "value": {
                      "$datetime": "2018-12-10T00:00:00+03:00"
                    }
                  },
                  "sub_kind": "in"
                }
              }
            ],
            "delta": {
              "$money": "15 XXX"
            },
            "details": {
              "$journal_entry_details": {
                "order_id": "some_order_id"
              }
            },
            "entity": {
              "$entity": {
                "external_id": "unique_driver_id/5bab4bf979b9e5513fe5ec4a",
                "kind": "driver"
              }
            },
            "event_at": {
              "$datetime": "2018-12-10T00:00:00+03:00"
            },
            "sub_account": "unfit/time/on_order_minutes"
          }
        }
      ]
    }
  },
  "rule": {
    "$geo_booking_rule": {
      "data": {
        "$geo_booking_rule_data": {
          "agreement_ref": {
            "$agreement_ref": "subvention_agreement/1/default/_id/12345678901234567890abcd"
          },
          "budget": {
            "$budget": {
              "id": "geo_booking_budget_id"
            }
          },
          "geoarea": "msk",
          "has_commission": false,
          "min_online_minutes": 0,
          "pay_currency": "RUB",
          "profile_payment_type_restrictions": {
            "$profile_payment_type_rule": "any"
          },
          "rate_free_per_minute": 15.0,
          "rate_on_order_per_minute": 5.5,
          "rule_type": {
            "$payment_type": "add"
          },
          "status": {
            "$rule_status": "approved"
          },
          "workshift": {
            "$geo_booking_workshift": {
              "end": "01:00",
              "start": "00:45"
            }
          }
        }
      },
      "identity": {
        "$identity": {
          "group_id": "some_group_id",
          "id_": {
            "$oid": "12345678901234567890abcd"
          }
        }
      },
      "matcher": {
        "$moscow_rule_matcher": {
          "activity_points": 80,
          "end": {
            "$datetime": "2018-12-30T00:15:00Z"
          },
          "start": {
            "$datetime": "2018-11-30T00:00:00Z"
          }
        }
      }
    }
  }
}

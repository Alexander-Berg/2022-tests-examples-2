# Created with generator. Save this comment for future reference.
# Launch args: --source=postgres --tables cargo_payments.billing_tasks_history --yt-struct --replicate-by history_timestamp
  - input:
        amount: '100.0000'
        billing_doc_id: '5638590168'
        corp_client_id: 70a499f9eec844e9a758f4bc33e667c0
        currency: RUB
        history_action: add
        history_event_id: 42
        history_timestamp:
            $a:
                raw_type: datetime
            $v: '2021-05-24T17:11:29.912907+00:00'
        history_user_id: cargo-payments-transactions-scanner
        meta: '{"payment_method": "card"}'
        meta_order_id: ''
        order_id: 6d0f0fa6-7b82-44ce-807c-bd825c899e36
        order_instant:
            $a:
                raw_type: datetime
            $v: '2021-05-24T17:09:15.136293+00:00'
        payment_instant:
            $a:
                raw_type: datetime
            $v: '2021-05-24T17:11:29.617973+00:00'
        refund: false
        state: approved
        type: user_on_delivery_payment
    expected:
      - history_event_id: 42
        history_user_id: cargo-payments-transactions-scanner
        history_action: add
        history_timestamp: 1621876289.912907
        state: approved
        type: user_on_delivery_payment
        order_id: 6d0f0fa6-7b82-44ce-807c-bd825c899e36
        corp_client_id: 70a499f9eec844e9a758f4bc33e667c0
        amount: '100.0000'
        currency: RUB
        billing_doc_id: '5638590168'
        refund: false
        payment_instant: 1621876289.617973
        order_instant: 1621876155.136293
        meta: '{"payment_method": "card"}'
        meta_order_id: ''
  - input:
        amount: '403.1000'
        billing_doc_id: '10820450103'
        corp_client_id: 70a499f9eec844e9a758f4bc33e667c0
        currency: RUB
        history_action: add
        history_event_id: 1
        history_timestamp:
            $a:
                raw_type: datetime
            $v: '2021-05-12T16:46:36.461749+00:00'
        history_user_id: cargo-payments-transactions-scanner
        meta: '{}'
        meta_order_id: ''
        order_id: 03169c95-3c7c-4cb7-b8fd-75acf6cea8a8
        order_instant:
            $a:
                raw_type: datetime
            $v: '2021-05-12T14:13:17.289142+00:00'
        payment_instant:
            $a:
                raw_type: datetime
            $v: '2021-05-12T14:33:23.921737+00:00'
        refund: false
        state: approved
        type: user_on_delivery_payment
    expected:
      - history_event_id: 1
        history_user_id: cargo-payments-transactions-scanner
        history_action: add
        history_timestamp: 1620837996.461749
        state: approved
        type: user_on_delivery_payment
        order_id: 03169c95-3c7c-4cb7-b8fd-75acf6cea8a8
        corp_client_id: 70a499f9eec844e9a758f4bc33e667c0
        amount: '403.1000'
        currency: RUB
        billing_doc_id: '10820450103'
        refund: false
        payment_instant: 1620830003.921737
        order_instant: 1620828797.289142
        meta: '{}'
        meta_order_id: ''
  - input:
        amount: '1.0000'
        billing_doc_id: '8166350038'
        corp_client_id: 70a499f9eec844e9a758f4bc33e667c0
        currency: RUB
        history_action: add
        history_event_id: 48
        history_timestamp:
            $a:
                raw_type: datetime
            $v: '2021-05-25T11:07:37.762100+00:00'
        history_user_id: cargo-payments-transactions-scanner
        meta: '{"payment_method": "card"}'
        meta_order_id: ''
        order_id: afe185cf-8add-43dc-b9ad-6443eb727c46
        order_instant:
            $a:
                raw_type: datetime
            $v: '2021-05-25T10:52:31.877381+00:00'
        payment_instant:
            $a:
                raw_type: datetime
            $v: '2021-05-25T11:07:37.552301+00:00'
        refund: false
        state: approved
        type: user_on_delivery_payment
    expected:
      - history_event_id: 48
        history_user_id: cargo-payments-transactions-scanner
        history_action: add
        history_timestamp: 1621940857.7621
        state: approved
        type: user_on_delivery_payment
        order_id: afe185cf-8add-43dc-b9ad-6443eb727c46
        corp_client_id: 70a499f9eec844e9a758f4bc33e667c0
        amount: '1.0000'
        currency: RUB
        billing_doc_id: '8166350038'
        refund: false
        payment_instant: 1621940857.552301
        order_instant: 1621939951.877381
        meta: '{"payment_method": "card"}'
        meta_order_id: ''

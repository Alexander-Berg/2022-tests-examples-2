# Created with generator. Save this comment for future reference.
# Launch args: --source postgres --tables public.billing_tasks_history --secret-source POSTGRES_TAXI_SCOOTER_BACKEND --yt-struct
  - input:
        history_event_id: 48477
        history_user_id: 25781db5-6db2-49b6-88cf-bfc16b99e9bd
        history_originator_id: example_string
        history_action: remove
        history_timestamp: 1649880300
        history_comment: Payment finished
        session_id: 70c25cb4-807c-d2cd-2112-ea9d58e674ea
        billing_type: car_usage
        user_id: 25781db5-6db2-49b6-88cf-bfc16b99e9bd
        bill: 7960.0
        deposit: 30000
        state: finished
        task_status: ok
        last_status_update: 1649878195
        last_payment_id: 250973
        discretization: 31415
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"70c25cb4-807c-d2cd-2112-ea9d58e674ea","accounts":["card","mobile_payment"],"session_finish_time":1649859027,"offer_name":"scooters_minutes","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","is_plus_user":false}'
        exec_context: '{"last_update":1649878195}'
        event_id: 20
        cashback: 0.0
    expected:
      - history_event_id: 48477
        history_user_id: 25781db5-6db2-49b6-88cf-bfc16b99e9bd
        history_originator_id: example_string
        history_action: remove
        history_timestamp: 1649880300
        history_comment: Payment finished
        session_id: 70c25cb4-807c-d2cd-2112-ea9d58e674ea
        billing_type: car_usage
        user_id: 25781db5-6db2-49b6-88cf-bfc16b99e9bd
        bill: 7960.0
        deposit: 30000
        state: finished
        task_status: ok
        last_status_update: 1649878195
        last_payment_id: 250973
        discretization: 31415
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"70c25cb4-807c-d2cd-2112-ea9d58e674ea","accounts":["card","mobile_payment"],"session_finish_time":1649859027,"offer_name":"scooters_minutes","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","is_plus_user":false}'
        exec_context: '{"last_update":1649878195}'
        event_id: 20
        cashback: 0.0
  - input:
        history_event_id: 36585
        history_user_id: a91c7a15-be5b-46f4-8d22-d6151a569116
        history_originator_id: example_string
        history_action: update_data
        history_timestamp: 1642427125
        history_comment: example_string
        session_id: 6e11c1c6-7ba076a3-403d1d0e-4169e050
        billing_type: car_usage
        user_id: a91c7a15-be5b-46f4-8d22-d6151a569116
        bill: 0.0
        deposit: 0
        state: finishing
        task_status: not_started
        last_status_update: 1642427084
        last_payment_id: 0
        discretization: 31415
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"6e11c1c6-7ba076a3-403d1d0e-4169e050","accounts":["card"],"session_finish_time":1642427125,"offer_name":"scooters_minutes","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","cashback_percent":25,"max_yandex_bonus":147286,"is_plus_user":true}'
        exec_context: '{"paymethod":"card-xbcb832a4f489f647557eec82","last_update":1642427084}'
        event_id: 20
        cashback: 0.0
    expected:
      - history_event_id: 36585
        history_user_id: a91c7a15-be5b-46f4-8d22-d6151a569116
        history_originator_id: example_string
        history_action: update_data
        history_timestamp: 1642427125
        history_comment: example_string
        session_id: 6e11c1c6-7ba076a3-403d1d0e-4169e050
        billing_type: car_usage
        user_id: a91c7a15-be5b-46f4-8d22-d6151a569116
        bill: 0.0
        deposit: 0
        state: finishing
        task_status: not_started
        last_status_update: 1642427084
        last_payment_id: 0
        discretization: 31415
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"6e11c1c6-7ba076a3-403d1d0e-4169e050","accounts":["card"],"session_finish_time":1642427125,"offer_name":"scooters_minutes","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","cashback_percent":25,"max_yandex_bonus":147286,"is_plus_user":true}'
        exec_context: '{"paymethod":"card-xbcb832a4f489f647557eec82","last_update":1642427084}'
        event_id: 20
        cashback: 0.0
  - input:
        history_event_id: 36858
        history_user_id: 33d817bb-9caa-4530-8c0b-4e220bdd1313
        history_originator_id: example_string
        history_action: add
        history_timestamp: 1642571903
        history_comment: example_string
        session_id: aadf118c-3feeeb32-1eb4abeb-bebc1153
        billing_type: car_usage
        user_id: 33d817bb-9caa-4530-8c0b-4e220bdd1313
        bill: 0.0
        deposit: 0
        state: active
        task_status: not_started
        last_status_update: 1642571903
        last_payment_id: 0
        discretization: 31415
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"aadf118c-3feeeb32-1eb4abeb-bebc1153","accounts":["card"],"offer_name":"scooters_minutes","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","cashback_percent":25,"max_yandex_bonus":1480100,"is_plus_user":true}'
        exec_context: '{"paymethod":"card-xae4ba4951aa7adcc82c5b9c0","last_update":1642571903}'
        event_id: 4989760
        cashback: 0.0
    expected:
      - history_event_id: 36858
        history_user_id: 33d817bb-9caa-4530-8c0b-4e220bdd1313
        history_originator_id: example_string
        history_action: add
        history_timestamp: 1642571903
        history_comment: example_string
        session_id: aadf118c-3feeeb32-1eb4abeb-bebc1153
        billing_type: car_usage
        user_id: 33d817bb-9caa-4530-8c0b-4e220bdd1313
        bill: 0.0
        deposit: 0
        state: active
        task_status: not_started
        last_status_update: 1642571903
        last_payment_id: 0
        discretization: 31415
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"aadf118c-3feeeb32-1eb4abeb-bebc1153","accounts":["card"],"offer_name":"scooters_minutes","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","cashback_percent":25,"max_yandex_bonus":1480100,"is_plus_user":true}'
        exec_context: '{"paymethod":"card-xae4ba4951aa7adcc82c5b9c0","last_update":1642571903}'
        event_id: 4989760
        cashback: 0.0

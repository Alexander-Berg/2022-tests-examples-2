# Created with generator. Save this comment for future reference.
# Launch args: --source postgres --tables public.billing_tasks --secret-source POSTGRES_TAXI_SCOOTER_BACKEND --yt-struct
  - input:
        session_id: 7481b059-7d02-9409-cbb4-1deaa13f7c2d
        billing_type: car_usage
        user_id: 2b2987a0-4726-4a60-938c-fa55bca912ee
        bill: 293.0
        state: finished
        deposit: 0
        discretization: 31415
        task_status: not_started
        last_status_update: 1650065530
        last_payment_update: 1650065530
        last_payment_id: 251268
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"7481b059-7d02-9409-cbb4-1deaa13f7c2d","accounts":["card"],"session_finish_time":1650065519,"offer_name":"scooters_minutes_krasnodar","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","cashback_percent":6,"max_yandex_bonus":5105007,"is_plus_user":true}'
        exec_context: '{"last_update":1650065530}'
        event_id: 10590675
        cashback: 0.0
    expected:
      - session_id: 7481b059-7d02-9409-cbb4-1deaa13f7c2d
        billing_type: car_usage
        user_id: 2b2987a0-4726-4a60-938c-fa55bca912ee
        bill: 293.0
        state: finished
        deposit: 0
        discretization: 31415
        task_status: not_started
        last_status_update: 1650065530
        last_payment_update: 1650065530
        last_payment_id: 251268
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"7481b059-7d02-9409-cbb4-1deaa13f7c2d","accounts":["card"],"session_finish_time":1650065519,"offer_name":"scooters_minutes_krasnodar","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","cashback_percent":6,"max_yandex_bonus":5105007,"is_plus_user":true}'
        exec_context: '{"last_update":1650065530}'
        event_id: 10590675
        cashback: 0.0
  - input:
        session_id: 1d1bed06-b1223f81-73ee2266-fba8e464
        billing_type: car_usage
        user_id: 905f6d09-662b-4204-aaf6-0643f6b9ecf0
        bill: 0.0
        state: finishing
        deposit: 10000
        discretization: 31415
        task_status: ok
        last_status_update: 0
        last_payment_update: 1618566049
        last_payment_id: 219
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"1d1bed06-b1223f81-73ee2266-fba8e464","accounts":["card"],"session_finish_time":1618400872,"offer_name":"scooters_minutes","use_only_selected_paymethod":false,"offer_type":"standart_offer","cashback_percent":10,"is_plus_user":true}'
        exec_context: '{"paymethod":"card-xd1b9a822af4547c2704d5ef3","last_update":0}'
        event_id: 5468460
        cashback: 0.0
    expected:
      - session_id: 1d1bed06-b1223f81-73ee2266-fba8e464
        billing_type: car_usage
        user_id: 905f6d09-662b-4204-aaf6-0643f6b9ecf0
        bill: 0.0
        state: finishing
        deposit: 10000
        discretization: 31415
        task_status: ok
        last_status_update: 0
        last_payment_update: 1618566049
        last_payment_id: 219
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"1d1bed06-b1223f81-73ee2266-fba8e464","accounts":["card"],"session_finish_time":1618400872,"offer_name":"scooters_minutes","use_only_selected_paymethod":false,"offer_type":"standart_offer","cashback_percent":10,"is_plus_user":true}'
        exec_context: '{"paymethod":"card-xd1b9a822af4547c2704d5ef3","last_update":0}'
        event_id: 5468460
        cashback: 0.0
  - input:
        session_id: a431c6a3-eaf38e58-35bb506-a517c179
        billing_type: car_usage
        user_id: 85272e14-4e48-4ce5-a9b6-600f4700ee7d
        bill: 10595.0
        state: finished
        deposit: 10000
        discretization: 31415
        task_status: no_funds
        last_status_update: 1647054890
        last_payment_update: 1647054890
        last_payment_id: 244091
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"a431c6a3-eaf38e58-35bb506-a517c179","accounts":["card"],"session_finish_time":1643615492,"offer_name":"scooters_minutes","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","is_plus_user":false}'
        exec_context: '{"last_update":1647054890}'
        event_id: 5977731
        cashback: 0.0
    expected:
      - session_id: a431c6a3-eaf38e58-35bb506-a517c179
        billing_type: car_usage
        user_id: 85272e14-4e48-4ce5-a9b6-600f4700ee7d
        bill: 10595.0
        state: finished
        deposit: 10000
        discretization: 31415
        task_status: no_funds
        last_status_update: 1647054890
        last_payment_update: 1647054890
        last_payment_id: 244091
        queue: prestable
        next_queue: prestable
        meta: '{"real_session_id":"a431c6a3-eaf38e58-35bb506-a517c179","accounts":["card"],"session_finish_time":1643615492,"offer_name":"scooters_minutes","mobile_paymethods":[],"use_only_selected_paymethod":false,"offer_type":"standart_offer","is_plus_user":false}'
        exec_context: '{"last_update":1647054890}'
        event_id: 5977731
        cashback: 0.0

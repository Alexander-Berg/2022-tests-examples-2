{
  "consumer": "taxi-surge",
  "name": "default",
  "stages": [
    {
      "conditions": [],
      "in_bindings": [
        {
          "domain": "resource",
          "query": "zone.experiment.experiment_name{exp}"
        }
      ],
      "name": "sample_fetch",
      "optional": true,
      "resources": [
        {
          "field": "candidates",
          "name": "count_by_categories"
        }
      ],
      "source_code": "if (exp == 'my_experiment') { return {candidates: {request: {point: [1.0, 2.0], allowed_classes: [], limit: NaN, max_distance: undefined}}}; } else { return {candidates: {request: {point: [1.0, 2.0], allowed_classes: [], limit: 400, max_distance: 2500}}}; }"
    },
    {
      "conditions": [
        {
          "stage_name": "sample_fetch",
          "stage_statuses": [
            "passed"
          ],
          "type": "stage_status"
        }
      ],
      "in_bindings": [
        {
          "domain": "input",
          "query": "required_categories.*{:category}"
        }
      ],
      "name": "pass_fill",
      "out_bindings": [
        {
          "alias": "data",
          "query": "classes[category]"
        }
      ],
      "source_code": "return {data: {name: category, value_raw: 4.4, surge: {value: 4}}};"
    },
    {
      "conditions": [
        {
          "stage_name": "sample_fetch",
          "stage_statuses": [
            "failed"
          ],
          "type": "stage_status"
        }
      ],
      "in_bindings": [
        {
          "domain": "input",
          "query": "required_categories.*{:category}"
        }
      ],
      "name": "failed_fill",
      "out_bindings": [
        {
          "alias": "data",
          "query": "classes[category]"
        }
      ],
      "source_code": "return {data: {name: category, value_raw: 3.3, surge: {value: 3}}};"
    }
  ],
  "state": "active"
}

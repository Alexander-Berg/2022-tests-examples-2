{
  "valid": {
    "driver": {
      "russia_moscow_default_vacancy_default_workflow": {
        "request": {
          "phone": "89689540571",
          "city": "другой_город",
          "driver_license": "12TK123457"
        },
        "expected": {
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79689540571"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "москва"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "0c94f7d2818146fb8d894c33d1fcfdbf"
            },
            {
              "id": 360005536340,
              "value": "ddcbeea58fa24263bb3e32b6c9332646"
            },
            {
              "id": 30148269,
              "value": "12TK123457"
            },
            {
              "id": 237,
              "value": true
            },
            {
              "id": 238,
              "value": "1575468000"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]\n\nГород определён: Москва",
            "public": false
          }
        }
      },
      "russia_kazan": {
        "request": {
          "phone": "9689540574",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_driver",
          "workflow": "new_driver",
          "deaf_candidate": 0,
          "personal_license_id": "ddcbeea58fa24263bb3e32b6c9332646"
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79689540574"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "казань"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "02c0ce94db3a45969ee0de37f2ee67dd"
            },
            {
              "id": 360005536340,
              "value": "ddcbeea58fa24263bb3e32b6c9332646"
            },
            {
              "id": 30148269,
              "value": "12TK123457"
            },
            {
              "id": 237,
              "value": true
            },
            {
              "id": 238,
              "value": "1575468000"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]\n\nГород определён: Казань",
            "public": false
          }
        }
      },
      "kazakhstan_self_employed": {
        "request": {
          "phone": "+77014567503",
          "city": "астана",
          "ticket_id": 111,
          "vacancy": "vacancy_driver",
          "workflow": "self_employed"
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+77014567503"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "астана"
            },
            {
              "id": 226,
              "value": "казахстан"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "4ce1f31007394f7a8b7140cd4cfb8e5e"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Казахстан]",
            "public": false
          }
        }
      },
      "active_checked": {
        "request": {
          "personal_phone_id": "e5dbe91a4f0f4368a0a4b9f90378dd06",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_driver",
          "workflow": "new_driver"
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79689540577"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "казань"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "e5dbe91a4f0f4368a0a4b9f90378dd06"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]\n\nГород определён: Казань",
            "public": false
          }
        }
      },
      "active_not_checked": {
        "request": {
          "phone": "79689540577",
          "city": "казань",
          "ticket_id": 111,
          "vacancy": "vacancy_driver",
          "workflow": "higher_class"
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79689540577"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "казань"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "e5dbe91a4f0f4368a0a4b9f90378dd06"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]",
            "public": false
          }
        }
      },
      "russia_moscow_valid_personal_no_store": {
        "request": {
          "phone": "89689540571",
          "city": "другой_город",
          "ticket_id": 111
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "москва"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "0c94f7d2818146fb8d894c33d1fcfdbf"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]\n\nГород определён: Москва",
            "public": false
          }
        }
      },
      "russia_moscow_invalid_personal_store": {
        "request": {
          "phone": "89689540571",
          "city": "другой_город",
          "ticket_id": 111
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79689540571"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "москва"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]\n\nГород определён: Москва",
            "public": false
          }
        }
      },
      "russia_moscow_invalid_personal_no_store": {
        "request": {
          "phone": "89689540571",
          "city": "другой_город",
          "ticket_id": 111
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79689540571"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "москва"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]\n\nГород определён: Москва",
            "public": false
          }
        }
      }
    },
    "courier": {
      "active": {
        "request": {
          "phone": "79689540576",
          "city": "казань",
          "ticket_id": 111,
          "vacancy": "vacancy_courier",
          "workflow": "new_courier"
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79689540576"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "казань"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "7034ac3f483040d6a2d008b74a9362b1"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]",
            "public": false
          }
        }
      },
      "not_active": {
        "request": {
          "phone": "+79689540575",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_courier",
          "workflow": "new_courier"
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79689540575"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "казань"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "5daf535596344a23a8e6b51a5de571c8"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]",
            "public": false
          }
        }
      }
    }
  },
  "invalid": {
    "driver": {
      "invalid_phone_empty": {
        "request": {
          "phone": "",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_driver",
          "workflow": "new_driver",
          "deaf_candidate": 0
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": ""
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "другой_город"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 30148629,
              "value": "не_лид"
            },
            {
              "id": 40642585,
              "value": "некорректный_номер_телефона"
            }
          ],
          "comment": {
            "body": "#empty_phone Кажется, в этом тикете потерялся номер телефона",
            "public": false
          }
        }
      },
      "invalid_phone_string": {
        "request": {
          "phone": "aa",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_driver",
          "workflow": "new_driver",
          "deaf_candidate": 0
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": ""
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "другой_город"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 30148629,
              "value": "не_лид"
            },
            {
              "id": 40642585,
              "value": "некорректный_номер_телефона"
            }
          ],
          "comment": {
            "body": "#empty_phone Кажется, в этом тикете потерялся номер телефона",
            "public": false
          }
        }
      },
      "invalid_phone_bad_format": {
        "request": {
          "phone": "+79989774443",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_driver",
          "workflow": "new_driver",
          "deaf_candidate": 0
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79989774443"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "другой_город"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "6e547514494248498c9f71eef3c98475"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]\n\n#bad_format Это сомнительный номер +79989774443, он не входит в пул телефонных операторов",
            "public": false
          }
        }
      },
      "invalid_phone_unparsable": {
        "request": {
          "phone": "891743712567",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_driver",
          "workflow": "new_driver",
          "deaf_candidate": 0
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+891743712567"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "другой_город"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 30148629,
              "value": "не_лид"
            },
            {
              "id": 40642585,
              "value": "некорректный_номер_телефона"
            },
            {
              "id": 360005536320,
              "value": "e2aa52cafd544a8891af95985465e4d9"
            }
          ],
          "comment": {
            "body": "#unparseable Это не похоже на номер телефона: 891743712567",
            "public": false
          }
        }
      },
      "missing_phone": {
        "request": {
            "city": "другой_город",
            "ticket_id": 111,
            "vacancy": "vacancy_driver",
            "workflow": "new_driver",
            "deaf_candidate": 0
        },
        "expected": {}
      }
    },
    "courier": {
      "invalid_phone_empty": {
        "request": {
          "phone": "",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_courier",
          "workflow": "new_courier",
          "deaf_candidate": 0
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": ""
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "другой_город"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 30148629,
              "value": "не_лид"
            },
            {
              "id": 40642585,
              "value": "некорректный_номер_телефона"
            }
          ],
          "comment": {
            "body": "#empty_phone Кажется, в этом тикете потерялся номер телефона",
            "public": false
          }
        }
      },
      "invalid_phone_string": {
        "request": {
          "phone": "aa",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_courier",
          "workflow": "new_courier",
          "deaf_candidate": 0
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": ""
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "другой_город"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 30148629,
              "value": "не_лид"
            },
            {
              "id": 40642585,
              "value": "некорректный_номер_телефона"
            }
          ],
          "comment": {
            "body": "#empty_phone Кажется, в этом тикете потерялся номер телефона",
            "public": false
          }
        }
      },
      "invalid_phone_bad_format": {
        "request": {
          "phone": "+79989774443",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_courier",
          "workflow": "new_courier",
          "deaf_candidate": 0
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+79989774443"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "другой_город"
            },
            {
              "id": 226,
              "value": "россия"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 229,
              "value": true
            },
            {
              "id": 360005536320,
              "value": "6e547514494248498c9f71eef3c98475"
            }
          ],
          "comment": {
            "body": "#country_ok Страна отправки тикета успешно определена: [Россия]\n\n#bad_format Это сомнительный номер +79989774443, он не входит в пул телефонных операторов",
            "public": false
          }
        }
      },
      "invalid_phone_unparsable": {
        "request": {
          "phone": "891743712567",
          "city": "другой_город",
          "ticket_id": 111,
          "vacancy": "vacancy_courier",
          "workflow": "new_courier",
          "deaf_candidate": 0
        },
        "expected": {
          "id": 111,
          "custom_fields": [
            {
              "id": 30557445,
              "value": "+891743712567"
            },
            {
              "id": 224,
              "value": true
            },
            {
              "id": 225,
              "value": "другой_город"
            },
            {
              "id": 228,
              "value": "1575468000"
            },
            {
              "id": 30148629,
              "value": "не_лид"
            },
            {
              "id": 40642585,
              "value": "некорректный_номер_телефона"
            },
            {
              "id": 360005536320,
              "value": "e2aa52cafd544a8891af95985465e4d9"
            }
          ],
          "comment": {
            "body": "#unparseable Это не похоже на номер телефона: 891743712567",
            "public": false
          }
        }
      }
    }
  }
}

option(TESTSUITE_SEPARATE_TARGETS
    "Use separate targets for testsuite tests (one by service)" OFF)

if (NOT TESTSUITE_SEPARATE_TARGETS)
    message(STATUS "Testsuite single target mode")
    add_test(
      NAME testsuite
      COMMAND ${CMAKE_CURRENT_BINARY_DIR}/ctest-runtests
      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
    )
    set_tests_properties(testsuite PROPERTIES TIMEOUT 2500)
else()
    message(STATUS "Testsuite separate targets mode")
endif()

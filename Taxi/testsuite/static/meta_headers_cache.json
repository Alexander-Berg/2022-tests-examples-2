[
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://corp-authproxy.taxi.yandex.net/integration"
        }
      ],
      "upstream_url": {
        "url": "http://cabinet-api.taxi.yandex.net/integration"
      },
      "variants": [
        {
          "description": "Стороннее приложение — потребитель интеграционного API\nкорпоративного кабинета Такси.\n",
          "input_data": {
            "parameters": [
              {
                "description": "OAuth-токен приложения.",
                "example-value": "AgAAAADzydtLAAAPeK-YrZZPWUrdi79KVUiCyUM",
                "name": "Authorization",
                "required": true,
                "type": "header"
              }
            ]
          },
          "name": "Авторизованный запрос с OAuth-токеном",
          "upstream_data": {
            "parameters": [
              {
                "description": "Логин пользователя из Yandex Passport",
                "example-value": "root",
                "name": "X-Yandex-Login",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": true,
                "type": "header"
              },
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "ID клиента, полученный из corp-managers\nпо логину/UID Паспорта.\n",
                "example-value": "beed2277ae71428db1029c07394e542c",
                "name": "X-YaTAxi-Corp-ACL-Client-Id",
                "required": false,
                "type": "header"
              },
              {
                "description": "ID департамента менеджера, полученный из corp-managers\nпо логину/UID Паспорта (если роль ограничена департаментом).\n",
                "example-value": "5cdcb75dee39497880167010f02ec881",
                "name": "X-YaTAxi-Corp-ACL-Department-Id",
                "required": false,
                "type": "header"
              },
              {
                "description": "Список пермишнов клиента, полученный из corp-managers\nпо логину/UID Паспорта (через запятую)\n",
                "example-value": "taxi_department_create,taxi_department_part,taxi_department_full,taxi_other",
                "name": "X-YaTAxi-Corp-ACL-Permissions",
                "required": false,
                "type": "header"
              },
              {
                "description": "Роль клиента, полученная из corp-managers\nпо логину/UID Паспорта.\n",
                "example-value": "department_manager",
                "name": "X-YaTAxi-Corp-ACL-Role",
                "required": false,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(test api rule)",
        "maintained_by": "corp_yandex_go",
        "prefix": "/integration",
        "priority": 100,
        "rule_name": "/integration"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://cabinet-api.taxi.yandex.net"
      },
      "proxy": {
        "auth_type": "oauth",
        "proxy_401": false
      },
      "rule_type": "corp-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "https://corp-authproxy.taxi.yandex.net/web"
        }
      ],
      "upstream_url": {
        "url": "http://cabinet-api.taxi.yandex.net/web"
      },
      "variants": [
        {
          "description": "Запрос фронтэнда",
          "input_data": {
            "parameters": [
              {
                "description": "Сессия браузера.",
                "example-value": "3:1649417323.5.0.1649417323810:99_yBhcqy70EBoIAuAYCKg:9.1.2:2|4010776088.0.2|1:10359102.160606.Y7GUTAjdPNYIhoqGXhiNtyB64N0",
                "name": "sessionid2",
                "required": true,
                "type": "cookie"
              }
            ]
          },
          "name": "Запрос браузера (сессия в куке)",
          "upstream_data": {
            "parameters": [
              {
                "description": "Логин пользователя из Yandex Passport",
                "example-value": "root",
                "name": "X-Yandex-Login",
                "required": true,
                "type": "header"
              },
              {
                "description": "uid пользователя из Yandex Passport.",
                "example-value": "1045",
                "name": "X-Yandex-UID",
                "required": true,
                "type": "header"
              },
              {
                "description": "Локаль пользователя, полученная из HTTP header \"Accept-Langauge\",\nнапример \"ru\" или \"en\".\nРезультат работы функции `http::language::ParseLocale()`.\n",
                "example-value": "ru",
                "name": "X-Request-Language",
                "required": true,
                "type": "header"
              },
              {
                "description": "Регион пользователя, полученный из HTTP header \"Accept-Langauge\",\nнапример \"RU\" или \"US\".\nРезультат работы функции `http::language::ParseRegion()`.\n",
                "example-value": "RU",
                "name": "X-Request-Language-Region",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "ID клиента, полученный из corp-managers\nпо логину/UID Паспорта.\n",
                "example-value": "beed2277ae71428db1029c07394e542c",
                "name": "X-YaTAxi-Corp-ACL-Client-Id",
                "required": false,
                "type": "header"
              },
              {
                "description": "ID департамента менеджера, полученный из corp-managers\nпо логину/UID Паспорта (если роль ограничена департаментом).\n",
                "example-value": "5cdcb75dee39497880167010f02ec881",
                "name": "X-YaTAxi-Corp-ACL-Department-Id",
                "required": false,
                "type": "header"
              },
              {
                "description": "Список пермишнов клиента, полученный из corp-managers\nпо логину/UID Паспорта (через запятую)\n",
                "example-value": "taxi_department_create,taxi_department_part,taxi_department_full,taxi_other",
                "name": "X-YaTAxi-Corp-ACL-Permissions",
                "required": false,
                "type": "header"
              },
              {
                "description": "Роль клиента, полученная из corp-managers\nпо логину/UID Паспорта.\n",
                "example-value": "department_manager",
                "name": "X-YaTAxi-Corp-ACL-Role",
                "required": false,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(test web cabinet rule)",
        "maintained_by": "corp_yandex_go",
        "prefix": "/web",
        "priority": 100,
        "rule_name": "/web"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "mock",
        "upstream": "http://cabinet-api.taxi.yandex.net"
      },
      "proxy": {
        "auth_type": "session_id",
        "proxy_401": false
      },
      "rule_type": "corp-authproxy"
    }
  }
]

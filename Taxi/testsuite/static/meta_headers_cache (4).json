[
  {
    "meta": {
      "input_urls": [
        {
          "url": "http://int-authproxy.taxi.yandex.net/test"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/test"
      },
      "variants": [
        {
          "description": "Запрос от бекенда, который не подписан TVM service ticket.\nВозможно только при условии TVM_ENABLED=false.\n",
          "input_data": {
            "parameters": []
          },
          "name": "Запрос, не подписанный TVM service ticket",
          "upstream_data": {
            "parameters": [
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service name сервиса, который инициировал запрос",
                "example-value": "service-name",
                "name": "X-YaTaxi-External-Service-Name",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос бекенда, подписанный TVM service ticket",
          "input_data": {
            "parameters": [
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              }
            ]
          },
          "name": "Запрос бекенда, подписанный TVM service ticket",
          "upstream_data": {
            "parameters": [
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service name сервиса, который инициировал запрос",
                "example-value": "service-name",
                "name": "X-YaTaxi-External-Service-Name",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "common_components",
        "prefix": "/test",
        "priority": 100,
        "rule_name": "/test"
      },
      "output": {
        "attempts": 1,
        "timeout_ms": 100,
        "tvm_service": "test",
        "upstream": "http://example.com"
      },
      "proxy": {},
      "rule_type": "int-authproxy"
    }
  },
  {
    "meta": {
      "input_urls": [
        {
          "url": "http://int-authproxy.taxi.yandex.net/test"
        }
      ],
      "upstream_url": {
        "url": "http://example.com/tost"
      },
      "variants": [
        {
          "description": "Запрос от бекенда, который не подписан TVM service ticket.\nВозможно только при условии TVM_ENABLED=false.\n",
          "input_data": {
            "parameters": []
          },
          "name": "Запрос, не подписанный TVM service ticket",
          "upstream_data": {
            "parameters": [
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service name сервиса, который инициировал запрос",
                "example-value": "service-name",
                "name": "X-YaTaxi-External-Service-Name",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        },
        {
          "description": "Запрос бекенда, подписанный TVM service ticket",
          "input_data": {
            "parameters": [
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              }
            ]
          },
          "name": "Запрос бекенда, подписанный TVM service ticket",
          "upstream_data": {
            "parameters": [
              {
                "description": "TVM service ticket.",
                "example-value": "3:serv:CBAQ__________9_IgUIlAMQZQ:Dp-l02wKq6RMvh5VMkux17_8ES7EUAsAEvp88BYHzwCYOL6cNKKGHA21BhE5J-ePB6KdNNHpbYE2KqIDY7kssiJ2TDMQ79qlQX8qwLDlVR0QGRMuwt6C2DVhY2V9CbDaamvHTjRozKJMAJd1kX_UFCegkRYdlC-1FN18CozWrJQ",
                "name": "X-Ya-Service-Ticket",
                "required": true,
                "type": "header"
              },
              {
                "description": "TVM service name сервиса, который инициировал запрос",
                "example-value": "service-name",
                "name": "X-YaTaxi-External-Service-Name",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Forwarded-For-Y.\n",
                "example-value": "56.32.44.17",
                "name": "X-Remote-IP",
                "required": true,
                "type": "header"
              },
              {
                "description": "IP-адрес пользовательского приложения/браузера\n(не прокси, а именно приложения).\nТо же самое, что и X-Remote-IP.\n",
                "example-value": "56.32.44.17",
                "name": "X-Forwarded-For-Y",
                "required": true,
                "type": "header"
              },
              {
                "description": "Первоначальное значение 'Host' HTTP header.\n",
                "example-value": "example.com",
                "name": "X-Forwarded-Host",
                "required": true,
                "type": "header"
              }
            ]
          }
        }
      ]
    },
    "rule": {
      "input": {
        "description": "(imported from taxi config)",
        "maintained_by": "common_components",
        "prefix": "/test",
        "priority": 100,
        "rule_name": "/test"
      },
      "output": {
        "attempts": 1,
        "rewrite_path_prefix": "/tost",
        "timeout_ms": 100,
        "tvm_service": "test",
        "upstream": "http://example.com"
      },
      "proxy": {},
      "rule_type": "int-authproxy"
    }
  }
]

# This file is generated automatically, do not edit it by hand!
group:
    type: rtc
    name: taxi_taxi-exp_testing
graphs:
    exp.taxi.tst.yandex.net: # All handlers for host.
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # Conflict
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/ping_GET:
        And:
          - Or:
              - Equals: {http_host: "exp.taxi.tst.yandex.net"}
              - Equals: {http_host: "taxi-exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # ping
              - Equals: {request_url: "/ping"}
              - Equals: {request_url: "/ping/"}
              - StartsWith: {request_url: "/ping?"}
              - StartsWith: {request_url: "/ping/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/pong_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # ping
              - Equals: {request_url: "/pong"}
              - Equals: {request_url: "/pong/"}
              - StartsWith: {request_url: "/pong?"}
              - StartsWith: {request_url: "/pong/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/closed-experiments/apply_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Применение черновика закрытого эксперимента
              - Equals: {request_url: "/v1/closed-experiments/apply"}
              - Equals: {request_url: "/v1/closed-experiments/apply/"}
              - StartsWith: {request_url: "/v1/closed-experiments/apply?"}
              - StartsWith: {request_url: "/v1/closed-experiments/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Плохой предикат, несоответствие значения схеме, нет тега для user_has, не совпадает сохраненная ревизия эксперимента 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/closed-experiments/check_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Проверка черновика закрытого эксперимента
              - Equals: {request_url: "/v1/closed-experiments/check"}
              - Equals: {request_url: "/v1/closed-experiments/check/"}
              - StartsWith: {request_url: "/v1/closed-experiments/check?"}
              - StartsWith: {request_url: "/v1/closed-experiments/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Плохой предикат, несоответствие значения схеме, нет тега для user_has 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/closed-experiments/restore_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Восстановление эксперимента по ревизии
              - Equals: {request_url: "/v1/closed-experiments/restore"}
              - Equals: {request_url: "/v1/closed-experiments/restore/"}
              - StartsWith: {request_url: "/v1/closed-experiments/restore?"}
              - StartsWith: {request_url: "/v1/closed-experiments/restore/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Номер ревизии не является последним или восстановление невозможно (нет консьюмера, файла или тега,     восстановление не того эксперимента) 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/closed-experiments_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Изменение закрытого эксперимента
              - Equals: {request_url: "/v1/closed-experiments"}
              - Equals: {request_url: "/v1/closed-experiments/"}
              - StartsWith: {request_url: "/v1/closed-experiments?"}
              - StartsWith: {request_url: "/v1/closed-experiments/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Пользователи и/или эксперименты не найдены или номер ревизии не является последним 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/disable_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Выключение конфига
              - Equals: {request_url: "/v1/configs/disable"}
              - Equals: {request_url: "/v1/configs/disable/"}
              - StartsWith: {request_url: "/v1/configs/disable?"}
              - StartsWith: {request_url: "/v1/configs/disable/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # last_modified_at не соответствует значению в бд или конфиг не найден 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/drafts-disable-financial/apply_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Применение драфта на отключение признака финансовой значимости Конфига 3.0
              - Equals: {request_url: "/v1/configs/drafts-disable-financial/apply"}
              - Equals: {request_url: "/v1/configs/drafts-disable-financial/apply/"}
              - StartsWith: {request_url: "/v1/configs/drafts-disable-financial/apply?"}
              - StartsWith: {request_url: "/v1/configs/drafts-disable-financial/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/drafts-disable-financial/check_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Применение драфта на отключение признака финансовой значимости Эксперимента 3.0
              - Equals: {request_url: "/v1/configs/drafts-disable-financial/check"}
              - Equals: {request_url: "/v1/configs/drafts-disable-financial/check/"}
              - StartsWith: {request_url: "/v1/configs/drafts-disable-financial/check?"}
              - StartsWith: {request_url: "/v1/configs/drafts-disable-financial/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/drafts/apply_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Удаление конфига через драфт
              - Equals: {request_url: "/v1/configs/drafts/apply"}
              - Equals: {request_url: "/v1/configs/drafts/apply/"}
              - StartsWith: {request_url: "/v1/configs/drafts/apply?"}
              - StartsWith: {request_url: "/v1/configs/drafts/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Конфиг включен или отправлен неправильный last_modified_at
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/drafts/apply_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Создание конфига из драфта
              - Equals: {request_url: "/v1/configs/drafts/apply"}
              - Equals: {request_url: "/v1/configs/drafts/apply/"}
              - StartsWith: {request_url: "/v1/configs/drafts/apply?"}
              - StartsWith: {request_url: "/v1/configs/drafts/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # Конфиг есть в бд или отсутствуют: консумер, файл, тег 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/drafts/apply_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Обновление конфига из драфта
              - Equals: {request_url: "/v1/configs/drafts/apply"}
              - Equals: {request_url: "/v1/configs/drafts/apply/"}
              - StartsWith: {request_url: "/v1/configs/drafts/apply?"}
              - StartsWith: {request_url: "/v1/configs/drafts/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Конфиг не найден
              - 409 # Отправлен неправильный last_modified_at или отсутствуют: консумер, файл, тег 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/drafts/check_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Проверка черновика удаления конфига
              - Equals: {request_url: "/v1/configs/drafts/check"}
              - Equals: {request_url: "/v1/configs/drafts/check/"}
              - StartsWith: {request_url: "/v1/configs/drafts/check?"}
              - StartsWith: {request_url: "/v1/configs/drafts/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Конфиг не найден
              - 409 # Конфиг включен или отправлен неправильный last_modified_at
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/drafts/check_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Проверка черновика создания конфига
              - Equals: {request_url: "/v1/configs/drafts/check"}
              - Equals: {request_url: "/v1/configs/drafts/check/"}
              - StartsWith: {request_url: "/v1/configs/drafts/check?"}
              - StartsWith: {request_url: "/v1/configs/drafts/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/drafts/check_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Проверка черновика обновления конфига
              - Equals: {request_url: "/v1/configs/drafts/check"}
              - Equals: {request_url: "/v1/configs/drafts/check/"}
              - StartsWith: {request_url: "/v1/configs/drafts/check?"}
              - StartsWith: {request_url: "/v1/configs/drafts/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Конфиг не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/enable_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Включение конфига
              - Equals: {request_url: "/v1/configs/enable"}
              - Equals: {request_url: "/v1/configs/enable/"}
              - StartsWith: {request_url: "/v1/configs/enable?"}
              - StartsWith: {request_url: "/v1/configs/enable/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # last_modified_at не соответствует значению в бд или конфиг не найден 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/list_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Список конфигов
              - Equals: {request_url: "/v1/configs/list"}
              - Equals: {request_url: "/v1/configs/list/"}
              - StartsWith: {request_url: "/v1/configs/list?"}
              - StartsWith: {request_url: "/v1/configs/list/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/restore_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Восстановление конфига по ревизии
              - Equals: {request_url: "/v1/configs/restore"}
              - Equals: {request_url: "/v1/configs/restore/"}
              - StartsWith: {request_url: "/v1/configs/restore?"}
              - StartsWith: {request_url: "/v1/configs/restore/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Конфиг не найден
              - 409 # Номер ревизии не является последним или восстановление невозможно (нет консьюмера, файла или тега,     восстановление не того конфига) 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/revisions_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получить список ревизий для данного конфига
              - Equals: {request_url: "/v1/configs/revisions"}
              - Equals: {request_url: "/v1/configs/revisions/"}
              - StartsWith: {request_url: "/v1/configs/revisions?"}
              - StartsWith: {request_url: "/v1/configs/revisions/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/updates_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Список конфигов c ревизией, старше указанной
              - Equals: {request_url: "/v1/configs/updates"}
              - Equals: {request_url: "/v1/configs/updates/"}
              - StartsWith: {request_url: "/v1/configs/updates?"}
              - StartsWith: {request_url: "/v1/configs/updates/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs/view-phones_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Трансформировать в теле конфига id в телефоны
              - Equals: {request_url: "/v1/configs/view-phones"}
              - Equals: {request_url: "/v1/configs/view-phones/"}
              - StartsWith: {request_url: "/v1/configs/view-phones?"}
              - StartsWith: {request_url: "/v1/configs/view-phones/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Удаление конфига
              - Equals: {request_url: "/v1/configs"}
              - Equals: {request_url: "/v1/configs/"}
              - StartsWith: {request_url: "/v1/configs?"}
              - StartsWith: {request_url: "/v1/configs/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Конфиг не найден
              - 409 # Номер ревизии не является последним
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение конфига
              - Equals: {request_url: "/v1/configs"}
              - Equals: {request_url: "/v1/configs/"}
              - StartsWith: {request_url: "/v1/configs?"}
              - StartsWith: {request_url: "/v1/configs/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Конфиг не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Добавление конфига
              - Equals: {request_url: "/v1/configs"}
              - Equals: {request_url: "/v1/configs/"}
              - StartsWith: {request_url: "/v1/configs?"}
              - StartsWith: {request_url: "/v1/configs/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Не найдена запрошенная схема значений конфига
              - 409 # Не найдены консумеры, файлы или теги 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/configs_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Изменение конфига
              - Equals: {request_url: "/v1/configs"}
              - Equals: {request_url: "/v1/configs/"}
              - StartsWith: {request_url: "/v1/configs?"}
              - StartsWith: {request_url: "/v1/configs/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # Номер ревизии не является последним или не найдены консумеры, файлы или теги 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/consumers/kwargs/search_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Поиск кваргов по списку консумеров
              - Equals: {request_url: "/v1/consumers/kwargs/search"}
              - Equals: {request_url: "/v1/consumers/kwargs/search/"}
              - StartsWith: {request_url: "/v1/consumers/kwargs/search?"}
              - StartsWith: {request_url: "/v1/consumers/kwargs/search/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/consumers/kwargs_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Загрузка информации о кваргах, требуемых консумеру
              - Equals: {request_url: "/v1/consumers/kwargs"}
              - Equals: {request_url: "/v1/consumers/kwargs/"}
              - StartsWith: {request_url: "/v1/consumers/kwargs?"}
              - StartsWith: {request_url: "/v1/consumers/kwargs/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # Возможные проблемы:  - консумер неизвестен системе  - предикат некорректен 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/disable_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Выключение эксперимента
              - Equals: {request_url: "/v1/experiments/disable"}
              - Equals: {request_url: "/v1/experiments/disable/"}
              - StartsWith: {request_url: "/v1/experiments/disable?"}
              - StartsWith: {request_url: "/v1/experiments/disable/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # last_modified_at не соответствует значению в бд или эксперимент не найден 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts-disable-financial/apply_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Применение драфта на отключение признака финансовой значимости Эксперимента 3.0
              - Equals: {request_url: "/v1/experiments/drafts-disable-financial/apply"}
              - Equals: {request_url: "/v1/experiments/drafts-disable-financial/apply/"}
              - StartsWith: {request_url: "/v1/experiments/drafts-disable-financial/apply?"}
              - StartsWith: {request_url: "/v1/experiments/drafts-disable-financial/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts-disable-financial/check_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Проверка драфта на отключение признака финансовой значимости Эксперимента 3.0
              - Equals: {request_url: "/v1/experiments/drafts-disable-financial/check"}
              - Equals: {request_url: "/v1/experiments/drafts-disable-financial/check/"}
              - StartsWith: {request_url: "/v1/experiments/drafts-disable-financial/check?"}
              - StartsWith: {request_url: "/v1/experiments/drafts-disable-financial/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts/apply_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Удаление эксперимента через драфт
              - Equals: {request_url: "/v1/experiments/drafts/apply"}
              - Equals: {request_url: "/v1/experiments/drafts/apply/"}
              - StartsWith: {request_url: "/v1/experiments/drafts/apply?"}
              - StartsWith: {request_url: "/v1/experiments/drafts/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Эксперимент включен или отправлен неправильный last_modified_at
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts/apply_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Создание эксперимента из драфта
              - Equals: {request_url: "/v1/experiments/drafts/apply"}
              - Equals: {request_url: "/v1/experiments/drafts/apply/"}
              - StartsWith: {request_url: "/v1/experiments/drafts/apply?"}
              - StartsWith: {request_url: "/v1/experiments/drafts/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # Эксперимент есть в бд или нет приложения или консумера или файла или тега
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts/apply_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Обновление эксперимента из драфта
              - Equals: {request_url: "/v1/experiments/drafts/apply"}
              - Equals: {request_url: "/v1/experiments/drafts/apply/"}
              - StartsWith: {request_url: "/v1/experiments/drafts/apply?"}
              - StartsWith: {request_url: "/v1/experiments/drafts/apply/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Эксперимент есть в бд или отсутствуют: приложение, консумер, файл, тег 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts/check_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Проверка черновика удаления эксперимента
              - Equals: {request_url: "/v1/experiments/drafts/check"}
              - Equals: {request_url: "/v1/experiments/drafts/check/"}
              - StartsWith: {request_url: "/v1/experiments/drafts/check?"}
              - StartsWith: {request_url: "/v1/experiments/drafts/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Эксперимент включен или отправлен неправильный last_modified_at
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts/check_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Проверка черновика создания эксперимента
              - Equals: {request_url: "/v1/experiments/drafts/check"}
              - Equals: {request_url: "/v1/experiments/drafts/check/"}
              - StartsWith: {request_url: "/v1/experiments/drafts/check?"}
              - StartsWith: {request_url: "/v1/experiments/drafts/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts/check_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Проверка черновика обновления эксперимента
              - Equals: {request_url: "/v1/experiments/drafts/check"}
              - Equals: {request_url: "/v1/experiments/drafts/check/"}
              - StartsWith: {request_url: "/v1/experiments/drafts/check?"}
              - StartsWith: {request_url: "/v1/experiments/drafts/check/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts/uplift-to-config/apply_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Применение драфта для трансформации эксперимента в конфиг
              - Equals: {request_url: "/v1/experiments/drafts/uplift-to-config/apply"}
              - Equals: {request_url: "/v1/experiments/drafts/uplift-to-config/apply/"}
              - StartsWith: {request_url: "/v1/experiments/drafts/uplift-to-config/apply?"}
              - StartsWith: {request_url: "/v1/experiments/drafts/uplift-to-config/apply/?"}
        Options:
            CustomHttp:
              - 400 # Некорретно заданы входные данные
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Ошибка внутреннего состояния
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/drafts/uplift-to-config/check_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Проверка черновика аплифтинга эксперимента в конфиг
              - Equals: {request_url: "/v1/experiments/drafts/uplift-to-config/check"}
              - Equals: {request_url: "/v1/experiments/drafts/uplift-to-config/check/"}
              - StartsWith: {request_url: "/v1/experiments/drafts/uplift-to-config/check?"}
              - StartsWith: {request_url: "/v1/experiments/drafts/uplift-to-config/check/?"}
        Options:
            CustomHttp:
              - 400 # Некорретно заданы входные данные
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Ошибка внутреннего состояния
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/enable_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Включение эксперимента
              - Equals: {request_url: "/v1/experiments/enable"}
              - Equals: {request_url: "/v1/experiments/enable/"}
              - StartsWith: {request_url: "/v1/experiments/enable?"}
              - StartsWith: {request_url: "/v1/experiments/enable/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # last_modified_at не соответствует значению в бд или эксперимент не найден 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/filters/applications/list_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Список пользовательских приложений
              - Equals: {request_url: "/v1/experiments/filters/applications/list"}
              - Equals: {request_url: "/v1/experiments/filters/applications/list/"}
              - StartsWith: {request_url: "/v1/experiments/filters/applications/list?"}
              - StartsWith: {request_url: "/v1/experiments/filters/applications/list/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/filters/applications_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Удаление пользователя
              - Equals: {request_url: "/v1/experiments/filters/applications"}
              - Equals: {request_url: "/v1/experiments/filters/applications/"}
              - StartsWith: {request_url: "/v1/experiments/filters/applications?"}
              - StartsWith: {request_url: "/v1/experiments/filters/applications/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Приложение не найдено
              - 409 # Приложение указано в эксперименте
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/filters/applications_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Добавление приложения
              - Equals: {request_url: "/v1/experiments/filters/applications"}
              - Equals: {request_url: "/v1/experiments/filters/applications/"}
              - StartsWith: {request_url: "/v1/experiments/filters/applications?"}
              - StartsWith: {request_url: "/v1/experiments/filters/applications/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # Приложение с таким именем уже существует
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/filters/consumers/list_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Список потребителей
              - Equals: {request_url: "/v1/experiments/filters/consumers/list"}
              - Equals: {request_url: "/v1/experiments/filters/consumers/list/"}
              - StartsWith: {request_url: "/v1/experiments/filters/consumers/list?"}
              - StartsWith: {request_url: "/v1/experiments/filters/consumers/list/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/filters/consumers/names_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Список имен потребителей
              - Equals: {request_url: "/v1/experiments/filters/consumers/names"}
              - Equals: {request_url: "/v1/experiments/filters/consumers/names/"}
              - StartsWith: {request_url: "/v1/experiments/filters/consumers/names?"}
              - StartsWith: {request_url: "/v1/experiments/filters/consumers/names/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/filters/consumers_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Удаление потребителя
              - Equals: {request_url: "/v1/experiments/filters/consumers"}
              - Equals: {request_url: "/v1/experiments/filters/consumers/"}
              - StartsWith: {request_url: "/v1/experiments/filters/consumers?"}
              - StartsWith: {request_url: "/v1/experiments/filters/consumers/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Потребитель не найден
              - 409 # Потребитель указан в эксперименте
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/filters/consumers_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Добавление потребителя
              - Equals: {request_url: "/v1/experiments/filters/consumers"}
              - Equals: {request_url: "/v1/experiments/filters/consumers/"}
              - StartsWith: {request_url: "/v1/experiments/filters/consumers?"}
              - StartsWith: {request_url: "/v1/experiments/filters/consumers/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 409 # Потребитель с таким именем уже существует
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/list_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Список экспериментов
              - Equals: {request_url: "/v1/experiments/list"}
              - Equals: {request_url: "/v1/experiments/list/"}
              - StartsWith: {request_url: "/v1/experiments/list?"}
              - StartsWith: {request_url: "/v1/experiments/list/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/restore_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Восстановление эксперимента по ревизии
              - Equals: {request_url: "/v1/experiments/restore"}
              - Equals: {request_url: "/v1/experiments/restore/"}
              - StartsWith: {request_url: "/v1/experiments/restore?"}
              - StartsWith: {request_url: "/v1/experiments/restore/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Номер ревизии не является последним или восстановление невозможно (нет консьюмера, файла или тега,     восстановление не того эксперимента) 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/revisions_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получить список ревизий для данного эксперимента
              - Equals: {request_url: "/v1/experiments/revisions"}
              - Equals: {request_url: "/v1/experiments/revisions/"}
              - StartsWith: {request_url: "/v1/experiments/revisions?"}
              - StartsWith: {request_url: "/v1/experiments/revisions/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/updates_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Список экспериментов c ревизией, старше указанной
              - Equals: {request_url: "/v1/experiments/updates"}
              - Equals: {request_url: "/v1/experiments/updates/"}
              - StartsWith: {request_url: "/v1/experiments/updates?"}
              - StartsWith: {request_url: "/v1/experiments/updates/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/uplift-to-config_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Трансформация эксперимента в конфиг
              - Equals: {request_url: "/v1/experiments/uplift-to-config"}
              - Equals: {request_url: "/v1/experiments/uplift-to-config/"}
              - StartsWith: {request_url: "/v1/experiments/uplift-to-config?"}
              - StartsWith: {request_url: "/v1/experiments/uplift-to-config/?"}
        Options:
            CustomHttp:
              - 400 # Некорретно заданы входные данные
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Ошибка внутреннего состояния
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments/view-phones_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Трансформировать в теле эксперимента id в телефоны
              - Equals: {request_url: "/v1/experiments/view-phones"}
              - Equals: {request_url: "/v1/experiments/view-phones/"}
              - StartsWith: {request_url: "/v1/experiments/view-phones?"}
              - StartsWith: {request_url: "/v1/experiments/view-phones/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Удаление эксперимента
              - Equals: {request_url: "/v1/experiments"}
              - Equals: {request_url: "/v1/experiments/"}
              - StartsWith: {request_url: "/v1/experiments?"}
              - StartsWith: {request_url: "/v1/experiments/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Номер ревизии не является последним
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение эксперимента
              - Equals: {request_url: "/v1/experiments"}
              - Equals: {request_url: "/v1/experiments/"}
              - StartsWith: {request_url: "/v1/experiments?"}
              - StartsWith: {request_url: "/v1/experiments/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Добавление эксперимента
              - Equals: {request_url: "/v1/experiments"}
              - Equals: {request_url: "/v1/experiments/"}
              - StartsWith: {request_url: "/v1/experiments?"}
              - StartsWith: {request_url: "/v1/experiments/?"}
        Options:
            CustomHttp:
              - 400 # Плохие входные параметры
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Не найдена запрошенная схема значений конфига
              - 409 # Не найдены консумеры, файлы или теги 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/experiments_PUT:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "PUT"}
          - Or: # Изменение эксперимента
              - Equals: {request_url: "/v1/experiments"}
              - Equals: {request_url: "/v1/experiments/"}
              - StartsWith: {request_url: "/v1/experiments?"}
              - StartsWith: {request_url: "/v1/experiments/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент не найден
              - 409 # Пользователи и/или эксперименты не найдены или номер ревизии не является последним 
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/fallbacks/list_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Список фоллбеков
              - Equals: {request_url: "/v1/fallbacks/list"}
              - Equals: {request_url: "/v1/fallbacks/list/"}
              - StartsWith: {request_url: "/v1/fallbacks/list?"}
              - StartsWith: {request_url: "/v1/fallbacks/list/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files/by_config_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение списка файлов, связанных с конфигом
              - Equals: {request_url: "/v1/files/by_config"}
              - Equals: {request_url: "/v1/files/by_config/"}
              - StartsWith: {request_url: "/v1/files/by_config?"}
              - StartsWith: {request_url: "/v1/files/by_config/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Конфиг с таким именем не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files/by_experiment_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение списка файлов, связанных с экспериментом
              - Equals: {request_url: "/v1/files/by_experiment"}
              - Equals: {request_url: "/v1/files/by_experiment/"}
              - StartsWith: {request_url: "/v1/files/by_experiment?"}
              - StartsWith: {request_url: "/v1/files/by_experiment/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент с таким именем не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files/history/by_config_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение истории файлов, связанных с конфигом
              - Equals: {request_url: "/v1/files/history/by_config"}
              - Equals: {request_url: "/v1/files/history/by_config/"}
              - StartsWith: {request_url: "/v1/files/history/by_config?"}
              - StartsWith: {request_url: "/v1/files/history/by_config/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Конфиг с таким именем не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files/history/by_experiment_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение истории файлов, связанных с экспериментом
              - Equals: {request_url: "/v1/files/history/by_experiment"}
              - Equals: {request_url: "/v1/files/history/by_experiment/"}
              - StartsWith: {request_url: "/v1/files/history/by_experiment?"}
              - StartsWith: {request_url: "/v1/files/history/by_experiment/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент с таким именем не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files/history_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Получение истории загрузки, обновления и удаления файлов
              - Equals: {request_url: "/v1/files/history"}
              - Equals: {request_url: "/v1/files/history/"}
              - StartsWith: {request_url: "/v1/files/history?"}
              - StartsWith: {request_url: "/v1/files/history/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files/search_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Поиск и получение списка файлов
              - Equals: {request_url: "/v1/files/search"}
              - Equals: {request_url: "/v1/files/search/"}
              - StartsWith: {request_url: "/v1/files/search?"}
              - StartsWith: {request_url: "/v1/files/search/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Удаление ранее загруженного файла
              - Equals: {request_url: "/v1/files"}
              - Equals: {request_url: "/v1/files/"}
              - StartsWith: {request_url: "/v1/files?"}
              - StartsWith: {request_url: "/v1/files/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Файл с таким id не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Выгрузка файла с сервера
              - Equals: {request_url: "/v1/files"}
              - Equals: {request_url: "/v1/files/"}
              - StartsWith: {request_url: "/v1/files?"}
              - StartsWith: {request_url: "/v1/files/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Файл с таким id не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/files_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Загрузка нового файла на сервер
              - Equals: {request_url: "/v1/files"}
              - Equals: {request_url: "/v1/files/"}
              - StartsWith: {request_url: "/v1/files?"}
              - StartsWith: {request_url: "/v1/files/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/history_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получить эксперимент (или конфиг) по ревизии
              - Equals: {request_url: "/v1/history"}
              - Equals: {request_url: "/v1/history/"}
              - StartsWith: {request_url: "/v1/history?"}
              - StartsWith: {request_url: "/v1/history/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Эксперимент или конфиг не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/schemas/draft_DELETE:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "DELETE"}
          - Or: # Удаление драфта схемы для эксперимента
              - Equals: {request_url: "/v1/schemas/draft"}
              - Equals: {request_url: "/v1/schemas/draft/"}
              - StartsWith: {request_url: "/v1/schemas/draft?"}
              - StartsWith: {request_url: "/v1/schemas/draft/?"}
        Options:
            CustomHttp:
              - 400 # Ошибка во входных параметрах
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Драфт схемы не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/schemas/draft_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение драфта схемы для эксперимента
              - Equals: {request_url: "/v1/schemas/draft"}
              - Equals: {request_url: "/v1/schemas/draft/"}
              - StartsWith: {request_url: "/v1/schemas/draft?"}
              - StartsWith: {request_url: "/v1/schemas/draft/?"}
        Options:
            CustomHttp:
              - 400 # Ошибка во входных параметрах
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Драфт схемы не найден
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/schemas/draft_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Добавление драфта схемы
              - Equals: {request_url: "/v1/schemas/draft"}
              - Equals: {request_url: "/v1/schemas/draft/"}
              - StartsWith: {request_url: "/v1/schemas/draft?"}
              - StartsWith: {request_url: "/v1/schemas/draft/?"}
        Options:
            CustomHttp:
              - 400 # Cхема из запроса не прошла валидацию либо некоторые из экспериментов, связанных с этой схемой, не удалось по ней провалидировать 
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Указанный эксперимент/конфиг не существует
              - 409 # Драфт схемы для этого эксперимента уже существует
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/schemas/publish_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Публикация драфта схемы
              - Equals: {request_url: "/v1/schemas/publish"}
              - Equals: {request_url: "/v1/schemas/publish/"}
              - StartsWith: {request_url: "/v1/schemas/publish?"}
              - StartsWith: {request_url: "/v1/schemas/publish/?"}
        Options:
            CustomHttp:
              - 400 # Cхема из запроса не прошла повторную валидацию
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Драфта с указанным id не существует
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/technical/move-to-stable_POST:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "POST"}
          - Or: # Перемещает эксперименты, у которых истек срок ожидания в стейбл (активна только в интеграционных тестах) 
              - Equals: {request_url: "/v1/technical/move-to-stable"}
              - Equals: {request_url: "/v1/technical/move-to-stable/"}
              - StartsWith: {request_url: "/v1/technical/move-to-stable?"}
              - StartsWith: {request_url: "/v1/technical/move-to-stable/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Ручка отключена
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/trusted-files/metadata_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение метаданных тега
              - Equals: {request_url: "/v1/trusted-files/metadata"}
              - Equals: {request_url: "/v1/trusted-files/metadata/"}
              - StartsWith: {request_url: "/v1/trusted-files/metadata?"}
              - StartsWith: {request_url: "/v1/trusted-files/metadata/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests

    exp.taxi.tst.yandex.net/v1/trusted-files/tags_GET:
        And:
          - Equals: {http_host: "exp.taxi.tst.yandex.net"}
          - Equals: {request_method: "GET"}
          - Or: # Получение списка тегов
              - Equals: {request_url: "/v1/trusted-files/tags"}
              - Equals: {request_url: "/v1/trusted-files/tags/"}
              - StartsWith: {request_url: "/v1/trusted-files/tags?"}
              - StartsWith: {request_url: "/v1/trusted-files/tags/?"}
        Options:
            CustomHttp:
              - 400 # Bad request
              - 401 # Unauthorized
              - 403 # Forbidden
              - 404 # Not found
              - 429 # Too many requests


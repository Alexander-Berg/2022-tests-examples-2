# This file is generated automatically, do not edit it by hand!
# generated by api-proxy-config: make generate-dorblu
group:
    type: rtc
    name: taxi_api-proxy-superapp-critical_testing

graphs:

    Monitoring:
        vhost-500:
            Blacklist:
              - Equals:
                    request_url: /ping
        vhost-4_0_startup-500:
            MatchRule:
                And:
                  - GreaterThan:
                        status: '499'
                  - Equals:
                        http_host: api-proxy-superapp-critical.taxi.yandex.net
                  - Equals:
                        upstream_http_x_yataxi_api_operationid: 4-0-startup
            DefaultLimits:
                Warn: 1
                Crit: 1
        vhost-4_0_startup-4xx:
            MatchRule:
                And:
                  - LessThan:
                        status: '499'
                  - GreaterThan:
                        status: '399'
                  - Equals:
                        http_host: api-proxy-superapp-critical.taxi.yandex.net
                  - Equals:
                        upstream_http_x_yataxi_api_operationid: 4-0-startup
            DefaultLimits:
                Warn: 5
                Crit: 5
        

    api-proxy-superapp-critical.taxi.tst.yandex.net:
        Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
            Timings:
              - Type: Req
                Percentile: 0.95
                Warn: 0.5
                Crit: 0.5
            


    "api-proxy-superapp-critical/4-0-grocery-v1-list-payment-methods  (/4.0/grocery/v1/list-payment-methods)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "4-0-grocery-v1-list-payment-methods" }
              - Equals: { request_url: "/4.0/grocery/v1/list-payment-methods" }
              - Equals: { request_url: "/4.0/grocery/v1/list-payment-methods/" }
              - StartsWith: { request_url: "/4.0/grocery/v1/list-payment-methods?" }
              - StartsWith: { request_url: "/4.0/grocery/v1/list-payment-methods/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/4-0-mlutp-v1-inapp-widgets  (/4.0/mlutp/v1/inapp-widgets)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "4-0-mlutp-v1-inapp-widgets" }
              - Equals: { request_url: "/4.0/mlutp/v1/inapp-widgets" }
              - Equals: { request_url: "/4.0/mlutp/v1/inapp-widgets/" }
              - StartsWith: { request_url: "/4.0/mlutp/v1/inapp-widgets?" }
              - StartsWith: { request_url: "/4.0/mlutp/v1/inapp-widgets/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/4-0-payments-v1-list-payment-methods  (/4.0/payments/v1/list-payment-methods)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "4-0-payments-v1-list-payment-methods" }
              - Equals: { request_url: "/4.0/payments/v1/list-payment-methods" }
              - Equals: { request_url: "/4.0/payments/v1/list-payment-methods/" }
              - StartsWith: { request_url: "/4.0/payments/v1/list-payment-methods?" }
              - StartsWith: { request_url: "/4.0/payments/v1/list-payment-methods/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/4-0-scooters-api-yandex-car-actualization  (/4.0/scooters/api/yandex/car/actualization)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "4-0-scooters-api-yandex-car-actualization" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/car/actualization" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/car/actualization/" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/car/actualization?" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/car/actualization/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/4-0-scooters-api-yandex-card  (/4.0/scooters/api/yandex/card)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "4-0-scooters-api-yandex-card" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/card" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/card/" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/card?" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/card/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/4-0-scooters-v1-offers-create  (/4.0/scooters/v1/offers/create)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "4-0-scooters-v1-offers-create" }
              - Equals: { request_url: "/4.0/scooters/v1/offers/create" }
              - Equals: { request_url: "/4.0/scooters/v1/offers/create/" }
              - StartsWith: { request_url: "/4.0/scooters/v1/offers/create?" }
              - StartsWith: { request_url: "/4.0/scooters/v1/offers/create/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/4-0-scooters-v1-wind-wallet-v1-status  (/4.0/scooters/v1/wind-wallet/v1/status)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "4-0-scooters-v1-wind-wallet-v1-status" }
              - Equals: { request_url: "/4.0/scooters/v1/wind-wallet/v1/status" }
              - Equals: { request_url: "/4.0/scooters/v1/wind-wallet/v1/status/" }
              - StartsWith: { request_url: "/4.0/scooters/v1/wind-wallet/v1/status?" }
              - StartsWith: { request_url: "/4.0/scooters/v1/wind-wallet/v1/status/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/scooters-car-control  (/4.0/scooters/api/yandex/car/control)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "scooters-car-control" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/car/control" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/car/control/" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/car/control?" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/car/control/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/scooters-offers-book  (/4.0/scooters/api/yandex/offers/book)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "scooters-offers-book" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/offers/book" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/offers/book/" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/offers/book?" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/offers/book/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/scooters-sessions-current  (/4.0/scooters/external/sessions/current)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "scooters-sessions-current" }
              - Equals: { request_url: "/4.0/scooters/external/sessions/current" }
              - Equals: { request_url: "/4.0/scooters/external/sessions/current/" }
              - StartsWith: { request_url: "/4.0/scooters/external/sessions/current?" }
              - StartsWith: { request_url: "/4.0/scooters/external/sessions/current/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    "api-proxy-superapp-critical/scooters-tag-evolve  (/4.0/scooters/api/yandex/tag/evolve)":
        And:
          - Equals: { http_host: "api-proxy-superapp-critical.taxi.tst.yandex.net" }
          - Or:
              - Equals: { upstream_http_x_yataxi_api_operationid: "scooters-tag-evolve" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/tag/evolve" }
              - Equals: { request_url: "/4.0/scooters/api/yandex/tag/evolve/" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/tag/evolve?" }
              - StartsWith: { request_url: "/4.0/scooters/api/yandex/tag/evolve/?" }
        Options:
            CustomHttp:
              - 400
              - 401
              - 403
              - 404
              - 406
              - 409
              - 410
              - 429
              - 503

    # Custom dorblu configs
    api-proxy-superapp-critical.taxi.yandex.net/4.0/mlutp/v1/products:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-mlutp-v1-products
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    api-proxy-superapp-critical.taxi.yandex.net/4.0/mlutp/v1/products/screen/city-mode:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-mlutp-v1-products-screen-city-mode
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    api-proxy-superapp-critical.taxi.yandex.net/4.0/mlutp/v1/products/screen/supermarket:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-mlutp-v1-products-screen-supermarket
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    api-proxy-superapp-critical.taxi.yandex.net/4.0/mlutp/v1/products/screen/scooters-discovery:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-mlutp-v1-products-screen-scooters-discovery
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    api-proxy-superapp-critical.taxi.yandex.net/4.0/mlutp/v1/products/screen/shops:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-mlutp-v1-products-screen-shops
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    api-proxy-superapp-critical.taxi.yandex.net/4.0/payments/v1/list-payment-methods?*service=grocery*:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-payments-v1-list-payment-methods
          - Contains:
                request_url: service=grocery
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    api-proxy-superapp-critical.taxi.yandex.net/4.0/payments/v1/list-payment-methods?*service=eats*:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-payments-v1-list-payment-methods
          - Contains:
                request_url: service=eats
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    api-proxy-superapp-critical.taxi.yandex.net/4.0/payments/v1/list-payment-methods?*service=scooters*:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-payments-v1-list-payment-methods
          - Contains:
                request_url: service=scooters
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    api-proxy-superapp-critical.taxi.yandex.net/4.0/payments/v1/list-payment-methods?*service=pickup_points*:
        And:
          - Equals:
                http_host: api-proxy-superapp-critical.taxi.yandex.net
          - Equals:
                upstream_http_x_yataxi_api_operationid: 4-0-payments-v1-list-payment-methods
          - Contains:
                request_url: service=pickup_points
        Options:
            CustomHttp:
              - 401
              - 403
              - 406
              - 409
              - 410
              - 429
              - 503
    

{
  "billing_old_api": [
    {
      "bonus_amount": "100",
      "budget": {
        "approvers": [],
        "daily": null,
        "id": "c4f3b2b6-324c-4a37-94bf-f0a84107af7b",
        "rolling": true,
        "threshold": 100,
        "tickets": [
          "taxirate-53"
        ],
        "weekly": "1"
      },
      "currency": "RUB",
      "cursor": "2021-02-24T19:00:00.000000+00:00/5e55573ea11531e403f68b94",
      "end": "2021-02-24T19:00:00.000000+00:00",
      "geoareas": [
        "pol7"
      ],
      "has_commission": true,
      "hours": [
        1
      ],
      "is_personal": false,
      "log": [
        {
          "end": "2021-02-24T19:00:00.000000+00:00",
          "login": "mikhail-kilin",
          "start": "2020-02-25T19:00:00.000000+00:00",
          "ticket": "taxirate-53",
          "updated": "2020-02-25T17:19:57.513000+00:00"
        }
      ],
      "order_payment_type": null,
      "payment_type": "guarantee",
      "start": "2020-02-25T19:00:00.000000+00:00",
      "status": "enabled",
      "subvention_rule_id": "_id/5e55573ea11531e403f68b94",
      "tags": [],
      "tariff_classes": [],
      "tariff_zones": [
        "saratov"
      ],
      "taxirate": "taxirate-53",
      "time_zone": {
        "id": "Europe/Moscow",
        "offset": "+03:00"
      },
      "type": "guarantee",
      "updated": "2020-02-25T17:20:11.310000+00:00",
      "visible_to_driver": true,
      "week_days": [
        "mon",
        "tue",
        "wed",
        "thu",
        "fri",
        "sat",
        "sun"
      ]
    },
    {
      "budget": {
        "daily": null,
        "id": "84c085c3-e07e-4275-9278-2bc4a82145cb",
        "rolling": true,
        "threshold": 250,
        "weekly": "121246"
      },
      "currency": "RUB",
      "cursor": "2021-12-29T21:00:00.000000+00:00/5feaf96a8fe28d5ce4a7cd4c",
      "days_span": 1,
      "driver_points": 40,
      "end": "2021-12-29T21:00:00.000000+00:00",
      "geoareas": [],
      "has_commission": true,
      "hours": [],
      "is_net": false,
      "is_personal": false,
      "is_test": false,
      "log": [
        {
          "end": "2021-12-29T21:00:00.000000+00:00",
          "login": "voolgoaf",
          "start": "2021-01-01T21:00:00.000000+00:00",
          "ticket": "RUPRICING-11680",
          "updated": "2020-12-29T09:39:54.370000+00:00"
        }
      ],
      "min_activity_points": 40,
      "order_payment_type": null,
      "payment_type": "guarantee",
      "start": "2021-01-01T21:00:00.000000+00:00",
      "status": "enabled",
      "steps": [
        {
          "bonus": 430.0,
          "orders_count": 5
        },
        {
          "bonus": 900.0,
          "orders_count": 10
        },
        {
          "bonus": 1500.0,
          "orders_count": 15
        },
        {
          "bonus": 2100.0,
          "orders_count": 20
        },
        {
          "bonus": 2700.0,
          "orders_count": 25
        },
        {
          "bonus": 3500.0,
          "orders_count": 30
        },
        {
          "bonus": 4300.0,
          "orders_count": 35
        }
      ],
      "subvention_rule_id": "group_id/49cfa322-aec9-4da0-8b4a-9436350a571a",
      "tags": [],
      "tariff_classes": [
        "econom",
        "uberx",
        "express",
        "courier"
      ],
      "tariff_zones": [
        "saratov"
      ],
      "taximeter_daily_guarantee_tag": "steps",
      "taxirate": "RUPRICING-11680",
      "time_zone": {
        "id": "Europe/Moscow",
        "offset": "+03:00"
      },
      "trips_bounds": [
        {
          "bonus_amount": "430.0",
          "lower_bound": 5,
          "upper_bound": 9
        },
        {
          "bonus_amount": "900.0",
          "lower_bound": 10,
          "upper_bound": 14
        },
        {
          "bonus_amount": "1500.0",
          "lower_bound": 15,
          "upper_bound": 19
        },
        {
          "bonus_amount": "2100.0",
          "lower_bound": 20,
          "upper_bound": 24
        },
        {
          "bonus_amount": "2700.0",
          "lower_bound": 25,
          "upper_bound": 29
        },
        {
          "bonus_amount": "3500.0",
          "lower_bound": 30,
          "upper_bound": 34
        },
        {
          "bonus_amount": "4300.0",
          "lower_bound": 35
        }
      ],
      "type": "daily_guarantee",
      "updated": "2020-12-29T11:14:40.084000+00:00",
      "visible_to_driver": true,
      "week_days": [
        "mon",
        "tue",
        "wed",
        "thu",
        "fri",
        "sat",
        "sun"
      ]
    }
  ],
  "bsx_rules": [
    {
      "activity_points": 40,
      "budget_id": "c036f957-c3df-44de-b140-de9983e8f19e",
      "draft_id": "75679",
      "end": "2020-10-19T18:00:32+00:00",
      "id": "0efe09e1-806d-49c9-8196-bd5ac31db389",
      "rates": [
        {
          "bonus_amount": "190",
          "start": "00:10",
          "week_day": "sat"
        },
        {
          "bonus_amount": "0",
          "start": "01:10",
          "week_day": "sat"
        }
      ],
      "rule_type": "single_ride",
      "schedule_ref": "75679",
      "start": "2020-10-16T13:00:32+00:00",
      "tariff_class": "econom",
      "updated_at": "2020-10-16T13:00:32+00:00",
      "zone": "saratov"
    },
    {
      "activity_points": 40,
      "budget_id": "c036f957-c3df-44de-b140-de9983e8f19f",
      "draft_id": "75679",
      "end": "2020-10-19T18:00:32+00:00",
      "id": "0efe09e1-806d-49c9-8196-bd5ac31db386",
      "rates": [
        {
          "bonus_amount": "190",
          "start": "02:10",
          "week_day": "sat"
        },
        {
          "bonus_amount": "0",
          "start": "02:40",
          "week_day": "sat"
        },
        {
          "bonus_amount": "500",
          "start": "22:10",
          "week_day": "sun"
        },
        {
          "bonus_amount": "0",
          "start": "02:40",
          "week_day": "mon"
        }
      ],
      "rule_type": "single_ride",
      "schedule_ref": "75679",
      "start": "2020-10-16T13:00:32+00:00",
      "tariff_class": "econom",
      "updated_at": "2020-10-16T13:00:32+00:00",
      "zone": "engels"
    }
  ],
  "config_params": {
    "data_loader": {
      "coord_sigma_cutoff": 2.5,
      "cost_cutoff_quantile": 0.999,
      "sampling_size": 1200000,
      "time_cutoff_quantile": 0.001
    },
    "rule_maker_params": {
      "max_guarantee_ratio": 3,
      "min_guarantee": 91
    },
    "rush_detector_params": {
      "group_min_total_span": 120,
      "min_interval_span": 30,
      "split_interval_span": 30
    },
    "shaper_params": {
      "intersect_cut_smaller": false,
      "max_polygon_edges_cnt": 100,
      "max_polygons_per_group": 5,
      "min_poly_area_ratio": 0.0005
    }
  },
  "tasks": {
    "a": {
      "task": {
        "budget": {
          "how_apply": "driver"
        },
        "data_loader": {
          "date_from": "2020-11-03 10:25:32",
          "date_to": "2020-11-17 10:25:32",
          "tariff_zones": [
            "moscow"
          ],
          "tariffs": [
            "econom"
          ]
        },
        "draft_rules": [],
        "polygons": {
          "alpha_param": 0.007,
          "cluster_percent_of_sample": 0.03,
          "cost_weight_power": 0,
          "data": [],
          "eps": 0.028,
          "min_samples": 1,
          "surge_threshold": 1.2,
          "surge_weight_power": 1.3
        },
        "rush_hours": {
          "data": {},
          "distance_threshold": 0.3,
          "percentile": 0.65,
          "surge_pwr": 2.2
        },
        "tag_conf": {
          "current_rules_tags": [
            ""
          ],
          "main_tag": ""
        }
      }
    },
    "b": {
      "task": {
        "budget": {
          "how_apply": "driver"
        },
        "data_loader": {
          "date_from": "2020-11-03 11:23:07",
          "date_to": "2020-11-17 11:23:07",
          "tariff_zones": [
            "samara"
          ],
          "tariffs": [
            "econom"
          ]
        },
        "draft_rules": [
          {
            "categories": [
              "econom"
            ],
            "geoareas": [
              "5fb38a175e48dae578953b08_pol0"
            ],
            "interval": {
              "end_dayofweek": 2,
              "end_time": "01:00",
              "start_dayofweek": 2,
              "start_time": "00:00"
            },
            "rule_sum": 205,
            "rule_type": "guarantee"
          },
          {
            "categories": [
              "econom"
            ],
            "geoareas": [
              "5fb38a175e48dae578953b08_pol1"
            ],
            "interval": {
              "end_dayofweek": 2,
              "end_time": "01:00",
              "start_dayofweek": 2,
              "start_time": "00:00"
            },
            "rule_sum": 180,
            "rule_type": "guarantee"
          },
          {
            "categories": [
              "econom"
            ],
            "geoareas": [
              "5fb38a175e48dae578953b08_pol0",
              "5fb38a175e48dae578953b08_pol1"
            ],
            "interval": {
              "end_dayofweek": 5,
              "end_time": "01:00",
              "start_dayofweek": 5,
              "start_time": "00:00"
            },
            "rule_sum": 165,
            "rule_type": "guarantee"
          },
          {
            "categories": [
              "econom"
            ],
            "geoareas": [
              "5fb38a175e48dae578953b08_pol3"
            ],
            "interval": {
              "end_dayofweek": 1,
              "end_time": "08:00",
              "start_dayofweek": 1,
              "start_time": "07:00"
            },
            "rule_sum": 160,
            "rule_type": "guarantee"
          }
        ],
        "polygons": {
          "alpha_param": 0.007,
          "cluster_percent_of_sample": 0.03,
          "cost_weight_power": 0,
          "data": [
            {
              "geometry": {
                "coordinates": [
                  [
                    [
                      50.28081572113459,
                      53.24089465235615
                    ],
                    [
                      50.28729095173748,
                      53.23952285175096
                    ],
                    [
                      50.28937843774495,
                      53.23741280734729
                    ],
                    [
                      50.28081572113459,
                      53.24089465235615
                    ]
                  ]
                ],
                "type": "Polygon"
              },
              "id": "5fb38a175e48dae578953b08_pol0",
              "properties": {
                "name": "pol0"
              },
              "type": "Feature"
            },
            {
              "geometry": {
                "coordinates": [
                  [
                    [
                      50.26784131007092,
                      53.25091179801678
                    ],
                    [
                      50.26857345576475,
                      53.24658996980415
                    ],
                    [
                      50.26277033902934,
                      53.23310106776762
                    ],
                    [
                      50.26784131007092,
                      53.25091179801678
                    ]
                  ]
                ],
                "type": "Polygon"
              },
              "id": "5fb38a175e48dae578953b08_pol1",
              "properties": {
                "name": "pol1"
              },
              "type": "Feature"
            },
            {
              "geometry": {
                "coordinates": [
                  [
                    [
                      50.07736569338627,
                      53.17848700187584
                    ],
                    [
                      50.074568795429876,
                      53.181157237595535
                    ],
                    [
                      50.08822939999999,
                      53.19396659921529
                    ],
                    [
                      50.07736569338627,
                      53.17848700187584
                    ]
                  ]
                ],
                "type": "Polygon"
              },
              "id": "5fb38a175e48dae578953b08_pol3",
              "properties": {
                "name": "pol3"
              },
              "type": "Feature"
            }
          ],
          "eps": 0.028,
          "min_samples": 1,
          "surge_threshold": 1.2,
          "surge_weight_power": 1.3
        },
        "rush_hours": {
          "data": {
            "0": [
              {
                "end_dayofweek": 2,
                "end_time": "01:00",
                "start_dayofweek": 2,
                "start_time": "00:00"
              },
              {
                "end_dayofweek": 5,
                "end_time": "01:00",
                "start_dayofweek": 5,
                "start_time": "00:00"
              }
            ],
            "2": [
              {
                "end_dayofweek": 0,
                "end_time": "08:00",
                "start_dayofweek": 0,
                "start_time": "07:00"
              },
              {
                "end_dayofweek": 1,
                "end_time": "08:00",
                "start_dayofweek": 1,
                "start_time": "07:00"
              }
            ]
          }
        },
        "tag_conf": {
          "current_rules_tags": [
            ""
          ],
          "main_tag": ""
        }
      }
    }
  }
}

# Generated by Django 2.2.11 on 2020-06-02 11:42

from django.db import migrations


def add_configuration(apps, schema_editor):
    config_key = 'TESTS_REWARD'

    configs = apps.get_model('compendium', 'configs')
    if not configs.objects.filter(key=config_key).exists():
        test_config = configs()
        test_config.key = config_key
        test_config.value = {
            'is_active': False,
            'coins_amount': 10,
            'exp_amount': 5,
        }
        test_config.save()


def delete_configuration(apps, schema_editor):
    config_key = 'TESTS_REWARD'

    configs = apps.get_model('compendium', 'configs')

    configs.objects.filter(key=config_key).delete()


class Migration(migrations.Migration):

    dependencies = [('tests', '0002_test_reward')]

    operations = [
        migrations.RunPython(add_configuration, delete_configuration),
    ]

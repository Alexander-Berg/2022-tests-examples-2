[
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2a5"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "predispatch_user_chat_message_id",
    "line": "second",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "predispatch",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2c5"
    },
    "chat_type": "messenger",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "mssngr_predispatch_user_chat_message_id",
    "line": "second",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "predispatch",
    "support_admin": "superuser",
    "tags": [],
    "type": "messenger",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2c6"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "client_reopen_chat_message_id",
    "line": "second",
    "meta_info": {
      "calls": [],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "reopened",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2a6"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "new_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "calls": [],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2a7"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "reopened_user_chat_message_id",
    "history": [
      {
        "action": "create",
        "created": {
          "$date": "2018-05-05T12:34:56.000Z"
        },
        "line": "first",
        "login": "superuser"
      },
      {
        "action": "update_meta",
        "created": {
          "$date": "2018-05-05T12:34:57.000Z"
        },
        "line": "first",
        "login": "superuser",
        "meta_changes": [
          {
            "change_type": "set",
            "field_name": "user_id",
            "value": "test_user_id"
          },
          {
            "change_type": "set",
            "field_name": "user_phone",
            "value": "+7925"
          }
        ]
      },
      {
        "action": "forward",
        "created": {
          "$date": "2018-05-05T12:34:58.000Z"
        },
        "in_addition": false,
        "line": "first",
        "login": "superuser",
        "new_line": "first_center"
      },
      {
        "action": "communicate",
        "comment": "сообщение",
        "created": {
          "$date": "2018-05-05T12:34:59.000Z"
        },
        "external_id": 2,
        "line": "first_center",
        "login": "support_login",
        "macro_ids": [
          "123",
          "456"
        ],
        "reply_to": [
          "123"
        ],
        "tags_changes": [
          {
            "change_type": "add",
            "tag": "add_tag"
          },
          {
            "change_type": "add",
            "tag": "chat_tag"
          }
        ]
      }
    ],
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "ml_request_id": "045fb0acd2024594b52952fec3cd39f2",
      "user_id": "user_id",
      "user_phone": "+74950000001"
    },
    "status": "reopened",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2a8"
    },
    "chat_type": "driver",
    "created": {
      "$date": "2018-06-15T12:33:56.000Z"
    },
    "external_id": "some_driver_chat_message_id",
    "line": "first",
    "meta_info": {
      "block_reasons": [
        "DriverPointsRateBlockTemp"
      ],
      "city": "Moscow",
      "country": "rus",
      "driver_phone": "+74950000000",
      "locale": "ru",
      "tariff": "econom",
      "ticket_subject": "Я не вижу новые заказы",
      "zendesk_profile": "yataxi"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-06-15T12:33:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2a9"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "cancelled_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2aa"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "expired_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "autoreply_enqueue_count": 2,
      "autoreply_macro_id": 2,
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2ab"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "nto_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2ac"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "nto_in_progress_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "autodismiss": true,
      "autoreply_enqueue_count": 1,
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "autoreply_in_progress",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2ad"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "autoreply_in_progress_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "autoreply_close_task": true,
      "autoreply_enqueue_count": 1,
      "autoreply_macro_id": 1,
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "autoreply_in_progress",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c3ad"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "autoreply_in_progress_user_chat_message_id_2",
    "line": "first",
    "meta_info": {
      "autoreply_close_task": true,
      "autoreply_dialogue_mode": true,
      "autoreply_enqueue_count": 1,
      "autoreply_macro_id": 1,
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "autoreply_in_progress",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2ae"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "autoreply_must_fail_offline_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "autoreply_enqueue_count": 1,
      "autoreply_macro_id": 2,
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "autoreply_in_progress",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2af"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "autoreply_must_fail_online_user_chat_message_id",
    "line": "second",
    "meta_info": {
      "autoreply_enqueue_count": 1,
      "autoreply_macro_id": 2,
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "autoreply_in_progress",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b0"
    },
    "chat_type": "driver",
    "created": {
      "$date": "2018-06-15T12:33:56.000Z"
    },
    "external_id": "some_driver_chat_routing_message_id",
    "line": "first",
    "meta_info": {
      "block_reasons": [
        "DriverPointsRateBlockTemp"
      ],
      "city": "Moscow",
      "country": "rus",
      "driver_phone": "+74950000000",
      "locale": "ru",
      "tariff": "econom",
      "ticket_subject": "Я не вижу новые заказы",
      "zendesk_profile": "yataxi"
    },
    "status": "predispatch",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-06-15T12:33:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2c8"
    },
    "chat_type": "driver",
    "created": {
      "$date": "2018-06-15T12:33:56.000Z"
    },
    "external_id": "some_external_id",
    "line": "first_without_autoreply",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "driver_phone": "+74950000000",
      "locale": "ru",
      "tariff": "econom",
      "ticket_subject": "Я не вижу новые заказы",
      "zendesk_profile": "yataxi"
    },
    "status": "predispatch",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-06-15T12:33:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b1"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "forward_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "calls": [],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "forwarded",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b2"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "forward_user_chat_message_id_2",
    "line": "second",
    "meta_info": {
      "calls": [],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "forwarded",
    "support_admin": "superuser",
    "tags": [
      "manual_solve"
    ],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b3"
    },
    "chat_type": "driver",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "forward_user_chat_message_id_3",
    "line": "first",
    "meta_info": {
      "calls": [],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "forwarded",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b4"
    },
    "chat_type": "startrack",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "CHATTERBOX-73070",
    "line": "first",
    "status": "predispatch",
    "support_admin": "superuser",
    "type": "startrack",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b5"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "defer_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "deferred",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b6"
    },
    "chat_type": "opteum",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "opteum_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "predispatch",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b7"
    },
    "chat_type": "opteum",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "opteum_new_user_chat_message_id",
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "some": "old_value",
      "user_phone": "+74950000001"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b8"
    },
    "chat_type": "driver",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "reopened_user_chat_message_id_2",
    "history": [
      {
        "action": "create",
        "created": {
          "$date": "2018-05-05T12:34:56.000Z"
        },
        "line": "first",
        "login": "superuser"
      },
      {
        "action": "forward",
        "created": {
          "$date": "2018-05-05T12:34:58.000Z"
        },
        "in_addition": false,
        "line": "first",
        "login": "superuser",
        "new_line": "first_center"
      },
      {
        "action": "communicate",
        "comment": "сообщениеA",
        "created": {
          "$date": "2018-05-05T12:34:59.000Z"
        },
        "external_id": 3,
        "line": "first_center",
        "login": "support_login",
        "macro_ids": [
          "123",
          "456"
        ]
      },
      {
        "action": "communicate",
        "comment": "сообщениеB",
        "created": {
          "$date": "2018-05-05T12:35:01.000Z"
        },
        "external_id": 5,
        "line": "first_center",
        "login": "support_login"
      },
      {
        "action": "dismiss",
        "created": {
          "$date": "2018-05-05T12:35:02.000Z"
        },
        "in_addition": false,
        "line": "first_center",
        "login": "support_login"
      }
    ],
    "line": "first",
    "meta_info": {
      "autoreply_enqueue_count": 5,
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "ml_request_id": "045fb0acd2024594b52952fec3cd39f2",
      "user_id": "user_id",
      "user_phone": "+74950000001"
    },
    "status": "reopened",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2b9"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "post_update_client_chat_message_id",
    "lazy_status": "reopened",
    "line": "first",
    "meta_info": {
      "calls": [],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "routing",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2c4"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "client_personal_chat_message_id",
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "driver_license_pd_id": "driver_license_pd_id_1",
      "locale": "ru",
      "some": "old_value",
      "user_phone_pd_id": "phone_pd_id_1"
    },
    "status": "predispatch",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2c3"
    },
    "chat_type": "driver",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "client_personal_chat_message_id_2",
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "driver_license_pd_id": "driver_license_pd_id_1",
      "locale": "ru",
      "some": "old_value",
      "user_phone_pd_id": "phone_pd_id_1"
    },
    "status": "predispatch",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2be"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "post_update_online_client_chat_message_id",
    "lazy_status": "reopened",
    "line": "online",
    "meta_info": {
      "calls": [],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "routing",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2ba"
    },
    "chat_type": "driver",
    "created": {
      "$date": "2018-06-15T12:33:56.000Z"
    },
    "external_id": "post_update_driver_chat_message_id",
    "lazy_status": "reopened",
    "line": "first",
    "meta_info": {
      "block_reasons": [
        "DriverPointsRateBlockTemp"
      ],
      "city": "Moscow",
      "country": "rus",
      "driver_phone": "+74950000000",
      "locale": "ru",
      "tariff": "econom",
      "ticket_subject": "Я не вижу новые заказы",
      "zendesk_profile": "yataxi"
    },
    "status": "routing",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-06-15T12:33:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2bb"
    },
    "chat_type": "opteum",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "post_update_opteum_chat_message_id",
    "lazy_status": "reopened",
    "line": "first",
    "meta_info": {
      "calls": [
        {
          "stat_created": {
            "$date": "2018-06-15T12:33:56.000Z"
          }
        }
      ],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "routing",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2bc"
    },
    "chat_type": "driver",
    "created": {
      "$date": "2018-06-15T12:33:56.000Z"
    },
    "external_id": "post_update_driver_third_chat_message_id",
    "lazy_status": "reopened",
    "line": "third",
    "meta_info": {
      "block_reasons": [
        "DriverPointsRateBlockTemp"
      ],
      "city": "Moscow",
      "country": "rus",
      "driver_phone": "+74950000000",
      "locale": "ru",
      "tariff": "econom",
      "ticket_subject": "Я не вижу новые заказы",
      "zendesk_profile": "yataxi"
    },
    "status": "routing",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-06-15T12:33:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2bd"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "client_conditional_forward_chat_message_id",
    "lazy_status": "reopened",
    "line": "first",
    "meta_info": {
      "calls": [],
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "user_phone": "+74950000001"
    },
    "status": "routing",
    "support_admin": "superuser",
    "tags": [
      "conditional_action_forward"
    ],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2c1"
    },
    "chat_type": "client",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "eats_client_user_chat_message_id",
    "history": [],
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "extra1": {
        "some": "field"
      },
      "extra2": [
        "1",
        "2",
        "3"
      ],
      "locale": "ru",
      "order_type": "native",
      "service": "eats",
      "user_id": "user_id",
      "user_phone": "+74950000001"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2c2"
    },
    "chat_type": "client_eats",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "eats_predispatch_user_chat_message_id",
    "history": [],
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "order_type": "native",
      "service": "eats",
      "user_id": "user_id",
      "user_phone": "+74950000001"
    },
    "status": "predispatch",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2bf"
    },
    "chat_type": "client_eats",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "lavka_user_chat_message_id",
    "history": [
      {
        "action": "create",
        "created": {
          "$date": "2018-05-05T12:34:56.000Z"
        },
        "line": "first",
        "login": "superuser"
      },
      {
        "action": "update_meta",
        "created": {
          "$date": "2018-05-05T12:34:57.000Z"
        },
        "line": "first",
        "login": "superuser",
        "meta_changes": [
          {
            "change_type": "set",
            "field_name": "user_id",
            "value": "test_user_id"
          },
          {
            "change_type": "set",
            "field_name": "user_phone",
            "value": "+7925"
          }
        ]
      },
      {
        "action": "forward",
        "created": {
          "$date": "2018-05-05T12:34:58.000Z"
        },
        "in_addition": false,
        "line": "first",
        "login": "superuser",
        "new_line": "first_center"
      },
      {
        "action": "communicate",
        "comment": "сообщение",
        "created": {
          "$date": "2018-05-05T12:34:59.000Z"
        },
        "external_id": 2,
        "line": "first_center",
        "login": "support_login",
        "macro_ids": [
          "123",
          "456"
        ],
        "reply_to": [
          "123"
        ],
        "tags_changes": [
          {
            "change_type": "add",
            "tag": "add_tag"
          },
          {
            "change_type": "add",
            "tag": "chat_tag"
          }
        ]
      }
    ],
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "locale": "ru",
      "order_type": "lavka",
      "service": "grocery",
      "user_id": "user_id",
      "user_phone": "+74950000001"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "5b2cae5cb2682a976914c2c7"
    },
    "chat_type": "client_eats",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "lavka_user_chat_message_id_2",
    "history": [],
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "extra_field": [
        "123",
        null
      ],
      "extra_field_2": [
        "123",
        456,
        789.0
      ],
      "extra_field_3": [
        "123",
        456,
        [
          789.0
        ]
      ],
      "locale": "ru",
      "order_type": "lavka",
      "service": "grocery",
      "user_id": "user_id",
      "user_phone": "+74950000001"
    },
    "status": "new",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "c4062d06caf0ed917e90fe83"
    },
    "chat_type": "client_eats",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "lavka_user_chat_message_id_3",
    "history": [
      {
        "action": "communicate",
        "comment": "khrgkuher",
        "created": {
          "$date": "2018-05-07T12:34:56.000Z"
        },
        "external_id": "lavka_user_chat_message_id_3",
        "line": "first",
        "login": "superuser",
        "macro_ids": [
          12,
          13,
          14
        ],
        "tags_changes": [
          {
            "change_type": "add",
            "tag": "tag1"
          }
        ]
      }
    ],
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "extra_field": [
        "123",
        null
      ],
      "extra_field_2": [
        "123",
        456,
        789.0
      ],
      "extra_field_3": [
        "123",
        456,
        [
          789.0
        ]
      ],
      "locale": "ru",
      "order_type": "lavka",
      "service": "grocery",
      "user_id": "user_id",
      "user_phone": "+74950000001"
    },
    "status": "reopened",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  },
  {
    "_id": {
      "$oid": "b67775bbc9aec61adf0f41eb"
    },
    "chat_type": "client_eats",
    "created": {
      "$date": "2018-05-05T12:34:56.000Z"
    },
    "external_id": "lavka_user_chat_message_id_4",
    "history": [
      {
        "action": "communicate",
        "comment": "superuser_message_1",
        "created": {
          "$date": "2018-05-07T12:34:56.000Z"
        },
        "external_id": "chat_message_1",
        "line": "first",
        "login": "superuser",
        "macro_ids": [
          12,
          13,
          14
        ],
        "tags_changes": [
          {
            "change_type": "add",
            "tag": "tag1"
          }
        ]
      },
      {
        "action": "communicate",
        "comment": "support_message_1",
        "created": {
          "$date": "2018-05-07T12:34:56.000Z"
        },
        "external_id": "chat_message_3",
        "line": "first",
        "login": "support_1",
        "macro_ids": [
          12,
          13,
          14
        ],
        "tags_changes": [
          {
            "change_type": "add",
            "tag": "tag2"
          },
          {
            "change_type": "add",
            "tag": "tag3"
          }
        ]
      },
      {
        "action": "support_message_2",
        "comment": "сообщение12345",
        "created": {
          "$date": "2018-05-07T12:34:56.000Z"
        },
        "external_id": "chat_message_4",
        "line": "first",
        "login": "support_1",
        "macro_ids": [
          12,
          13,
          14
        ],
        "tags_changes": [
          {
            "change_type": "add",
            "tag": "tag4"
          },
          {
            "change_type": "add",
            "tag": "tag5"
          }
        ]
      }
    ],
    "line": "first",
    "meta_info": {
      "city": "Moscow",
      "country": "rus",
      "extra_field": [
        "123",
        null
      ],
      "extra_field_2": [
        "123",
        456,
        789.0
      ],
      "extra_field_3": [
        "123",
        456,
        [
          789.0
        ]
      ],
      "locale": "ru",
      "order_type": "lavka",
      "service": "grocery",
      "user_id": "user_id",
      "user_phone": "+74950000001"
    },
    "status": "reopened",
    "support_admin": "superuser",
    "tags": [],
    "type": "chat",
    "updated": {
      "$date": "2018-05-07T12:34:56.000Z"
    }
  }
]

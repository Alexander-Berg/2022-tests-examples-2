{
  "find": [
    {
      "comment": "find full name",
      "items": [
        {
          "id": "0126d268c4b84ee98240b16d20af3914",
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "patronymic": "Иванович",
              "surname": "Иванов"
            }
          }
        },
        {
          "missed": true,
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "patronymic": "Иванович"
            }
          }
        }
      ]
    },
    {
      "comment": "double values in request",
      "items": [
        {
          "id": "0126d268c4b84ee98240b16d20af3914",
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "patronymic": "Иванович",
              "surname": "Иванов"
            }
          }
        },
        {
          "id": "0126d268c4b84ee98240b16d20af3914",
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "patronymic": "Иванович",
              "surname": "Иванов"
            }
          }
        }
      ]
    },
    {
      "comment": "all types",
      "items": [
        {
          "id": "8657329a87d7456380afb287874f022c",
          "type": "phone",
          "value": {
            "phone": "+71111111111"
          }
        },
        {
          "id": "8657329a87d7456380afb287874f022c",
          "type": "email",
          "value": {
            "email": "testovich@ya.ru"
          }
        },
        {
          "id": "5f8711a1db90411e8ceacaff555a59a2",
          "type": "gps",
          "value": {
            "gps": {
              "latitude": "58.506118930174495",
              "longitude": "-49.69658916490733"
            }
          }
        },
        {
          "missed": true,
          "type": "gps",
          "value": {
            "gps": {
              "latitude": "58.506118930174496",
              "longitude": "-49.69658916490733"
            }
          }
        }
      ]
    },
    {
      "comment": "normalize phone",
      "items": [
        {
          "id": "8657329a87d7456380afb287874f022c",
          "normalized_value": {
            "phone": "+71111111111"
          },
          "type": "phone",
          "value": {
            "phone": "8-111-11-11-111"
          }
        }
      ]
    },
    {
      "comment": "error type",
      "items": [
        {
          "error": "Unknown value type",
          "value": {}
        }
      ]
    }
  ],
  "retrieve": [
    {
      "comment": "string based gps",
      "items": [
        {
          "id": "5f8711a1db90411e8ceacaff555a59a2",
          "type": "gps",
          "value": {
            "gps": {
              "latitude": "58.506118930174495",
              "longitude": "-49.69658916490733"
            }
          }
        }
      ]
    },
    {
      "comment": "single type single value phone",
      "items": [
        {
          "id": "8657329a87d7456380afb287874f022c",
          "type": "phone",
          "value": {
            "phone": "+71111111111"
          }
        }
      ]
    },
    {
      "comment": "missed id. Should not be in response. value field is missed",
      "items": [
        {
          "id": "8657329a87d7456380afb287874f022d",
          "type": "phone"
        }
      ]
    },
    {
      "comment": "same id for different types",
      "items": [
        {
          "id": "8657329a87d7456380afb287874f022c",
          "type": "phone",
          "value": {
            "phone": "+71111111111"
          }
        },
        {
          "id": "8657329a87d7456380afb287874f022c",
          "type": "email",
          "value": {
            "email": "testovich@ya.ru"
          }
        }
      ]
    },
    {
      "comment": "full name type",
      "items": [
        {
          "id": "0126d268c4b84ee98240b16d20af3914",
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "patronymic": "Иванович",
              "surname": "Иванов"
            }
          }
        },
        {
          "comment": "unavailable value",
          "id": "0126d268c4b84ee98240b16d20af3913",
          "type": "full_name"
        }
      ]
    },
    {
      "comment": "get some values from cache",
      "items": [
        {
          "id": "0126d268c4b84ee98240b16d20af3914",
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "patronymic": "Иванович",
              "surname": "Иванов"
            }
          }
        },
        {
          "comment": "unavailable value",
          "id": "0126d268c4b84ee98240b16d20af3912",
          "type": "full_name"
        },
        {
          "id": "6ece7a0e8dc3470da70a7df8dc867787",
          "type": "email",
          "value": {
            "email": "genadich@ya.ru"
          }
        }
      ]
    },
    {
      "comment": "Invalid storred value. Wrong data format",
      "items": [
        {
          "id": "6ece7a0e8dc3470da70a7df8dc8678887",
          "type": "full_name"
        }
      ]
    },
    {
      "comment": "Multi types",
      "items": [
        {
          "id": "bf62a092b81d4c55b2d3defc8a999431",
          "type": "gps_coord",
          "value": {
            "gps_coord": {
              "latitude": 15.2876,
              "longitude": 44.98765
            }
          }
        },
        {
          "id": "d1c1c05535a74ffcbd62375ef2672eeb",
          "type": "address",
          "value": {
            "address": {
              "city": "Москва",
              "floor": "15",
              "other_field": "value",
              "street": "Маршала Маршала"
            }
          }
        },
        {
          "id": "0126d268c4b84ee98240b16d20af3914",
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "patronymic": "Иванович",
              "surname": "Иванов"
            }
          }
        }
      ]
    }
  ],
  "store": [
    {
      "comment": "string based gps",
      "items": [
        {
          "stored_value": "{\"latitude\":\"58.506118930174123\",\"longitude\":\"-49.6965891649073322\"}",
          "type": "gps",
          "value": {
            "gps": {
              "latitude": "58.506118930174123",
              "longitude": "-49.6965891649073322"
            }
          }
        }
      ]
    },
    {
      "comment": "double values",
      "items": [
        {
          "stored_value": "+71234567890",
          "type": "phone",
          "value": {
            "phone": "+71234567890"
          }
        },
        {
          "normalized_value": {
            "phone": "+71234567890"
          },
          "stored_value": "+71234567890",
          "type": "phone",
          "value": {
            "phone": "+7-123-45-67-890"
          }
        },
        {
          "expected_id": "8657329a87d7456380afb287874f022c",
          "stored_value": "+71111111111",
          "type": "phone",
          "value": {
            "phone": "+71111111111"
          }
        },
        {
          "expected_id": "8657329a87d7456380afb287874f022c",
          "normalized_value": {
            "phone": "+71111111111"
          },
          "stored_value": "+71111111111",
          "type": "phone",
          "value": {
            "phone": "+711-11-11-1111"
          }
        }
      ]
    },
    {
      "comment": "single type phone single value",
      "items": [
        {
          "stored_value": "+71234567890",
          "type": "phone",
          "value": {
            "phone": "+71234567890"
          }
        }
      ]
    },
    {
      "comment": "single type phone single value with normalization",
      "items": [
        {
          "normalized_value": {
            "phone": "+71234567890"
          },
          "stored_value": "+71234567890",
          "type": "phone",
          "value": {
            "phone": "8-123-456-7890"
          }
        }
      ]
    },
    {
      "comment": "single type phone single value with normalization and unknown country. left digits only",
      "items": [
        {
          "normalized_value": {
            "phone": "0123456789"
          },
          "stored_value": "0123456789",
          "type": "phone",
          "value": {
            "phone": "0-123-456-789"
          }
        }
      ],
      "normalize": {
        "country": "unknown"
      },
      "validate": false
    },
    {
      "comment": "single type phone single value without normalization and without validation",
      "items": [
        {
          "stored_value": "8-123-456-7890",
          "type": "phone",
          "value": {
            "phone": "8-123-456-7890"
          }
        }
      ],
      "normalize": {
        "phones": false
      },
      "validate": false
    },
    {
      "comment": "single type invalid phone single value without normalization. Exception on validation",
      "items": [
        {
          "error": "Invalid phone number",
          "type": "phone",
          "value": {
            "phone": "8-123-456-7890"
          }
        }
      ],
      "normalize": {
        "phones": false
      },
      "validate": true
    },
    {
      "comment": "single type email single value exists",
      "items": [
        {
          "expected_id": "2f84f27dca0142a7907acad288fd24a6",
          "stored_value": "email_1@yandex.ru",
          "type": "email",
          "value": {
            "email": "email_1@yandex.ru"
          }
        }
      ]
    },
    {
      "comment": "single type email single value",
      "items": [
        {
          "stored_value": "test@test.ru",
          "type": "email",
          "value": {
            "email": "test@test.ru"
          }
        }
      ]
    },
    {
      "comment": "single type phone single value exists",
      "items": [
        {
          "expected_id": "8657329a87d7456380afb287874f022c",
          "stored_value": "+71111111111",
          "type": "phone",
          "value": {
            "phone": "+71111111111"
          }
        }
      ]
    },
    {
      "comment": "single type driver license single value",
      "items": [
        {
          "stored_value": "ABC0111123",
          "type": "driver_license",
          "value": {
            "driver_license": "ABC0111123"
          }
        }
      ]
    },
    {
      "comment": "single type driver license value exists (normalization)",
      "items": [
        {
          "expected_id": "1cb24be9aa8a45b89c73a5e02ce48524",
          "normalized_value": {
            "driver_license": "ABC0111111"
          },
          "stored_value": "ABC0111111",
          "type": "driver_license",
          "value": {
            "driver_license": "   авс01   11111   "
          }
        }
      ]
    },
    {
      "comment": "all types",
      "items": [
        {
          "stored_value": "+71234567890",
          "type": "phone",
          "value": {
            "phone": "+71234567890"
          }
        },
        {
          "expected_id": "8657329a87d7456380afb287874f022c",
          "stored_value": "+71111111111",
          "type": "phone",
          "value": {
            "phone": "+71111111111"
          }
        },
        {
          "stored_value": "test@test.ru",
          "type": "email",
          "value": {
            "email": "test@test.ru"
          }
        },
        {
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Ivan"
            }
          }
        },
        {
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "surname": "Иванов"
            }
          }
        },
        {
          "expected_id": "0126d268c4b84ee98240b16d20af3914",
          "type": "full_name",
          "value": {
            "full_name": {
              "forename": "Иван",
              "patronymic": "Иванович",
              "surname": "Иванов"
            }
          }
        },
        {
          "normalized_value": {
            "driver_license": "23PYC"
          },
          "stored_value": "23PYC",
          "type": "driver_license",
          "value": {
            "driver_license": "23рус"
          }
        },
        {
          "stored_value": "testovich@ya.ru",
          "type": "email",
          "value": {
            "email": "testovich@ya.ru"
          }
        },
        {
          "stored_value": "{\"city\":\"Екатеринбург\",\"floor\":\"15\",\"other_field\":\"value\",\"street\":\"Маршала Маршала\"}",
          "type": "address",
          "value": {
            "address": {
              "city": "Екатеринбург",
              "floor": "15",
              "other_field": "value",
              "street": "Маршала Маршала"
            }
          }
        },
        {
          "stored_value": "{\"latitude\":-15.2876,\"longitude\":44.001}",
          "type": "gps_coord",
          "value": {
            "gps_coord": {
              "latitude": -15.2876,
              "longitude": 44.001
            }
          }
        },
        {
          "stored_value": "{\"latitude\":\"111.9999888877776666\",\"longitude\":\"15.367890123450\"}",
          "type": "gps",
          "value": {
            "gps": {
              "latitude": "111.9999888877776666",
              "longitude": "15.367890123450"
            }
          }
        },
        {
          "error": "Invalid phone number",
          "normalized_value": {
            "phone": "31234567890"
          },
          "type": "phone",
          "value": {
            "phone": "3-123-456-7890"
          }
        }
      ]
    },
    {
      "comment": "different types but same hashed value",
      "items": [
        {
          "expected_id": "77a8c4caf0ff4501aa79b6676f995750",
          "stored_value": "1234567",
          "type": "tin",
          "value": {
            "tin": "1234567"
          }
        },
        {
          "expected_id": "a4a491d6131447cea7a3ba38ace06081",
          "stored_value": "1234567",
          "type": "deptrans_id",
          "value": {
            "deptrans_id": "1234567"
          }
        }
      ]
    }
  ]
}

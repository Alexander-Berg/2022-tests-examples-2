{
  "$blueprint:manual_subvention:test_case": {
    "amount": "373.5",
    "amount_by_reason": {
      "covid-19_compensation": "150",
      "dryclean": "100",
      "test_reason_1": "123.5"
    },
    "amount_by_reason_with_currency": {
      "covid-19_compensation": "150 RUB",
      "dryclean": "100 RUB",
      "test_reason_1": "123.5 RUB"
    },
    "expected_created_order_docs": [
      {
        "orders": [
          {
            "data": {
              "base_doc_id": 1000,
              "driver_income": {
                "alias_id": "some_alias_id",
                "components": [
                  {
                    "amount": "373.5000",
                    "currency": "RUB",
                    "kind": "subvention/misc"
                  }
                ],
                "driver": {
                  "db_id": "db_id",
                  "driver_uuid": "uuid"
                },
                "order_event_at": "2018-07-02T00:00:00.750000+00:00"
              },
              "event_version": 1000,
              "payments": [
                {
                  "amount": "150.0000",
                  "billing_client_id": "billing_client_id",
                  "contract_id": "123457",
                  "currency": "RUB",
                  "invoice_date": "2018-07-02T00:40:00.750000+00:00",
                  "payload": {
                    "alias_id": "some_alias_id",
                    "detailed_product": "covid-19_compensation",
                    "due": "2018-07-02T00:00:00.750000+00:00",
                    "is_payable": true,
                    "order_id": "some_order_id",
                    "payload": {
                      "amount_details": {
                        "base_amount": "150.0000",
                        "base_currency": "RUB",
                        "contract_currency_rate": "1.00000",
                        "donate_multiplier": "1.0000"
                      },
                      "base_doc_id": 1000,
                      "driver_details": {
                        "clid": "clid",
                        "db_id": "db_id",
                        "uuid": "uuid"
                      },
                      "nearest_zone": "moscow"
                    },
                    "tariff_class": "econom",
                    "transaction_type": "payment"
                  },
                  "payment_kind": "covid-19_compensation"
                },
                {
                  "amount": "223.5000",
                  "billing_client_id": "billing_client_id",
                  "contract_id": "123456",
                  "currency": "RUB",
                  "invoice_date": "2018-07-02T00:40:00.750000+00:00",
                  "payload": {
                    "alias_id": "some_alias_id",
                    "detailed_product": "subsidy_misc",
                    "due": "2018-07-02T00:00:00.750000+00:00",
                    "is_payable": false,
                    "order_id": "some_order_id",
                    "payload": {
                      "amount_details": {
                        "base_amount": "223.5000",
                        "base_currency": "RUB",
                        "contract_currency_rate": "1.00000",
                        "donate_multiplier": "1.0000"
                      },
                      "base_doc_id": 1000,
                      "driver_details": {
                        "clid": "clid",
                        "db_id": "db_id",
                        "uuid": "uuid"
                      },
                      "nearest_zone": "moscow"
                    },
                    "tariff_class": "econom",
                    "transaction_type": "payment"
                  },
                  "payment_kind": "subvention"
                }
              ],
              "schema_version": "v3",
              "topic_begin_at": "2018-07-02T00:00:00.750000+00:00"
            },
            "event_at": "2018-11-30T19:31:35.000000+00:00",
            "external_ref": "1000",
            "kind": "subvention",
            "tags": [
              "taxi/alias_id/some_alias_id"
            ],
            "topic": "alias_id/some_alias_id/subvention/manual"
          }
        ]
      }
    ],
    "expected_docs_updated_events": [],
    "rule_details": [
      {
        "extra": {
          "covid-19_compensation": "150"
        },
        "is_once": true,
        "limit_ref": null,
        "payment_type": "bonus",
        "rule_id": {
          "group_id": "",
          "id": "covid-19_compensation"
        },
        "rule_type": "misc",
        "subvention_geoareas": [],
        "value": "150.0000 RUB"
      },
      {
        "extra": {
          "dryclean": "100",
          "test_reason_1": "123.5"
        },
        "is_once": true,
        "limit_ref": null,
        "payment_type": "bonus",
        "rule_id": {
          "group_id": "",
          "id": "subvention_bonus"
        },
        "rule_type": "misc",
        "subvention_geoareas": [],
        "value": "223.5000 RUB"
      }
    ],
    "subventions_input_value": "373.5000 RUB"
  }
}

{
  "expected_jobs": [
    {
      "id": 4,
      "inited_variables": {
        "aliases": [],
        "changelog": "test deploy",
        "comment": "Automatically created release",
        "configs_branch_ids": [
          20
        ],
        "configs_info": [],
        "image": "taxi/test_service_9/unstable:0.0.1",
        "lock_names": [
          "Deploy.test_block_diff_unstable"
        ],
        "logbroker_configuration": null,
        "name": "test_block_diff_unstable",
        "prestable_aliases": [],
        "prestable_name": null,
        "project_names": [
          "test_project"
        ],
        "release_ticket_st": "TAXIREL-13",
        "sandbox_resources": null
      },
      "name": "DeployNannyServiceNoApprove",
      "stages": [
        {
          "appended_variables": {},
          "name": "InternalBatchGetLock"
        },
        {
          "appended_variables": {
            "job_branch_id": 20,
            "job_project_id": 1,
            "job_project_name": "test_project",
            "job_service_id": 9,
            "job_service_name": "test_service_9"
          },
          "name": "InternalJobGetInformation"
        },
        {
          "appended_variables": {
            "current_diff_aliases_jobs": [],
            "current_diff_job_id": 1002
          },
          "name": "FindCurrentDiff"
        },
        {
          "appended_variables": {
            "current_diff_comment": "There are already exists resolve diff jobs:\n* ((/services/1/edit/9/jobs?jobId=1002&isClownJob=true test_service_9))\nWaiting for jobs complete.\n((https://wiki.yandex-team.ru/taxi-ito/cloudhowto/#avtomaticheskoeizmenenieokruzhenija Wiki about diff))",
            "current_diff_skip": false
          },
          "name": "CurrentDiffCommentGenerate"
        },
        {
          "appended_variables": {},
          "name": "ApproveCubeOptionalLiteEnsureComment"
        },
        {
          "appended_variables": {},
          "name": "WaitChangeSubsystem"
        },
        {
          "appended_variables": {
            "logbroker_operations": null
          },
          "name": "LogbrokerConfigurationStart"
        },
        {
          "appended_variables": {},
          "name": "LogbrokerConfigurationPoll"
        },
        {
          "appended_variables": {
            "environment": "unstable"
          },
          "name": "InternalGetBranchInformation"
        },
        {
          "appended_variables": {},
          "ignore_variables": [
            "started_deploy_msg"
          ],
          "name": "GenerateTestingDeployMessage"
        },
        {
          "appended_variables": {},
          "name": "ApproveCubeOptionalLiteEnsureComment"
        },
        {
          "appended_variables": {
            "job_ids": [
              5
            ]
          },
          "meta": [
            {
              "id": 5,
              "inited_variables": {
                "changelog": "test deploy",
                "comment": "Automatically created release",
                "image": "taxi/test_service_9/unstable:0.0.1",
                "link_to_changelog": "/services/1/edit/9/jobs?jobId=4&isClownJob=true",
                "nanny_name": "test_block_diff_unstable",
                "sandbox_resources": null
              },
              "name": "DeployOneNannyService",
              "stages": [
                {
                  "appended_variables": {
                    "job_branch_id": 20,
                    "job_project_id": 1,
                    "job_project_name": "test_project",
                    "job_service_id": 9,
                    "job_service_name": "test_service_9"
                  },
                  "name": "InternalJobGetInformation"
                },
                {
                  "appended_variables": {
                    "environment": "unstable"
                  },
                  "name": "InternalGetBranchInformation"
                },
                {
                  "appended_variables": {},
                  "name": "UpdateHosts"
                },
                {
                  "appended_variables": {
                    "snapshot_id": "5c26609053b7c34a9ad5a283f48ae03c79853d58"
                  },
                  "name": "NannyCubeCreateSnapshot"
                },
                {
                  "appended_variables": {},
                  "name": "NannyCubeDeploySnapshot"
                },
                {
                  "appended_variables": {},
                  "name": "NannyTryDestroyExtraSnapshots"
                },
                {
                  "appended_variables": {},
                  "name": "NannyCubeWaitForDeploy"
                },
                {
                  "appended_variables": {},
                  "name": "SendCallback"
                }
              ]
            }
          ],
          "name": "MetaStartDeployNannyServices"
        },
        {
          "appended_variables": {},
          "name": "MetaCubeWaitForJobsCommon"
        },
        {
          "appended_variables": {},
          "name": "InternalCubeUpdateServiceConfigs"
        },
        {
          "appended_variables": {},
          "name": "InternalBatchReleaseLock"
        }
      ]
    }
  ],
  "request_data": {
    "aliases": [],
    "changelog": "test deploy",
    "configs": [
      "TEST_CONFIG_1"
    ],
    "docker_image": "taxi/test_service_9/unstable:0.0.1",
    "env": "unstable",
    "release_ticket": "TAXIREL-13",
    "service_name": "test_service_9"
  }
}

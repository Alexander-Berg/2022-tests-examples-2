$ sudo -n -- git rev-parse --abbrev-ref HEAD
stdout: master

$ sudo -n -- git status --untracked-files=all --porcelain
stdout:  M snmp/snmpd.conf

$ sudo -n -- dpkg -S /etc/snmp/snmpd.conf
stdout: diversion by cumulus-net-snmp-addons from: /etc/snmp/snmpd.conf
diversion by cumulus-net-snmp-addons to: /etc/snmp/snmpd.conf.cumulus-orig
snmpd: /etc/snmp/snmpd.conf

$ sudo -n -- dpkg -L snmpd
stdout: /.
/usr
/usr/share
/usr/share/doc
/usr/share/man
/usr/share/man/man8
/usr/share/man/man8/snmpd.8.gz
/usr/share/man/man5
/usr/share/man/man5/snmpd.conf.5.gz
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/snmpd
/usr/share/snmp
/usr/share/snmp/snmp_perl.pl
/usr/share/snmp/snmpconf-data
/usr/share/snmp/snmpconf-data/snmpd-data
/usr/share/snmp/snmpconf-data/snmpd-data/acl
/usr/share/snmp/snmpconf-data/snmpd-data/system
/usr/share/snmp/snmpconf-data/snmpd-data/extending
/usr/share/snmp/snmpconf-data/snmpd-data/snmpconf-config
/usr/share/snmp/snmpconf-data/snmpd-data/basic_setup
/usr/share/snmp/snmpconf-data/snmpd-data/trapsinks
/usr/share/snmp/snmpconf-data/snmpd-data/monitor
/usr/share/snmp/snmpconf-data/snmpd-data/operation
/usr/sbin
/usr/sbin/snmpd
/lib
/lib/systemd
/lib/systemd/system
/lib/systemd/system/snmpd.service
/etc
/etc/default
/etc/default/snmpd
diverted by cumulus-net-snmp-addons to: /etc/default/snmpd.cumulus-orig
/etc/snmp
/etc/snmp/snmpd.conf
diverted by cumulus-net-snmp-addons to: /etc/snmp/snmpd.conf.cumulus-orig
/usr/share/doc/snmpd

$ sudo -n -- systemd-analyze --no-pager dump
stdout: Timestamp firmware: 22.783521s
-> Unit system-snmpd.slice:
        Unit Active State: active
-> Unit snmpd.service:
        Unit Active State: active
        Fragment Path: /lib/systemd/system/snmpd.service

$ sudo -n -- systemctl show snmpd.service
stdout: ActiveState=active

$ sudo -n -- git rev-parse HEAD
stdout: 0000001000000000000000000000000000000000

$ sudo -n -- git add .

$ sudo -n --preserve-env -- git commit --author 'test-user <test-user@yandex-team.ru>' -m update /etc/snmp/snmpd.conf
stdout: [master 0000002] update
 Author: test-user <test-user@yandex-team.ru
 1 files changed, 1 insertions(+), 1 deletions(-)

$ sudo -n -- git rev-list --all --count
stdout: 2

$ sudo -n -- ip vrf pids mgmt

$ sudo -n -- ip vrf exec mgmt snmptrap -v 2c -c TzVZ8 noc-myt.yndx.net '' 1.3.6.1.4.1.13238.2 1.3.6.1.4.1.13238.2.1 s root 1.3.6.1.4.1.13238.2.2 i 2

$ sudo -n -- ip vrf pids mgmt

$ sudo -n -- ip vrf exec mgmt snmptrap -v 2c -c TzVZ8 noc-sas.yndx.net '' 1.3.6.1.4.1.13238.2 1.3.6.1.4.1.13238.2.1 s root 1.3.6.1.4.1.13238.2.2 i 2

$ sudo -n -- git rev-parse HEAD
stdout: 0000002000000000000000000000000000000000

$ sudo -n -- git diff-tree --no-commit-id --name-status -r 0000001000000000000000000000000000000000..0000002000000000000000000000000000000000
stdout:  M snmp/snmpd.conf

$ sudo -n -- dpkg -S /etc/snmp/snmpd.conf
stdout: diversion by cumulus-net-snmp-addons from: /etc/snmp/snmpd.conf
diversion by cumulus-net-snmp-addons to: /etc/snmp/snmpd.conf.cumulus-orig
snmpd: /etc/snmp/snmpd.conf

$ sudo -n -- dpkg -L snmpd
stdout: /.
/usr
/usr/share
/usr/share/doc
/usr/share/man
/usr/share/man/man8
/usr/share/man/man8/snmpd.8.gz
/usr/share/man/man5
/usr/share/man/man5/snmpd.conf.5.gz
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/snmpd
/usr/share/snmp
/usr/share/snmp/snmp_perl.pl
/usr/share/snmp/snmpconf-data
/usr/share/snmp/snmpconf-data/snmpd-data
/usr/share/snmp/snmpconf-data/snmpd-data/acl
/usr/share/snmp/snmpconf-data/snmpd-data/system
/usr/share/snmp/snmpconf-data/snmpd-data/extending
/usr/share/snmp/snmpconf-data/snmpd-data/snmpconf-config
/usr/share/snmp/snmpconf-data/snmpd-data/basic_setup
/usr/share/snmp/snmpconf-data/snmpd-data/trapsinks
/usr/share/snmp/snmpconf-data/snmpd-data/monitor
/usr/share/snmp/snmpconf-data/snmpd-data/operation
/usr/sbin
/usr/sbin/snmpd
/lib
/lib/systemd
/lib/systemd/system
/lib/systemd/system/snmpd.service
/etc
/etc/default
/etc/default/snmpd
diverted by cumulus-net-snmp-addons to: /etc/default/snmpd.cumulus-orig
/etc/snmp
/etc/snmp/snmpd.conf
diverted by cumulus-net-snmp-addons to: /etc/snmp/snmpd.conf.cumulus-orig
/usr/share/doc/snmpd

$ sudo -n -- systemctl is-active snmpd.service
stdout: active

$ sudo -n -- systemctl try-reload-or-restart snmpd.service
exit code: 1
stderr: Unknown operation 'try-reload-or-restart'.

$ sudo -n -- systemctl is-enabled snmpd.service
stdout: enabled

$ sudo -n -- systemctl reload-or-restart snmpd.service

$ sudo -n -- systemctl is-active snmpd.service
stdout: active

{
  "error" : {
    "errors" : [ {
      "domain" : "global",
      "reason" : "badRequest",
      "message" : "Запрос слишком сложный и не может быть обработан. Пожалуйста, уменьшите интервал дат запроса либо включите/уменьшите семплирование и повторите запрос."
    } ],
    "code" : 400,
    "message" : "Запрос слишком сложный и не может быть обработан. Пожалуйста, уменьшите интервал дат запроса либо включите/уменьшите семплирование и повторите запрос."
  },
  "_profile" : {
    "baseTime" : 1498571615607,
    "requestId" : "f84e35b9-061c-4113-b18e-0db4ddd75c2e",
    "requestUid" : 348125177,
    "totalTime" : 11468,
    "javaTime" : 11,
    "queries" : [ {
      "host" : "mtlog01-01-1.yandex.ru:8123",
      "daemonName" : "faced",
      "clientHost" : "mtback01et.yandex.ru",
      "db_type" : "clickhouse",
      "query" : "SELECT toInt64(Duration) AS `ga:sessionDurationBucket`, uniqExact(UserID) AS `ga:users` FROM default.visits_layer WHERE StartDate >= toDate('2017-06-13') and StartDate <= toDate('2017-06-20') and CounterID = 101024 and `ga:sessionDurationBucket` < 10 GROUP BY `ga:sessionDurationBucket` WITH TOTALS  ORDER BY `ga:users` DESC, `ga:sessionDurationBucket` ASC limit 0,1000",
      "params" : {
        "EXTREMES" : "1",
        "USER" : "web",
        "COMPRESS" : "1"
      },
      "baseTime" : 1498571615616,
      "time" : 11457,
      "rows" : 0,
      "error_message" : "ClickHouse exception, code: 160, host: mtlog01-01-1.yandex.ru, port: 8123; Code: 160, e.displayText() = DB::Exception: Query is executing too slow: 21764.24928195565 rows/sec., minimum: 200000, e.what() = DB::Exception\n at mtlog01-01-1.yandex.ru:8123, code 160",
      "queryHash" : 291986738
    } ],
    "additional" : {
      "exception" : [ [ "ru.yandex.metrika.dbclients.clickhouse.errors.ClickhouseQueryTimeException: ClickHouse exception, code: 160, host: mtlog01-01-1.yandex.ru, port: 8123; Code: 160, e.displayText() = DB::Exception: Query is executing too slow: 21764.24928195565 rows/sec., minimum: 200000, e.what() = DB::Exception\n at mtlog01-01-1.yandex.ru:8123, code 160", "at ru.yandex.metrika.dbclients.clickhouse.errors.ClickhouseExceptionSpecifier.specify(ClickhouseExceptionSpecifier.java:118)", "at ru.yandex.metrika.dbclients.clickhouse.HttpTemplateImpl.queryJson(HttpTemplateImpl.java:154)", "at ru.yandex.metrika.dbclients.clickhouse.HttpTemplateImpl$$FastClassBySpringCGLIB$$6470e9fd.invoke(<generated>)", "at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)", "at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:718)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)", "at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)", "at ru.yandex.metrika.spring.profile.ProfilerAspect.profileWithArgs(ProfilerAspect.java:247)", "at ru.yandex.metrika.spring.profile.ProfilerAspect.profileClickHouse(ProfilerAspect.java:201)", "at sun.reflect.GeneratedMethodAccessor241.invoke(Unknown Source)", "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)", "at java.lang.reflect.Method.invoke(Method.java:498)", "at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)", "at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)", "at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:68)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)", "at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)", "at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:654)", "at ru.yandex.metrika.dbclients.clickhouse.HttpTemplateImpl$$EnhancerBySpringCGLIB$$78ebd61a.queryJson(<generated>)", "at sun.reflect.GeneratedMethodAccessor320.invoke(Unknown Source)", "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)", "at java.lang.reflect.Method.invoke(Method.java:498)", "at ru.yandex.metrika.util.route.LoadBalance.invoke(LoadBalance.java:192)", "at com.sun.proxy.$Proxy33.queryJson(Unknown Source)", "at ru.yandex.metrika.segments.core.dao.ClickHouseDaoImpl$Requester.requestMainJson(ClickHouseDaoImpl.java:265)", "at ru.yandex.metrika.segments.core.dao.ClickHouseDaoImpl$Requester.doRequest(ClickHouseDaoImpl.java:156)", "at ru.yandex.metrika.segments.core.dao.ClickHouseDaoImpl.request(ClickHouseDaoImpl.java:78)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorDaoImpl.doRequest(GAConstructorDaoImpl.java:138)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorDaoImpl.request(GAConstructorDaoImpl.java:97)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorDaoImpl.getData(GAConstructorDaoImpl.java:61)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorRequestHandlerImpl.handleSimple(GAConstructorRequestHandlerImpl.java:95)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorController.requestJson(GAConstructorController.java:55)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorController$$FastClassBySpringCGLIB$$6dcb6cc7.invoke(<generated>)", "at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)", "at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:718)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)", "at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:68)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)", "at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:52)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)", "at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:52)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)", "at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)", "at ru.yandex.metrika.spring.quota.QuotaAspect.profileController(QuotaAspect.java:82)", "at sun.reflect.GeneratedMethodAccessor329.invoke(Unknown Source)", "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)", "at java.lang.reflect.Method.invoke(Method.java:498)", "at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)", "at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)", "at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:68)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)", "at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:58)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)", "at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)", "at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:654)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorController$$EnhancerBySpringCGLIB$$200c9aec.requestJson(<generated>)", "at sun.reflect.GeneratedMethodAccessor1072.invoke(Unknown Source)", "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)", "at java.lang.reflect.Method.invoke(Method.java:498)", "at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:222)", "at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)", "at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)", "at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:814)", "at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:737)", "at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)", "at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)", "at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)", "at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)", "at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)", "at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)", "at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)", "at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)", "at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:684)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1496)", "at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87)", "at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.profile.StatAuthInterceptor.doFilter(StatAuthInterceptor.java:32)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316)", "at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)", "at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)", "at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53)", "at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:213)", "at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.profile.ProfilerInterceptor.doFilter(ProfilerInterceptor.java:41)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.params.CounterIdInterceptor.doFilter(CounterIdInterceptor.java:41)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.params.RequestParamsInterceptor.doFilter(RequestParamsInterceptor.java:71)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.profile.StatInterceptor.doFilter(StatInterceptor.java:52)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at org.eclipse.jetty.servlets.UserAgentFilter.doFilter(UserAgentFilter.java:82)", "at org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:294)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.params.ErrorInterceptor.doFilter(ErrorInterceptor.java:37)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:501)", "at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)", "at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)", "at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)", "at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086)", "at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:429)", "at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)", "at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020)", "at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)", "at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)", "at org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:68)", "at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)", "at org.eclipse.jetty.server.Server.handle(Server.java:370)", "at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:494)", "at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:971)", "at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1033)", "at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:644)", "at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)", "at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)", "at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:696)", "at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:53)", "at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)", "at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)", "at java.lang.Thread.run(Thread.java:745)" ], [ "ru.yandex.clickhouse.except.ClickHouseException: ClickHouse exception, code: 160, host: mtlog01-01-1.yandex.ru, port: 8123; Code: 160, e.displayText() = DB::Exception: Query is executing too slow: 21764.24928195565 rows/sec., minimum: 200000, e.what() = DB::Exception\n", "at ru.yandex.clickhouse.except.ClickHouseExceptionSpecifier.specify(ClickHouseExceptionSpecifier.java:58)", "at ru.yandex.clickhouse.except.ClickHouseExceptionSpecifier.specify(ClickHouseExceptionSpecifier.java:28)", "at ru.yandex.clickhouse.ClickHouseStatementImpl.getInputStream(ClickHouseStatementImpl.java:507)", "at ru.yandex.clickhouse.ClickHouseStatementImpl.executeQueryClickhouseResponse(ClickHouseStatementImpl.java:124)", "at ru.yandex.metrika.dbclients.clickhouse.HttpTemplateImpl.queryJson(HttpTemplateImpl.java:152)", "at ru.yandex.metrika.dbclients.clickhouse.HttpTemplateImpl$$FastClassBySpringCGLIB$$6470e9fd.invoke(<generated>)", "at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)", "at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:718)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)", "at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)", "at ru.yandex.metrika.spring.profile.ProfilerAspect.profileWithArgs(ProfilerAspect.java:247)", "at ru.yandex.metrika.spring.profile.ProfilerAspect.profileClickHouse(ProfilerAspect.java:201)", "at sun.reflect.GeneratedMethodAccessor241.invoke(Unknown Source)", "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)", "at java.lang.reflect.Method.invoke(Method.java:498)", "at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)", "at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)", "at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:68)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)", "at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)", "at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:654)", "at ru.yandex.metrika.dbclients.clickhouse.HttpTemplateImpl$$EnhancerBySpringCGLIB$$78ebd61a.queryJson(<generated>)", "at sun.reflect.GeneratedMethodAccessor320.invoke(Unknown Source)", "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)", "at java.lang.reflect.Method.invoke(Method.java:498)", "at ru.yandex.metrika.util.route.LoadBalance.invoke(LoadBalance.java:192)", "at com.sun.proxy.$Proxy33.queryJson(Unknown Source)", "at ru.yandex.metrika.segments.core.dao.ClickHouseDaoImpl$Requester.requestMainJson(ClickHouseDaoImpl.java:265)", "at ru.yandex.metrika.segments.core.dao.ClickHouseDaoImpl$Requester.doRequest(ClickHouseDaoImpl.java:156)", "at ru.yandex.metrika.segments.core.dao.ClickHouseDaoImpl.request(ClickHouseDaoImpl.java:78)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorDaoImpl.doRequest(GAConstructorDaoImpl.java:138)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorDaoImpl.request(GAConstructorDaoImpl.java:97)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorDaoImpl.getData(GAConstructorDaoImpl.java:61)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorRequestHandlerImpl.handleSimple(GAConstructorRequestHandlerImpl.java:95)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorController.requestJson(GAConstructorController.java:55)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorController$$FastClassBySpringCGLIB$$6dcb6cc7.invoke(<generated>)", "at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)", "at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:718)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)", "at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:68)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)", "at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:52)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)", "at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:52)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)", "at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)", "at ru.yandex.metrika.spring.quota.QuotaAspect.profileController(QuotaAspect.java:82)", "at sun.reflect.GeneratedMethodAccessor329.invoke(Unknown Source)", "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)", "at java.lang.reflect.Method.invoke(Method.java:498)", "at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)", "at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)", "at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:68)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)", "at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:58)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)", "at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)", "at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)", "at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:654)", "at ru.yandex.metrika.api.constructor.ga.GAConstructorController$$EnhancerBySpringCGLIB$$200c9aec.requestJson(<generated>)", "at sun.reflect.GeneratedMethodAccessor1072.invoke(Unknown Source)", "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)", "at java.lang.reflect.Method.invoke(Method.java:498)", "at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:222)", "at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)", "at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)", "at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:814)", "at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:737)", "at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)", "at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)", "at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)", "at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)", "at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)", "at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)", "at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)", "at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)", "at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:684)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1496)", "at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87)", "at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.profile.StatAuthInterceptor.doFilter(StatAuthInterceptor.java:32)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316)", "at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)", "at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)", "at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53)", "at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91)", "at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)", "at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:213)", "at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.profile.ProfilerInterceptor.doFilter(ProfilerInterceptor.java:41)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.params.CounterIdInterceptor.doFilter(CounterIdInterceptor.java:41)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.params.RequestParamsInterceptor.doFilter(RequestParamsInterceptor.java:71)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.profile.StatInterceptor.doFilter(StatInterceptor.java:52)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at org.eclipse.jetty.servlets.UserAgentFilter.doFilter(UserAgentFilter.java:82)", "at org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:294)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at ru.yandex.metrika.spring.params.ErrorInterceptor.doFilter(ErrorInterceptor.java:37)", "at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)", "at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)", "at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1467)", "at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:501)", "at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)", "at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)", "at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)", "at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086)", "at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:429)", "at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)", "at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020)", "at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)", "at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)", "at org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:68)", "at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)", "at org.eclipse.jetty.server.Server.handle(Server.java:370)", "at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:494)", "at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:971)", "at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1033)", "at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:644)", "at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)", "at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)", "at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:696)", "at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:53)", "at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)", "at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)", "at java.lang.Thread.run(Thread.java:745)" ] ],
      "layer" : "1",
      "frontend-host" : "mtback01et.yandex.ru:8082"
    }
  }
}
<test>
    <variables>

        <path>
            <instance id="blackbox">blackbox</instance>
        </path>

        <header name="X-HTTPS-Req">
            <instance id="https">on</instance>
        </header>

        <cgi name="userip">
            <instance id="internal_user">95.108.132.35</instance>
            <instance id="internal_user_v6">::ffff:95.108.132.35</instance>
            <instance id="good">123.45.67.89</instance>
        </cgi>

        <cgi name="method">
            <instance id="login">login</instance>
            <instance id="oauth">oauth</instance>
            <instance id="sessionid">sessionid</instance>
            <instance id="userinfo">userinfo</instance>
            <instance id="user_ticket">user_ticket</instance>
        </cgi>

        <cgi name="uid">
            <instance id="no_alias_user">70494</instance>
            <instance id="70500">70500</instance>
        </cgi>

        <cgi name="login">
            <instance id="good">ko.shaki</instance>
            <instance id="bad">missing.login</instance>
            <instance id="disabled">bbtst_disabled</instance>
        </cgi>

        <cgi name="password">
            <instance id="good">shshshsh</instance>
            <instance id="bad0">wrongwrong</instance>
        </cgi>

        <cgi name="get_user_ticket">
            <instance id="yes">yes</instance>
        </cgi>

        <cgi name="user_ticket" func="gen_user_ticket">
            <instance id="70500">
                <arg name="default_uid">70500</arg>
            </instance>
            <instance id="no_alias_user__70500">
                <arg name="default_uid">70494</arg>
                <arg name="uid">70500</arg>
            </instance>
        </cgi>

        <cgi name="oauth_token" func="gentoken" pregeneration="1">
            <instance id="client_not_found">
                <arg name="const_value">a8076505f2dc4599af9e6d2034f07a82</arg>
            </instance>
            <instance id="account_not_found">
                <arg name="const_value">68a6e1fb0ae843a4919c2e9078785984</arg>
            </instance>
            <instance id="blocked_client">
                <arg name="const_value">3e5c68f356fb4da0a14f91f478cafed8</arg>
            </instance>
            <instance id="expired_token">
                <arg name="const_value">788d9e09c3204521b90e878353bb3361</arg>
            </instance>
            <instance id="disabled_account">
                <arg name="const_value">787b1a8c8c18445d816839035f854a85</arg>
            </instance>
            <instance id="expired_password">
                <arg name="const_value">025616104e0843e597adf6e7bd6e28bc</arg>
            </instance>
            <instance id="password_change_required">
                <arg name="const_value">2e53baa1963f4bf29e39a843c76ad850</arg>
            </instance>

            <instance id="valid_forever">
                <arg name="grant_type">password</arg>
                <arg name="username">oauth.master</arg>
                <arg name="password">!Q@W#E$R%T</arg>
                <arg name="client_id">5e8656ef62914d738a9865ebf1e999b9</arg>
                <arg name="client_secret">be550f6ba7234f928b42ca7961a4d0c9</arg>
                <arg name="x_meta">p:&gt;\u25D5\u203F\u25D5</arg>
            </instance>
            <instance id="client_credentials">
                <arg name="grant_type">client_credentials</arg>
                <arg name="client_id">5e8656ef62914d738a9865ebf1e999b9</arg>
                <arg name="client_secret">be550f6ba7234f928b42ca7961a4d0c9</arg>
                <arg name="x_meta">p:&gt;\u25D5\u203F\u25D5</arg>
            </instance>
            <instance id="glogout">
                <arg name="grant_type">password</arg>
                <arg name="username">oauth.slave</arg>
                <arg name="password">!Q@W#E$R%T</arg>
                <arg name="client_id">5e8656ef62914d738a9865ebf1e999b9</arg>
                <arg name="client_secret">be550f6ba7234f928b42ca7961a4d0c9</arg>
            </instance>
            <instance id="revoked_token">
                <arg name="grant_type">password</arg>
                <arg name="username">oauth.greed</arg>
                <arg name="password">!Q@W#E$R%T</arg>
                <arg name="client_id">5e8656ef62914d738a9865ebf1e999b9</arg>
                <arg name="client_secret">be550f6ba7234f928b42ca7961a4d0c9</arg>
            </instance>
        </cgi>

        <cgi name="multisession">
            <instance id="1">1</instance>
            <instance id="empty"></instance>
        </cgi>

        <cgi name="host">
            <instance id="ru_passp">passportdev.yandex.ru</instance>
            <instance id="ru_oauth">oauth-test.yandex.ru</instance>
            <instance id="ua">yandex.ua</instance>
        </cgi>

        <cgi name="sessionid" func="gensessid">
            <arg name="uid">70500</arg>
            <arg name="type">valid</arg>
            <arg name="authtime">1564760242111</arg>
            <arg name="authip">95.108.132.35</arg>
            <arg name="authid">127</arg>

            <instance id="ru_valid">
                <arg name="host">beta.yandex.ru</arg>
                <arg name="time">-10</arg>
            </instance>
            <instance id="ru_no_valid_user">
                <arg name="uid">123</arg>
                <arg name="host">beta.yandex.ru</arg>
                <arg name="time">-10</arg>
            </instance>
            <instance id="ru_valid_multi">
                <arg name="uid">70498</arg>
                <arg name="host">beta.yandex.ru</arg>
                <arg name="time">-10</arg>
                <arg name="authdelta">-1000</arg>
                <arg name="lang">2</arg>
                <arg name="flags">102</arg>
                <arg name="pwdtime">100</arg>
                <arg name="default_index">2</arg>
                <arg name="uid_1">123123123</arg>
                <arg name="pwdtime_1">7</arg>
                <arg name="flags_1">102</arg>
                <arg name="lang_1">1</arg>
                <arg name="socprofile_1">123</arg>
                <arg name="kv_ext_1">7:8</arg>
                <arg name="uid_2">70500</arg>
                <arg name="pwdtime_2">-1</arg>
                <arg name="flags_2">b02</arg>
                <arg name="lang_2">1</arg>
                <arg name="socprofile_2">1</arg>
            </instance>
            <instance id="ru_int">
                <arg name="host">beta.yandex.ru</arg>
                <arg name="type">validquoted</arg>
                <arg name="time">-10</arg>
                <arg name="authdelta">-100000</arg>
                <arg name="havepwd">1</arg>
            </instance>
            <instance id="ru_expired">
                <arg name="host">beta.yandex.ru</arg>
                <arg name="type">expired</arg>
            </instance>
            <instance id="ru_valid_multi_with_disabled_default">
                <arg name="uid">70500</arg>
                <arg name="host">beta.yandex.ru</arg>
                <arg name="time">-10</arg>
                <arg name="authdelta">-1000</arg>
                <arg name="lang">2</arg>
                <arg name="flags">102</arg>
                <arg name="pwdtime">100</arg>
                <arg name="default_index">1</arg>
                <arg name="uid_1">70503</arg>
                <arg name="pwdtime_1">7</arg>
                <arg name="flags_1">102</arg>
                <arg name="lang_1">1</arg>
                <arg name="socprofile_1">123</arg>
                <arg name="kv_ext_1">7:8</arg>
            </instance>
        </cgi>

        <cgi name="sessguard" func="gensessguard">
            <instance id="passport_ru">
                <arg name="authid">1564760242111:I4RsXw:127</arg>
                <arg name="host">www.passportdev.yandex.ru</arg>
            </instance>
            <instance id="oauth_ru">
                <arg name="authid">1564760242111:I4RsXw:127</arg>
                <arg name="host">oauth-test.yandex.ru</arg>
            </instance>
            <instance id="passport_ru_bad_authid">
                <arg name="authid">1314151617234:I4RsXw:127</arg>
                <arg name="host">www.passportdev.yandex.ru</arg>
            </instance>
        </cgi>

        <cgi name="format">
            <instance id="xml">xml</instance>
            <instance id="json">json</instance>
        </cgi>

        <cgi name="consumer">
            <instance id="dev">passport_dev</instance>
        </cgi>

        <cgi name="client_id">
            <instance id="25">25</instance>
        </cgi>

        <cgi name="getticket">
            <instance id="yes">yes</instance>
        </cgi>

        <cgi name="aliases">
            <instance id="all">all</instance>
        </cgi>

        <cgi name="attributes">
            <instance id="mailhost">38</instance>
        </cgi>

        <cgi name="dbfields">
            <instance id="many">accounts.login.uid,account_info.fio.uid,accounts.ena.uid,subscription.login.2,subscription.login.16</instance>
        </cgi>

        <cgi name="regname">
            <instance id="yes">yes</instance>
        </cgi>

        <cgi name="emails">
            <instance id="getall">getall</instance>
        </cgi>

        <cgi name="getemails">
            <instance id="all">all</instance>
        </cgi>

        <cgi name="email_attributes">
            <instance id="all_num">   6 ,2,,,3,  4,1, 7, 5  ,4  </instance>
        </cgi>

        <cgi name="getphones">
            <instance id="all">all</instance>
        </cgi>

        <cgi name="phone_attributes">
            <instance id="all_num">  ,104, 6 ,2,,,3,  4,1,5  ,4 ,,,,101,107,107,103,,,, 105,102,106,102,108</instance>
        </cgi>

        <cgi name="multi">
            <instance id="yes">yes</instance>
        </cgi>

        <header name="X-Ya-Service-Ticket" func="get_service_ticket">
            <instance id="passport_dev">
                <arg name="dst">242</arg>
            </instance>
        </header>

        <result name="ticket_password">
            <body func="matchxpath">
                <arg name="count(/doc/user_ticket)">1</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70497</arg>
                    <arg name="default_uid">70497</arg>
                    <arg name="scopes">bb:password</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70497</arg>
                    <arg name="default_uid">70497</arg>
                    <arg name="scopes">bb:password</arg>
                </arg>
            </jsonBody>
        </result>
        <result name="ticket_oauth">
            <body func="matchxpath">
                <arg name="count(/doc/user_ticket)">1</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">4001096104</arg>
                    <arg name="default_uid">4001096104</arg>
                    <arg name="scopes">test:limited</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">4001096104</arg>
                    <arg name="default_uid">4001096104</arg>
                    <arg name="scopes">test:limited</arg>
                </arg>
            </jsonBody>
        </result>

        <result name="user_does_not_exist">
            <body func="matchxpath">
                <arg name="/doc/uid"></arg>
                <arg name="/doc/login">dontmatch</arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/users" res_mod="array_size">1</arg>
                <arg name="/users/0/uid" res_mod="key_count">0</arg>
                <arg name="/users/0/login">dontmatch</arg>
            </jsonBody>
        </result>

        <result name="ticket_does_not_exist">
            <body func="matchxpath">
                <arg name="count(/doc/user_ticket)">0</arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/user_ticket">dontmatch</arg>
                <arg name="/users/0/user_ticket">dontmatch</arg>
            </jsonBody>
        </result>

        <result name="id_valid_with_ticket_multi_v3">
            <body func="matchxpath">
                <arg name="/doc/status">VALID</arg>
                <arg name="/doc/status/@id">0</arg>
                <arg name="/doc/error">OK</arg>
                <arg name="/doc/default_uid">70500</arg>
                <arg name="count(/doc/user)">3</arg>
                <arg name="/doc/user[@id='70498']/uid">70498</arg>
                <arg name="/doc/user[@id='70498']/login">BBTst_NoPassword</arg>
                <arg name="/doc/user[@id='70498']/status">VALID</arg>
                <arg name="/doc/user[@id='70498']/dbfield">dontmatch</arg>
                <arg name="/doc/user[@id='123123123']/uid">dontmatch</arg>
                <arg name="/doc/user[@id='123123123']/login">dontmatch</arg>
                <arg name="/doc/user[@id='123123123']/status">INVALID</arg>
                <arg name="/doc/user[@id='123123123']/dbfield">dontmatch</arg>
                <arg name="/doc/user[@id='123123123']/auth">dontmatch</arg>
                <arg name="/doc/user[@id='70500']/uid">70500</arg>
                <arg name="/doc/user[@id='70500']/login">Junit-Test</arg>
                <arg name="/doc/user[@id='70500']/status">VALID</arg>
                <arg name="/doc/user[@id='70500']/dbfield">dontmatch</arg>
                <arg name="/doc/allow_more_users">1</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">2</arg>
                    <arg name="uid">70500</arg>
                    <arg name="uid">70498</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessionid</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/status/value">VALID</arg>
                <arg name="/status/id">0</arg>
                <arg name="/error">OK</arg>
                <arg name="/default_uid">70500</arg>
                <arg name="/users" res_mod="array_size">3</arg>
                <arg name="/users/0/uid/value">70498</arg>
                <arg name="/users/0/login">BBTst_NoPassword</arg>
                <arg name="/users/0/status/value">VALID</arg>
                <arg name="/users/0/dbfield">dontmatch</arg>
                <arg name="/users/1/uid">dontmatch</arg>
                <arg name="/users/1/login">dontmatch</arg>
                <arg name="/users/1/status/value">INVALID</arg>
                <arg name="/users/1/dbfield">dontmatch</arg>
                <arg name="/users/1/auth">dontmatch</arg>
                <arg name="/users/2/uid/value">70500</arg>
                <arg name="/users/2/login">Junit-Test</arg>
                <arg name="/users/2/status/value">VALID</arg>
                <arg name="/users/2/dbfield">dontmatch</arg>
                <arg name="/allow_more_users">true</arg>
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">2</arg>
                    <arg name="uid">70500</arg>
                    <arg name="uid">70498</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessionid</arg>
                </arg>
            </jsonBody>
        </result>
        <result name="id_valid_with_ticket_multi_v3_guard">
            <body func="matchxpath">
                <arg name="/doc/status">VALID</arg>
                <arg name="/doc/status/@id">0</arg>
                <arg name="/doc/error">OK</arg>
                <arg name="/doc/default_uid">70500</arg>
                <arg name="count(/doc/user)">3</arg>
                <arg name="/doc/user[@id='70498']/uid">70498</arg>
                <arg name="/doc/user[@id='70498']/login">BBTst_NoPassword</arg>
                <arg name="/doc/user[@id='70498']/status">VALID</arg>
                <arg name="/doc/user[@id='70498']/dbfield">dontmatch</arg>
                <arg name="/doc/user[@id='123123123']/uid">dontmatch</arg>
                <arg name="/doc/user[@id='123123123']/login">dontmatch</arg>
                <arg name="/doc/user[@id='123123123']/status">INVALID</arg>
                <arg name="/doc/user[@id='123123123']/dbfield">dontmatch</arg>
                <arg name="/doc/user[@id='123123123']/auth">dontmatch</arg>
                <arg name="/doc/user[@id='70500']/uid">70500</arg>
                <arg name="/doc/user[@id='70500']/login">Junit-Test</arg>
                <arg name="/doc/user[@id='70500']/status">VALID</arg>
                <arg name="/doc/user[@id='70500']/dbfield">dontmatch</arg>
                <arg name="/doc/allow_more_users">1</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">2</arg>
                    <arg name="uid">70500</arg>
                    <arg name="uid">70498</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessguard,bb:sessionid</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/status/value">VALID</arg>
                <arg name="/status/id">0</arg>
                <arg name="/error">OK</arg>
                <arg name="/default_uid">70500</arg>
                <arg name="/users" res_mod="array_size">3</arg>
                <arg name="/users/0/uid/value">70498</arg>
                <arg name="/users/0/login">BBTst_NoPassword</arg>
                <arg name="/users/0/status/value">VALID</arg>
                <arg name="/users/0/dbfield">dontmatch</arg>
                <arg name="/users/1/uid">dontmatch</arg>
                <arg name="/users/1/login">dontmatch</arg>
                <arg name="/users/1/status/value">INVALID</arg>
                <arg name="/users/1/dbfield">dontmatch</arg>
                <arg name="/users/1/auth">dontmatch</arg>
                <arg name="/users/2/uid/value">70500</arg>
                <arg name="/users/2/login">Junit-Test</arg>
                <arg name="/users/2/status/value">VALID</arg>
                <arg name="/users/2/dbfield">dontmatch</arg>
                <arg name="/allow_more_users">true</arg>
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">2</arg>
                    <arg name="uid">70500</arg>
                    <arg name="uid">70498</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessguard,bb:sessionid</arg>
                </arg>
            </jsonBody>
        </result>
        <result name="id_valid_with_ticket_multi">
            <body func="matchxpath">
                <arg name="/doc/status">VALID</arg>
                <arg name="/doc/status/@id">0</arg>
                <arg name="/doc/error">OK</arg>
                <arg name="/doc/default_uid">70500</arg>
                <arg name="count(/doc/user)">1</arg>
                <arg name="/doc/user[@id='70500']/uid">70500</arg>
                <arg name="/doc/user[@id='70500']/login">Junit-Test</arg>
                <arg name="/doc/user[@id='70500']/status">VALID</arg>
                <arg name="/doc/user[@id='70500']/dbfield">dontmatch</arg>
                <arg name="/doc/allow_more_users">1</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessionid</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/status/value">VALID</arg>
                <arg name="/status/id">0</arg>
                <arg name="/error">OK</arg>
                <arg name="/default_uid">70500</arg>
                <arg name="/users" res_mod="array_size">1</arg>
                <arg name="/users/0/uid/value">70500</arg>
                <arg name="/users/0/login">Junit-Test</arg>
                <arg name="/users/0/status/value">VALID</arg>
                <arg name="/users/0/dbfield">dontmatch</arg>
                <arg name="/allow_more_users">true</arg>
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessionid</arg>
                </arg>
            </jsonBody>
        </result>
        <result name="id_valid_with_ticket_multi_guard">
            <body func="matchxpath">
                <arg name="/doc/status">VALID</arg>
                <arg name="/doc/status/@id">0</arg>
                <arg name="/doc/error">OK</arg>
                <arg name="/doc/default_uid">70500</arg>
                <arg name="count(/doc/user)">1</arg>
                <arg name="/doc/user[@id='70500']/uid">70500</arg>
                <arg name="/doc/user[@id='70500']/login">Junit-Test</arg>
                <arg name="/doc/user[@id='70500']/status">VALID</arg>
                <arg name="/doc/user[@id='70500']/dbfield">dontmatch</arg>
                <arg name="/doc/allow_more_users">1</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessguard,bb:sessionid</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/status/value">VALID</arg>
                <arg name="/status/id">0</arg>
                <arg name="/error">OK</arg>
                <arg name="/default_uid">70500</arg>
                <arg name="/users" res_mod="array_size">1</arg>
                <arg name="/users/0/uid/value">70500</arg>
                <arg name="/users/0/login">Junit-Test</arg>
                <arg name="/users/0/status/value">VALID</arg>
                <arg name="/users/0/dbfield">dontmatch</arg>
                <arg name="/allow_more_users">true</arg>
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessguard,bb:sessionid</arg>
                </arg>
            </jsonBody>
        </result>
        <result name="id_valid_with_ticket">
            <body func="matchxpath">
                <arg name="/doc/status">VALID</arg>
                <arg name="/doc/status/@id">0</arg>
                <arg name="/doc/error">OK</arg>
                <arg name="/doc/uid">70500</arg>
                <arg name="/doc/login">Junit-Test</arg>
                <arg name="/doc/dbfield">dontmatch</arg>
                <arg name="/doc/special">dontmatch</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessionid</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/status/value">VALID</arg>
                <arg name="/status/id">0</arg>
                <arg name="/error">OK</arg>
                <arg name="/uid/value">70500</arg>
                <arg name="/login">Junit-Test</arg>
                <arg name="/dbfield">dontmatch</arg>
                <arg name="/special">dontmatch</arg>
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessionid</arg>
                </arg>
            </jsonBody>
        </result>
        <result name="id_valid_with_ticket_guard">
            <body func="matchxpath">
                <arg name="/doc/status">VALID</arg>
                <arg name="/doc/status/@id">0</arg>
                <arg name="/doc/error">OK</arg>
                <arg name="/doc/uid">70500</arg>
                <arg name="/doc/login">Junit-Test</arg>
                <arg name="/doc/dbfield">dontmatch</arg>
                <arg name="/doc/special">dontmatch</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessguard,bb:sessionid</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/status/value">VALID</arg>
                <arg name="/status/id">0</arg>
                <arg name="/error">OK</arg>
                <arg name="/uid/value">70500</arg>
                <arg name="/login">Junit-Test</arg>
                <arg name="/dbfield">dontmatch</arg>
                <arg name="/special">dontmatch</arg>
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">70500</arg>
                    <arg name="scopes">bb:sessguard,bb:sessionid</arg>
                </arg>
            </jsonBody>
        </result>
        <result name="id_valid_with_ticket_without_default">
            <body func="matchxpath">
                <arg name="/doc/status">VALID</arg>
                <arg name="/doc/status/@id">0</arg>
                <arg name="/doc/error">OK</arg>
                <arg name="/doc/default_uid">70503</arg>
                <arg name="count(/doc/user)">2</arg>
                <arg name="/doc/user[@id='70500']/uid">70500</arg>
                <arg name="/doc/user[@id='70500']/login">Junit-Test</arg>
                <arg name="/doc/user[@id='70500']/status">VALID</arg>
                <arg name="/doc/user[@id='70500']/dbfield">dontmatch</arg>
                <arg name="/doc/user[@id='70503']/status">DISABLED</arg>
                <arg name="/doc/allow_more_users">1</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">0</arg>
                    <arg name="scopes">bb:sessionid</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/status/value">VALID</arg>
                <arg name="/status/id">0</arg>
                <arg name="/error">OK</arg>
                <arg name="/default_uid">70503</arg>
                <arg name="/users" res_mod="array_size">2</arg>
                <arg name="/users/0/uid/value">70500</arg>
                <arg name="/users/0/login">Junit-Test</arg>
                <arg name="/users/0/status/value">VALID</arg>
                <arg name="/users/0/dbfield">dontmatch</arg>
                <arg name="/users/1/id">70503</arg>
                <arg name="/users/1/status/value">DISABLED</arg>
                <arg name="/allow_more_users">true</arg>
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">0</arg>
                    <arg name="scopes">bb:sessionid</arg>
                </arg>
            </jsonBody>
        </result>
        <result name="id_valid_with_ticket_without_default_guard">
            <body func="matchxpath">
                <arg name="/doc/status">VALID</arg>
                <arg name="/doc/status/@id">0</arg>
                <arg name="/doc/error">OK</arg>
                <arg name="/doc/default_uid">70503</arg>
                <arg name="count(/doc/user)">2</arg>
                <arg name="/doc/user[@id='70500']/uid">70500</arg>
                <arg name="/doc/user[@id='70500']/login">Junit-Test</arg>
                <arg name="/doc/user[@id='70500']/status">VALID</arg>
                <arg name="/doc/user[@id='70500']/dbfield">dontmatch</arg>
                <arg name="/doc/user[@id='70503']/status">DISABLED</arg>
                <arg name="/doc/allow_more_users">1</arg>
                <arg name="/doc/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">0</arg>
                    <arg name="scopes">bb:sessguard,bb:sessionid</arg>
                </arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/status/value">VALID</arg>
                <arg name="/status/id">0</arg>
                <arg name="/error">OK</arg>
                <arg name="/default_uid">70503</arg>
                <arg name="/users" res_mod="array_size">2</arg>
                <arg name="/users/0/uid/value">70500</arg>
                <arg name="/users/0/login">Junit-Test</arg>
                <arg name="/users/0/status/value">VALID</arg>
                <arg name="/users/0/dbfield">dontmatch</arg>
                <arg name="/users/1/id">70503</arg>
                <arg name="/users/1/status/value">DISABLED</arg>
                <arg name="/allow_more_users">true</arg>
                <arg name="/user_ticket" func="check_user_ticket">
                    <arg name="uid" res_mod="key_count">1</arg>
                    <arg name="uid">70500</arg>
                    <arg name="default_uid">0</arg>
                    <arg name="scopes">bb:sessguard,bb:sessionid</arg>
                </arg>
            </jsonBody>
        </result>

        <result name="header_error">
            <body func="matchxpath">
                <arg name="/doc/exception[@id='2']">INVALID_PARAMS</arg>
                <arg name="/doc/error" comp="starts_with">BlackBox error: param 'get_user_ticket' is allowed only with header 'X-Ya-Service-Ticket'</arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/exception/value">INVALID_PARAMS</arg>
                <arg name="/exception/id">2</arg>
                <arg name="/error" comp="starts_with">BlackBox error: param 'get_user_ticket' is allowed only with header 'X-Ya-Service-Ticket'</arg>
            </jsonBody>
        </result>

        <result name="user_ticket__both">
            <body func="matchxpath">
                <arg name="/doc/exception[@id='2']">INVALID_PARAMS</arg>
                <arg name="/doc/error" comp="starts_with">BlackBox error: Params 'multi' and 'uid' conflict with each other</arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/exception/value">INVALID_PARAMS</arg>
                <arg name="/exception/id">2</arg>
                <arg name="/error" comp="starts_with">BlackBox error: Params 'multi' and 'uid' conflict with each other</arg>
            </jsonBody>
        </result>
        <result name="user_ticket__not_found">
            <body func="matchxpath">
                <arg name="/doc/exception[@id='2']">INVALID_PARAMS</arg>
                <arg name="/doc/error" comp="starts_with" substitute="1">BlackBox error: 'uid' is not found in UserTicket: '\~`cgi:uid`'; UserTicket:</arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/exception/value">INVALID_PARAMS</arg>
                <arg name="/exception/id">2</arg>
                <arg name="/error" comp="starts_with" substitute="1">BlackBox error: 'uid' is not found in UserTicket: '\~`cgi:uid`'; UserTicket:</arg>
            </jsonBody>
        </result>

        <result name="70500_full">
            <body func="matchxpath">
                <arg name="/doc/uid[@hosted='0']">70500</arg>
                <arg name="/doc/login">Junit-Test</arg>
                <arg name="count(/doc/dbfield)">5</arg>
                <arg name="/doc/dbfield[@id='accounts.login.uid']">junit-test</arg>
                <arg name="/doc/dbfield[@id='account_info.fio.uid']">@ &lt;html&gt; üòÇ&amp;–í–∞—Å—è</arg>
                <arg name="/doc/dbfield[@id='accounts.ena.uid']">1</arg>
                <arg name="/doc/dbfield[@id='subscription.login.2']">junit-test</arg>
                <arg name="/doc/dbfield[@id='subscription.login.16']">junit-test</arg>
                <arg name="count(/doc/attributes)">1</arg>
                <arg name="/doc/attributes/attribute[@type='38']">80</arg>
                <arg name="count(/doc/address-list/address)">8</arg>
                <arg name="/doc/address-list/address[ 1][@validated='1'][@default='1'][@rpop='0'][@silent='0'][@unsafe='0'][@native='1'][@born-date='2011-01-14 12:59:58']">Junit-Test@yandex.com</arg>
                <arg name="/doc/address-list/address[ 2][@validated='1'][@default='0'][@rpop='0'][@silent='0'][@unsafe='0'][@native='1'][@born-date='2011-01-14 12:59:58']">Junit-Test@yandex.com.tr</arg>
                <arg name="/doc/address-list/address[ 3][@validated='1'][@default='0'][@rpop='0'][@silent='0'][@unsafe='0'][@native='1'][@born-date='2011-01-14 12:59:58']">79161603189@yandex.com</arg>
                <arg name="/doc/address-list/address[ 4][@validated='1'][@default='0'][@rpop='0'][@silent='0'][@unsafe='0'][@native='1'][@born-date='2011-01-14 12:59:58']">79161603189@yandex.com.tr</arg>
                <arg name="/doc/address-list/address[ 5][@validated='0'][@default='0'][@rpop='0'][@silent='0'][@unsafe='1'][@native='0'][@born-date='2016-04-14 12:39:49']">karganov@yandex-team.ru</arg>
                <arg name="/doc/address-list/address[ 6][@validated='0'][@default='0'][@rpop='0'][@silent='0'][@unsafe='0'][@native='0'][@born-date='2016-06-14 12:54:51']">karganov@yandex-team.ru</arg>
                <arg name="/doc/address-list/address[ 7][@validated='1'][@default='0'][@rpop='1'][@silent='0'][@unsafe='1'][@native='0'][@born-date='2016-07-07 17:27:41']">test@addrpop.ru</arg>
                <arg name="/doc/address-list/address[ 8][@validated='0'][@default='0'][@rpop='0'][@silent='0'][@unsafe='1'][@native='0'][@born-date='2011-01-14 12:59:58']">lensvol 123@yandex-team.ru</arg>
                <arg name="count(/doc/emails/email)">4</arg>
                <arg name="count(/doc/emails/email[@id='215953851']/attribute)">3</arg>
                <arg name="/doc/emails/email[@id='215953851']/attribute[@type='1']">karganov@yandex-team.ru</arg>
                <arg name="/doc/emails/email[@id='215953851']/attribute[@type='2']">1460626789</arg>
                <arg name="/doc/emails/email[@id='215953851']/attribute[@type='6']">1</arg>
                <arg name="count(/doc/emails/email[@id='215978385']/attribute)">2</arg>
                <arg name="/doc/emails/email[@id='215978385']/attribute[@type='1']">karganov@yandex-team.ru</arg>
                <arg name="/doc/emails/email[@id='215978385']/attribute[@type='2']">1465898091</arg>
                <arg name="count(/doc/emails/email[@id='215996723']/attribute)">6</arg>
                <arg name="/doc/emails/email[@id='215996723']/attribute[@type='1']">test@addrpop.ru</arg>
                <arg name="/doc/emails/email[@id='215996723']/attribute[@type='2']">1467901661</arg>
                <arg name="/doc/emails/email[@id='215996723']/attribute[@type='3']">1467901661</arg>
                <arg name="/doc/emails/email[@id='215996723']/attribute[@type='4']">1467901661</arg>
                <arg name="/doc/emails/email[@id='215996723']/attribute[@type='5']">1</arg>
                <arg name="/doc/emails/email[@id='215996723']/attribute[@type='6']">1</arg>
                <arg name="count(/doc/emails/email[@id='5425']/attribute)">2</arg>
                <arg name="/doc/emails/email[@id='5425']/attribute[@type='1']">lensvol 123@yandex-team.ru</arg>
                <arg name="/doc/emails/email[@id='5425']/attribute[@type='6']">1</arg>
                <arg name="count(/doc/phones/phone)">0</arg>
                <arg name="count(/doc/aliases/alias)">3</arg>
                <arg name="/doc/aliases/alias[@type='1']">junit-test</arg>
                <arg name="/doc/aliases/alias[@type='11']">79161603189</arg>
                <arg name="/doc/aliases/alias[@type='12']">junit-test@yandex.com.tr</arg>
                <arg name="/doc/display_name/name">üòÇ –Ø '–¢–µ—Å—Ç–æ–≤—ã–π" / &amp;&lt;—Ç–µ—Å—Ç–µ—Ä&gt;</arg>
                <arg name="/doc/display_name/avatar/empty">1</arg>
                <arg name="/doc/display_name/avatar/default">0/0-0</arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/users" res_mod="array_size">1</arg>
                <arg name="/users/0/uid/value">70500</arg>
                <arg name="/users/0/uid/hosted">false</arg>
                <arg name="/users/0/login">Junit-Test</arg>
                <arg name="/users/0/dbfields" res_mod="key_count">5</arg>
                <arg name="/users/0/dbfields/accounts.login.uid">junit-test</arg>
                <arg name="/users/0/dbfields/account_info.fio.uid">@ &lt;html&gt; üòÇ&amp;–í–∞—Å—è</arg>
                <arg name="/users/0/dbfields/accounts.ena.uid">1</arg>
                <arg name="/users/0/dbfields/subscription.login.2">junit-test</arg>
                <arg name="/users/0/dbfields/subscription.login.16">junit-test</arg>
                <arg name="/users/0/attributes" res_mod="key_count">1</arg>
                <arg name="/users/0/attributes/38">80</arg>
                <arg name="/users/0/address-list" res_mod="array_size">8</arg>
                <arg name="/users/0/emails" res_mod="array_size">4</arg>
                <arg name="/users/0/emails/0/id">215953851</arg>
                <arg name="/users/0/emails/0/attributes" res_mod="key_count">3</arg>
                <arg name="/users/0/emails/0/attributes/1">karganov@yandex-team.ru</arg>
                <arg name="/users/0/emails/0/attributes/2">1460626789</arg>
                <arg name="/users/0/emails/0/attributes/6">1</arg>
                <arg name="/users/0/emails/1/id">215978385</arg>
                <arg name="/users/0/emails/1/attributes" res_mod="key_count">2</arg>
                <arg name="/users/0/emails/1/attributes/1">karganov@yandex-team.ru</arg>
                <arg name="/users/0/emails/1/attributes/2">1465898091</arg>
                <arg name="/users/0/emails/2/id">215996723</arg>
                <arg name="/users/0/emails/2/attributes" res_mod="key_count">6</arg>
                <arg name="/users/0/emails/2/attributes/1">test@addrpop.ru</arg>
                <arg name="/users/0/emails/2/attributes/2">1467901661</arg>
                <arg name="/users/0/emails/2/attributes/3">1467901661</arg>
                <arg name="/users/0/emails/2/attributes/4">1467901661</arg>
                <arg name="/users/0/emails/2/attributes/5">1</arg>
                <arg name="/users/0/emails/2/attributes/6">1</arg>
                <arg name="/users/0/emails/3/id">5425</arg>
                <arg name="/users/0/emails/3/attributes" res_mod="key_count">2</arg>
                <arg name="/users/0/emails/3/attributes/1">lensvol 123@yandex-team.ru</arg>
                <arg name="/users/0/emails/3/attributes/6">1</arg>
                <arg name="/users/0/phones" res_mod="array_size">0</arg>
                <arg name="/users/0/aliases" res_mod="key_count">3</arg>
                <arg name="/users/0/aliases/1">junit-test</arg>
                <arg name="/users/0/aliases/11">79161603189</arg>
                <arg name="/users/0/aliases/12">junit-test@yandex.com.tr</arg>
                <arg name="/users/0/display_name/avatar/empty">true</arg>
                <arg name="/users/0/display_name/avatar/default">0/0-0</arg>
                <arg name="/users/0/display_name/name">üòÇ –Ø '–¢–µ—Å—Ç–æ–≤—ã–π" / &amp;&lt;—Ç–µ—Å—Ç–µ—Ä&gt;</arg>
            </jsonBody>
        </result>
        <result name="both_full">
            <body func="matchxpath">
                <arg name="count(/doc/user)">2</arg>
                <arg name="/doc/user[@id='70494']/uid"></arg>
                <arg name="/doc/user[@id='70500']/uid">70500</arg>
            </body>
            <jsonBody func="matchjsonpoint">
                <arg name="/users" res_mod="array_size">2</arg>
                <arg name="/users/0/uid/value">dontmatch</arg>
                <arg name="/users/1/uid/value">70500</arg>
            </jsonBody>
        </result>

    </variables>

    <node>
        <description>BlackBox user ticket test</description>
        <url>http://passdev2.yandex.ru</url>
        <pre-test>
        set -e
        if [ -z "$RECIPE_KOLMOGOR_PORT" ]; then sudo /etc/init.d/kolmogor restart; fi

        T=$((`date +%s`+60));
        if [ -z $RECIPE_MYSQL_DIR ]; then MYSQL_HOST="cnt-dbm-test.passport.yandex.net"; else MYSQL_HOST="127.0.0.1"; fi
        MYSQL_CREDS="-h $MYSQL_HOST -P ${RECIPE_MYSQL_PORT:-3306} --protocol tcp -u $BB_PASSPORTDB_USER_RW ${BB_PASSPORTDB_PASSWD_RW:+-p$BB_PASSPORTDB_PASSWD_RW}"

        ${RECIPE_MYSQL_DIR}mysql $MYSQL_CREDS -Dpassportdbshard1 -e "UPDATE attributes SET value='${T}' WHERE uid=4001096761 AND type=4"
        ${RECIPE_MYSQL_DIR}mysql $MYSQL_CREDS -Dpassportdbshard1 -e "UPDATE attributes SET value='${T}' WHERE uid=4001126940 AND type=134"
        </pre-test>

        <case lastid="header">
            <description>Checking header</description>
            <path>blackbox</path>
            <cgi name="method">oauth;login;sessionid</cgi>
            <cgi name="userip">good</cgi>
            <cgi name="login">good</cgi>
            <cgi name="get_user_ticket">*</cgi>
            <cgi name="format">*</cgi>

            <check>
                <result>header_error</result>
            </check>
        </case>

        <case lastid="userinfo">
            <description>Checking method=userinfo</description>
            <path>blackbox</path>
            <cgi name="method">userinfo</cgi>
            <cgi name="userip">good</cgi>
            <cgi name="login">good;bad;disabled</cgi>
            <cgi name="password">good;bad0</cgi>
            <cgi name="get_user_ticket" withnull="1">*</cgi>
            <cgi name="format">*</cgi>
            <header name="X-Ya-Service-Ticket">*</header>

            <check>
                <result>ticket_does_not_exist</result>
            </check>
        </case>

        <case lastid="login">
            <description>Checking method=login</description>
            <path>blackbox</path>
            <cgi name="method">login</cgi>
            <cgi name="userip">good</cgi>
            <cgi name="login">good;bad;disabled</cgi>
            <cgi name="password">good;bad0</cgi>
            <cgi name="get_user_ticket" withnull="1">*</cgi>
            <cgi name="format">*</cgi>
            <header name="X-Ya-Service-Ticket">*</header>

            <check>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="login">good</cgi>
                <cgi name="password">good</cgi>
                <result>ticket_password</result>
            </check>

            <check>
                <result>ticket_does_not_exist</result>
            </check>
        </case>

        <case lastid="oauth">
            <description>Check method=oauth</description>
            <path>blackbox</path>
            <cgi name="method">oauth</cgi>
            <cgi name="userip">good</cgi>
            <cgi name="oauth_token">*</cgi>
            <cgi name="get_user_ticket" withnull="1">*</cgi>
            <cgi name="format">*</cgi>
            <header name="X-Ya-Service-Ticket">*</header>

            <check>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="oauth_token">valid_forever</cgi>
                <result>ticket_oauth</result>
            </check>
            <check>
                <result>ticket_does_not_exist</result>
            </check>
        </case>

        <case lastid="sessionid">
            <description>Testing method=sessionid</description>
            <path>blackbox</path>
            <cgi name="method">sessionid</cgi>
            <cgi name="userip">internal_user;internal_user_v6</cgi>
            <cgi name="host">*</cgi>
            <cgi name="sessionid">*</cgi>
            <cgi name="sessguard" withnull="1">*</cgi>
            <cgi name="multisession" withnull="1">*</cgi>
            <cgi name="get_user_ticket" withnull="1">*</cgi>
            <cgi name="format">*</cgi>
            <header name="X-Ya-Service-Ticket">*</header>

            <check>
                <cgi name="host">ru_passp</cgi>
                <cgi name="sessguard" withnull="1">oauth_ru;passport_ru_bad_authid</cgi>
                <result>ticket_does_not_exist</result>
            </check>

            <check>
                <cgi name="sessionid">ru_valid_multi</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_passp</cgi>
                <cgi name="sessguard">passport_ru</cgi>
                <result>id_valid_with_ticket_multi_v3_guard</result>
            </check>
            <check>
                <cgi name="sessionid">ru_valid_multi</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_oauth</cgi>
                <cgi name="sessguard">oauth_ru</cgi>
                <result>id_valid_with_ticket_multi_v3_guard</result>
            </check>
            <check>
                <cgi name="sessionid">ru_valid_multi</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_passp;ru_oauth</cgi>
                <result>id_valid_with_ticket_multi_v3</result>
            </check>

            <check>
                <cgi name="sessionid">ru_valid; ru_int</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_passp</cgi>
                <cgi name="sessguard">passport_ru</cgi>
                <result>id_valid_with_ticket_multi_guard</result>
            </check>
            <check>
                <cgi name="sessionid">ru_valid; ru_int</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_oauth</cgi>
                <cgi name="sessguard">oauth_ru</cgi>
                <result>id_valid_with_ticket_multi_guard</result>
            </check>
            <check>
                <cgi name="sessionid">ru_valid; ru_int</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_passp;ru_oauth</cgi>
                <result>id_valid_with_ticket_multi</result>
            </check>

            <check>
                <cgi name="sessionid">ru_valid; ru_int; ru_valid_multi</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="host">ru_passp</cgi>
                <cgi name="sessguard">passport_ru</cgi>
                <result>id_valid_with_ticket_guard</result>
            </check>
            <check>
                <cgi name="sessionid">ru_valid; ru_int; ru_valid_multi</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="host">ru_oauth</cgi>
                <cgi name="sessguard">oauth_ru</cgi>
                <result>id_valid_with_ticket_guard</result>
            </check>
            <check>
                <cgi name="sessionid">ru_valid; ru_int; ru_valid_multi</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="host">ru_passp;ru_oauth</cgi>
                <result>id_valid_with_ticket</result>
            </check>

            <check>
                <cgi name="sessionid">ru_valid_multi_with_disabled_default</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_passp</cgi>
                <cgi name="sessguard">passport_ru</cgi>
                <result>id_valid_with_ticket_without_default_guard</result>
            </check>
            <check>
                <cgi name="sessionid">ru_valid_multi_with_disabled_default</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_oauth</cgi>
                <cgi name="sessguard">oauth_ru</cgi>
                <result>id_valid_with_ticket_without_default_guard</result>
            </check>
            <check>
                <cgi name="sessionid">ru_valid_multi_with_disabled_default</cgi>
                <cgi name="get_user_ticket">yes</cgi>
                <cgi name="multisession">*</cgi>
                <cgi name="host">ru_passp;ru_oauth</cgi>
                <result>id_valid_with_ticket_without_default</result>
            </check>

            <check>
                <result>ticket_does_not_exist</result>
            </check>
        </case>

        <case lastid="user_ticket">
            <description>method=user_ticket</description>
            <path>blackbox</path>
            <cgi name="method">user_ticket</cgi>
            <cgi name="user_ticket">*</cgi>
            <cgi name="attributes">mailhost</cgi>
            <cgi name="dbfields">many</cgi>
            <cgi name="emails">getall</cgi>
            <cgi name="getemails">all</cgi>
            <cgi name="email_attributes">all_num</cgi>
            <cgi name="getphones">all</cgi>
            <cgi name="phone_attributes">all_num</cgi>
            <cgi name="aliases">all</cgi>
            <cgi name="regname">yes</cgi>
            <cgi name="format">*</cgi>
            <header name="X-Ya-Service-Ticket">*</header>

            <cgi name="uid" withnull="1">70500; no_alias_user</cgi>
            <cgi name="multi" withnull="1">yes</cgi>

            <check>
                <cgi name="uid">70500;no_alias_user</cgi>
                <cgi name="multi">yes</cgi>
                <result>user_ticket__both</result>
            </check>

            <check>
                <cgi name="uid">no_alias_user</cgi>
                <cgi name="user_ticket">70500</cgi>
                <result>user_ticket__not_found</result>
            </check>
            <check>
                <cgi name="user_ticket">70500</cgi>
                <result>70500_full</result>
            </check>

            <check>
                <cgi name="uid">70500</cgi>
                <cgi name="user_ticket">no_alias_user__70500</cgi>
                <result>70500_full</result>
            </check>
            <check>
                <cgi name="uid">no_alias_user</cgi>
                <cgi name="user_ticket">no_alias_user__70500</cgi>
                <result>user_does_not_exist</result>
            </check>
            <check>
                <cgi name="multi">yes</cgi>
                <cgi name="user_ticket">no_alias_user__70500</cgi>
                <result>both_full</result>
            </check>
            <check>
                <cgi name="user_ticket">no_alias_user__70500</cgi>
                <result>user_does_not_exist</result>
            </check>
        </case>

    </node>

</test>

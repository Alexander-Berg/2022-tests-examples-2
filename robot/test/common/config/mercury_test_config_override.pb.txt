# ExampleConfig

TablesRoot: "//home/jupiter/mercury"
CallistoTablesRoot: "//home/jupiter/mercury"  # For ShufflerQueue
MrServer: "{{yt_proxy}}"
PreCreateTables: false
MountTables: true
LogConfigPath: "mercury.debug-logging.yson"
DumpCountersAtExit: true

WorkerConfig {
    ThreadCount: 2
    CalculatorThreadCount: 1
    MaxFetchers: 1
    FetcherFibersPerTablet: 1
    MaxSinks: 1

    CheckerPeriod: 10


    DieWhenNoHeartbeatDetected: false
    DieWhenNoFetchersAlive: false

    DeliveryConfig {
        MrServer: "{{yt_proxy}}"
        MrPrefix: "//home/jupiter"
    }

    SamovarDataSourceConfig {
        ZoneConfig: "zone_config.pb.txt"
        InstanceConfigPath: "patched_test_instance_config.pb.txt"
        UseInhostFactors: true
        Disable: false
    }

    DocsOnSearchDataSourceConfig {
        Disable: false
    }

    DocsOnSearchDataSinkConfig {
        Disable: true
        Tier: "MercuryTier"
    }

    HtmlDataSinkConfig {
        Disable: false
        Tier: "MercuryTier"
    }

    PrimaryLBDocsHtmlDataSinkConfig {
        LogBrokerConfig {
            Disable: true
        }
    }

    DupsBySimhashDataSourceConfig {
        DuplicatesTablePath: "//home/jupiter/mercury/DupsBySimhashSample"
        Disable: false
    }

    JupiterUrlsDataSourceConfig {
        Prefix: "//home/jupiter/mercury"
        JupiterUrlsTableSuffix: "JupiterUrlsSample"
        Disable: false
    }

    RedirectMordasDataSourceConfig {
        Prefix: "//home/jupiter/mercury"
        TableSuffix: "RedirectMordasSample"
        Disable: false
    }

    JupiterDataSourceConfig {
        Disable: false
        Prefix: "//home/jupiter/mercury"
        HerfTableSuffix: "JupiterHerfSample"
    }

    MirrorsDataSourceConfig {
        Disable: false
        Prefix: "//home/jupiter/mercury"
        MirrorsTableSuffix: "HostToMirrorsSample"
    }

    CanonizedFactorsDataSourceConfig {
        Disable: false
        Prefix: "//home/jupiter/mercury"
        FactorsTableSuffix: "CanonizedFactorsSample"
    }

    CanonizedLinkFactorsDataSourceConfig {
        BucketCount: 1
        BucketConfig {
            Disable: false
            Prefix: "//home/jupiter/mercury"
            FactorsTableSuffix: "CanonizedLinkFactorsSample.{bucket}"
        }
    }

    FastAnnotationDataSourceConfig {
        Prefix: "//home/jupiter/mercury"
        FastAnnotationTableSuffix: "FastAnnotationSample"
        MetaSuffix: ""
        SamovarConsumersMetaTableSuffix: ""
        Disable: false
    }

    RapidClicksSpylogDataSourceConfig {
        HedgingClientConfig: EHCC_MAIN_ONLY
    }

    RapidClicksSearchDataSourceConfig {
        HedgingClientConfig: EHCC_MAIN_ONLY
    }

    YtFactorsDumpDataSinkConfig {
        Disable: false
    }

    SelectionRankCalculatorConfig {
        TierSchemes: "TierScheme.pb.txt"
        UploadRules: "UploadRules.pb.txt"
        HostCfg: "HostCfg.pb.txt"
        CollectSRLearningPool: true
    }

    LumpsFillerConfig {
        Disable: false
    }

    LogBrokerUrlDataSinkConfig {
        Disable: true
    }

    SinkThrottlerConfig {
        MercuryTiersThrottler {
            ThrottlerConfig {
                MinRateLimit: 100.0
                MaxRateLimit: 150.0
                RateChangeStep: 5
            }
        }
    }

    RTHubLBDataSourceConfig {
        Disable: true
    }
    ShufflerQueueDataSourceConfig {
        Disable: false
        SampleReadMode: true
        ReadRequestTimeout: 10
    }
    InputQueueReadConfig {
        BatchSize: 50
    }
}

SamplerConfig {
    UseSample: true
    SampleTablesRoot: "//home/jupiter/mercury"
}

RTDupsConfig {
    ThreadCount: 2
    ProcessorFibersTotal: 1

    CheckerPeriod: 10

    DeliveryConfig {
        MrServer: "{{yt_proxy}}"
        MrPrefix: "//home/jupiter"
    }

    JupiterDataSourceConfig {
        Disable: false
        Prefix: "//home/jupiter/mercury"
        HerfTableSuffix: "JupiterHerfSample"
    }

    FastAnnotationDataSourceConfig {
        Prefix: "//home/jupiter/mercury"
        FastAnnotationTableSuffix: "FastAnnotationSample"
        MetaSuffix: ""
        SamovarConsumersMetaTableSuffix: ""
        Disable: false
    }

    ShufflerQueueDataSourceConfig {
        Disable: false
        SampleReadMode: true
        ReadRequestTimeout: 10
    }
    InputQueueReadConfig {
        BatchSize: 50
    }
}
